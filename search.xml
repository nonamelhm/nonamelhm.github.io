<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ES6模块化</title>
    <url>/2021/08/08/ES6%E6%A8%A1%E5%9D%97%E5%8C%96%E8%A7%84%E8%8C%83/</url>
    <content><![CDATA[<h1 id="es6模块化规范"><a class="anchor" href="#es6模块化规范">#</a> ES6 模块化规范</h1>
<p>** 含义：** 浏览器和服务器端通用的模块化开发规范。他的出现极大的降低了前端开发者的模块化学习成本，开发者不需额外学习 AMD CMD 或者 CommonJS 等模块化规范。</p>
<p><strong>ES6 模块化规范中定义：</strong></p>
<ul>
<li>
<p>每个 js 文件都是独立的模块</p>
</li>
<li>
<p>导入其它模块成员都是使用 import 关键字</p>
</li>
<li>
<p>向外共享模块化成员都是 export 关键字</p>
</li>
</ul>
<h1 id="nodejs中体验es6模块化"><a class="anchor" href="#nodejs中体验es6模块化">#</a> node.js 中体验 ES6 模块化</h1>
<p>mode.js 中默认仅支持 Common.js 模块化规范，若想基于 node.js 体验 ES6 的模块化语法，可以按照如下步骤进行：</p>
<ul>
<li>安装 v14.15.1 或更高版本的 node.js    终端 node -v 查看版本</li>
<li>在 package.json 的根节点中添加 “type”:“module” 节点</li>
</ul>
<h1 id="es6模块化基本语法"><a class="anchor" href="#es6模块化基本语法">#</a> ES6 模块化基本语法</h1>
<h2 id="默认导出"><a class="anchor" href="#默认导出">#</a> 默认导出</h2>
<p><code>export default 共享成员</code></p>
<p>test.js</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> n1<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"show方法"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    n1<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    show</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>注意事项：只允许一次默认导出 export default</strong></p>
<h2 id="默认导入"><a class="anchor" href="#默认导入">#</a> 默认导入</h2>
<p>import   接收名称  from  “./test.js”</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> m <span class="token keyword">from</span> <span class="token string">"./test.js"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//n1,show</span></pre></td></tr></table></figure><p><strong>注意事项：接收名称任意，只要合法就行</strong> （比如说数字开头就不合法）</p>
<h2 id="按需导出"><a class="anchor" href="#按需导出">#</a> 按需导出</h2>
<p>test2.js</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">let</span> n1<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>注意事项：按需导出 export 可以多次</strong></p>
<h2 id="按需导入"><a class="anchor" href="#按需导入">#</a> 按需导入</h2>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>n1<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./test2.js"</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>n1 <span class="token keyword">as</span> name1<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./test2.js"</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span>  n<span class="token punctuation">,</span><span class="token punctuation">&#123;</span>n1 <span class="token keyword">as</span> name1<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./test2.js"</span>  </pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">//n 为默认导出成员 export default   &#123;&#125; 为按需导入成员</span></pre></td></tr></table></figure><p>注意事项：</p>
<ul>
<li>按需导入接收名称比如与按需导出名称一致</li>
<li>导入名称可以用 <code>as</code>  重命名   import</li>
<li>可以与默认导出 <code>export default</code>  一起使用</li>
</ul>
<h2 id="直接导入"><a class="anchor" href="#直接导入">#</a> 直接导入</h2>
<p>定义一个 test3.js   <code>直接写代码</code>  不需要  <code>export</code>   <code>export default</code></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"直接导入运行"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>直接导入</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token string">"./test3.js"</span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>模块化</tag>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title>EventLoop</title>
    <url>/2021/08/20/EventLoop/</url>
    <content><![CDATA[<h1 id="背景知识"><a class="anchor" href="#背景知识">#</a> 背景知识</h1>
<p>javascript 是一个单线程语言。也就是说，同一时间只能做一件事情。</p>
<p><img data-src="../images/EventLoop/1650276762491.png" alt="1650276762491" /></p>
<p><strong>如果前一个任务非常耗时，则沟洫的任务不得不一直等待，从而导致程序假死问题。</strong></p>
<h1 id="同步任务和异步任务"><a class="anchor" href="#同步任务和异步任务">#</a> 同步任务和异步任务</h1>
<p>为了防止耗时任务导致程序假死的问题，Javascript 把 <code>待执行的任务</code> 分成了两类。一类是 <code>同步任务</code> ，一类是 <code>异步任务</code> 。</p>
<ul>
<li>同步任务
<ul>
<li>又叫做 <code>非耗时任务</code> ，指的是 <code>主线程上</code> 排队执行的那些任务。</li>
<li>只有前一个任务执行完毕，才能执行下一个任务。</li>
</ul>
</li>
<li>异步任务
<ul>
<li>又叫做耗时任务，异步任务由 JavaScript <code>委托</code> 给 <code>宿主环境</code> 进行执行</li>
<li>当异步任务执行完成时，会通知 <code>javascript主线程</code> 执行异步任务的 <code>回调函数</code> 。</li>
</ul>
</li>
</ul>
<p><img data-src="../images/EventLoop/1650277683390.png" alt="1650277683390" /></p>
<p>执行过程</p>
<ul>
<li>同步任务由 JavaScript 执行</li>
<li>异步任务委托给宿主环境执行</li>
<li>已完成的异步任务对应的回调函数，会被加入到任务队列中等待执行</li>
<li>Javascript 主线程的执行栈被清空后，会读取任务队列的回调函数，次序执行</li>
<li>javascript 主线程不断重复上面第 4 步骤</li>
</ul>
<h1 id="eventloop"><a class="anchor" href="#eventloop">#</a> EventLoop</h1>
<p>JavaScript <code>主线程</code> 从 <code>“任务队列“</code> 中读物异步任务的回调函数，放到执行栈中依次执行。这个过程是 <code>不断循环</code> 的，所以整个这种运行的机制又称为 <code>EventLoop(事件循环)</code></p>
<h1 id="测试1"><a class="anchor" href="#测试1">#</a> 测试 1</h1>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> thenFs <span class="token keyword">from</span> <span class="token string">"then-fs"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"./1.txt"</span><span class="token punctuation">,</span><span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"C"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"D"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>正确答案：ADCB</p>
<ul>
<li>
<p>A 和 D 属于同步任务，依次执行	 <code>A----- D</code></p>
</li>
<li>
<p>先执行 B 和 C 属于异步任务，放到宿主环境中执行，又因为 setTimeout 事件为 0, 会先放到任务队列中，所以先输出 C，再是 B      <code>  C------B</code></p>
</li>
</ul>
]]></content>
      <categories>
        <category>EventLoop</category>
      </categories>
      <tags>
        <tag>同步任务</tag>
        <tag>异步任务</tag>
      </tags>
  </entry>
  <entry>
    <title>HTML5新增标签</title>
    <url>/2020/09/22/HTML5%E6%96%B0%E5%A2%9E%E6%A0%87%E7%AD%BE/</url>
    <content><![CDATA[<h1 id="图形相关"><a class="anchor" href="#图形相关">#</a> 图形相关</h1>
<ul>
<li>canvas: 相当于一块画布，可以让开发者利用相关 API 实现自由画图</li>
<li>picture: 定义一组图片用于不同分辨率下显示</li>
<li>svg: 能够绘制矢量图</li>
</ul>
<h3 id="canvas"><a class="anchor" href="#canvas">#</a> canvas</h3>
<p>之前一篇<span class="exturl" data-url="aHR0cHM6Ly96amd5Yi5naXRodWIuaW8vY2FudmFzJUU1JTlGJUJBJUU3JUExJTgwLmh0bWw=">博客</span>就介绍过 Canvas 的用法与实例</p>
<h3 id="picture"><a class="anchor" href="#picture">#</a> picture</h3>
<p>在下面的代码中根据屏幕的分辨率来显示不同的图片，同时只会加载该分辨率下的图片，这很好的解决了 img 在 display 为 none 的情况下还是会发出请求的问题</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>picture</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(min-width: 650px)<span class="token punctuation">"</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img_pink_flowers.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(min-width: 465px)<span class="token punctuation">"</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img_white_flower.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img_orange_flowers.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Flowers<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span>auto<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>picture</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p><strong>source 的属性</strong></p>
<ul>
<li>srcset (src): 定义图片的资源路径 (定义 video 和 audio)</li>
<li>media: 定义分辨率大小</li>
<li>sizes: 定义需要加载多大像素的图片，具体用法可以看<span class="exturl" data-url="aHR0cHM6Ly96amd5Yi5naXRodWIuaW8vdmlld3MvaHRtbC8yMDIwL0hUTUw1X3RhZy5odG1sJUU2JThCJTkzJUU1JUIxJTk1">拓展</span>部分</li>
<li>type: 定义资源格式</li>
</ul>
<h3 id="svg"><a class="anchor" href="#svg">#</a> svg</h3>
<p>svg 有专门的语法，需要用到时再学习，这里先展示其一个例子</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50<span class="token punctuation">"</span></span> <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50<span class="token punctuation">"</span></span> <span class="token attr-name">r</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>40<span class="token punctuation">"</span></span> <span class="token attr-name">stroke</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>green<span class="token punctuation">"</span></span> <span class="token attr-name">stroke-width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4<span class="token punctuation">"</span></span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>yellow<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h1 id="多媒体元素"><a class="anchor" href="#多媒体元素">#</a> 多媒体元素</h1>
<ul>
<li>audio: 音频</li>
<li>video: 视频</li>
<li>source: 定义多种格式的音频、视频、图片等资源</li>
<li>track: 用于音频或视频的文本文件引用</li>
<li>embed: 嵌入外部应用或 flash</li>
</ul>
<h3 id="audio-video"><a class="anchor" href="#audio-video">#</a> audio &amp; video</h3>
<p>这两个元素的使用在之前的<span class="exturl" data-url="aHR0cHM6Ly96amd5Yi5naXRodWIuaW8vSFRNTDUlRTglODQlOUElRTYlOUMlQUMlRTclQkMlOTYlRTclQTglOEIuaHRtbA==">博客 (opens new window)</span> 中介绍过</p>
<h3 id="source"><a class="anchor" href="#source">#</a> source</h3>
<p>定义多媒体资源，当不确定浏览器是否支持一种格式的视频资源并且有多个多媒体资源的时候使用</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myvideo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>conference.webm<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video/webm; codecs=<span class="token punctuation">'</span>vp8, vorbis<span class="token punctuation">'</span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>conference.ogv<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video/ogg; codecs=<span class="token punctuation">'</span>theora, vorbis<span class="token punctuation">'</span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>conference.mpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>  Video player not available.</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="track"><a class="anchor" href="#track">#</a> track</h3>
<p>用于规定字幕文件或其他包含文本的文件，当媒体播放时，这些文件是可见的，一般在 audio 和 video 内部，例如来自<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9FbGVtZW50L3RyYWNr"> MDN (opens new window)</span> 的例子</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span> <span class="token attr-name">controls</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>250<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/media/examples/friday.mp4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>track</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token attr-name">default</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token attr-name">kind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>captions<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token attr-name">srclang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/media/examples/friday.vtt<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>  Sorry, your browser doesn't support embedded videos.</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="embed"><a class="anchor" href="#embed">#</a> embed</h3>
<p>标签定义了一个容器，用来嵌入外部应用或者互动程序，例如 flash</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>embed</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hello_world.swf<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr></table></figure><h1 id="新表单元素"><a class="anchor" href="#新表单元素">#</a> 新表单元素</h1>
<ul>
<li>datalist</li>
<li>output</li>
<li>keygen (已废弃)</li>
</ul>
<h3 id="datalist"><a class="anchor" href="#datalist">#</a> datalist</h3>
<p>定义了一个 input 中可能的下拉元素，同时也可手动输入，类似于下拉框结合一个输入框</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">list</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>browsers<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>datalist</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>browsers<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Chrome<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Firefox<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Safari<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>datalist</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="output"><a class="anchor" href="#output">#</a> output</h3>
<p>表单通过计算或者展示的结果放入 output 中，例如 MDN 的<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9FbGVtZW50L291dHB1dA==">例子 (opens new window)</span></p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">oninput</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>result.value=parseInt(a.value)+parseInt(b.value)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>range<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>b<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>b<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span> +</pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>number<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>a<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>a<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span> =</pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>output</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>result<span class="token punctuation">"</span></span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>a b<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>60<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>output</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h1 id="新的语义和结构元素"><a class="anchor" href="#新的语义和结构元素">#</a> 新的语义和结构元素</h1>
<ul>
<li>article: 定义页面独立的内容区域</li>
<li>section: 定义文档中的节</li>
<li>header: 定义文档的头部区域</li>
<li>nav: 定义导航链接的部分</li>
<li>aside: 定义页面的<strong>侧边栏</strong></li>
<li>main: 定义文档的主要内容</li>
<li>footer: 定义 section 或 document 的页脚</li>
<li>dialog: 定义对话框，可以当一个标签使用</li>
<li>figure: 规定独立的流内容 (图像、图标、照片、代码等)</li>
<li>figcaption: 定义 figure 元素的标题</li>
<li>mark: 高亮显示文本，背景色是 yellow</li>
<li>meter: 展示给定的数据范围</li>
<li>progress: 定义任务进度</li>
<li>wbr: 在合适的地方添加换行符</li>
<li>ruby、rt、rp: 定义 ruby 注释、定义字符的解释或发音、定义不支持 ruby 元素的浏览器显示的内容</li>
<li>time: 给机器识别的标签</li>
<li>bdi: 允许您设置一段文本，使其脱离其父元素的文本方向设置。</li>
<li>command (没有浏览器支持)</li>
<li>details, summary: 用于描述文档或文档某个部分的细节、文档的标题，summary 用于展示，点击之后会展开 details 内的内容</li>
</ul>
<h3 id="article-section"><a class="anchor" href="#article-section">#</a> article &amp; section</h3>
<p>这两个区别比较困难通过查阅相关的资料，总的来说：</p>
<ul>
<li>article: 代表文档、页面或应用程序中<strong>独立的</strong>、<strong>完整的</strong>、可以独自被外界引用的内容</li>
<li>section: 用于对网站或应用程序中页面上的内容进行<strong>分块</strong></li>
</ul>
<p>section 使用的禁忌：</p>
<ol>
<li>不要将它作为设置样式的页面容器，应使用 div</li>
<li>如果其他的元素 nav、header、footer 更合适，那就不要使用 section</li>
<li>不要为没有标题的内容块使用 section</li>
</ol>
<h3 id="main"><a class="anchor" href="#main">#</a> main</h3>
<p><strong>注意</strong>：main 是独一无二的，因此一个文档中只能有一个 main，同时 main 不应该在 article、aside、footer、header、nav 等标签内</p>
<h3 id="figure-figcaption"><a class="anchor" href="#figure-figcaption">#</a> figure &amp; figcaption</h3>
<p>例如菜鸟教程的<span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS90YWdzL3RhZy1maWdjYXB0aW9uLmh0bWw=">例子 (opens new window)</span></p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>figure</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img_pulpit.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>The Pulpit Rock<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>304<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>228<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>figcaption</span><span class="token punctuation">></span></span>Fig.1 - A view of the pulpit rock in Norway.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>figcaption</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>figure</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="detail-summary"><a class="anchor" href="#detail-summary">#</a> detail &amp; summary</h3>
<p>例如下面来自<span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS90YWdzL3RhZy1zdW1tYXJ5Lmh0bWw=">菜鸟教程 (opens new window)</span> 中的例子：</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>details</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">></span></span>Copyright 1999-2011.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span> - by Refsnes Data. All Rights Reserved.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>All content and graphics on this web site are the property of the company Refsnes Data.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>details</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="meter-progress"><a class="anchor" href="#meter-progress">#</a> meter &amp; progress</h3>
<p>这两个元素在显示于语法上有点类似</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meter</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.6<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>60%<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>meter</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>progress</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>22<span class="token punctuation">"</span></span> <span class="token attr-name">max</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>progress</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="wbr"><a class="anchor" href="#wbr">#</a> wbr</h3>
<p>当页面不足以一行显示下面字段时， <code>HTTP</code>  会与后面的 <code>Request</code>  换行</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>学习 AJAX ,您必须熟悉 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wbr</span> <span class="token punctuation">/></span></span>Http<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wbr</span> <span class="token punctuation">/></span></span>Request 对象。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="ruby-rp-rt"><a class="anchor" href="#ruby-rp-rt">#</a> ruby、rp、rt</h3>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ruby</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  汉 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rp</span><span class="token punctuation">></span></span>(<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rp</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rt</span><span class="token punctuation">></span></span>Han<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rt</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rp</span><span class="token punctuation">></span></span>)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rp</span><span class="token punctuation">></span></span> 字 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rp</span><span class="token punctuation">></span></span>(<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rp</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rt</span><span class="token punctuation">></span></span>zi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rt</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rp</span><span class="token punctuation">></span></span>)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rp</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ruby</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h1 id="拓展"><a class="anchor" href="#拓展">#</a> 拓展</h1>
<p>之前对 img 内的属性 srcset 和 sizes 这两个属性不是特别理解，因此，通过查阅相关的资料，对这两个属性进行说明</p>
<h3 id="srcset"><a class="anchor" href="#srcset">#</a> srcset</h3>
<p><code>srcset</code>  是一个包含一个或多个源图的容器，不同源图用逗号分隔，每一个源图由两部分组成：</p>
<ol>
<li>图片的 URL</li>
<li><code>x</code>  (设备像素比) 或 <code>w</code>  图片像素宽度描述， <code>w</code>  描述符的加载策略是通过 <code>sizes</code>  属性的声明来计算选择的，如果没有给出，默认是 <code>1x</code></li>
</ol>
<p>先说 <code>x</code> ， <code>x</code>  代表设备像素比，那什么是设备像素比 (DPR) 呢？设备像素比 = 分辨率 / 设备独立像素，从这篇<span class="exturl" data-url="aHR0cHM6Ly9sZWFybmt1LmNvbS9hcnRpY2xlcy83MzA5L3doYXQtaXMtdGhlLWluZGVwZW5kZW50LXBpeGVsLXJlc29sdXRpb24tYW5kLWRldmljZS1waXhlbC1vZi10aGUtZGV2aWNlLWZvci1hLW1vYmlsZS1waG9uZQ==">文章 (opens new window)</span> 可以简单的了解三个概念：设备独立像素、分辨率、设备像素比，如果你想获知设备的像素比，可以使用 <code>window.devicePixelRatio</code>  这个 API 获取，一般设备像素比为 <code>1~5</code>  之间，通过测试，我的联想小新 700 电脑是 <code>1.25</code> ，我的小米 6 手机的设备像素比是 <code>3</code> ，这样你就能够清楚当设置不同的像素比时显示不同的图片了，在举例之前，先说明两种图片对应的名字：tony111 对应 <code>tony1.jpg</code> ，tony222 对应 <code>tony2.jpg</code></p>
<p><img data-src="../images/HTML5%E6%96%B0%E5%A2%9E%E6%A0%87%E7%AD%BE/show1.b5d74bbd.png" alt="show1.png" /></p>
<p>代码示例：</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>7.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tony1.jpg 1x, tony2.jpg 2x<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>在电脑上会显示 tony111，因为电脑的设备像素比为 <code>1.25</code> ，同时取值时会忽略后面的小数，所以取 1，而在我的手机上显示的是 tony222，因为手机的设备像素比为 3，更接近 2，所以会显示 tony222</p>
<p><strong>注意点</strong></p>
<ol>
<li>书写的时候需要从小到大向右书写，否则前面比后面大的话永远显示前面的图片，后面的就会忽略。例如下面的代码永远显示 tony111</li>
</ol>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>7.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tony1.jpg 3x, tony2.jpg 2x<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr></table></figure><ol>
<li>如果找不到对应的像素，那么一般会寻找比它大且最接近的设备像素比，若还是找不到，则会找比它小且最接近的设备像素比，但是会对图片进行放大或缩小 (<strong>不同浏览器策略可能不同，我用 Chrome 测是这样的</strong>)。例如电脑端的图片会找到 tony111 显示，同时显示的 tony111 大小会比设置 <code>1x</code>  下缩小 1 倍</li>
</ol>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>7.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tony1.jpg 2x, tony2.jpg 3x<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="sizes"><a class="anchor" href="#sizes">#</a> sizes</h3>
<p>只对设置 <code>srcset</code>  中的 <code>w</code>  起作用，所以两种结合起来使用。例如下面的例子，在我的 PC 上显示 tony222，为什么呢？因为根据 sizes 设置的规则，我的电脑大于 768px 的，因此使用 600px，同时电脑的设备像素比为 1，因此 <code>600 * 1 = 600px</code>  对应的是 tony222，而我的手机为 360px，同时设备像素比为 3，因此 <code>128 * 3 = 384px</code>  对应的是 tony111</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>7.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tony1.jpg 400w, tony2.jpg 600w<span class="token punctuation">"</span></span> <span class="token attr-name">sizes</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 768px) 128px, 600px<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>但是如果计算的数值与其他图片像素差距太大，浏览器取图片时极不规律，看如下的例子你会发现，无论手机还是移动端显示的都是 tony222，计算一下 <code>384 - 246 = 138</code> 、 <code>600 - 384 = 216</code> ， <code>384 - 211 = 173</code> 、 <code>700 - 384 = 316</code>  取得不规律</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">&lt;!-- 取 tony2 --></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>7.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tony1.jpg 245w, tony2.jpg 600w<span class="token punctuation">"</span></span> <span class="token attr-name">sizes</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 768px) 128px, 600px<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">&lt;!-- 取 tony1 --></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>7.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tony1.jpg 246w, tony2.jpg 600w<span class="token punctuation">"</span></span> <span class="token attr-name">sizes</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 768px) 128px, 600px<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">&lt;!--  取 tony2 --></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>7.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tony1.jpg 210w, tony2.jpg 700w<span class="token punctuation">"</span></span> <span class="token attr-name">sizes</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 768px) 128px, 600px<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">&lt;!-- 取 tony1 --></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>7.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tony1.jpg 211w, tony2.jpg 700w<span class="token punctuation">"</span></span> <span class="token attr-name">sizes</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(max-width: 768px) 128px, 600px<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="总结"><a class="anchor" href="#总结">#</a> 总结</h3>
<p>在同时使用 sizes 和 srcset 的时候注意选择哪个值极不规律，因此应提前计算大概的值以便显示自己需要的值</p>
<h1 id="参考教程"><a class="anchor" href="#参考教程">#</a> 参考教程</h1>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly93d3cuemhhbmd4aW54dS5jb20vd29yZHByZXNzLzIwMTQvMTAvcmVzcG9uc2l2ZS1pbWFnZXMtc3Jjc2V0LXNpemUtdy1kZXNjcmlwdG9yLw==">张鑫旭的博客 (opens new window)</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC82MDc1NjdlNDg4ZmM=">简书 (opens new window)</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93d3cudzNzY2hvb2xzLmNvbS9odG1sL2h0bWw1X25ld19lbGVtZW50cy5hc3A=">w3schools(opens new window)</span></li>
</ul>
]]></content>
      <categories>
        <category>html</category>
      </categories>
      <tags>
        <tag>html</tag>
      </tags>
  </entry>
  <entry>
    <title>Node.js学习</title>
    <url>/2021/06/15/Node.js%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h1 id="nodejs特性"><a class="anchor" href="#nodejs特性">#</a> Node.js 特性</h1>
<h2 id="请求不跨域"><a class="anchor" href="#请求不跨域">#</a> 请求不跨域</h2>
<p>nodejs 没有浏览器同源策略的限制，直接请求即可</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> https<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"https"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>https<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">,</span><span class="token parameter">res</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">let</span> str<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span><span class="token parameter">chunk</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        str<span class="token operator">+=</span>chunk<span class="token punctuation">;</span> <span class="token comment">// 接收流</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"end"</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 接收数据</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>便可以直接看到请求，不会看到跨域情况</p>
<h2 id="文件读取"><a class="anchor" href="#文件读取">#</a> 文件读取</h2>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> fs <span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"fs"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 写入文件</span></pre></td></tr><tr><td data-num="3"></td><td><pre>fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">"./log.txt"</span><span class="token punctuation">,</span><span class="token string">"hello write"</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>   <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"文件写入失败！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>   <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"文件写入成功！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>   <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"./test.txt"</span><span class="token punctuation">,</span><span class="token string">"utf-8"</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"文件读取失败！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"文件读取成功！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>成功写入</p>
<p><img data-src="../images/nodejs%E5%AD%A6%E4%B9%A0/1649920997937.png" alt="1649920997937" /></p>
<h2 id="进程的管理"><a class="anchor" href="#进程的管理">#</a> 进程的管理</h2>
<p><strong>process.env ：常用来判断生产环境或是开发环境前提运行在 node 环境下</strong></p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 运行示例</span></pre></td></tr><tr><td data-num="3"></td><td><pre>node process<span class="token punctuation">.</span>js test1 test2</pre></td></tr></table></figure><p><img data-src="../images/nodejs%E5%AD%A6%E4%B9%A0/1649921728985.png" alt="1649921728985" /></p>
<h2 id="网络通信httphttps"><a class="anchor" href="#网络通信httphttps">#</a> 网络通信 http/https</h2>
<p>创建 server</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> http<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"http"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">let</span> url<span class="token operator">=</span>req<span class="token punctuation">.</span>url<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8090</span><span class="token punctuation">,</span><span class="token string">"localhost"</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"localhost:8090"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"启动成功！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h1 id="node相关工具"><a class="anchor" href="#node相关工具">#</a> Node 相关工具</h1>
<h2 id="nvm"><a class="anchor" href="#nvm">#</a> NVM</h2>
<p><strong>NVM:Node 版本管理工具</strong></p>
<p>安装</p>
<p><strong>1.1 Mac 安装 nvm</strong></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>nvm<span class="token operator">-</span>sh<span class="token operator">/</span>nvm<span class="token operator">/</span>blob<span class="token operator">/</span>master<span class="token operator">/</span><span class="token constant">README</span><span class="token punctuation">.</span>md</pre></td></tr></table></figure><p><strong>1.2 Windows 安装 nvm</strong></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>nvm<span class="token operator">-</span>windows</pre></td></tr><tr><td data-num="2"></td><td><pre>nodist</pre></td></tr></table></figure><p>Node 版本管理工具   <strong>TLS 长期稳定版   Current 当前版</strong></p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 显示安装版本</span></pre></td></tr><tr><td data-num="2"></td><td><pre>nvm list</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 指定安装版本</span></pre></td></tr><tr><td data-num="4"></td><td><pre>nvm use 版本</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 切换默认版本</span></pre></td></tr><tr><td data-num="6"></td><td><pre>nvm alias <span class="token keyword">default</span> 版本</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 查看版本</span></pre></td></tr><tr><td data-num="8"></td><td><pre>node <span class="token operator">-</span>v</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 命令查看</span></pre></td></tr><tr><td data-num="10"></td><td><pre>nvm <span class="token operator">--</span>help</pre></td></tr></table></figure><h2 id="npm"><a class="anchor" href="#npm">#</a> NPM</h2>
<p><strong>npm: 包管理工具</strong></p>
<p><strong>全局安装</strong>： <code>npm install</code>  后面再加上 <code>-g</code></p>
<p><strong>全局安装包的目录</strong></p>
<ul>
<li>
<p>Mac</p>
<pre><code>/Users/felix/.nvm/versions/node/nvm各个版本/bin/
</code></pre>
</li>
<li>
<p>Windows</p>
<pre><code>C:\Users\你的用户名\AppData\Roaming\npm\node_modules
</code></pre>
</li>
</ul>
<p><strong>局部安装</strong>： 在当前目录 <code>npm install </code></p>
<p><strong>package.json 中设置脚本</strong></p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token string-property property">"script"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token string-property property">"dev"</span><span class="token operator">:</span><span class="token string">"gulp -v"</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 命令行运行 npm run dev</span></pre></td></tr></table></figure><p><strong>命令</strong></p>
<p><strong>描述各种包以树的方式</strong> <code>npm list</code></p>
<p><strong>查看 gulp 包关系</strong>： <code>npm list | grep gulp</code></p>
<p><strong>开发依赖</strong>: <code>-D</code>   // 开发使用</p>
<p><strong>生产环境包在 package.json 中的 devDependencies 属性中</strong></p>
<p><strong>生产依赖</strong>： <code>-S</code>    // 线上使用</p>
<p><strong>生产环境包在 package.json 中的 dependencies 属性中</strong></p>
<p><strong>node module 不需要复制要忽略提交，本地需要通过 npm 下载即可</strong></p>
<p><strong>全局安装</strong> <code>npm i </code></p>
<p><strong>仅安装生产依赖</strong>   <code>npm i --production</code></p>
<p><strong>仅安装开发依赖</strong>   <code>npm i --development</code></p>
<p><strong>安装指定版本的包</strong></p>
<pre><code>$ pwd
$ npm list
$ npm info underscore
$ npm view underscore versions
$ npm install underscore@1.8.0
$ npm list
$ npm uninstall underscore
$ npm list
</code></pre>
<h1 id="nodejs模块"><a class="anchor" href="#nodejs模块">#</a> Node.js 模块</h1>
<p><strong>Node.js 有三类模块，即内置的模块、第三方的模块、自定义的模块</strong></p>
<h2 id="内置模块"><a class="anchor" href="#内置模块">#</a> 内置模块</h2>
<p>Node.js 内置模块又叫核心模块，Node.js 安装完成可直接使用。如：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">var</span> extname <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>extname<span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="第三方模块"><a class="anchor" href="#第三方模块">#</a> 第三方模块</h2>
<p>第三方的 Node.js 模块指的是为了实现某些功能，发布的 npmjs.org 上的模块，按照一定的开源协议供社群使用。如：</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>npm install chalk</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> chalk <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'chalk'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">blue</span><span class="token punctuation">(</span><span class="token string">'Hello world!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="自定义模块"><a class="anchor" href="#自定义模块">#</a> 自定义模块</h2>
<p>我们可以把公共的功能 抽离成为一个单独的 js 文件 作为一个模块，默认情况下面这个模块里面的方法或者属性，外面是没法访问的。如果要让外部可以访问模块里面的方法或者属性，就必须在模块里面通过 exports 或者 module.exports 暴露属性或者方法。</p>
<p>m1.js：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'gp19'</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'module 1'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 接口暴露方法一：</span></pre></td></tr><tr><td data-num="10"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token literal-property property">say</span><span class="token operator">:</span> sayName</pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">// 接口暴露方法二：</span></pre></td></tr><tr><td data-num="15"></td><td><pre>exports<span class="token punctuation">.</span>say <span class="token operator">=</span> sayName</pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">// 错误！</span></pre></td></tr><tr><td data-num="18"></td><td><pre>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token literal-property property">say</span><span class="token operator">:</span> sayName</pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>main.js：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./m1'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre>m1<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h1 id="跨域"><a class="anchor" href="#跨域">#</a> 跨域</h1>
<h2 id="jsonp"><a class="anchor" href="#jsonp">#</a> JSONP</h2>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> app <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">let</span> urlObj <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token keyword">switch</span> <span class="token punctuation">(</span>urlObj<span class="token punctuation">.</span>pathname<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">case</span> <span class="token string">'/api/user'</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>urlObj<span class="token punctuation">.</span>query<span class="token punctuation">.</span>cb<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">(&#123;"name": "gp145"&#125;)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token keyword">break</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">default</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'404.'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token keyword">break</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'localhost:8080'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="cors"><a class="anchor" href="#cors">#</a> CORS</h2>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> querystring <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'querystring'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> app <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token string">''</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token keyword">let</span> urlObj <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>  res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token string-property property">'content-type'</span><span class="token operator">:</span> <span class="token string">'application/json;charset=utf-8'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token string-property property">'Access-Control-Allow-Origin'</span><span class="token operator">:</span> <span class="token string">'*'</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>  req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    data <span class="token operator">+=</span> chunk</pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>  req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token function">responseResult</span><span class="token punctuation">(</span>querystring<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token keyword">function</span> <span class="token function">responseResult</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">switch</span> <span class="token punctuation">(</span>urlObj<span class="token punctuation">.</span>pathname<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>      <span class="token keyword">case</span> <span class="token string">'/api/login'</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>          <span class="token literal-property property">message</span><span class="token operator">:</span> data</pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token keyword">break</span></pre></td></tr><tr><td data-num="29"></td><td><pre>      <span class="token keyword">default</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'404.'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token keyword">break</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'localhost:8080'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="middlewarehttp-proxy-middware"><a class="anchor" href="#middlewarehttp-proxy-middware">#</a> middleware（http-proxy-middware）</h2>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http-proxy-middleware'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">let</span> url <span class="token operator">=</span> req<span class="token punctuation">.</span>url</pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>  res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token string-property property">'Access-Control-Allow-Origin'</span><span class="token operator">:</span> <span class="token string">'*'</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/api</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">let</span> apiProxy <span class="token operator">=</span> <span class="token function">proxy</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'https://m.lagou.com'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token string-property property">'^/api'</span><span class="token operator">:</span> <span class="token string">''</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token comment">//http-proy-middleware 在 Node.js 中使用的方法</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token function">apiProxy</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">switch</span> <span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>      <span class="token keyword">case</span> <span class="token string">'/index.html'</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token keyword">break</span></pre></td></tr><tr><td data-num="27"></td><td><pre>      <span class="token keyword">case</span> <span class="token string">'/search.html'</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'search.html'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token keyword">break</span></pre></td></tr><tr><td data-num="30"></td><td><pre>      <span class="token keyword">default</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'[404]page not found.'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h1 id="参考"><a class="anchor" href="#参考">#</a> 参考</h1>
<p><span class="exturl" data-url="aHR0cHM6Ly9sdXJvbmd0YW8uZ2l0ZWUuaW8vZmVsaXhib29rcy1ncDE5LW5vZGUuanMvYmFzaWNzLzAxLU5vZGUuanMlRTUlOUYlQkElRTclQTElODAuaHRtbA==">千锋教育</span></p>
<p>根据以上文档学习记录</p>
]]></content>
      <categories>
        <category>Node.js</category>
      </categories>
      <tags>
        <tag>Node</tag>
      </tags>
  </entry>
  <entry>
    <title>Node.js实现简易登录注册</title>
    <url>/2021/04/19/Node.js%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%98%93%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/</url>
    <content><![CDATA[<p>之前一直都有学过 Node，但是没怎么上心，然而现在有业务需求同时也希望自己多掌握点技能，因此下定决心学习 Node。本文内容还是参考《了不起的 Node.js》里面的案例，但只是参考了一部分。</p>
<p>项目例子采用 MVC 模式</p>
<p>项目结构</p>
<figure class="highlight md"><figcaption data-lang="Markdown"></figcaption><table><tr><td data-num="1"></td><td><pre>|- view</pre></td></tr><tr><td data-num="2"></td><td><pre>|   |- login.pug</pre></td></tr><tr><td data-num="3"></td><td><pre>|   |- signup.pug</pre></td></tr><tr><td data-num="4"></td><td><pre>|   |- layout.pug</pre></td></tr><tr><td data-num="5"></td><td><pre>|- model</pre></td></tr><tr><td data-num="6"></td><td><pre>|   |- server.js</pre></td></tr><tr><td data-num="7"></td><td><pre>|- controller</pre></td></tr><tr><td data-num="8"></td><td><pre>|   |-index.js</pre></td></tr><tr><td data-num="9"></td><td><pre>|- index.js</pre></td></tr></table></figure><p>所需要的包，其中 <code>express-session</code>  验证用户信息的。</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token operator">...</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token string-property property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token string-property property">"express"</span><span class="token operator">:</span> <span class="token string">"^4.16.4"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token string-property property">"body-parser"</span><span class="token operator">:</span> <span class="token string">"^1.19.0"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token string-property property">"express-session"</span><span class="token operator">:</span> <span class="token string">"^1.16.1"</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token operator">...</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="公共模板"><a class="anchor" href="#公共模板">#</a> 公共模板</h3>
<figure class="highlight pug"><figcaption data-lang="pug"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype">doctype 5</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag">html</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token tag">head</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag">title</span> <span class="token plain-text">MongoDB example</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token tag">body</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag">h1</span> <span class="token plain-text">My first MongoDB app</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token tag">hr</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">block body</span></pre></td></tr></table></figure><h3 id="注册界面"><a class="anchor" href="#注册界面">#</a> 注册界面</h3>
<figure class="highlight pug"><figcaption data-lang="pug"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//- signup.pug</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">extends layout</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">block body</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token tag">form<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">action</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"/signup"</span></span><span class="token punctuation">,</span> <span class="token attr-name">method</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"POST"</span></span><span class="token punctuation">)</span></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag">fieldset</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token tag">legend</span> <span class="token plain-text">Sign up</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token tag">p</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token tag">label</span> <span class="token plain-text">First</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token tag">input<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"first"</span></span><span class="token punctuation">,</span> <span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"text"</span></span><span class="token punctuation">)</span></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token tag">p</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token tag">label</span> <span class="token plain-text">Last</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token tag">input<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"last"</span></span><span class="token punctuation">,</span> <span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"text"</span></span><span class="token punctuation">)</span></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token tag">p</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token tag">label</span> <span class="token plain-text">Email</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token tag">input<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"email"</span></span><span class="token punctuation">,</span> <span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"text"</span></span><span class="token punctuation">)</span></span></span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token tag">p</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token tag">label</span> <span class="token plain-text">Password</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token tag">input<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"password"</span></span><span class="token punctuation">,</span> <span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"text"</span></span><span class="token punctuation">)</span></span></span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token tag">p</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token tag">button</span> <span class="token plain-text">Submit</span></pre></td></tr><tr><td data-num="21"></td><td><pre>      <span class="token tag">p</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token tag">a<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">href</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"/"</span></span><span class="token punctuation">)</span></span></span> <span class="token plain-text">Go back</span></pre></td></tr></table></figure><h3 id="后端代码"><a class="anchor" href="#后端代码">#</a> 后端代码</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// index.js</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'body-parser'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> controller <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./controller'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> urlencodedParser <span class="token operator">=</span> bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">extended</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/signup'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'signup'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/signup'</span><span class="token punctuation">,</span> urlencodedParser<span class="token punctuation">,</span> controller<span class="token punctuation">.</span>postSignUp<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// controller/index.js</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> model <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../model/server'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>exports<span class="token punctuation">.</span><span class="token function-variable function">postSignUp</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> first<span class="token punctuation">,</span> last<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">&#125;</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token comment">// 交由 model 来存储数据</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  model<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    first<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    last<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    email<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    password</pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 这里其实是跳转错误界面，这些细节就不介绍了</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">===</span> num<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/login/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>email<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// model/server.js</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> MongoClient <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"mongodb"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>MongoClient<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">"mongodb://localhost:27017"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> dbName <span class="token operator">=</span> <span class="token string">"student"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>MongoClient<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> client</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token keyword">const</span> col <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">db</span><span class="token punctuation">(</span>dbName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">"classes"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token comment">// 插入数据</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  exports<span class="token punctuation">.</span><span class="token function-variable function">insert</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    col<span class="token punctuation">.</span><span class="token function">insertOne</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>          <span class="token function">next</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>          <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token function">next</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="登录"><a class="anchor" href="#登录">#</a> 登录</h2>
<h3 id="登录界面"><a class="anchor" href="#登录界面">#</a> 登录界面</h3>
<figure class="highlight pug"><figcaption data-lang="pug"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">extends layout</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">block body</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token tag">form<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">action</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"/login"</span></span><span class="token punctuation">,</span> <span class="token attr-name">method</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"POST"</span></span><span class="token punctuation">)</span></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag">fieldset</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token tag">legend</span> <span class="token plain-text">Log in</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token flow-control"><span class="token branch keyword">if</span> <span class="token punctuation">(</span>signupEmail<span class="token punctuation">)</span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token tag">p</span> <span class="token plain-text">Congratulations on signing up! Please login below</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token tag">p</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token tag">label</span> <span class="token plain-text">Email</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token tag">input<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"email"</span></span><span class="token punctuation">,</span> <span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"text"</span></span><span class="token punctuation">,</span> <span class="token attr-name">value</span><span class="token punctuation">=</span><span class="token attr-value">signupEmail</span><span class="token punctuation">)</span></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token tag">p</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token tag">label</span> <span class="token plain-text">Password</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token tag">input<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"password"</span></span><span class="token punctuation">,</span> <span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"text"</span></span><span class="token punctuation">)</span></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token tag">p</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token tag">button</span> <span class="token plain-text">Submit</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token tag">p</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token tag">a<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">href</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"/"</span></span><span class="token punctuation">)</span></span></span> <span class="token plain-text">Go back</span></pre></td></tr></table></figure><h3 id="后端代码-2"><a class="anchor" href="#后端代码-2">#</a> 后端代码</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// index.js</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">...</span></pre></td></tr><tr><td data-num="3"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'login'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/login/:signupEmail'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">"login"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">signupEmail</span><span class="token operator">:</span> req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>signupEmail <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">,</span> urlencodedParser<span class="token punctuation">,</span> controller<span class="token punctuation">.</span>postLogin<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token operator">...</span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// controller/index.js</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">...</span></pre></td></tr><tr><td data-num="3"></td><td><pre>exports<span class="token punctuation">.</span><span class="token function-variable function">postLogin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> email<span class="token punctuation">,</span> password <span class="token punctuation">&#125;</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  model<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> email<span class="token punctuation">,</span> password <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">num<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">===</span> num<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">===</span> num<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'&amp;lt;p&amp;gt;Email or password is not correct. Go back and try again.&amp;lt;/p&amp;gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">===</span> num<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token comment">// 存储用户信息</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>loggedIn <span class="token operator">=</span> result<span class="token punctuation">.</span>_id<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token operator">...</span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// model/server.js</span></pre></td></tr><tr><td data-num="2"></td><td><pre>MongoClient<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> client</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token operator">...</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  exports<span class="token punctuation">.</span><span class="token function-variable function">find</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    col<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      data<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>          <span class="token function">next</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>          <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>          <span class="token function">next</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>          <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token function">next</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token operator">...</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="补充"><a class="anchor" href="#补充">#</a> 补充</h2>
<p>其实项目中还有 logout 功能，显示用户功能没有讲，但是这些相对简单，因此就不展开了。</p>
<p>在登录的时候有一句 <code>req.session.loggedIn = result._id.toString();</code> ，如果想通过 id 查询数据，则</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> ObjectId <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"mongodb"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>ObjectId<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> <span class="token constant">ID</span><span class="token operator">=</span> req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>loggedIn<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>model<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token constant">ID</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">num<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">//...</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="更新"><a class="anchor" href="#更新">#</a> 更新</h2>
<p>使用 <code>mongoose</code>  替代 <code>mongodb</code>  保存数据，具体文档参照<span class="exturl" data-url="aHR0cHM6Ly9tb25nb29zZWpzLmNvbS8="> mongoose 官网 (opens new window)</span></p>
<p>主要改动在 <code>model/server.js</code></p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// model/server.js</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"mongoose"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> Schema <span class="token operator">=</span> mongoose<span class="token punctuation">.</span>Schema<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">"mongodb://localhost/student"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">useNewUrlParser</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> personSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token literal-property property">first</span><span class="token operator">:</span> String<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token literal-property property">last</span><span class="token operator">:</span> String<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token literal-property property">unique</span><span class="token operator">:</span> <span class="token boolean">true</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token literal-property property">unique</span><span class="token operator">:</span> <span class="token boolean">true</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token punctuation">&#123;</span> <span class="token literal-property property">autoIndex</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token keyword">const</span> Person <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'classes'</span><span class="token punctuation">,</span> personSchema<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>exports<span class="token punctuation">.</span><span class="token function-variable function">insert</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  <span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>  person<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>      <span class="token function">next</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>      <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token function">next</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>exports<span class="token punctuation">.</span><span class="token function-variable function">find</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>  Person<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>      <span class="token function">next</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>      <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>      <span class="token function">next</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>      <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token function">next</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Node.js</category>
      </categories>
      <tags>
        <tag>Node</tag>
      </tags>
  </entry>
  <entry>
    <title>Node中间件</title>
    <url>/2021/06/02/Node%E4%B8%AD%E9%97%B4%E4%BB%B6/</url>
    <content><![CDATA[<h3 id="中间件概念"><a class="anchor" href="#中间件概念">#</a> 中间件概念</h3>
<p>在  <code>Node.js</code>  中，中间件主要是指封装所有  <code>Http</code>  请求细节处理的方法。一次  <code>Http</code>  请求通常包含很多工作，如记录日志、 <code>ip</code>  过滤、查询字符串、请求体解析、 <code>Cookie</code>  处理、权限验证、参数验证、异常处理等，但对于  <code>Web</code>  应用而言，并不希望接触到这么多细节性的处理，因此引入中间件来简化和隔离这些基础设施与业务逻辑之间的细节，让开发者能够关注在业务的开发上，以达到提升开发效率的目的。</p>
<p>中间件的行为比较类似  <code>Java</code>  中过滤器的工作原理，就是在进入具体的业务处理之前，先让过滤器处理。它的工作模型下图所示。</p>
<p><img data-src="../images/Node%E4%B8%AD%E9%97%B4%E4%BB%B6/15842055-dde4fe84cd4282c0.webp" alt="img" /></p>
<h3 id="中间件机制核心实现"><a class="anchor" href="#中间件机制核心实现">#</a> 中间件机制核心实现</h3>
<p>中间件是从  <code>Http</code>  请求发起到响应结束过程中的处理方法，通常需要对请求和响应进行处理，因此一个基本的中间件的形式如下：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">middleware</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// TODO</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>以下通过两种方式的中间件机制的实现来理解中间件是如何工作的。</p>
<h4 id="方式一"><a class="anchor" href="#方式一">#</a> 方式一</h4>
<p>如下定义三个简单的中间件：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">middleware1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'middleware1 start'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">middleware2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'middleware2 start'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">middleware3</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'middleware3 start'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>通过递归的形式，将后续中间件的执行方法传递给当前中间件，在当前中间件执行结束，通过调用  <code>next()</code>  方法执行后续中间件的调用。</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 中间件数组</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> middlewares <span class="token operator">=</span> <span class="token punctuation">[</span>middleware1<span class="token punctuation">,</span> middleware2<span class="token punctuation">,</span> middleware3<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">function</span> <span class="token function">run</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">const</span> <span class="token function-variable function">next</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 获取中间件数组中第一个中间件</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">const</span> middleware <span class="token operator">=</span> middlewares<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>middleware<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token function">middleware</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 模拟一次请求发起</span></pre></td></tr></table></figure><p>执行以上代码，可以看到如下结果：</p>
<pre><code class="language-s">middleware1 start
middleware2 start
middleware3 start
</code></pre>
<p>如果中间件中有异步操作，需要在异步操作的流程结束后再调用  <code>next()</code>  方法，否则中间件不能按顺序执行。改写  <code>middleware2</code>  中间件：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">middleware2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'middleware2 start'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>执行结果与之前一致，不过 middleware3 会在 middleware2 异步完成后执行。</p>
<p><img data-src="../images/Node%E4%B8%AD%E9%97%B4%E4%BB%B6/15842055-62794a71064a92ed.webp" alt="img" /></p>
<h4 id="方式二"><a class="anchor" href="#方式二">#</a> 方式二</h4>
<p>有些中间件不止需要在业务处理前执行，还需要在业务处理后执行，比如统计时间的日志中间件。在方式一情况下，无法在  <code>next()</code>  为异步操作时再将当前中间件的其他代码作为回调执行。因此可以将 <code>next()</code>  方法的后续操作封装成一个  <code>Promise</code>  对象，中间件内部就可以使用  <code>next.then()</code>  形式完成业务处理结束后的回调。改写  <code>run()</code>  方法如下：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">run</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">const</span> <span class="token function-variable function">next</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">const</span> middleware <span class="token operator">=</span> middlewares<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>middleware<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token comment">// 将 middleware (req, res, next) 包装为 Promise 对象</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">middleware</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>中间件的调用方式需改写为：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">middleware1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'middleware1 start'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token comment">// 所有的中间件都应返回一个 Promise 对象</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">// Promise.resolve () 方法接收中间件返回的 Promise 对象，供下层中间件异步控制</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'middleware1 end'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>得益于  <code>async</code>  函数的自动异步流程控制，中间件也可以用如下方式来实现：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//async 函数自动返回 Promise 对象</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">middleware2</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'middleware2 start'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'middleware2 end'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">middleware3</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'middleware3 start'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'middleware3 end'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>执行结果如下：</p>
<p><img data-src="../images/Node%E4%B8%AD%E9%97%B4%E4%BB%B6/15842055-726b15e73701e39b.webp" alt="img" /></p>
<p>以上描述了中间件机制中多个异步中间件的调用流程，实际中间件机制的实现还需要考虑异常处理、路由等。</p>
<p>在  <code>express</code>  框架中，中间件的实现方式为方式一，并且全局中间件和内置路由中间件中根据请求路径定义的中间件共同作用，不过无法在业务处理结束后再调用当前中间件中的代码。 <code>koa2</code>  框架中中间件的实现方式为方式二，将  <code>next()</code>  方法返回值封装成一个  <code>Promise</code> ，便于后续中间件的异步流程控制，实现了  <code>koa2</code>  框架提出的洋葱圈模型，即每一层中间件相当于一个球面，当贯穿整个模型时，实际上每一个球面会穿透两次。</p>
<p><img data-src="../images/Node%E4%B8%AD%E9%97%B4%E4%BB%B6/15842055-8d0fb98ad9482283.webp" alt="img" /></p>
<p><code>koa2</code>  框架的中间件机制实现得非常简洁和优雅，这里学习一下框架中组合多个中间件的核心代码。</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">compose</span> <span class="token punctuation">(</span><span class="token parameter">middleware</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>middleware<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'Middleware stack must be an array!'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> fn <span class="token keyword">of</span> middleware<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> fn <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'Middleware must be composed of functions!'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">return</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">function</span> <span class="token function">dispatch</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token comment">//index 会在 next () 方法调用后累加，防止 next () 方法重复调用</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> index<span class="token punctuation">)</span> <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'next() called multiple times'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      index <span class="token operator">=</span> i</pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token keyword">let</span> fn <span class="token operator">=</span> middleware<span class="token punctuation">[</span>i<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> middleware<span class="token punctuation">.</span>length<span class="token punctuation">)</span> fn <span class="token operator">=</span> next</pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fn<span class="token punctuation">)</span> <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token comment">// 核心代码</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token comment">// 包装 next () 方法返回值为 Promise 对象</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token function">dispatch</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token comment">// 遇到异常中断后续中间件的调用</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="中间件社区"><a class="anchor" href="#中间件社区">#</a> 中间件社区</h3>
<p>在后续  <code>Node.js</code>  学习和应用中，建议使用  <code>koa2</code>  框架作为基础框架，这里列出了一些使用比较多的中间件。</p>
<p>koa-router：路由中间件 koa-bodyparser：http 请求主体解析 koa-static：代理静态文件 koa-compress：gzip 压缩 koa-logger：日志记录 koa-convert：转换 koa1.x 版本的中间件 kcors：跨域中间件 koa 中间件列表地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2tvYWpzL2tvYS93aWtp">https://github.com/koajs/koa/wiki</span></p>
]]></content>
      <tags>
        <tag>Node</tag>
      </tags>
  </entry>
  <entry>
    <title>Promise学习</title>
    <url>/2022/04/18/Promise%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h1 id="回调地狱"><a class="anchor" href="#回调地狱">#</a> 回调地狱</h1>
<p>多层回调函数的相互嵌套，就形成了回调地狱问题。</p>
<p>回调地狱示例，定时器的嵌套调用</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"超时1s输出"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"超时2s输出"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"超时3s输出"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>为了解决回调地狱问题，ES6 新增了 Promise 概念。</p>
<h1 id="基本概念"><a class="anchor" href="#基本概念">#</a> 基本概念</h1>
<ul>
<li>Promise 是一个构造函数
<ul>
<li>我们可以创建 Promise 实例 const p=new Promise ()</li>
<li>new 出来的 Promise 实例对象，代表一个异步操作</li>
</ul>
</li>
<li>Promise.prototype 上包含了一个.then 方法
<ul>
<li>每一次 new Promise () 构造函数得到的实例对象</li>
<li>都可以通过原型链的方式访问到.then 方法</li>
</ul>
</li>
<li>.then () 方法可以预先指定成功和失败的回调函数
<ul>
<li>p.then (成功的回调函数，失败的回调函数)</li>
<li>p.then(result=&gt;{},error=&gt;{})</li>
<li>调用.then () 方法时，成功回调函数为必选，失败回调函数为可选</li>
</ul>
</li>
</ul>
<h1 id="读入文件内容"><a class="anchor" href="#读入文件内容">#</a> 读入文件内容</h1>
<p>由于 node.js 中 fs 模块仅支持回调函数方式，不支持 Promise 调用方式。因此，在这里需要安装 then-fs 第三方包。</p>
<p>安装</p>
<p>npm i then-fs</p>
<p>使用</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> thenFs <span class="token keyword">from</span> <span class="token string">"then-fs"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"./files/1.txt"</span><span class="token punctuation">,</span><span class="token string">"uef8"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">r1</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r1<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token parameter">err1</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err1<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"./files/2.txt"</span><span class="token punctuation">,</span><span class="token string">"uef8"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">r2</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r2<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token parameter">err2</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err2<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"./files/3.txt"</span><span class="token punctuation">,</span><span class="token string">"uef8"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">r3</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r3<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token parameter">err3</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err3<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>但是上述并不按顺序读取，还是异步，改造如下：</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> thenFs <span class="token keyword">from</span> <span class="token string">"then-fs"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 按顺序读取 1.txt  2.txt   3.txt</span></pre></td></tr><tr><td data-num="3"></td><td><pre>thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"./files/1.txt"</span><span class="token punctuation">,</span><span class="token string">"uef8"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">r1</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">return</span> thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"./files/2.txt"</span><span class="token punctuation">,</span><span class="token string">"uef8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                           </pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">r2</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">return</span> thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"./files/3.txt"</span><span class="token punctuation">,</span><span class="token string">"uef8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">r3</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r3<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h1 id="catch"><a class="anchor" href="#catch">#</a> .catch()</h1>
<p>在 Promise 链式操作如果发生了错误，就可以使用 Promise.prototype.catch 方法进行捕获和处理</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"./files/1.txt"</span><span class="token punctuation">,</span><span class="token string">"uef8"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">r1</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">return</span> thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"./files/2.txt"</span><span class="token punctuation">,</span><span class="token string">"uef8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                           </pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">r2</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">return</span> thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"./files/3.txt"</span><span class="token punctuation">,</span><span class="token string">"uef8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">r3</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r3<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment">// 这里是读取所有错误信息，位置可以前提，但是前提意思不一样</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h1 id="promiseall"><a class="anchor" href="#promiseall">#</a> Promise.all()</h1>
<p>Promise.all () 方法会发起并行的 Promise 异步操作，<strong>等所有的异步操作</strong>结束后才会执行下一步的.then () 操作，结果会呈现一个数组方式  等待机制</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> thenFs <span class="token keyword">from</span> <span class="token string">"then-fs"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> PromiseAll<span class="token operator">=</span><span class="token punctuation">[</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"./1.txt"</span><span class="token punctuation">,</span><span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"./2.txt"</span><span class="token punctuation">,</span><span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"./3.txt"</span><span class="token punctuation">,</span><span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="7"></td><td><pre>Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>promiseAll<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>  </pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment">// 按 PromiseAll 顺序进行出来结果，以数组方式呈现</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>  </pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h1 id="promiserace"><a class="anchor" href="#promiserace">#</a> Promise.race()</h1>
<p>与 Promise.all 方式不同，Promise.all () 等待机制等所有异步操作执行完才调用.then () 方法，Promise.race () 是赛跑机制，哪个快哪个出结果快，立即调用.then () 方法</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> thenFs <span class="token keyword">from</span> <span class="token string">"then-fs"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> PromiseRace<span class="token operator">=</span><span class="token punctuation">[</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"./1.txt"</span><span class="token punctuation">,</span><span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"./2.txt"</span><span class="token punctuation">,</span><span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"./3.txt"</span><span class="token punctuation">,</span><span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="7"></td><td><pre>Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span>promiseAll<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>  </pre></td></tr><tr><td data-num="9"></td><td><pre>   <span class="token comment">// 结果顺序不一，看 promiseRace 里面哪个执行快</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>  </pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h1 id="封装异步读文件"><a class="anchor" href="#封装异步读文件">#</a> 封装异步读文件</h1>
<p>getFile.js</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> thenFs <span class="token keyword">from</span> <span class="token string">"then-fs"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">getFile</span><span class="token punctuation">(</span><span class="token parameter">fPath</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>fPath<span class="token punctuation">,</span><span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>           <span class="token keyword">return</span> <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token keyword">return</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>调用</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token string">"./getFile.js"</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token string">"1.txt"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>promise</category>
      </categories>
      <tags>
        <tag>promise</tag>
      </tags>
  </entry>
  <entry>
    <title>React路由</title>
    <url>/2022/04/27/React%E8%B7%AF%E7%94%B1/</url>
    <content><![CDATA[<h1 id="react路由介绍"><a class="anchor" href="#react路由介绍">#</a> react 路由介绍</h1>
<p>现在前端大多是 SPA（单页面应用程序）也就是只有一个 HTML 页面的应用程序。因为它的用户体验更好，所以更受欢迎。为了有效的使用单个页面来管理原来多页面的功能，前端理由应运而生</p>
<ul>
<li>前端路由功能：让用户从一个视图导航到另外一个视图</li>
<li>前端路由是一套映射规则，在 React 中，是 URL 与组件的对应关系</li>
<li>使用 React 路由简单来说，就是配置路径和组件（配对）</li>
</ul>
<h1 id="基本使用"><a class="anchor" href="#基本使用">#</a> 基本使用</h1>
<ul>
<li>安装 yarn add react-router-dom/npm i react-router-dom</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>npm i react<span class="token operator">-</span>router<span class="token operator">-</span>dom@<span class="token number">5.2</span><span class="token number">.0</span> <span class="token comment">//V5 版本学习</span></pre></td></tr></table></figure><ul>
<li>导入路由三个核心组件、Router/Route/Link</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>BrowserRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span>Route<span class="token punctuation">,</span>Link<span class="token punctuation">&#125;</span> from “react<span class="token operator">-</span>router<span class="token operator">-</span>dom” <span class="token comment">// 放在第一位</span></pre></td></tr></table></figure><ul>
<li>使用 Router 包含整个应用</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">App</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">&lt;</span>Router<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token operator">&lt;</span>h1<span class="token operator">></span>React路由基本使用<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">)</span></pre></td></tr></table></figure><ul>
<li>使用 Link 组件作为导航菜单（路由入口）</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/first"</span><span class="token operator">></span> 页面<span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span></pre></td></tr></table></figure><ul>
<li>使用 Route 组件作为配置路由规则和要展示的组件（路由规则）  (V5 版本！！！)</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">First</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token operator">&lt;</span>p<span class="token operator">></span>页面<span class="token number">1</span>的了内容<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">&lt;</span>Router<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>     <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/first"</span><span class="token operator">></span>页面一<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre>     <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/first"</span> component<span class="token operator">=</span><span class="token punctuation">&#123;</span>First<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">></span></pre></td></tr></table></figure><p>基本使用完整代码</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>BrowserRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Link<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"react-router-dom"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createRoot <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">createRoot</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>  </pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">First</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token operator">&lt;</span>p<span class="token operator">></span>页面<span class="token number">1</span>的内容<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 将打包好的 P 渲染在 UI</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">const</span> app<span class="token operator">=</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token operator">&lt;</span>Router<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre> <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/first"</span><span class="token operator">></span>页面<span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre> <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/first"</span> component<span class="token operator">=</span><span class="token punctuation">&#123;</span>First<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">></span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 渲染页面</span></pre></td></tr></table></figure><h1 id="常用组件说明"><a class="anchor" href="#常用组件说明">#</a> 常用组件说明</h1>
<ul>
<li><strong>BrowserRouter</strong>：推荐用 BrowserRouter 代替 HashRouter</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>BrowserRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span>Route<span class="token punctuation">,</span>Link<span class="token punctuation">&#125;</span> from “react<span class="token operator">-</span>router<span class="token operator">-</span>dom” <span class="token comment">// 地址 http://localhost:3000/first</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>HashRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span>Route<span class="token punctuation">,</span>Link<span class="token punctuation">&#125;</span> from “react<span class="token operator">-</span>router<span class="token operator">-</span>dom” <span class="token comment">// 哈希地址 http://localhost:3000/#/first</span></pre></td></tr></table></figure><ul>
<li>Link 组件：用于导航链接（a 标签）</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/first"</span><span class="token operator">></span>页面<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span></pre></td></tr></table></figure><ul>
<li>Route 组件：指定路由展示组件的相关信息</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//path 属性：路由规则</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">//component 组件：展示的组件</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">//Route 组件写在哪里，渲染出来的组件就展示在哪里</span></pre></td></tr><tr><td data-num="4"></td><td><pre> <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/first"</span> component<span class="token operator">=</span><span class="token punctuation">&#123;</span>First<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">></span></pre></td></tr></table></figure><h1 id="路由执行过程"><a class="anchor" href="#路由执行过程">#</a> 路由执行过程</h1>
<ul>
<li>点击 Link 组件即 a 标签，修改浏览器地址中的 url</li>
<li>React 路由监听到地址栏的 url 的变化</li>
<li>React 路由内部遍历所有 Route 组件，使用路由规则 path 与 pathname 进行匹配</li>
<li>当路由规则 path 能够匹配到 pathname 时，就展示该 Route 组件内部内容</li>
</ul>
<h1 id="编程式导航"><a class="anchor" href="#编程式导航">#</a> 编程式导航</h1>
<ul>
<li>场景：点击登录按钮，登录成功跳到后台首页</li>
<li>编程式岛上，通过 JS 代码实现页面跳转</li>
<li>history 是 React 路由提供的，用于获取浏览器历史记录的信息</li>
<li>push (path), 跳转到某个页面，参数 path 表示要跳转的 1 路径</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Login</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>PureComponent</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token operator">...</span><span class="token punctuation">.</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function-variable function">handleClick</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"/home"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 去到首页</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token function-variable function">handleReturn</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>     <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 返回</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">return</span> <span class="token operator">...</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>登录后台案例</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">...</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Login</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>PureComponent</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token function-variable function">handleLogin</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"/home"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>		<span class="token operator">&lt;</span>p<span class="token operator">></span>登录页面内容<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>		<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleLogin<span class="token punctuation">&#125;</span><span class="token operator">></span>登录<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>PureComponent</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token function-variable function">handleReturn</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="22"></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="23"></td><td><pre>		<span class="token operator">&lt;</span>p<span class="token operator">></span>后台页面内容<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="24"></td><td><pre>		<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleReturn<span class="token punctuation">&#125;</span><span class="token operator">></span>返回登录页面<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="25"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="26"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token comment">// 将打包好的 P 渲染在 UI</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token keyword">const</span> app<span class="token operator">=</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token operator">&lt;</span>Router<span class="token operator">></span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="34"></td><td><pre> <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/login"</span><span class="token operator">></span>去往登录页面<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span></pre></td></tr><tr><td data-num="35"></td><td><pre> <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/login"</span> component<span class="token operator">=</span><span class="token punctuation">&#123;</span>Login<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">></span></pre></td></tr><tr><td data-num="36"></td><td><pre> <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/home"</span> component<span class="token operator">=</span><span class="token punctuation">&#123;</span>Home<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">></span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">></span></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token operator">...</span></pre></td></tr></table></figure><h1 id="默认路由"><a class="anchor" href="#默认路由">#</a> 默认路由</h1>
<ul>
<li>默认路由 path:/</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/"</span> component<span class="token operator">=</span><span class="token punctuation">&#123;</span>Home<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">></span></pre></td></tr></table></figure><h1 id="匹配模式"><a class="anchor" href="#匹配模式">#</a> 匹配模式</h1>
<h2 id="模糊匹配模式"><a class="anchor" href="#模糊匹配模式">#</a> 模糊匹配模式</h2>
<ul>
<li>问题：当 Link 组件的 to 属性为 “/login” 时，为什么默认路由也被匹配成功</li>
<li>默认情况下：React 路由是模糊匹配模式</li>
<li>模糊匹配规则：只要 pathname 以 path 开头就会匹配成功   eg:/ 匹配所有 / 开头的 path  /login 匹配所有 /login 开头的 path /login  /login/a/b/c 等</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/login"</span><span class="token operator">></span>登录页面<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 匹配到下面的两个</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/"</span> component<span class="token operator">=</span><span class="token punctuation">&#123;</span>Home<span class="token punctuation">&#125;</span><span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/login"</span> component<span class="token operator">=</span><span class="token punctuation">&#123;</span>Login<span class="token punctuation">&#125;</span><span class="token operator">></span></pre></td></tr></table></figure><h2 id="精确匹配"><a class="anchor" href="#精确匹配">#</a> 精确匹配</h2>
<ul>
<li>问题：默认路由任何情况都会展示，模糊匹配的文艺</li>
<li>给 Route 组件添加 exact 属性，让其变成精确匹配</li>
<li>精确匹配：只要 path 和 pathname 完全匹配才会展示</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>Route exact path<span class="token operator">=</span><span class="token string">"/"</span> component<span class="token operator">=</span><span class="token punctuation">&#123;</span>Home<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">></span></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>react路由</tag>
      </tags>
  </entry>
  <entry>
    <title>TypeScript</title>
    <url>/2021/10/08/TypeScript/</url>
    <content><![CDATA[<h1 id="定义"><a class="anchor" href="#定义">#</a> 定义</h1>
<p>TypeScript，通俗来说就是 JavaScript 的增强版。<strong>让所有的变量和属性有一个具体类型。</strong></p>
<p><strong>好处</strong></p>
<ol>
<li>开发过程中，发现潜在问题</li>
<li>更友好的编辑器自动提示</li>
</ol>
<p>demo.ts</p>
<figure class="highlight typescript"><figcaption data-lang="typescript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">type</span> <span class="token class-name">Point</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>x<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span>y<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">tsDemo</span><span class="token punctuation">(</span>data<span class="token operator">:</span>Point<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>x<span class="token operator">**</span><span class="token number">2</span><span class="token operator">+</span>data<span class="token punctuation">.</span>y<span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">tsDemo</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>x<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>y<span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h1 id="环境基础"><a class="anchor" href="#环境基础">#</a> 环境基础</h1>
<ul>
<li>安装 Node.js    <code>官网看安装教程</code></li>
<li>安装 typescript    <code>npm i typescript -g   </code></li>
<li>安装 ts-mode   <code>npm i ts-node -g</code></li>
</ul>
<p><strong>复杂运行</strong>：ts 文件不能直接运行。运行 typescript 文件，先把 ts 文件装换成 js 文件，才能运行</p>
<ol>
<li>生为 js 文件命令   tsc demo.ts</li>
<li>运行 js 文件  node demo.js</li>
</ol>
<p><strong>简易运行</strong>：安装 ts-node 直接运行</p>
<ol>
<li>安装 ts-node  <code>npm i ts-node -g</code></li>
<li>运行 ts 文件   <code>ts-node demo.ts</code></li>
</ol>
<h1 id="静态类型"><a class="anchor" href="#静态类型">#</a> 静态类型</h1>
<h2 id="基础类型"><a class="anchor" href="#基础类型">#</a> 基础类型</h2>
<p>将类型固定，以便提示编写和减少代码差错性</p>
<ul>
<li>基础类型：number string undefined symol boolean void null</li>
<li>对象类型 数组 对象 类</li>
</ul>
<figure class="highlight typescript"><figcaption data-lang="typescript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">interface</span> <span class="token class-name">Point</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  x<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  y<span class="token operator">:</span><span class="token builtin">number</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> counter<span class="token operator">:</span>Point<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  x<span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  y<span class="token operator">:</span><span class="token number">34</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">const</span> x<span class="token operator">:</span><span class="token builtin">number</span><span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>x<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 自动有提示数字的一些方法</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 基础类型  number string undefined symol boolean void null</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">let</span> count<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>count<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">let</span> tName<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>tName<span class="token operator">=</span><span class="token string">'lll'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">// 对象类型</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">const</span> teacher<span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  age<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span><span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  name<span class="token operator">:</span><span class="token string">'kkk'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="23"></td><td><pre>  age；<span class="token number">18</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token keyword">const</span> numbers<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>consr dell<span class="token operator">:</span>Person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment">// 定义返回类型</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">getTotal</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token function-variable function">number</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>  <span class="token keyword">return</span> <span class="token number">123</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token comment">// 两个类型</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token keyword">let</span> temp<span class="token operator">:</span> <span class="token builtin">number</span><span class="token operator">|</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>temp<span class="token operator">=</span><span class="token string">'kkk'</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="类型注解type-annotation"><a class="anchor" href="#类型注解type-annotation">#</a> 类型注解 type annotation</h2>
<ul>
<li>
<p>我们告诉 ts 是什么类型</p>
<figure class="highlight typescript"><figcaption data-lang="typescript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> count<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">;</span>  </pre></td></tr><tr><td data-num="2"></td><td><pre>count<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li>
</ul>
<h2 id="类型推断type-inference"><a class="anchor" href="#类型推断type-inference">#</a> 类型推断 type inference</h2>
<ul>
<li>
<p>通过赋值自动推断是什么类型</p>
<figure class="highlight typescript"><figcaption data-lang="typescript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> firstNum<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> secondNum<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">let</span> count2<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">;</span> <span class="token comment">// 推断是 number</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">function</span> <span class="token function">getTotal</span><span class="token punctuation">(</span>firstNumber<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span>secondNumber<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">return</span> firstNumber<span class="token operator">+</span>secondNumber<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">const</span> total<span class="token operator">=</span><span class="token function">getTotal</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 推断 total 是 number 类型</span></pre></td></tr></table></figure></li>
</ul>
<h1 id="函数相关类型"><a class="anchor" href="#函数相关类型">#</a> 函数相关类型</h1>
<ul>
<li>
<p>函数推断可以推出返回值什么类型，但是不加当代码出错时推断会出错</p>
<figure class="highlight typescript"><figcaption data-lang="typescript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>first<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span>second<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">return</span> first<span class="token operator">+</span>second<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> a<span class="token operator">=</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">//never 返回一个 never 不能停止类型</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">function</span> <span class="token function">errorEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">never</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">function</span> <span class="token function">errorEmitter2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">never</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">// 解构语法</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">function</span> <span class="token function">getNumber</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>first<span class="token punctuation">&#125;</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>first<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token keyword">return</span> first<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
</ul>
<h1 id="数组"><a class="anchor" href="#数组">#</a> 数组</h1>
<ul>
<li>分析如代码</li>
</ul>
<figure class="highlight typescript"><figcaption data-lang="typescript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 数组 只存数字</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">let</span> newArr<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 数组 只存字符</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">let</span> newArr<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'d'</span><span class="token punctuation">,</span><span class="token string">'f'</span><span class="token punctuation">,</span><span class="token string">'h'</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 数组 只存数字或者字符</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">let</span> newArr<span class="token operator">:</span><span class="token punctuation">(</span><span class="token builtin">number</span><span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'l'</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 数组 对象</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">const</span> objArr<span class="token operator">:</span><span class="token punctuation">&#123;</span>name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">&#125;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  name<span class="token operator">:</span><span class="token string">'ll'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  age<span class="token operator">:</span><span class="token number">16</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">// 数组 对象  ---  类型别名</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">type</span> <span class="token class-name">User</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">const</span> objArr<span class="token operator">:</span>User<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  name<span class="token operator">:</span><span class="token string">'ll'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  age<span class="token operator">:</span><span class="token number">16</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment">// 数组 对象  ---  类</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">User2</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  age<span class="token operator">:</span><span class="token builtin">number</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token keyword">const</span> objArr<span class="token operator">:</span>User2<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>  name<span class="token operator">:</span><span class="token string">'ll'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  age<span class="token operator">:</span><span class="token number">16</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">]</span></pre></td></tr></table></figure><h1 id="元组tuple"><a class="anchor" href="#元组tuple">#</a> 元组 tuple</h1>
<ul>
<li>约束每一项类型</li>
</ul>
<figure class="highlight typescript"><figcaption data-lang="typescript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 元组 约定数组中每一个类型 对应 第一第二为 string 第三 number</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> teacherInfo<span class="token operator">:</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span><span class="token builtin">string</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'lll'</span><span class="token punctuation">,</span><span class="token string">'kkk'</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> teacherList<span class="token operator">:</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span><span class="token builtin">string</span><span class="token punctuation">,</span><span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">[</span><span class="token string">'dell'</span><span class="token punctuation">,</span><span class="token string">'mail'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">[</span><span class="token string">'sell'</span><span class="token punctuation">,</span><span class="token string">'mail'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">[</span><span class="token string">'jell'</span><span class="token punctuation">,</span><span class="token string">'mail'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">]</span></pre></td></tr></table></figure><h1 id="接口interface"><a class="anchor" href="#接口interface">#</a> 接口 interface</h1>
<ul>
<li>有通用性的类型别名的集合</li>
<li>帮助开发时语法检验，并不会转换为真正的代码</li>
</ul>
<figure class="highlight typescript"><figcaption data-lang="typescript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 定义通用类型 Person 具备 name age 属性</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">interface</span> <span class="token class-name">Person</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">readonly</span> name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span>   <span class="token comment">// 只读属性 readonly</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token operator">?</span>age<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// 加？表示可有可无</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">[</span>propName<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token builtin">any</span>； <span class="token comment">// 可以有一个 string 名字的属性 类型任何</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 继承接口 Teacher 此时具备 User 所有属性方法定义</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">interface</span> <span class="token class-name">Teacher</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token function">teach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">// 接口定义函数</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">interface</span> <span class="token class-name">SayHi</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token punctuation">(</span>word<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">string</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">const</span> say<span class="token operator">:</span><span class="token function-variable function">SayHi</span><span class="token operator">=</span><span class="token punctuation">(</span>word<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token keyword">return</span> word<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">const</span> getPersonName<span class="token operator">=</span><span class="token punctuation">&#123;</span>person<span class="token operator">:</span>Person<span class="token punctuation">&#125;</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token comment">// 这里必须传 Person 一样的属性</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token keyword">const</span> person<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>  name<span class="token operator">:</span><span class="token string">'ppp'</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token comment">//person 里面的属性相对于接口 Person 可多不可少</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token function">getPersonName</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token function">getPersonName</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>  name<span class="token operator">:</span><span class="token string">'ppp'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="33"></td><td><pre>  age<span class="token operator">:</span><span class="token number">13</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="34"></td><td><pre>  sex<span class="token operator">:</span><span class="token number">1</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 字面量这样传会进行强校验，不妥</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token comment">// 类应用接口</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Person</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>  name<span class="token operator">=</span><span class="token string">'lll'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="39"></td><td><pre>  <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>      <span class="token keyword">return</span> <span class="token string">'hello'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h1 id="类class"><a class="anchor" href="#类class">#</a> 类 class</h1>
<ul>
<li>如下代码</li>
<li>不写类型默认为 public</li>
<li>public 类内类外都可用</li>
<li>private 只在类内使用</li>
<li>protected 在类内和继承的子类中使用</li>
<li>继承 constructor 要调用 super ()</li>
</ul>
<figure class="highlight typescript"><figcaption data-lang="typescript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// 传统写法</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">public</span> name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token comment">// 简化写法</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">const</span> person<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'dell'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Teacher</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> age<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token string">'lll'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 调父类的 constructor，按要求是否传值 调 super ()</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="gettersetter"><a class="anchor" href="#gettersetter">#</a> getter/setter</h2>
<figure class="highlight typescript"><figcaption data-lang="typescript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> _name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">get</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword">set</span> <span class="token function">seName</span><span class="token punctuation">(</span>name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">const</span> realName<span class="token operator">=</span>name<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>_name<span class="token operator">=</span>realName<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>person<span class="token punctuation">.</span>getName<span class="token punctuation">;</span> <span class="token comment">//getter 不需要 () 调用</span></pre></td></tr><tr><td data-num="13"></td><td><pre>person<span class="token punctuation">.</span>setName<span class="token operator">=</span><span class="token string">'dell lee'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>getName<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>typescript</tag>
      </tags>
  </entry>
  <entry>
    <title>VSCode常用快捷键</title>
    <url>/2020/12/05/VSCode%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/</url>
    <content><![CDATA[<h3 id="常用快捷键"><a class="anchor" href="#常用快捷键">#</a> 常用快捷键</h3>
<p><strong>按 <code>Ctrl+Shift+P</code>  或者 F1，输入 <code>shortcuts</code>  回车就可以看到快捷键文档</strong></p>
<ul>
<li><code>Shift + Alt + F</code> : 代码格式化</li>
<li><code>Ctrl + A</code> : 全选</li>
<li><code>Ctrl + N</code> : 新建一个文件</li>
<li><code>Ctrl + P</code> : 快速打开，选择相应文件打开</li>
<li><code>Ctrl + Shift + N</code> : 打开一个新窗口</li>
<li><code>Ctrl + Shift + W</code> : 关闭当前窗口</li>
<li><code>Ctrl+K Ctrl+S</code> : 自定义命令</li>
<li><code>Ctrl + B</code> : 折叠资源管理器</li>
<li><code>Ctrl + G</code> : 然后输入行数就能跳转到具体一行</li>
<li><code>Shift + Alt + I</code> : 选中的文本末尾加光标</li>
<li><code>F2</code> : 选中重命名变量</li>
</ul>
<h3 id="常用编辑快捷键"><a class="anchor" href="#常用编辑快捷键">#</a> 常用编辑快捷键</h3>
<ul>
<li>
<p><code>！</code>  快速生成一套 html 结构</p>
</li>
<li>
<p><code>tab </code> 后退缩进</p>
</li>
<li>
<p><code>shift+tab</code>  消除缩进</p>
</li>
<li>
<p><code>alt+b</code>  浏览器打开</p>
</li>
<li>
<p><code>Ctrl+/</code>   注释快捷键</p>
</li>
<li>
<p><code>Ctrl+enter</code>   光标定位在下一行</p>
</li>
<li>
<p><code>alt+shif+向下箭头键</code>      复制当前行</p>
</li>
<li>
<p><code>alt+鼠标定位 </code>  光标移动</p>
</li>
<li>
<p><code>alt+shift+鼠标拉动</code>   多行光标定位</p>
</li>
<li>
<p><code>Ctrl+↑/↓</code>  把该行代码与上行或下行代码互换</p>
</li>
<li>
<p><code>Ctrl+Shift+↑/↓</code>  选择多行</p>
</li>
<li>
<p><code>Ctrl+Shift+K</code>  删除该行 (有时候会与输入法的快捷键相冲突)</p>
</li>
<li>
<p><code>Ctrl+Enter</code>  向下另起一行</p>
</li>
<li>
<p><code>Ctrl+Shift+Enter</code>  向上另起一行</p>
</li>
<li>
<p><code>Ctrl+Shift+\</code>  跳到括号的首或尾</p>
</li>
<li>
<p><code>Ctrl+]/[</code>  该行向前或向后总体移</p>
</li>
<li>
<p><code>Home/End</code>  跳到首或尾</p>
</li>
<li>
<p><code>Ctrl+Home</code>  跳到该文件的首</p>
</li>
<li>
<p><code>Ctrl+End</code>  跳到该文件的尾部</p>
</li>
<li>
<p><code>Ctrl+PgUp/PgDn</code>  跳到头部</p>
</li>
<li>
<p><code>Ctrl+Shift+[/]</code>  折叠或者展开</p>
</li>
</ul>
<h3 id="导航"><a class="anchor" href="#导航">#</a> 导航</h3>
<ul>
<li><code>Shift+F8</code>  去查看编辑器报错或者警告的地方</li>
<li><code>Alt+←/→</code>  向前 / 后一个块</li>
<li><code>Ctrl+Shift+Tab</code>  查看文件</li>
<li><code>Ctrl+F</code>  查找</li>
<li><code>Ctrl+H</code>  替换</li>
<li><code>Alt+Enter</code>  选中当前鼠标光标的词，然后匹配所有的相同内容的词组</li>
<li><code>Ctrl+D</code>  选中词组并匹配下一个相同的词组</li>
<li><code>Ctrl+Alt+↓</code>  倒置编辑器</li>
<li><code>Ctrl+U</code>  撤销上一个光标的动作</li>
<li><code>Shift+Alt+↑</code>  把该行上移</li>
<li><code>Ctrl+I</code>  选择光标的一行并且光标到下一行</li>
</ul>
]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>vscode</tag>
      </tags>
  </entry>
  <entry>
    <title>TypeScript与爬虫</title>
    <url>/2021/10/23/TypeScript%E4%B8%8E%E7%88%AC%E8%99%AB/</url>
    <content><![CDATA[]]></content>
      <tags>
        <tag>爬虫</tag>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Interview</title>
    <url>/2021/08/08/Vue%20interview/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>Interview</category>
      </categories>
  </entry>
  <entry>
    <title>async/await</title>
    <url>/2021/08/19/async%20await/</url>
    <content><![CDATA[<p>async/await 是 ES8 引入的新语法，用来简化 Promise 异步操作。在 async/await 出现之前，开发者只能通过链式.then () 方法处理 Promise 异步操作。    <code>外层async</code>  修饰此方法     内层 <code>await</code> + <code>（Promise对象）</code></p>
<p>读取文件 getFile.js</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> thenFs <span class="token keyword">from</span> <span class="token string">"then-fs"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">async</span> <span class="token function">getFile</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// 实现 顺序读取</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">const</span> r1<span class="token operator">=</span> <span class="token keyword">await</span> thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"1.txt"</span><span class="token punctuation">,</span><span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">const</span> r2<span class="token operator">=</span> <span class="token keyword">await</span> thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"2.txt"</span><span class="token punctuation">,</span><span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">const</span> r3<span class="token operator">=</span> <span class="token keyword">await</span> thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"3.txt"</span><span class="token punctuation">,</span><span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r3<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>注意事项：</strong></p>
<ul>
<li>内部用了 <code>await</code> ，外层 function 必须加上 <code>async</code></li>
<li>在 async 方法时，第一 await 之前的代码同步执行，比如说下图中的 <code>B</code> ，之后的异步执行，比如说下图中的 <code>r1 r2 r3</code>  和  <code>D</code></li>
</ul>
<p><img data-src="../images/async%20await/1650276464727.png" alt="1650276464727" /></p>
]]></content>
      <categories>
        <category>async/await</category>
      </categories>
      <tags>
        <tag>异步</tag>
        <tag>async/await</tag>
      </tags>
  </entry>
  <entry>
    <title>canvas基础</title>
    <url>/2020/12/28/canvas%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<h2 id="概述什么是-canvas"><a class="anchor" href="#概述什么是-canvas">#</a> 概述 —— 什么是 Canvas</h2>
<blockquote>
<p>canvas 这个元素负责在页面中设定一个区域，然后通过 JS 动态的在这个区域中绘制图形。</p>
</blockquote>
<h2 id="语法"><a class="anchor" href="#语法">#</a> 语法</h2>
<h3 id="基本介绍"><a class="anchor" href="#基本介绍">#</a> 基本介绍</h3>
<p>一般前两个都是要画元素的开始坐标，后两个一般是要画元素本身的配置</p>
<h3 id="strokerect"><a class="anchor" href="#strokerect">#</a> strokeRect()</h3>
<p>绘制一个无填充矩形</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>ctx<span class="token punctuation">.</span><span class="token function">strokeRect</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 等同于</span></pre></td></tr><tr><td data-num="3"></td><td><pre>ctx<span class="token punctuation">.</span><span class="token function">rect</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="fillrect"><a class="anchor" href="#fillrect">#</a> fillRect()</h3>
<p>绘制一个填充矩形</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 等同于</span></pre></td></tr><tr><td data-num="3"></td><td><pre>ctx<span class="token punctuation">.</span><span class="token function">rect</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="beginpath"><a class="anchor" href="#beginpath">#</a> beginPath()</h3>
<p>起始一条路径或者重置当前路径</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="translate"><a class="anchor" href="#translate">#</a> translate();</h3>
<p>改变画布的 (0, 0) 点也就是原点</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="moveto和-lineto"><a class="anchor" href="#moveto和-lineto">#</a> moveTo () 和 lineTo ()</h3>
<p>前一个是把路径移动到指定点，后一个是添加一个新点，两者往往一起使用</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="arc"><a class="anchor" href="#arc">#</a> arc()</h3>
<p>画圆的基本语法</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 最后一个参数为可选参数，默认 false 为逆时针</span></pre></td></tr><tr><td data-num="2"></td><td><pre>ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="rotate"><a class="anchor" href="#rotate">#</a> rotate()</h3>
<p>旋转的基本语法</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">20</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="clearrect"><a class="anchor" href="#clearrect">#</a> clearRect()</h3>
<p>清除画布的基本语法</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="canvas-的使用"><a class="anchor" href="#canvas-的使用">#</a> canvas 的使用</h2>
<h3 id="在-html-页面插入-canvas"><a class="anchor" href="#在-html-页面插入-canvas">#</a> 在 html 页面插入 canvas</h3>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>200<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>200<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="插入一张图片"><a class="anchor" href="#插入一张图片">#</a> 插入一张图片</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#content"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">let</span> ctx <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">let</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>image<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> content<span class="token punctuation">.</span>width<span class="token punctuation">,</span> content<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token comment">// 加入文字渲染</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">"36pt Impact"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  ctx<span class="token punctuation">.</span>textAlign <span class="token operator">=</span> <span class="token string">"center"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"#fff"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span><span class="token string">"This is a pug"</span><span class="token punctuation">,</span> content<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">"#000"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  ctx<span class="token punctuation">.</span><span class="token function">strokeText</span><span class="token punctuation">(</span><span class="token string">"This is a pug"</span><span class="token punctuation">,</span> content<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>image<span class="token punctuation">.</span>src <span class="token operator">=</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token string">"https://upload.wikimedia.org/wikipedia/commons/f/f3/Mops-duke-mopszucht-vom-maegdebrunnen.jpg"</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="绘制一个时钟"><a class="anchor" href="#绘制一个时钟">#</a> 绘制一个时钟</h3>
<p><strong>参考代码</strong></p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token selector">body</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token selector">#clock</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token property">margin-top</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #eee<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clock<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token keyword">let</span> clock <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#clock'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token keyword">let</span> ctx <span class="token operator">=</span> clock<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token keyword">let</span> r <span class="token operator">=</span> ctx<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token keyword">let</span> rem <span class="token operator">=</span> ctx<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">200</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token keyword">function</span> <span class="token function">drawclock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>            ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">*</span> rem<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> r <span class="token operator">-</span> <span class="token number">5</span> <span class="token operator">*</span> rem<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token keyword">let</span> font <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>            <span class="token keyword">let</span> rad <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">12</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            <span class="token keyword">let</span> fontR <span class="token operator">=</span> r <span class="token operator">-</span> <span class="token number">30</span> <span class="token operator">*</span> rem<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>            ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token number">18</span> <span class="token operator">*</span> rem <span class="token operator">+</span> <span class="token string">"px Arial"</span></pre></td></tr><tr><td data-num="38"></td><td><pre>            ctx<span class="token punctuation">.</span>textAlign <span class="token operator">=</span> <span class="token string">"center"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>            ctx<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">"middle"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>            font<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">num<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>                <span class="token keyword">let</span> x <span class="token operator">=</span> fontR <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>i <span class="token operator">*</span> rad<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>                <span class="token keyword">let</span> y <span class="token operator">=</span> fontR <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>i <span class="token operator">*</span> rad<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>                ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    </pre></td></tr><tr><td data-num="46"></td><td><pre>            <span class="token comment">// 画外围小圆</span></pre></td></tr><tr><td data-num="47"></td><td><pre>            <span class="token keyword">let</span> radForSixty <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>            <span class="token keyword">let</span> smallRad <span class="token operator">=</span> r <span class="token operator">-</span> <span class="token number">15</span> <span class="token operator">*</span> rem<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">60</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>                ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>                <span class="token keyword">let</span> x <span class="token operator">=</span> smallRad <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>i <span class="token operator">*</span> radForSixty<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>                <span class="token keyword">let</span> y <span class="token operator">=</span> smallRad <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>i <span class="token operator">*</span> radForSixty<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>                <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>                    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'#000'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>                    ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> rem<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>                    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'#eee'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>                    ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> rem<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>                <span class="token punctuation">&#125;</span>        </pre></td></tr><tr><td data-num="60"></td><td><pre>                </pre></td></tr><tr><td data-num="61"></td><td><pre>                ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="63"></td><td><pre></pre></td></tr><tr><td data-num="64"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre></pre></td></tr><tr><td data-num="66"></td><td><pre>        <span class="token comment">// 画时针</span></pre></td></tr><tr><td data-num="67"></td><td><pre>        <span class="token keyword">function</span> <span class="token function">drawHour</span><span class="token punctuation">(</span><span class="token parameter">hour<span class="token punctuation">,</span> min</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>            <span class="token keyword">let</span> hourRad <span class="token operator">=</span> hour <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">6</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>            <span class="token keyword">let</span> minRad <span class="token operator">=</span> min <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">360</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>hourRad <span class="token operator">+</span> minRad<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="72"></td><td><pre>            <span class="token keyword">let</span> len <span class="token operator">=</span> r <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">20</span> <span class="token operator">*</span> rem<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="73"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="74"></td><td><pre>            ctx<span class="token punctuation">.</span>lineCap <span class="token operator">=</span> <span class="token string">"round"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="75"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token operator">*</span> rem<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="76"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="77"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="78"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="79"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="80"></td><td><pre></pre></td></tr><tr><td data-num="81"></td><td><pre>        <span class="token keyword">function</span> <span class="token function">drawMinute</span><span class="token punctuation">(</span><span class="token parameter">min</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="82"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="83"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="84"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>min <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="85"></td><td><pre>            ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">*</span> rem<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="86"></td><td><pre>            <span class="token keyword">let</span> len <span class="token operator">=</span> r <span class="token operator">-</span> <span class="token number">45</span> <span class="token operator">*</span> rem<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="87"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="88"></td><td><pre>            ctx<span class="token punctuation">.</span>lineCap <span class="token operator">=</span> <span class="token string">"round"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="89"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token operator">*</span> rem<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="90"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="91"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="92"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="93"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="94"></td><td><pre></pre></td></tr><tr><td data-num="95"></td><td><pre>        <span class="token keyword">function</span> <span class="token function">drawSecond</span><span class="token punctuation">(</span><span class="token parameter">second</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="96"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="97"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="98"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>second <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="99"></td><td><pre>            ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="100"></td><td><pre>            <span class="token keyword">let</span> len <span class="token operator">=</span> r <span class="token operator">-</span> <span class="token number">20</span> <span class="token operator">*</span> rem<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="101"></td><td><pre>            ctx<span class="token punctuation">.</span>lineCap <span class="token operator">=</span> <span class="token string">"round"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="102"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token operator">*</span> rem<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="103"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="104"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="105"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token operator">*</span> rem<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="106"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="107"></td><td><pre></pre></td></tr><tr><td data-num="108"></td><td><pre>            <span class="token comment">// 画中心小圆</span></pre></td></tr><tr><td data-num="109"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="110"></td><td><pre>            ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'#fff'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="111"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token operator">*</span> rem<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="112"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="113"></td><td><pre>             ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="114"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="115"></td><td><pre>        <span class="token comment">// drawclock();</span></pre></td></tr><tr><td data-num="116"></td><td><pre></pre></td></tr><tr><td data-num="117"></td><td><pre>        <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="118"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="119"></td><td><pre>            <span class="token comment">// ctx.translate(-r, -r);</span></pre></td></tr><tr><td data-num="120"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">*</span> r<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="121"></td><td><pre>            <span class="token comment">// ctx.translate(r, r);</span></pre></td></tr><tr><td data-num="122"></td><td><pre>            <span class="token function">drawclock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="123"></td><td><pre></pre></td></tr><tr><td data-num="124"></td><td><pre>            <span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="125"></td><td><pre>            <span class="token keyword">let</span> hour <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="126"></td><td><pre>            <span class="token keyword">if</span><span class="token punctuation">(</span>hour <span class="token operator">-</span> <span class="token number">12</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="127"></td><td><pre>                hour <span class="token operator">-=</span> <span class="token number">12</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="128"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="129"></td><td><pre>            <span class="token keyword">let</span> minute <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="130"></td><td><pre>            <span class="token keyword">let</span> seconds <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="131"></td><td><pre>            <span class="token comment">// console.log(hour,minute,seconds);</span></pre></td></tr><tr><td data-num="132"></td><td><pre>            </pre></td></tr><tr><td data-num="133"></td><td><pre>            <span class="token function">drawHour</span><span class="token punctuation">(</span>hour<span class="token punctuation">,</span> minute<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="134"></td><td><pre>            <span class="token function">drawMinute</span><span class="token punctuation">(</span>minute<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="135"></td><td><pre>            <span class="token function">drawSecond</span><span class="token punctuation">(</span>seconds<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="136"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="137"></td><td><pre>            <span class="token comment">// console.log(date);</span></pre></td></tr><tr><td data-num="138"></td><td><pre>            </pre></td></tr><tr><td data-num="139"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="140"></td><td><pre>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="141"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="142"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="滑动拼图实现"><a class="anchor" href="#滑动拼图实现">#</a> 滑动拼图实现</h3>
<p>拼图也可以进行随机，多准备几张图，设置 src=[“img1 地址”,“img2 地址”]；进行随机获取用 Math.random ()</p>
<p><strong>参考代码</strong></p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre> </pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>简易滑动拼图解锁<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token selector">*</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>            <span class="token property">margin</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token property">padding</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        </pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token selector">img,</pre></td></tr><tr><td data-num="16"></td><td><pre>        canvas</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        </pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token selector">img</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        </pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token selector">#myCanvas</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        </pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token selector">.verify</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token property">background-color</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>            <span class="token property">line-height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>            <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        </pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token selector">.verify .slide</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>            <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>            <span class="token property">width</span><span class="token punctuation">:</span> 55px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>            <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>            <span class="token property">background-color</span><span class="token punctuation">:</span> skyblue<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>        <span class="token comment">/* position:relative 移动端左移会滑动 */</span></pre></td></tr><tr><td data-num="47"></td><td><pre>        <span class="token comment">/* position:fixed 解决左移滑动问题 */</span></pre></td></tr><tr><td data-num="48"></td><td><pre>        </pre></td></tr><tr><td data-num="49"></td><td><pre>        <span class="token selector">.lockBox</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>            <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>        </pre></td></tr><tr><td data-num="53"></td><td><pre>        <span class="token selector">.bigBox</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>            <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>            <span class="token property">margin</span><span class="token punctuation">:</span> 10px auto<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="58"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="59"></td><td><pre> </pre></td></tr><tr><td data-num="60"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="61"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bigBox<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="62"></td><td><pre>        <span class="token comment">&lt;!-- 图片 --></span></pre></td></tr><tr><td data-num="63"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lockBox<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="64"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>topCanvas<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="65"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../beauty.png<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>随机拼图<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="66"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myCanvas<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="67"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>block<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="68"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="69"></td><td><pre>            <span class="token comment">&lt;!-- 滑块 --></span></pre></td></tr><tr><td data-num="70"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>verify<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="71"></td><td><pre>                <span class="token comment">&lt;!-- 滑块 --></span></pre></td></tr><tr><td data-num="72"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>slide<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="73"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="74"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="75"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="76"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="77"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="78"></td><td><pre>        <span class="token keyword">const</span> w <span class="token operator">=</span> <span class="token number">300</span> <span class="token comment">//canvas 宽度</span></pre></td></tr><tr><td data-num="79"></td><td><pre>        <span class="token keyword">const</span> h <span class="token operator">=</span> <span class="token number">200</span> <span class="token comment">//canvas 高度</span></pre></td></tr><tr><td data-num="80"></td><td><pre>        <span class="token keyword">const</span> l <span class="token operator">=</span> <span class="token number">55</span> <span class="token comment">// 滑块边长</span></pre></td></tr><tr><td data-num="81"></td><td><pre>        <span class="token keyword">const</span> r <span class="token operator">=</span> <span class="token number">9</span> <span class="token comment">// 滑块半径</span></pre></td></tr><tr><td data-num="82"></td><td><pre>        <span class="token keyword">const</span> <span class="token constant">PI</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span></pre></td></tr><tr><td data-num="83"></td><td><pre>        <span class="token keyword">const</span> <span class="token constant">L</span> <span class="token operator">=</span> l <span class="token operator">+</span> r <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">3</span> <span class="token comment">// 滑块实际边长</span></pre></td></tr><tr><td data-num="84"></td><td><pre> </pre></td></tr><tr><td data-num="85"></td><td><pre>        <span class="token comment">// 拼图滑块</span></pre></td></tr><tr><td data-num="86"></td><td><pre>        <span class="token keyword">var</span> c <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#myCanvas"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="87"></td><td><pre>        <span class="token keyword">var</span> ctx <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="88"></td><td><pre> </pre></td></tr><tr><td data-num="89"></td><td><pre>        <span class="token comment">// 拼图背景图</span></pre></td></tr><tr><td data-num="90"></td><td><pre>        <span class="token keyword">var</span> c2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#block"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="91"></td><td><pre>        <span class="token keyword">var</span> ctx2 <span class="token operator">=</span> c2<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="92"></td><td><pre>        <span class="token keyword">var</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="93"></td><td><pre> </pre></td></tr><tr><td data-num="94"></td><td><pre>        <span class="token comment">// 绘制拼图背景</span></pre></td></tr><tr><td data-num="95"></td><td><pre>        <span class="token keyword">function</span> <span class="token function">drawImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="96"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="97"></td><td><pre>            ctx2<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="98"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="99"></td><td><pre> </pre></td></tr><tr><td data-num="100"></td><td><pre>        img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="101"></td><td><pre>            <span class="token comment">// 初始化拼图</span></pre></td></tr><tr><td data-num="102"></td><td><pre>            <span class="token function">drawImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="103"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="104"></td><td><pre> </pre></td></tr><tr><td data-num="105"></td><td><pre>        <span class="token comment">// 拼图滑块挖掘</span></pre></td></tr><tr><td data-num="106"></td><td><pre>        <span class="token keyword">function</span> <span class="token function">drawPath</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> operation</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="107"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="108"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="109"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>x <span class="token operator">+</span> l <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> y <span class="token operator">-</span> r <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> <span class="token number">0.72</span> <span class="token operator">*</span> <span class="token constant">PI</span><span class="token punctuation">,</span> <span class="token number">2.26</span> <span class="token operator">*</span> <span class="token constant">PI</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="110"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>x <span class="token operator">+</span> l<span class="token punctuation">,</span> y<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="111"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>x <span class="token operator">+</span> l <span class="token operator">+</span> r <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">,</span> y <span class="token operator">+</span> l <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> <span class="token number">1.21</span> <span class="token operator">*</span> <span class="token constant">PI</span><span class="token punctuation">,</span> <span class="token number">2.78</span> <span class="token operator">*</span> <span class="token constant">PI</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="112"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>x <span class="token operator">+</span> l<span class="token punctuation">,</span> y <span class="token operator">+</span> l<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="113"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token operator">+</span> l<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="114"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>x <span class="token operator">+</span> r <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">,</span> y <span class="token operator">+</span> l <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> r <span class="token operator">+</span> <span class="token number">0.4</span><span class="token punctuation">,</span> <span class="token number">2.76</span> <span class="token operator">*</span> <span class="token constant">PI</span><span class="token punctuation">,</span> <span class="token number">1.24</span> <span class="token operator">*</span> <span class="token constant">PI</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="115"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="116"></td><td><pre>            ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="117"></td><td><pre>            ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgba(255, 255, 255, 0.7)'</span></pre></td></tr><tr><td data-num="118"></td><td><pre>            ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'rgba(255, 255, 255, 0.7)'</span></pre></td></tr><tr><td data-num="119"></td><td><pre>            ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="120"></td><td><pre>            ctx<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> <span class="token string">'destination-over'</span><span class="token punctuation">;</span> <span class="token comment">// 重要</span></pre></td></tr><tr><td data-num="121"></td><td><pre>            operation <span class="token operator">===</span> <span class="token string">'fill'</span> <span class="token operator">?</span> ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> ctx<span class="token punctuation">.</span><span class="token function">clip</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="122"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="123"></td><td><pre> </pre></td></tr><tr><td data-num="124"></td><td><pre>        <span class="token comment">// 随机位置但是要同高度</span></pre></td></tr><tr><td data-num="125"></td><td><pre>        <span class="token keyword">function</span> <span class="token function">randomNum</span><span class="token punctuation">(</span><span class="token parameter">start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="126"></td><td><pre>            <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span> <span class="token operator">+</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="127"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="128"></td><td><pre> </pre></td></tr><tr><td data-num="129"></td><td><pre>        <span class="token comment">// 随机位置创建拼图</span></pre></td></tr><tr><td data-num="130"></td><td><pre>        <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token function">randomNum</span><span class="token punctuation">(</span><span class="token constant">L</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">,</span> w <span class="token operator">-</span> <span class="token constant">L</span> <span class="token operator">-</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="131"></td><td><pre>        <span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token function">randomNum</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> r<span class="token punctuation">,</span> h <span class="token operator">-</span> <span class="token constant">L</span> <span class="token operator">-</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="132"></td><td><pre> </pre></td></tr><tr><td data-num="133"></td><td><pre>        <span class="token comment">// 不动的挖空</span></pre></td></tr><tr><td data-num="134"></td><td><pre>        <span class="token function">drawPath</span><span class="token punctuation">(</span>ctx2<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token string">'fill'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="135"></td><td><pre>        <span class="token comment">// 滑块切割，</span></pre></td></tr><tr><td data-num="136"></td><td><pre>        <span class="token function">drawPath</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token string">'clip'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="137"></td><td><pre>        <span class="token comment">// 控制同等高度，定位在左边</span></pre></td></tr><tr><td data-num="138"></td><td><pre>        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#myCanvas"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token operator">-</span>x <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="139"></td><td><pre>        <span class="token comment">// 网页端滑动解锁 事件</span></pre></td></tr><tr><td data-num="140"></td><td><pre>        <span class="token comment">// 监听滑块事件</span></pre></td></tr><tr><td data-num="141"></td><td><pre>        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".slide"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="142"></td><td><pre>                document<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="143"></td><td><pre>                    <span class="token comment">// 最大滑动距离为下方盒子长 - 滑块长</span></pre></td></tr><tr><td data-num="144"></td><td><pre>                    <span class="token comment">// 范围内拖动</span></pre></td></tr><tr><td data-num="145"></td><td><pre>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>e2<span class="token punctuation">.</span>clientX <span class="token operator">></span> e<span class="token punctuation">.</span>clientX <span class="token operator">&amp;&amp;</span> e2<span class="token punctuation">.</span>clientX <span class="token operator">-</span> e<span class="token punctuation">.</span>clientX <span class="token operator">&lt;=</span> w <span class="token operator">-</span> <span class="token constant">L</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="146"></td><td><pre>                        <span class="token comment">// 使得滑块和拼图一起动</span></pre></td></tr><tr><td data-num="147"></td><td><pre>                        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".slide"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> e2<span class="token punctuation">.</span>clientX <span class="token operator">-</span> e<span class="token punctuation">.</span>clientX <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="148"></td><td><pre>                        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#myCanvas"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token operator">-</span>x <span class="token operator">+</span> e2<span class="token punctuation">.</span>clientX <span class="token operator">-</span> e<span class="token punctuation">.</span>clientX <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="149"></td><td><pre>                    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="150"></td><td><pre>                    document<span class="token punctuation">.</span><span class="token function-variable function">onmouseup</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="151"></td><td><pre>                        <span class="token comment">// 判断拼图位置是否正确，拖拉距离是否是随机生成的拼图 x</span></pre></td></tr><tr><td data-num="152"></td><td><pre>                        <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="153"></td><td><pre>                        <span class="token comment">// 正确提示正确，误差为 10 以内为正确</span></pre></td></tr><tr><td data-num="154"></td><td><pre>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>e2<span class="token punctuation">.</span>clientX <span class="token operator">-</span> e<span class="token punctuation">.</span>clientX <span class="token operator">-</span> <span class="token number">10</span> <span class="token operator">&lt;=</span> x <span class="token operator">&amp;&amp;</span> x <span class="token operator">&lt;=</span> e2<span class="token punctuation">.</span>clientX <span class="token operator">-</span> e<span class="token punctuation">.</span>clientX <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="155"></td><td><pre>                            result <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="156"></td><td><pre>                            <span class="token comment">//alert ("验证成功！");</span></pre></td></tr><tr><td data-num="157"></td><td><pre>                            <span class="token comment">// 滑块消失</span></pre></td></tr><tr><td data-num="158"></td><td><pre>                            document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".slide"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="159"></td><td><pre>                            document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".verify"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"解锁成功！"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="160"></td><td><pre>                        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="161"></td><td><pre>                            <span class="token comment">// 不正确提示不正确，且返回原点</span></pre></td></tr><tr><td data-num="162"></td><td><pre>                            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"验证失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="163"></td><td><pre>                            <span class="token comment">// 滑块消失</span></pre></td></tr><tr><td data-num="164"></td><td><pre>                            <span class="token comment">// 重新刷新</span></pre></td></tr><tr><td data-num="165"></td><td><pre>                            location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="166"></td><td><pre>                        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="167"></td><td><pre>                        <span class="token comment">// 解除以下事件</span></pre></td></tr><tr><td data-num="168"></td><td><pre>                        document<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="169"></td><td><pre>                        document<span class="token punctuation">.</span>onmouseup <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="170"></td><td><pre>                    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="171"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="172"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="173"></td><td><pre>            <span class="token comment">// 移动端</span></pre></td></tr><tr><td data-num="174"></td><td><pre>        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".slide"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">ontouchstart</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="175"></td><td><pre>            <span class="token keyword">let</span> touch <span class="token operator">=</span> e<span class="token punctuation">.</span>targetTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="176"></td><td><pre>            document<span class="token punctuation">.</span><span class="token function-variable function">ontouchmove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="177"></td><td><pre>                <span class="token keyword">let</span> touch2 <span class="token operator">=</span> e2<span class="token punctuation">.</span>targetTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="178"></td><td><pre>                <span class="token comment">// 最大滑动距离为下方盒子长 - 滑块长</span></pre></td></tr><tr><td data-num="179"></td><td><pre>                <span class="token comment">// 范围内拖动</span></pre></td></tr><tr><td data-num="180"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>touch2<span class="token punctuation">.</span>pageX <span class="token operator">></span> touch<span class="token punctuation">.</span>pageX <span class="token operator">&amp;&amp;</span> touch2<span class="token punctuation">.</span>pageX <span class="token operator">-</span> touch<span class="token punctuation">.</span>pageX <span class="token operator">&lt;=</span> w <span class="token operator">-</span> <span class="token constant">L</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="181"></td><td><pre>                    <span class="token comment">// 使得滑块和拼图一起动</span></pre></td></tr><tr><td data-num="182"></td><td><pre>                    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".slide"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> touch2<span class="token punctuation">.</span>pageX <span class="token operator">-</span> touch<span class="token punctuation">.</span>pageX <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="183"></td><td><pre>                    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#myCanvas"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token operator">-</span>x <span class="token operator">+</span> touch2<span class="token punctuation">.</span>pageX <span class="token operator">-</span> touch<span class="token punctuation">.</span>pageX <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="184"></td><td><pre> </pre></td></tr><tr><td data-num="185"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="186"></td><td><pre>                document<span class="token punctuation">.</span><span class="token function-variable function">ontouchend</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="187"></td><td><pre>                    <span class="token comment">// 判断拼图位置是否正确，拖拉距离是否是随机生成的拼图 x</span></pre></td></tr><tr><td data-num="188"></td><td><pre>                    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="189"></td><td><pre>                    <span class="token comment">// 正确提示正确，误差为 10 以内为正确</span></pre></td></tr><tr><td data-num="190"></td><td><pre>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>touch2<span class="token punctuation">.</span>pageX <span class="token operator">-</span> touch<span class="token punctuation">.</span>pageX <span class="token operator">-</span> <span class="token number">10</span> <span class="token operator">&lt;=</span> x <span class="token operator">&amp;&amp;</span> x <span class="token operator">&lt;=</span> touch2<span class="token punctuation">.</span>pageX <span class="token operator">-</span> touch<span class="token punctuation">.</span>pageX <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="191"></td><td><pre>                        result <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="192"></td><td><pre>                        <span class="token comment">// 滑块消失</span></pre></td></tr><tr><td data-num="193"></td><td><pre>                        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".slide"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="194"></td><td><pre>                        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".verify"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"解锁成功！"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="195"></td><td><pre>                    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="196"></td><td><pre>                        <span class="token comment">// 重新刷新</span></pre></td></tr><tr><td data-num="197"></td><td><pre>                        location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="198"></td><td><pre>                    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="199"></td><td><pre> </pre></td></tr><tr><td data-num="200"></td><td><pre>                    <span class="token comment">// 解除以下事件            </span></pre></td></tr><tr><td data-num="201"></td><td><pre>                    document<span class="token punctuation">.</span>ontouchmove <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="202"></td><td><pre>                    document<span class="token punctuation">.</span>ontouchend <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="203"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="204"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="205"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="206"></td><td><pre>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="207"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="208"></td><td><pre> </pre></td></tr><tr><td data-num="209"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>实现效果：</p>
<p><img data-src="../images/canvas/1649493035316.png" alt="1649493035316" /></p>
<h2 id="参考教程"><a class="anchor" href="#参考教程">#</a> 参考教程</h2>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9jbGFzc3Jvb20udWRhY2l0eS5jb20vY291cnNlcy91ZDI5Mg==">优达学城 (opens new window)</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93d3cuaW1vb2MuY29tL2xlYXJuLzYxMg==">慕课网 (opens new window)</span></li>
<li><span class="exturl" data-url="aHR0cDovL3d3dy53M3NjaG9vbC5jb20uY24vdGFncy9odG1sX3JlZl9jYW52YXMuYXNw">W3school</span></li>
</ul>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>canvas</tag>
      </tags>
  </entry>
  <entry>
    <title>class与style绑定</title>
    <url>/2020/10/09/class%E4%B8%8Estyle%E7%BB%91%E5%AE%9A/</url>
    <content><![CDATA[<p>class 与 style 绑定是 vue 项目开发中常用操作样式手法</p>
<h1 id="动态方式绑定"><a class="anchor" href="#动态方式绑定">#</a> 动态方式绑定</h1>
<p>通过三元表达式动态绑定 class 类名</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">&lt;!-- 单个值绑定 --></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>thin<span class="token punctuation">"</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isItalic?<span class="token punctuation">'</span>italic<span class="token punctuation">'</span>:<span class="token punctuation">'</span><span class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    动态绑定</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isItalic=!isItalic<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>    Toggle Italic</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h1 id="数组方式绑定"><a class="anchor" href="#数组方式绑定">#</a> 数组方式绑定</h1>
<p>数组方式实现 class 与 style 样式绑定</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>thin<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[isItalic?<span class="token punctuation">'</span>italic<span class="token punctuation">'</span>:<span class="token punctuation">'</span><span class="token punctuation">'</span>,isDelete?<span class="token punctuation">'</span>isDelete<span class="token punctuation">'</span>:<span class="token punctuation">'</span><span class="token punctuation">'</span>]<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isItalic=!isItalic<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>    Toggle Italic</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isDelete=!isDelete<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>    Toggle Delete</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h1 id="对象方式绑定"><a class="anchor" href="#对象方式绑定">#</a> 对象方式绑定</h1>
<h2 id="class与style绑定"><a class="anchor" href="#class与style绑定">#</a> class 与 style 绑定</h2>
<p>数组方式动态绑定 class 会导致模板结构臃肿问题，</p>
<p>此时可以使用对象语法进行简化</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>thin<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classObj<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classObj.italic=!classObj.italic<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>    Toggle Italic</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classObj.delete=!classObj.delete<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>    Toggle Delete</pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token keyword">return</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token literal-property property">classObj</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>                <span class="token literal-property property">italic</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="20"></td><td><pre>                <span class="token keyword">delete</span><span class="token operator">:</span><span class="token boolean">false</span></pre></td></tr><tr><td data-num="21"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token selector">.italic</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token selector">.delete</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token property">color</span><span class="token punctuation">:</span>pink<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="绑定内联样式"><a class="anchor" href="#绑定内联样式">#</a> 绑定内联样式</h2>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;color:active,fontSize:fsize+<span class="token punctuation">'</span>px<span class="token punctuation">'</span>,<span class="token punctuation">'</span>background-color<span class="token punctuation">'</span>:bgcolor&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>      对象绑定之绑定内联样式</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fsize+=1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>    字号+1</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fsize-=1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>    字号-1</pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token keyword">return</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token literal-property property">active</span><span class="token operator">:</span><span class="token string">'red'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>            <span class="token literal-property property">fsize</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="20"></td><td><pre>            <span class="token literal-property property">bgcolor</span><span class="token operator">:</span><span class="token string">'pink'</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>样式绑定</tag>
      </tags>
  </entry>
  <entry>
    <title>cookie存取删</title>
    <url>/2021/05/19/cookie%E5%AD%98%E5%8F%96%E5%88%A0/</url>
    <content><![CDATA[<p><strong>封装 <code>cookie.js</code> </strong></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">setCookie</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>value<span class="token punctuation">,</span>days</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre> 		<span class="token keyword">var</span> Days <span class="token operator">=</span> days<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre> 		<span class="token keyword">var</span> exp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre> 		exp<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span>exp<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> Days<span class="token operator">*</span><span class="token number">24</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre> 		document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> name <span class="token operator">+</span> <span class="token string">"="</span><span class="token operator">+</span> <span class="token function">escape</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">";expires="</span> <span class="token operator">+</span> exp<span class="token punctuation">.</span><span class="token function">toGMTString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre> 	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getCookie</span><span class="token punctuation">(</span><span class="token parameter">c_name</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span>length<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token keyword">let</span> c_start<span class="token operator">=</span>document<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>c_name <span class="token operator">+</span> <span class="token string">"="</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>c_start<span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="11"></td><td><pre>            c_start<span class="token operator">=</span>c_start <span class="token operator">+</span> c_name<span class="token punctuation">.</span>length<span class="token operator">+</span><span class="token number">1</span> </pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token keyword">let</span> c_end<span class="token operator">=</span>document<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">";"</span><span class="token punctuation">,</span>c_start<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>c_end<span class="token operator">==</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> c_end<span class="token operator">=</span>document<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span>length</pre></td></tr><tr><td data-num="14"></td><td><pre>                <span class="token keyword">return</span> <span class="token function">unescape</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>c_start<span class="token punctuation">,</span>c_end<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre> </pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">delCookie</span><span class="token punctuation">(</span><span class="token parameter">c_name</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token function">setCookie</span><span class="token punctuation">(</span>c_name<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>cookie</tag>
      </tags>
  </entry>
  <entry>
    <title>css变量</title>
    <url>/2020/10/20/css%E5%8F%98%E9%87%8F/</url>
    <content><![CDATA[<p>学过 SASS (LESS) 等 CSS 预编译工具我们知道它们可以使用变量，但是 CSS 中也可以使用变量，它有很强的实用性。</p>
<h2 id="语法"><a class="anchor" href="#语法">#</a> 语法</h2>
<p>声明变量时需要加在变量名前面加上 <code>--</code> ，在使用变量时使用 <code>var(--name)</code> 。</p>
<h2 id="用法"><a class="anchor" href="#用法">#</a> 用法</h2>
<p>局部</p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">element</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">--main-color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token selector">element</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--main-color<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>全局</p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">:root</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">--main-bg-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token selector">.content</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--main-bg-color<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="结合-js-使用"><a class="anchor" href="#结合-js-使用">#</a> 结合 js 使用</h2>
<p>当我们需要有各种主题时我们需要修改 CSS 变量来达到效果，而修改 CSS 变量需要结合 JS 来使用。</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">":root"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  root<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"--theme-color"</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="参考教程"><a class="anchor" href="#参考教程">#</a> 参考教程</h2>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQ1NTL1VzaW5nX0NTU192YXJpYWJsZXM=">MDN(opens new window)</span></li>
<li><span class="exturl" data-url="aHR0cDovL3d3dy5ydWFueWlmZW5nLmNvbS9ibG9nLzIwMTcvMDUvY3NzLXZhcmlhYmxlcy5odG1s">阮一峰 (opens new window)</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93d3cuemhhbmd4aW54dS5jb20vd29yZHByZXNzLzIwMTYvMTEvY3NzLWNzczMtdmFyaWFibGVzLXZhci8=">张鑫旭</span></li>
</ul>
]]></content>
      <categories>
        <category>css</category>
      </categories>
  </entry>
  <entry>
    <title>css尺寸相关</title>
    <url>/2020/10/28/css%E5%B0%BA%E5%AF%B8%E7%9B%B8%E5%85%B3/</url>
    <content><![CDATA[<h1 id="padding"><a class="anchor" href="#padding">#</a> padding</h1>
<h2 id="作用"><a class="anchor" href="#作用">#</a> 作用</h2>
<p>CSS 默认的 box-sizing 是 content-box，所以使用 padding 会增加元素的尺寸，一般来说 padding 增加的是元素的内边距，这也是盒子模型中计算宽度大小的一项。</p>
<h2 id="百分比值"><a class="anchor" href="#百分比值">#</a> 百分比值</h2>
<p>padding 百分比值无论是水平还是垂直方向均是相对于宽度计算的 (父元素宽度)，这一点与 margin 的百分比值相同</p>
<h1 id="border"><a class="anchor" href="#border">#</a> border</h1>
<p>border 增加的是元素的边框，是盒子模型的一部分，应用也相当广泛</p>
<p><strong>注意点</strong></p>
<ul>
<li><code>border-width</code>  不支持百分比</li>
</ul>
<h1 id="margin"><a class="anchor" href="#margin">#</a> margin</h1>
<p>margin 增加的是元素的外边距，并不影响盒子的实际宽度，但是影响页面的布局。</p>
<h2 id="margin的百分比值"><a class="anchor" href="#margin的百分比值">#</a> margin 的百分比值</h2>
<p>无论是水平方向还是垂直方向，margin 的百分比值相对于父元素宽度计算的。例如：</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token selector">.father</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token selector">.son</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token property">margin-top</span><span class="token punctuation">:</span> 20%<span class="token punctuation">;</span> <span class="token comment">/* margin-top: 300 * 20% = 60px */</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>father<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>son<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="margin-合并"><a class="anchor" href="#margin-合并">#</a> margin 合并</h2>
<p><strong>解释</strong></p>
<p>块级元素 (不包括浮动和绝对定位元素) 的上外边距 (margin-top) 和下外边距 (margin-bottom) 有时会合并为单个外边距，这种现象称为 “margin 合并”。一般情况下，只发生在垂直方向。</p>
<p><strong>发生合并的 3 种场景</strong></p>
<ol>
<li>相邻兄弟元素的 margin 合并</li>
</ol>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token selector">p</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">margin</span><span class="token punctuation">:</span> 1em 0<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>第一行<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>第二行<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p><img data-src="../images/css%E5%B0%BA%E5%AF%B8%E7%9B%B8%E5%85%B3/margin-brother.2fe28003.png" alt="效果图" /></p>
<ol>
<li>父级的第一个 / 最后一个子元素</li>
</ol>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token selector">.father</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">margin-top</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token selector">.son</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token property">margin-top</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>father<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>son<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p><img data-src="../images/css%E5%B0%BA%E5%AF%B8%E7%9B%B8%E5%85%B3/father-son.0d286d60.png" alt="效果图" /></p>
<p>解决措施：</p>
<p>对于 margin-top 的合并：</p>
<ul>
<li>父元素设置为格式化上下文元素，例如 <code>overflow: hidden;</code></li>
<li>父元素设置 padding-top 值</li>
<li>父元素和第一个子元素之间添加内联元素进行分隔 (标签内不能为空)</li>
</ul>
<p>对于 margin-bottom 的合并：</p>
<ul>
<li>父元素设置为格式化上下文元素</li>
<li>父元素设置 padding-bottom 值</li>
<li>父元素和最后一个子元素之间添加内联元素进行分隔</li>
<li>父元素设置 height、min-height 或 max-height (注意设置时的大小，设置太小会部分合并)</li>
</ul>
<ol>
<li>空块级元素的 margin 合并</li>
</ol>
<p><code>.father</code>  这个元素的高度只有 80px，垂直方向上的 margin-top 和 margin-bottom 合并在一起了</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token selector">.father</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token selector">.son</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token property">margin</span><span class="token punctuation">:</span> 80px 0<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>father<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>son<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p><strong>margin 合并的计算规则</strong></p>
<ol>
<li><strong>“正正取大”</strong>：如果两个 margin 都为正值，最终结果取其中较大的值</li>
<li><strong>“正负相加”</strong>：如果两个 margin 为一正一负，最终结果取两个值之和</li>
<li><strong>“负负取小”</strong>：如果两个 margin 都为负值。最终结果取其中较小的值</li>
</ol>
<h2 id="margin-auto"><a class="anchor" href="#margin-auto">#</a> margin: auto</h2>
<p>规则如下：</p>
<ol>
<li>如果一侧是定值，一侧 auto，则 auto 为剩余空间大小</li>
<li>如果两侧为 auto，则平分剩余空间</li>
</ol>
<p>例如规则 1：</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token selector">.father</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token comment">/* margin-left: (300px - 200px - 80px) */</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token selector">.son</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token property">margin-left</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token property">margin-right</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p><code>margin: auto</code>  触发的条件：width 或 height 为 auto 时，元素具有对应方向的自动填充特性，一般来说 width 为 auto 时是自动填充的，因此左右方向的 auto 有效，但是 height 为 auto 时不时自动填充的，因此 auto 失效；当然还需要是块级元素</p>
<h2 id="margin无效场景"><a class="anchor" href="#margin无效场景">#</a> margin 无效场景</h2>
<ol>
<li>对于内联替换元素，不会发生 margin 合并问题，同时垂直方向的 margin 失效</li>
<li>表格中 tr 和 td 元素设置 display 计算值是 table-cell 或 table-row 的元素的 margin 都是无效的</li>
</ol>
]]></content>
      <categories>
        <category>css</category>
      </categories>
  </entry>
  <entry>
    <title>es6学习</title>
    <url>/2021/01/04/es6%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h3 id="letconst"><a class="anchor" href="#letconst">#</a> let&amp;const</h3>
<p><code>let</code>  的主要作用是能够存在作用域，这一点是有别于 <code>var</code>  的，举个例子</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">return</span> i<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span></pre></td></tr><tr><td data-num="9"></td><td><pre>a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span></pre></td></tr><tr><td data-num="10"></td><td><pre>a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span></pre></td></tr></table></figure><p>而 let 却没有这样的问题</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">return</span> i<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span></pre></td></tr><tr><td data-num="9"></td><td><pre>a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span></pre></td></tr><tr><td data-num="10"></td><td><pre>a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span></pre></td></tr></table></figure><p><code>const</code>  一般情况下是不可变的，但这不是绝对的，例如数组，对象（我指的对象都是狭义上的对象）等</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 3</span></pre></td></tr></table></figure><h3 id="箭头函数"><a class="anchor" href="#箭头函数">#</a> 箭头函数</h3>
<p>在 es6 中我最偏爱的就是箭头函数了，它的简洁是我偏爱的最大原因，举个例子</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// es5</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">var</span> <span class="token function-variable function">a</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// es6</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">a</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="解构赋值"><a class="anchor" href="#解构赋值">#</a> 解构赋值</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">length</span><span class="token operator">:</span> len <span class="token punctuation">&#125;</span> <span class="token operator">=</span> str<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>len<span class="token punctuation">;</span> <span class="token comment">// 5</span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> arr<span class="token punctuation">]</span> <span class="token operator">=</span> source<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>arr<span class="token punctuation">;</span> <span class="token comment">// [3,4,5,6,7,8,9,10]</span></pre></td></tr></table></figure><h3 id="简洁函数声明"><a class="anchor" href="#简洁函数声明">#</a> 简洁函数声明</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// es5</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Taylor"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token function-variable function">sayHello</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello! My name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// es6</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Taylor"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello! My name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="函数参数结构"><a class="anchor" href="#函数参数结构">#</a> 函数参数结构</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"nicegong"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token string">"man"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">100</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">function</span> <span class="token function">logPerson</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> name<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> age <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">, I am </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>age<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> years old...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token function">logPerson</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// my name is nicegong, I am 100 years old...</span></pre></td></tr></table></figure><h3 id="构造函数"><a class="anchor" href="#构造函数">#</a> 构造函数</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// es5</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">var</span> <span class="token function-variable function">Person</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">var</span> one <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"nicegong"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// es6</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token function">construct</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">const</span> one <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"nicegong"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="exportimport"><a class="anchor" href="#exportimport">#</a> export&amp;import</h3>
<p><code>export</code>  是从文件中导出变量与函数， <code>import</code>  是从文件中引用变量与函数</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// add.js</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">export</span> <span class="token punctuation">&#123;</span> add <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre> </pre></td></tr><tr><td data-num="8"></td><td><pre>        Copied<span class="token operator">!</span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> add <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"add.js"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 7</span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>es6</tag>
      </tags>
  </entry>
  <entry>
    <title>flex布局</title>
    <url>/2021/01/06/flex%E5%B8%83%E5%B1%80/</url>
    <content><![CDATA[<h1 id="前言"><a class="anchor" href="#前言">#</a> 前言</h1>
<p><strong>好记性不如烂笔头系列</strong></p>
<p>​      2009 年，W3C 提出了一种新的方案 —-Flex 布局，可以简便、完整、响应式地实现各种页面布局。目前，它已经得到了所有浏览器的支持，这意味着，现在就能很安全地使用这项功能。</p>
<h2 id="一-flex布局是什么"><a class="anchor" href="#一-flex布局是什么">#</a> 一、Flex 布局是什么？</h2>
<p>Flex 是 Flexible Box 的缩写，意为” 弹性布局”，用来为盒状模型提供最大的灵活性。</p>
<p>任何一个容器都可以指定为 Flex 布局。</p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.box</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>行内元素也可以使用 Flex 布局。</p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.box</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">display</span><span class="token punctuation">:</span> inline-flex<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>Webkit 内核的浏览器，必须加上 - webkit 前缀。</p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.box</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">display</span><span class="token punctuation">:</span> -webkit-flex<span class="token punctuation">;</span> <span class="token comment">/* Safari */</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>注意，设为 Flex 布局以后，子元素的 float、clear 和 vertical-align 属性将失效。</p>
<h2 id="二-基本概念"><a class="anchor" href="#二-基本概念">#</a> 二、基本概念</h2>
<p>采用 Flex 布局的元素，称为 Flex 容器（flex container），简称” 容器”。它的所有子元素自动成为容器成员，称为 Flex 项目（flex item），简称” 项目”。</p>
<p><img data-src="../images/flex%E5%B8%83%E5%B1%80/3791e575c48b3698be6a94ae1dbff79d.png" alt="img" /></p>
<p>容器默认存在两根轴：水平的主轴（main axis）和垂直的交叉轴（cross axis）。主轴的开始位置（与边框的交叉点）叫做 main start，结束位置叫做 main end；交叉轴的开始位置叫做 cross start，结束位置叫做 cross end。</p>
<p>项目默认沿主轴排列。单个项目占据的主轴空间叫做 main size，占据的交叉轴空间叫做 cross size。</p>
<h2 id="三-容器的属性"><a class="anchor" href="#三-容器的属性">#</a> 三、容器的属性</h2>
<p>以下 6 个属性设置在容器上。</p>
<blockquote>
<ul>
<li>flex-direction</li>
<li>flex-wrap</li>
<li>flex-flow</li>
<li>justify-content</li>
<li>align-items</li>
<li>align-content</li>
</ul>
</blockquote>
<h3 id="31-flex-direction属性"><a class="anchor" href="#31-flex-direction属性">#</a> 3.1 flex-direction 属性</h3>
<p>flex-direction 属性决定主轴的方向（即项目的排列方向）。</p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">flex-direction</span><span class="token punctuation">:</span> row | row-reverse | column | column-reverse<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><img data-src="../images/flex%E5%B8%83%E5%B1%80/0cbe5f8268121114e87d0546e53cda6e.png" alt="img" /></p>
<p>它可能有 4 个值。</p>
<blockquote>
<ul>
<li>row（默认值）：主轴为水平方向，起点在左端。</li>
<li>row-reverse：主轴为水平方向，起点在右端。</li>
<li>column：主轴为垂直方向，起点在上沿。</li>
<li>column-reverse：主轴为垂直方向，起点在下沿。</li>
</ul>
</blockquote>
<h3 id="32-flex-wrap属性"><a class="anchor" href="#32-flex-wrap属性">#</a> 3.2 flex-wrap 属性</h3>
<p>默认情况下，项目都排在一条线（又称” 轴线”）上。flex-wrap 属性定义，如果一条轴线排不下，如何换行。</p>
<p><img data-src="../images/flex%E5%B8%83%E5%B1%80/903d5b7df55779c03f2687a7d4d6bcea.png" alt="img" /></p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.box</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">flex-wrap</span><span class="token punctuation">:</span> nowrap | wrap | wrap-reverse<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>它可能取三个值。</p>
<p>（1）nowrap（默认）：不换行。</p>
<p><img data-src="../images/flex%E5%B8%83%E5%B1%80/9da1f23965756568b4c6ea7124db7b9a.png" alt="img" /></p>
<p>（2）wrap：换行，第一行在上方。</p>
<p><img data-src="../images/flex%E5%B8%83%E5%B1%80/3c6b3c8b8fe5e26bca6fb57538cf72d9.jpg" alt="img" /></p>
<p>（3）wrap-reverse：换行，第一行在下方。</p>
<p><img data-src="../images/flex%E5%B8%83%E5%B1%80/fb4cf2bab8b6b744b64f6d7a99cd577c.jpg" alt="img" /></p>
<h3 id="33-flex-flow"><a class="anchor" href="#33-flex-flow">#</a> 3.3 flex-flow</h3>
<p>flex-flow 属性是 flex-direction 属性和 flex-wrap 属性的简写形式，默认值为 row nowrap。</p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">flex-flow</span><span class="token punctuation">:</span> &lt;flex-direction> &lt;flex-wrap><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="34-justify-content属性"><a class="anchor" href="#34-justify-content属性">#</a> 3.4 justify-content 属性</h3>
<p>justify-content 属性定义了项目在主轴上的对齐方式。</p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">justify-content</span><span class="token punctuation">:</span> flex-start | flex-end | center | space-between | space-around<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><img data-src="../images/flex%E5%B8%83%E5%B1%80/c55dfe8e3422458b50e985552ef13ba5.png" alt="img" /></p>
<p>它可能取 5 个值，具体对齐方式与轴的方向有关。下面假设主轴为从左到右。</p>
<blockquote>
<ul>
<li>flex-start（默认值）：左对齐</li>
<li>flex-end：右对齐</li>
<li>center： 居中</li>
<li>space-between：两端对齐，项目之间的间隔都相等。</li>
<li>space-around：每个项目两侧的间隔相等。所以，项目之间的间隔比项目与边框的间隔大一倍。</li>
</ul>
</blockquote>
<h3 id="35-align-items属性"><a class="anchor" href="#35-align-items属性">#</a> 3.5 align-items 属性</h3>
<p>align-items 属性定义项目在交叉轴上如何对齐。</p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">align-items</span><span class="token punctuation">:</span> flex-start | flex-end | center | baseline | stretch<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><img data-src="../images/flex%E5%B8%83%E5%B1%80/2b0c39c7e7a80d5a784c8c2ca63cde17.png" alt="img" /></p>
<p>它可能取 5 个值。具体的对齐方式与交叉轴的方向有关，下面假设交叉轴从上到下。</p>
<blockquote>
<ul>
<li>flex-start：交叉轴的起点对齐。</li>
<li>flex-end：交叉轴的终点对齐。</li>
<li>center：交叉轴的中点对齐。</li>
<li>baseline: 项目的第一行文字的基线对齐。</li>
<li>stretch（默认值）：如果项目未设置高度或设为 auto，将占满整个容器的高度。</li>
</ul>
</blockquote>
<h3 id="36-align-content属性"><a class="anchor" href="#36-align-content属性">#</a> 3.6 align-content 属性</h3>
<p>align-content 属性定义了多根轴线的对齐方式。如果项目只有一根轴线，该属性不起作用。</p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">align-content</span><span class="token punctuation">:</span> flex-start | flex-end | center | space-between | space-around | stretch<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><img data-src="../images/flex%E5%B8%83%E5%B1%80/f10918ccb8a13247c9d47715a2bd2c33.png" alt="img" /></p>
<p>该属性可能取 6 个值。</p>
<blockquote>
<ul>
<li>flex-start：与交叉轴的起点对齐。</li>
<li>flex-end：与交叉轴的终点对齐。</li>
<li>center：与交叉轴的中点对齐。</li>
<li>space-between：与交叉轴两端对齐，轴线之间的间隔平均分布。</li>
<li>space-around：每根轴线两侧的间隔都相等。所以，轴线之间的间隔比轴线与边框的间隔大一倍。</li>
<li>stretch（默认值）：轴线占满整个交叉轴。</li>
</ul>
</blockquote>
<h2 id="四-项目的属性"><a class="anchor" href="#四-项目的属性">#</a> 四、项目的属性</h2>
<p>以下 6 个属性设置在项目上。</p>
<blockquote>
<ul>
<li>order</li>
<li>flex-grow</li>
<li>flex-shrink</li>
<li>flex-basis</li>
<li>flex</li>
<li>align-self</li>
</ul>
</blockquote>
<h3 id="41-order属性"><a class="anchor" href="#41-order属性">#</a> 4.1 order 属性</h3>
<p>order 属性定义项目的排列顺序。数值越小，排列越靠前，默认为 0。</p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.item</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">order</span><span class="token punctuation">:</span> &lt;integer><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><img data-src="../images/flex%E5%B8%83%E5%B1%80/59e399c72daafcfcc20ede36bf32f266.png" alt="img" /></p>
<h3 id="42-flex-grow属性"><a class="anchor" href="#42-flex-grow属性">#</a> 4.2 flex-grow 属性</h3>
<p>flex-grow 属性定义项目的放大比例，默认为 0，即如果存在剩余空间，也不放大。</p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.item</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">flex-grow</span><span class="token punctuation">:</span> &lt;number><span class="token punctuation">;</span> <span class="token comment">/* default 0 */</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><img data-src="../images/flex%E5%B8%83%E5%B1%80/f41c08bb35962ed79e7686f735d6cd78.png" alt="img" /></p>
<p>如果所有项目的 flex-grow 属性都为 1，则它们将等分剩余空间（如果有的话）。如果一个项目的 flex-grow 属性为 2，其他项目都为 1，则前者占据的剩余空间将比其他项多一倍。</p>
<h3 id="43-flex-shrink属性"><a class="anchor" href="#43-flex-shrink属性">#</a> 4.3 flex-shrink 属性</h3>
<p>flex-shrink 属性定义了项目的缩小比例，默认为 1，即如果空间不足，该项目将缩小。</p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.item</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">flex-shrink</span><span class="token punctuation">:</span> &lt;number><span class="token punctuation">;</span> <span class="token comment">/* default 1 */</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><img data-src="../images/flex%E5%B8%83%E5%B1%80/240d3e960043a729bb3ff5e34987904f.jpg" alt="img" /></p>
<p>如果所有项目的 flex-shrink 属性都为 1，当空间不足时，都将等比例缩小。如果一个项目的 flex-shrink 属性为 0，其他项目都为 1，则空间不足时，前者不缩小。</p>
<p>负值对该属性无效。</p>
<h3 id="44-flex-basis属性"><a class="anchor" href="#44-flex-basis属性">#</a> 4.4 flex-basis 属性</h3>
<p>flex-basis 属性定义了在分配多余空间之前，项目占据的主轴空间（main size）。浏览器根据这个属性，计算主轴是否有多余空间。它的默认值为 auto，即项目的本来大小。</p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.item</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">flex-basis</span><span class="token punctuation">:</span> &lt;length> | auto<span class="token punctuation">;</span> <span class="token comment">/* default auto */</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>它可以设为跟 width 或 height 属性一样的值（比如 350px），则项目将占据固定空间。</p>
<h3 id="45-flex属性"><a class="anchor" href="#45-flex属性">#</a> 4.5 flex 属性</h3>
<p>flex 属性是 flex-grow, flex-shrink 和 flex-basis 的简写，默认值为 0 1 auto。后两个属性可选。</p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.item</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">flex</span><span class="token punctuation">:</span> none | [ &lt;<span class="token string">'flex-grow'</span>> &lt;<span class="token string">'flex-shrink'</span>>? || &lt;<span class="token string">'flex-basis'</span>> ]</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>该属性有两个快捷值：auto (1 1 auto) 和 none (0 0 auto)。</p>
<p>建议优先使用这个属性，而不是单独写三个分离的属性，因为浏览器会推算相关值。</p>
<h3 id="46-align-self属性"><a class="anchor" href="#46-align-self属性">#</a> 4.6 align-self 属性</h3>
<p>align-self 属性允许单个项目有与其他项目不一样的对齐方式，可覆盖 align-items 属性。默认值为 auto，表示继承父元素的 align-items 属性，如果没有父元素，则等同于 stretch。</p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.item</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">align-self</span><span class="token punctuation">:</span> auto | flex-start | flex-end | center | baseline | stretch<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><img data-src="../images/flex%E5%B8%83%E5%B1%80/55b19171b8b6b9487d717bf2ecbba6de.png" alt="img" /></p>
<p>该属性可能取 6 个值，除了 auto，其他都与 align-items 属性完全一致。</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9mbGV4Ym94ZnJvZ2d5LmNvbS8=">flex 布局</span></p>
]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>flex</tag>
      </tags>
  </entry>
  <entry>
    <title>git的使用</title>
    <url>/2020/11/25/git%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h2 id="用户名以及邮箱设置"><a class="anchor" href="#用户名以及邮箱设置">#</a> 用户名以及邮箱设置</h2>
<figure class="highlight git"><figcaption data-lang="git"></figcaption><table><tr><td data-num="1"></td><td><pre>git config --global user.name your_github_name</pre></td></tr><tr><td data-num="2"></td><td><pre>git config --global user.email your_github_email</pre></td></tr><tr><td data-num="3"></td><td><pre>// 查看</pre></td></tr><tr><td data-num="4"></td><td><pre>git config user.name</pre></td></tr></table></figure><h2 id="从-master-分支创建-dev-分支并切换到-dev-分支"><a class="anchor" href="#从-master-分支创建-dev-分支并切换到-dev-分支">#</a> 从 master 分支创建 dev 分支并切换到 dev 分支</h2>
<figure class="highlight git"><figcaption data-lang="git"></figcaption><table><tr><td data-num="1"></td><td><pre>git checkout -b dev</pre></td></tr></table></figure><p>相当于下面两条语句</p>
<figure class="highlight git"><figcaption data-lang="git"></figcaption><table><tr><td data-num="1"></td><td><pre>git branch dev</pre></td></tr><tr><td data-num="2"></td><td><pre>git checkout dev</pre></td></tr></table></figure><h2 id="查看分支"><a class="anchor" href="#查看分支">#</a> 查看分支</h2>
<ol>
<li><code>git branch</code> : 查看本地分支 * 表示当前分支</li>
<li><code>git branch -a</code> : 查看远程全部分支 白色本地存在，红色本地不存在</li>
<li><code>git branch -r</code> : 查看远程分支</li>
</ol>
<h2 id="分支合并将-dev-合并到-master"><a class="anchor" href="#分支合并将-dev-合并到-master">#</a> 分支合并 (将 dev 合并到 master)</h2>
<figure class="highlight git"><figcaption data-lang="git"></figcaption><table><tr><td data-num="1"></td><td><pre>git checkout master</pre></td></tr><tr><td data-num="2"></td><td><pre>git merge dev</pre></td></tr></table></figure><h2 id="删除分支"><a class="anchor" href="#删除分支">#</a> 删除分支</h2>
<figure class="highlight git"><figcaption data-lang="git"></figcaption><table><tr><td data-num="1"></td><td><pre>git branch -D dev</pre></td></tr></table></figure><h2 id="本地同步远程的分支"><a class="anchor" href="#本地同步远程的分支">#</a> 本地同步远程的分支</h2>
<figure class="highlight git"><figcaption data-lang="git"></figcaption><table><tr><td data-num="1"></td><td><pre>git fetch origin -p</pre></td></tr></table></figure><h2 id="把本地的仓库推到空的-github-仓库上"><a class="anchor" href="#把本地的仓库推到空的-github-仓库上">#</a> 把本地的仓库推到空的 github 仓库上</h2>
<figure class="highlight git"><figcaption data-lang="git"></figcaption><table><tr><td data-num="1"></td><td><pre>git remote add origin git@github.com:githubname/repositoriesname.git</pre></td></tr><tr><td data-num="2"></td><td><pre>// 第一次提交时需要加上`-u`</pre></td></tr><tr><td data-num="3"></td><td><pre>git push -u origin master</pre></td></tr></table></figure><h2 id="提交代码的步骤"><a class="anchor" href="#提交代码的步骤">#</a> 提交代码的步骤</h2>
<figure class="highlight git"><figcaption data-lang="git"></figcaption><table><tr><td data-num="1"></td><td><pre>git status // 查看文件改动</pre></td></tr><tr><td data-num="2"></td><td><pre>git add .  // 把变化的所有文件放入缓冲区</pre></td></tr><tr><td data-num="3"></td><td><pre>git commit -m <span class="token string">"some messages"</span> // -m后面输入的是本次提交的说明</pre></td></tr><tr><td data-num="4"></td><td><pre>git push origin master</pre></td></tr></table></figure><h2 id="回退"><a class="anchor" href="#回退">#</a> 回退</h2>
<ul>
<li>撤销 <code>git status</code>  命令使用 <code>git reset HEAD filename</code>  或者 <code>git rm --cached filename</code></li>
<li>回退到某个版本（不会删除之前的提交） <code>git revert git_log_name</code>  或者 <code>git checkout git_log_name</code></li>
<li>回退上一版本  <code>git reset --hard HEAD</code></li>
<li>回退指定版本  <code>git reset --hard 版本号</code>  (注意 ：使用 --hard 会将本地代码一起回退！)</li>
</ul>
<p>使用 <code>git reset</code>  时要特别注意，因为它会销毁之前的提交数据，如果只是想回退到某个状态，请使用 <code>git revert git_log_name</code></p>
<h2 id="查看以往版本号本地"><a class="anchor" href="#查看以往版本号本地">#</a> 查看以往版本号 (本地)</h2>
<figure class="highlight git"><figcaption data-lang="git"></figcaption><table><tr><td data-num="1"></td><td><pre>git reflog</pre></td></tr></table></figure><h2 id="查看各版本号及信息个人和他人"><a class="anchor" href="#查看各版本号及信息个人和他人">#</a> 查看各版本号及信息 (个人和他人)</h2>
<figure class="highlight git"><figcaption data-lang="git"></figcaption><table><tr><td data-num="1"></td><td><pre>git log</pre></td></tr></table></figure><ul>
<li><code>git log</code>  命令显示从最近到最远的提交日志</li>
<li>如果看着太繁琐，可以使用 <code>git log --pretty=oneline</code>  或者更简洁的 <code>git log --oneline</code></li>
</ul>
<h2 id="撤销修改"><a class="anchor" href="#撤销修改">#</a> 撤销修改</h2>
<ul>
<li>在 <code>git commit -m</code>  前使用 <code>git checkout -- filename</code>  来撤销修改</li>
</ul>
<h2 id="对于已经-push-的版本回退"><a class="anchor" href="#对于已经-push-的版本回退">#</a> 对于已经 push 的版本回退</h2>
<figure class="highlight git"><figcaption data-lang="git"></figcaption><table><tr><td data-num="1"></td><td><pre>git reset --hard 版本号</pre></td></tr><tr><td data-num="2"></td><td><pre>git push -f origin dev</pre></td></tr></table></figure><h2 id="查看文件修改内容"><a class="anchor" href="#查看文件修改内容">#</a> 查看文件修改内容</h2>
<figure class="highlight git"><figcaption data-lang="git"></figcaption><table><tr><td data-num="1"></td><td><pre>git diff filename</pre></td></tr></table></figure><h2 id="解决冲突"><a class="anchor" href="#解决冲突">#</a> 解决冲突</h2>
<p>删除冲突代码，然后使用 <code>git commit</code> ，按下 <code>Shift + ;</code>  键，然后输入 <code>wq</code> ，最后按下 <code>Enter</code>  键</p>
<h2 id="git推到github失败解决措施"><a class="anchor" href="#git推到github失败解决措施">#</a> git 推到 github 失败解决措施</h2>
<h3 id="解决措施1"><a class="anchor" href="#解决措施1">#</a> 解决措施 1</h3>
<ol>
<li>打开 windows 目录下 <code>C://Windows/System32/drivers/etc</code></li>
<li>修改 hosts 文件</li>
</ol>
<figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>#github</pre></td></tr><tr><td data-num="2"></td><td><pre>#192.30.253.112 github.com</pre></td></tr><tr><td data-num="3"></td><td><pre>#151.101.185.194 github.global.ssl.fastly.net</pre></td></tr></table></figure><h2 id="远程仓库相关"><a class="anchor" href="#远程仓库相关">#</a> 远程仓库相关</h2>
<ol>
<li><code>git remote -v</code> ：查看远程仓库</li>
<li><code>git remote rm origin</code> : 删除远程仓库</li>
<li><code>git remote add origin</code> : 新增远程仓库</li>
</ol>
<h2 id="fork同步分支"><a class="anchor" href="#fork同步分支">#</a> fork 同步分支</h2>
<ol>
<li><code>git remote add upstream https://xxx</code></li>
<li><code>git fetch upstream</code></li>
<li><code>git merge upstream/master</code></li>
<li><code>git push</code></li>
</ol>
<h2 id="克隆需要的类型定义包"><a class="anchor" href="#克隆需要的类型定义包">#</a> 克隆需要的类型定义包</h2>
<p><strong>注意</strong>：需要 git 版本 2.27.0 及以上，该方法来自<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0RlZmluaXRlbHlUeXBlZC9EZWZpbml0ZWx5VHlwZWQ="> DefinitelyTyped (opens new window)</span></p>
<ol>
<li>
<pre><code>git clone --sparse --filter=blob:none --depth=1 &lt;forkedUrl&gt;
</code></pre>
<ul>
<li><code>--sparse</code>  告知 git 使用 sparse-checkout 方式，所以首次克隆的只有根部的文件。</li>
<li><code>--filter=blob:none</code>  将排除文件，只在需要时获取它们。</li>
<li><code>--depth=1</code>  可以通过阶段提交历史来进一步提高克隆速度，不过它可能会导致一些问题，见：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuYmxvZy8yMDIwLTEyLTIxLWdldC11cC10by1zcGVlZC13aXRoLXBhcnRpYWwtY2xvbmUtYW5kLXNoYWxsb3ctY2xvbmUv">here (opens new window)</span>.</li>
</ul>
</li>
<li>
<p><code>git sparse-checkout add types/ types/ ...</code></p>
</li>
</ol>
<h2 id="取消代理"><a class="anchor" href="#取消代理">#</a> 取消代理</h2>
<figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> config --global --unset http.proxy</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">git</span> config --global --unset https.proxy</pre></td></tr></table></figure><h2 id="设置代理"><a class="anchor" href="#设置代理">#</a> 设置代理</h2>
<figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> config --global https.proxy http://127.0.0.1:1080</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">git</span> config --global https.proxy https://127.0.0.1:1080</pre></td></tr></table></figure><h2 id="设置ss"><a class="anchor" href="#设置ss">#</a> 设置 ss</h2>
<figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> config --global http.proxy <span class="token string">'socks5://127.0.0.1:1080'</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">git</span> config --global https.proxy <span class="token string">'socks5://127.0.0.1:1080'</span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>html语义化</title>
    <url>/2020/09/16/html%E8%AF%AD%E4%B9%89%E5%8C%96/</url>
    <content><![CDATA[<h1 id="语义化"><a class="anchor" href="#语义化">#</a> 语义化</h1>
<p>HTML 语义化：就是页面去掉样式或者加载失败的时候能够让页面呈现出清晰的结构。HTML5 新增了好多语义化的标签，例如：header、footer、nav、menu、section、article 等等，单单从字面上理解，就知道标签的含义。在写页面的时候，我们可以直接引用这些标签，不需要再用没有任何含义的 div 标签了，对于机器可以识别，对于开发人员很容易明白。这就是 HTML 语义化。</p>
<h1 id="好处"><a class="anchor" href="#好处">#</a> 好处</h1>
<p>1）为了在没有 CSS 的情况下，页面也能呈现出很好地内容结构、代码结构<br />
 2）用户体验：例如 title、alt 用于解释名词<br />
 3）有利于 SEO：利于被搜索引擎收录，更便于搜索引擎的爬虫程序来识别<br />
 4）方便其他设备解析（如屏幕阅读器、盲人阅读器、移动设备）以意义的方式来渲染网页<br />
 5）便于项目的开发及维护，使 HTML 代码更具有可读性</p>
]]></content>
      <categories>
        <category>html</category>
      </categories>
  </entry>
  <entry>
    <title>javascript事件总结</title>
    <url>/2021/02/09/javascript%E4%BA%8B%E4%BB%B6%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h2 id="前言"><a class="anchor" href="#前言">#</a> 前言</h2>
<p>本文根据高程中的十三章来写的，相当于个人的读书笔记。</p>
<h2 id="事件流"><a class="anchor" href="#事件流">#</a> 事件流</h2>
<blockquote>
<p>事件流描述的是从页面中接收事件的顺序。</p>
</blockquote>
<h3 id="事件冒泡"><a class="anchor" href="#事件冒泡">#</a> 事件冒泡</h3>
<blockquote>
<p>IE 的事件流叫做事件冒泡，即事件开始时由最具体的元素接收，然后逐级向上传播到较为不具体的节点。</p>
</blockquote>
<h3 id="事件捕获"><a class="anchor" href="#事件捕获">#</a> 事件捕获</h3>
<blockquote>
<p>事件捕获的思想是不太具体的节点应该更早接收到事件，而最具体的节点应该最后接收到事件。尽管 “DOM2 级事件” 规范要求事件应该从 document 对象开始传播，但浏览器都是从 window 对象开始捕获事件。</p>
</blockquote>
<h3 id="dom-事件流"><a class="anchor" href="#dom-事件流">#</a> DOM 事件流</h3>
<blockquote>
<p>“DOM2 级事件” 规定的事件流包括三个阶段：事件捕获阶段、处于事件目标阶段和事件冒泡阶段。</p>
</blockquote>
<h2 id="事件处理程序"><a class="anchor" href="#事件处理程序">#</a> 事件处理程序</h2>
<blockquote>
<p>事件就是用户或浏览器自身执行的某种动作。诸如 click、load 和 mouseover，都是事件的名字。而响应某个事件的函数就叫做<strong>事件处理程序</strong>，事件处理程序的名字都是以 “on” 开头。</p>
</blockquote>
<h3 id="html-事件处理程序"><a class="anchor" href="#html-事件处理程序">#</a> HTML 事件处理程序</h3>
<p>直接写到 HTML 里的事件 (不推荐使用)：</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hello world!'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="dom0-级事件处理程序"><a class="anchor" href="#dom0-级事件处理程序">#</a> DOM0 级事件处理程序</h3>
<blockquote>
<p>通过 JS 指定事件处理程序的传统方式，就是将一个函数赋值给一个事件处理程序属性。使用 DOM0 级方法指定的事件处理程序被认为是元素的方法。</p>
</blockquote>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">const</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".btn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"hello world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="dom2-级事件处理程序"><a class="anchor" href="#dom2-级事件处理程序">#</a> DOM2 级事件处理程序</h3>
<blockquote>
<p>“DOM2 级事件” 定义了两个方法，用于处理和删除事件处理程序的操作：addEventListener () 和 removeEventListener ()。所有 DOM 节点都有这两个方法，接收三个参数：要处理的事件名、作为事件处理程序的函数和一个布尔值。如果这个布尔值参数为 true，那么在捕获阶段调用事件处理程序，否则在冒泡阶段调用，默认是 false。</p>
</blockquote>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">const</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".btn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"hello world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><blockquote>
<p>与 DOM0 级方法一样，这里添加的事件处理程序也是在其依附的元素的作用域中运行。使用 DOM2 级方法添加事件处理程序的主要好处是可以添加多个事件处理程序。</p>
</blockquote>
<h3 id="ie-事件处理程序"><a class="anchor" href="#ie-事件处理程序">#</a> IE 事件处理程序</h3>
<p>attachEvent () 和 detachEvent ()，因其不是规范标准，故不介绍。</p>
<h2 id="事件对象"><a class="anchor" href="#事件对象">#</a> 事件对象</h2>
<blockquote>
<p>在触发 DOM 上的某个事件时，会产生一个事件对象 event，这个对象包含着所有与事件相关的信息。包括导致事件的元素、事件的类型以及其他与特定事件相关的信息。</p>
</blockquote>
<h3 id="dom-中的事件对象"><a class="anchor" href="#dom-中的事件对象">#</a> DOM 中的事件对象</h3>
<blockquote>
<p>兼容 DOM 的浏览器会将一个 event 对象传入到事件处理程序中。无论指定事件处理程序使用什么方法，都会传入 event 对象。</p>
</blockquote>
<p>所有事件都会有下列的成员，以下成员只读</p>
<ul>
<li>bubbles (Boolean): 表示事件是否冒泡</li>
<li>cancelable (Boolean): 表示是否可以取消事件的默认行为</li>
<li>currentTarget (Element): 表示事件处理程序当前处理事件的那个元素</li>
<li>defaultPrevented (Boolean): 为 true 表示已经调用了 preventDefault ()（DOM3 级事件中新增）</li>
<li>detail (Integer): 与事件相关的细节，对 click 或者 dbclick，为当前点击数量 1、2，对于 mousedown 或者 mouseup 事件，是 1 加上当前点击数，对于其他事件总是 0</li>
<li>eventPhase (Integer)：调用事件处理程序的阶段，1 表示捕获阶段，2 表示 “处于目标”，3 表示冒泡阶段</li>
<li>preventDefault (): 取消事件的默认行为</li>
<li>stopImmediatePropagation (): 取消事件的进一步捕获或冒泡，同时阻止任何事件处理程序被调用（DOM3 级）</li>
<li>stopPropagation (): 取消事件的进一步捕获或冒泡</li>
<li>target (Element): 事件的目标</li>
<li>trusted (Boolean): 为 true 表示事件是浏览器生成的，为 false 表示事件是由开发人员创建的</li>
<li>type (String): 被触发的事件的类型，例如 click 事件显示 <code>click</code></li>
<li>view (AbstractView): 与事件关联的抽象视图，浏览器中就是 window 对象</li>
</ul>
<p>阻止事件的默认行为， <code>preventDefault()</code> ，例如点击链接导航到 href 指向的 URL，阻止它使用该方法。</p>
<h3 id="ie-中的事件对象"><a class="anchor" href="#ie-中的事件对象">#</a> IE 中的事件对象</h3>
<ul>
<li>cancelBubble (Boolean), 读 / 写，默认值是 false，设置 true 能够取消事件冒泡（等同于 stopPropagation ()）</li>
<li>returnValue (Boolean), 读 / 写，默认值是 true，可以取消事件的默认行为（等同于 preventDefault ()），注意 Firefox 不支持</li>
<li>srcElement: 只读，与 (target 属性获取的值相同)</li>
<li>type: 只读，被触发的事件类型</li>
</ul>
<p>现在在大多高版本的 IE 支持 DOM 的传统语法，因此这些方法只做了解。</p>
<h2 id="事件类型"><a class="anchor" href="#事件类型">#</a> 事件类型</h2>
<h3 id="ui-事件"><a class="anchor" href="#ui-事件">#</a> UI 事件</h3>
<p>当用户与页面上的元素交互时触发</p>
<h4 id="事件"><a class="anchor" href="#事件">#</a> 事件</h4>
<p>当页面完全加载后（包括所有图像、JavaScript 文件、CSS 文件等外部资源），就会触发 window 上面的 load 事件。</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"load"</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// next</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>当页面完全卸载后在 window 上面触发，当所有框架都卸载后在框架集上面触发。</p>
<h4 id="resize-事件"><a class="anchor" href="#resize-事件">#</a> resize 事件</h4>
<p>当窗口或框架的大小变化时在 window 或框架上面触发，该事件可以考虑防抖或者节流</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"resize"</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// next</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h4 id="scroll-事件"><a class="anchor" href="#scroll-事件">#</a> scroll 事件</h4>
<p>当用户滚动带滚动条的元素中的内容时，在该元素上面触发。</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"scroll"</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// nex</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="焦点事件"><a class="anchor" href="#焦点事件">#</a> 焦点事件</h3>
<ul>
<li>blur: 在元素失去焦点时触发。该事件不会冒泡</li>
<li>focus: 在元素获得焦点时触发。该事件不会冒泡</li>
<li>focusin: 在元素获得焦点时触发。与 focus 等价，但它冒泡</li>
<li>focusout: 在元素失去焦点时触发。</li>
</ul>
<p>当焦点从一个元素转到另一个元素，依次触发下列事件，focusout (失去焦点元素触发)-&gt;focusin (获得焦点元素触发)-&gt;blur (失去焦点元素触发)-&gt;DOMFocusOut (失去焦点元素触发)-&gt;focus (获得焦点元素触发)-&gt;DOMFocusIn (获得元素触发)</p>
<h3 id="鼠标与滚轮事件"><a class="anchor" href="#鼠标与滚轮事件">#</a> 鼠标与滚轮事件</h3>
<h4 id="鼠标事件"><a class="anchor" href="#鼠标事件">#</a> 鼠标事件</h4>
<blockquote>
<p>只有在同一个元素上相继触发 mousedown 和 mouseup 事件，才会触发 click 事件；只要其中有一个被取消，就不会触发 click 事件。</p>
</blockquote>
<ul>
<li>click</li>
<li>dblclick</li>
<li>mousedown: 在用户按下了任意鼠标按钮时触发</li>
<li>mouseenter: 在鼠标光标从元素外部首次移动到元素范围内触发</li>
<li>mouseleave</li>
<li>mousemove</li>
<li>mouseout</li>
<li>mouseover: 与 mouseenter 功能类似，区别是 mouseover 在子元素之间切换或者父元素过渡到子元素都能监听到，而 mouseenter 在监听元素内任意过渡无影响</li>
<li>mouseup</li>
</ul>
<h4 id="坐标"><a class="anchor" href="#坐标">#</a> 坐标</h4>
<ul>
<li>clientX, clientY: 鼠标指针在视口的水平和垂直坐标</li>
<li>pageX, pageY: 鼠标指针在非视口的水平和垂直坐标，在没有滚动的情况下 pageX (Y) 等于 clientX (Y)</li>
<li>screenX, screenY: 鼠标指针相对于整个屏幕的坐标信息</li>
</ul>
<h4 id="鼠标滚轮事件"><a class="anchor" href="#鼠标滚轮事件">#</a> 鼠标滚轮事件</h4>
<ul>
<li>mousewheel：firefox 不支持，当用户向前滚动时，wheelDelta 是 120 的倍数；当用户向后滚动时，wheelDelta 是 - 120 的倍数</li>
<li>DOMMouseScroll: firefox 滚动事件，当用户向前滚动时，detail 是 - 3 的倍数；当用户向后滚动时，wheelDelta 是 3 的倍数</li>
</ul>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"mousewheel"</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> wheelDelta <span class="token punctuation">&#125;</span> <span class="token operator">=</span> e<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>wheelDelta<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h4 id="注意点"><a class="anchor" href="#注意点">#</a> 注意点</h4>
<ol>
<li>触摸设备不支持 dbclick 事件</li>
<li>两个手指放到屏幕上且页面随手指移动而滚动时会触发 mousewheel 和 scroll 事件</li>
</ol>
<h3 id="键盘和文本事件"><a class="anchor" href="#键盘和文本事件">#</a> 键盘和文本事件</h3>
<blockquote>
<p>keydown 和 keypress 都是在文本框发生变化之前被触发，而 keyup 事件则是文本框已经发生变化之后被触发的</p>
</blockquote>
<ul>
<li>keydown: 当用户按下任意键时触发</li>
<li>keypress: 当用户按下键盘上的字符键时触发</li>
<li>keyup: 当用户释放键盘上的键时触发</li>
</ul>
<h4 id="键码"><a class="anchor" href="#键码">#</a> 键码</h4>
<p>event.keyCode，下面列举几个常见的键码：</p>
<ul>
<li>Backspace: 8</li>
<li>Tab: 9</li>
<li>Enter: 13</li>
<li>Shift: 16</li>
<li>Ctrl: 17</li>
<li>Alt: 18</li>
<li>Left Arrow: 37</li>
<li>Up Arrow: 38</li>
<li>Right Arrow: 39</li>
<li>Down Arrow: 40</li>
<li>数字小键盘 0: 96</li>
<li>F1: 112</li>
</ul>
<h4 id="字符编码"><a class="anchor" href="#字符编码">#</a> 字符编码</h4>
<p>charCode: 这个属性只有在发生 keypress 事件时才包含值，而且这个值是按下键所代表的 ASCII 编码</p>
<h4 id="dom3-级变化"><a class="anchor" href="#dom3-级变化">#</a> DOM3 级变化</h4>
<ul>
<li>key</li>
<li>char</li>
<li>keyIndentifier</li>
</ul>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"keypress"</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> key<span class="token punctuation">,</span> char <span class="token punctuation">&#125;</span> <span class="token operator">=</span> e<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"key is"</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// key is 5</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h4 id="textinput-事件"><a class="anchor" href="#textinput-事件">#</a> textInput 事件</h4>
<blockquote>
<p>根据规范，当用户在可编辑区域中输入字符时，就会触发事件。</p>
</blockquote>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> text <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>text<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"textInput"</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> data <span class="token punctuation">&#125;</span> <span class="token operator">=</span> e<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">// 用户输入的字符，单个字符输出</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="复合事件"><a class="anchor" href="#复合事件">#</a> 复合事件</h3>
<blockquote>
<p>是 DOM3 级事件中新添加的一类事件，用于处理 IME 的输入序列。</p>
</blockquote>
<h3 id="变动事件"><a class="anchor" href="#变动事件">#</a> 变动事件</h3>
<blockquote>
<p>DOM2 级的变动事件能在 DOM 中的某一部分发生变化时给出提示。</p>
</blockquote>
<h3 id="html5-事件"><a class="anchor" href="#html5-事件">#</a> HTML5 事件</h3>
<h4 id="contentmenu-事件"><a class="anchor" href="#contentmenu-事件">#</a> contentmenu 事件</h4>
<p>比如点击右键禁止出现菜单</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"box"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"contentmenu"</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h4 id="beforeunload"><a class="anchor" href="#beforeunload">#</a> beforeunload</h4>
<blockquote>
<p>是为了让开发人员有可能在页面卸载前 (关闭或者刷新) 阻止这一操作。</p>
</blockquote>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"beforeunload"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token string">"I'm really going to miss you if you go."</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  e<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> msg<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">return</span> msg<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h4 id="domcontentloaded"><a class="anchor" href="#domcontentloaded">#</a> DOMContentLoaded</h4>
<blockquote>
<p>支持在页面下载的早期添加事件处理程序，这就意味着用户能够尽早地与页面进行交互。</p>
</blockquote>
<h4 id="readystatechange"><a class="anchor" href="#readystatechange">#</a> readystatechange</h4>
<blockquote>
<p>这个事件的目的是提供与文档或者元素的加载状态有关的信息。</p>
</blockquote>
<h4 id="pageshow-pagehide"><a class="anchor" href="#pageshow-pagehide">#</a> pageshow、pagehide</h4>
<h4 id="hashchange"><a class="anchor" href="#hashchange">#</a> hashchange</h4>
<blockquote>
<p>以便在 URL 的参数列表 (即 URL 中 #号后面的所有的字符串) 发生变化时通知开发人员。</p>
</blockquote>
<p>使用这个 API 是一种路由的切换方式之一</p>
<h3 id="设备事件"><a class="anchor" href="#设备事件">#</a> 设备事件</h3>
<h4 id="orientationchange"><a class="anchor" href="#orientationchange">#</a> orientationchange</h4>
<p>0 表示肖像模式 (通俗讲的 home 键在下面的时候)，90 表示向左旋转的横向模式 (主屏幕按钮在右侧)，-90 表示向右旋转的横向模式 (主屏幕按钮在左侧)，180 表示向下</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"orientationchange"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">alert</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>orientation<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="触摸与手势事件"><a class="anchor" href="#触摸与手势事件">#</a> 触摸与手势事件</h3>
<ul>
<li>touchstart: 当手指触摸屏幕时触发</li>
<li>touchmove: 当手指在屏幕上滑动时连续地触发</li>
<li>touchend: 当手指从屏幕上移开时触发</li>
</ul>
<p>每个触摸事件的 event 对象都提供了鼠标事件中的常见的属性：bubbles、cancelable、view、detail、altKey、shiftKey、ctrlKey、metaKey，还有<strong> touches</strong>、<strong>targetTouchs</strong>、<strong>changeTouches</strong></p>
<p>每个 touch 对象包含下列属性</p>
<ul>
<li>clientX: 触摸目标在视口中的 x 坐标</li>
<li>clientY: 触摸目标在视口中的 y 坐标</li>
<li>identifier: 标识触摸的唯一 ID</li>
<li>pageX: 触摸目标在页面中的 x 坐标</li>
<li>pageY: 触摸目标在页面中的 y 坐标</li>
<li>screenX</li>
<li>screenY</li>
<li>target: 触摸的 DOM 节点目标</li>
</ul>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"touchstart"</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> touches<span class="token punctuation">,</span> target <span class="token punctuation">&#125;</span> <span class="token operator">=</span> e<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clientX<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h4 id="手势事件"><a class="anchor" href="#手势事件">#</a> 手势事件</h4>
<p>只有 Safari 支持，因此不推荐使用</p>
<ul>
<li>gesturestart: 当一个手指已经按到屏幕上面另一个手指又触摸屏幕时触发</li>
<li>gesturechange: 当触摸屏幕的任何一个手指的位置发生变化时触发</li>
<li>gestureend: 当一个手指从屏幕上移开时触发</li>
</ul>
<h2 id="内存和性能"><a class="anchor" href="#内存和性能">#</a> 内存和性能</h2>
<h3 id="事件委托事件代理"><a class="anchor" href="#事件委托事件代理">#</a> 事件委托 (事件代理)</h3>
<blockquote>
<p>事件委托利用了事件冒泡，只指定一个处理程序就可以管理某一类型的所有事件。最合适采用事件委托的事件包括 click、mousedown、mouseup、keydown、keyup、keypress</p>
</blockquote>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lists<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>test1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>test2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 可以不用为每个 li 添加点击事件，利用事件冒泡只需要绑定父元素上就可以使子元素也能绑定点击事件</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> lists <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#lists"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>lists<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">const</span> name <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">"li"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="移除事件处理程序"><a class="anchor" href="#移除事件处理程序">#</a> 移除事件处理程序</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"myBtn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  btn<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 移除事件处理程序</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">// Todo ...</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="模拟事件"><a class="anchor" href="#模拟事件">#</a> 模拟事件</h2>
<ul>
<li>createEvent: 创建 event 对象</li>
<li>dispatchEvent: 触发事件</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> btn1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#btn1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> btn2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#btn2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>btn1<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 点击 btn2 相当于点击 btn1</span></pre></td></tr><tr><td data-num="8"></td><td><pre>btn2<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token keyword">const</span> event <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createEvent</span><span class="token punctuation">(</span><span class="token string">"MouseEvents"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  event<span class="token punctuation">.</span><span class="token function">initMouseEvent</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token comment">// 上面这两句可以使用 const event = new Event ('click') 替代</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  btn1<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>事件冒泡</tag>
        <tag>事件捕获</tag>
        <tag>事件处理</tag>
        <tag>程序事件</tag>
        <tag>委托</tag>
        <tag>事件模拟</tag>
      </tags>
  </entry>
  <entry>
    <title>json与ajax</title>
    <url>/2021/02/15/json%E4%B8%8Eajax/</url>
    <content><![CDATA[<h2 id="前言"><a class="anchor" href="#前言">#</a> 前言</h2>
<p>本文根据高程中的二十、二十一章来写的，相当于个人的读书笔记。</p>
<h2 id="json-语法"><a class="anchor" href="#json-语法">#</a> JSON 语法</h2>
<p>JSON 不支持<strong>变量</strong>、<strong>函数</strong>、<strong>对象实例</strong>，它就是一种表示结构化数据的格式，JSON 语法可以表示以下三种类型的值：</p>
<ul>
<li>简单值：使用与 JavaScript 相同的语法，可以在 JSON 中表示字符串、数值、布尔值和 null，但是不支持 undefined</li>
<li>对象：表示一组无序的键值对</li>
<li>数组：表示一组有序的值的列表</li>
</ul>
<h3 id="简单值"><a class="anchor" href="#简单值">#</a> 简单值</h3>
<p>可以直接用简单值构成一个 JSON，例如直接写 &quot;hello world&quot;，JSON 字符串必须使用双引号 (单引号会导致语法错误)</p>
<h3 id="对象"><a class="anchor" href="#对象">#</a> 对象</h3>
<p>与 JS 的对象字面量相比，JSON 对象有两个差异之处，一是没有声明变量，二是没有末尾的分号；JOSN 还有与众不同的是最后一个属性后不能加多余逗号</p>
<figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"tony"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token property">"age"</span><span class="token operator">:</span> <span class="token number">123</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="数组"><a class="anchor" href="#数组">#</a> 数组</h3>
<figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span><span class="token string">"hello world"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token null keyword">null</span><span class="token punctuation">]</span></pre></td></tr></table></figure><h2 id="json-解析与序列化"><a class="anchor" href="#json-解析与序列化">#</a> JSON 解析与序列化</h2>
<p>JSON 对象的两个方法：stringify () 和 parse ()，分别用于把 JS 对象序列化成 JSON 字符串和把 JSON 字符串解析为原生 JS 值，默认情况下，JSON.stringify () 输出的 JSON 字符串<strong>不包含任何空格字符或缩进</strong>，在序列化对象时，所有函数、原型成员和值为 undefined 都会被有意忽略，最终结果都是有效的 JSON 数据类型的实例属性</p>
<h3 id="序列化选项"><a class="anchor" href="#序列化选项">#</a> 序列化选项</h3>
<p>JSON.stringify () 除了要序列化 JS 对象之外，还可以接收两个参数，第一个参数是个过滤器，可以是数组，也可以是函数；第二个参数是一个选项，表示是否在 JSON 字符串中保留缩进，最大缩进空格数为 10，所有大于 10 的值都会自动转换为 10</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> test <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">"a"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">"b"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token keyword">null</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>test<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 只会返回 a 和 c 属性</span></pre></td></tr></table></figure><h3 id="tojson方法"><a class="anchor" href="#tojson方法">#</a> toJSON () 方法</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> test <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">"a"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">"b"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'a'</span></pre></td></tr></table></figure><p>假如把一个对象传入 JSON.stringify ()，序列化该对象的顺序如下：</p>
<ol>
<li>如果存在 toJOSN () 方法而且能通过它取得有效的值，则调用该方法</li>
<li>如果提供了第二个参数，应用这个函数过滤器，传入函数过滤器的值是第一步返回的值</li>
<li>对第二步返回的每个值进行相应的序列化，执行相应的序列化</li>
<li>如果提供了第三个参数，执行相应的格式化</li>
</ol>
<h3 id="解析选项"><a class="anchor" href="#解析选项">#</a> 解析选项</h3>
<p>JOSN.parse () 也可以接受另一个参数，该参数是一个函数，将在每个键值对调用</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">return</span> value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="xmlhttprequestajax-技术的核心"><a class="anchor" href="#xmlhttprequestajax-技术的核心">#</a> XMLHTTPRequest (Ajax 技术的核心)</h2>
<p>直接使用 new 实例化该对象： <code>const xhr = new XMLHTTPRequest()</code></p>
<h3 id="xhr-的用法"><a class="anchor" href="#xhr-的用法">#</a> xhr 的用法</h3>
<p>在使用 XHR 对象时，调用的第一个方法是 open ()，它接收三个参数：要发送的请求类型 (get, post)，这一方法只是启动一个请求已备发送</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"get"</span><span class="token punctuation">,</span> <span class="token string">"api/test"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 发送特定的请求</span></pre></td></tr><tr><td data-num="4"></td><td><pre>xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>send () 方法接收一个参数，即要作为请求主体发送的数据。如果不需要通过请求主体发送数据，则必须是 null。在收到相应后的数据会自动填充到 XHR 对象的属性，</p>
<ul>
<li>responseText: 作为响应主体被返回的文本</li>
<li>responseXML: 如果响应的内容类型是 text/xml 或 application/xml，这个属性中将保存包含着响应数据的 XML DOM 文档</li>
<li>status: 响应的 HTTP 状态</li>
<li>statusText: HTTP 状态的说明</li>
</ul>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">>=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token operator">||</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">304</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Request was unsuccessful"</span><span class="token punctuation">,</span> xhr<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>在多数情况下我们需要发送的是异步请求，才能让 JS 继续执行而不必等待响应。此时，可以检测 XHR 对象的 readyState 属性，该属性表示请求 / 响应过程的当前活动阶段。这个可取的值如下：</p>
<ol>
<li>0: 未初始化。尚未调用 open () 方法</li>
<li>1: 启动。已经调用 open () 方法，但尚未调用 send () 方法</li>
<li>2: 发送。已经调用 send () 方法，但尚未收到响应</li>
<li>3: 接收。已经接收到部分响应数据</li>
<li>4: 完成。已经接收到全部响应数据，而且已经在客户端使用了</li>
</ol>
<p>只要 readyState 属性的值由一个值变成另一个值，都会触发一次 readystatechange 事件。必须在 open 调用之前指定 onreadystatechange 事件来保证跨浏览器兼容性</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHTTPRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">>=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token operator">||</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">304</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Request was unsuccessful:"</span><span class="token punctuation">,</span> xhr<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"get"</span><span class="token punctuation">,</span> <span class="token string">"api/test"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><blockquote>
<p>在接收到响应之前还可以调用 abort () 方法来取消异步请求，调用这个方法后，XHR 对象会停止触发事件，而且也不再允许任何与响应有关的对象属性，在终止请求之后，还应该对 XHR 进行解引用操作。由于内存原因，<strong>不建议重用 XHR 对象</strong></p>
</blockquote>
<h3 id="http-头部信息"><a class="anchor" href="#http-头部信息">#</a> HTTP 头部信息</h3>
<p>在发送 XHR 请求的同时，还会发送下列头部信息：</p>
<ul>
<li>Accept: 浏览器能够处理的内容类型</li>
<li>Accept-Charset: 浏览器能够显示的字符集</li>
<li>Accept-Encoding: 浏览器能够处理的压缩编码</li>
<li>Accept-Language: 浏览器当前设置的语言</li>
<li>Connection: 浏览器与服务器之间连接的类型</li>
<li>Cookie: 当前页面设置的任何 Cookie</li>
<li>Host: 发出请求页面所在的域</li>
<li>Referer: 发出请求的页面 URI。注意 HTTP 规范对这个字段拼错了，实际是 referrer</li>
<li>User-Agent: 浏览器的用户代理字符串</li>
</ul>
<p>使用 setRequestHeader () 方法可以设置自定义的请求头部信息，但必须在调用 **open ()<strong> 方法之后</strong> send ()** 方法之前。</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"MyHeader"</span><span class="token punctuation">,</span> <span class="token string">"MyValue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>调用 XHR 对象的 getResponseHeader () 方法并传入头部字段名称，可以取得相应的响应头部信息。而调用 getAllReponseHeaders () 方法可以取得一个包含所有头部信息的长字符串。</p>
<h3 id="get-请求"><a class="anchor" href="#get-请求">#</a> GET 请求</h3>
<p>下面这个函数可以辅助向现有 URL 的末尾添加查询字符串参数：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">addURLParam</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  url <span class="token operator">+=</span> url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"?"</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token string">"?"</span> <span class="token operator">:</span> <span class="token string">"&amp;"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  url <span class="token operator">+=</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"="</span> <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">return</span> url<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="post-请求"><a class="anchor" href="#post-请求">#</a> POST 请求</h3>
<p>可以使用 XHR 来模仿表单提交，首先将 Content-Type 头部信息设置为 application/x-www-form-urlencoded，其次以适当的格式创建一个字符串</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// ...</span></pre></td></tr><tr><td data-num="2"></td><td><pre>xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Type"</span><span class="token punctuation">,</span> <span class="token string">"application/x-www-form-urlencoded"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="xmlhttprequest-2-级"><a class="anchor" href="#xmlhttprequest-2-级">#</a> XMLHTTPRequest 2 级</h2>
<h3 id="formdata"><a class="anchor" href="#formdata">#</a> FormData</h3>
<p>FormData 为表单序列化以及创建与表单格式相同的数据提供了便利，使用 FormData 的方便之处在于不用给 XHR 对象上设置头部，它能自动识别。</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>data<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"tony"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="超时设定"><a class="anchor" href="#超时设定">#</a> 超时设定</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// open</span></pre></td></tr><tr><td data-num="2"></td><td><pre>xhr<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>xhr<span class="token punctuation">.</span><span class="token function-variable function">ontimeout</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Request did not return in ten seconds."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// send</span></pre></td></tr></table></figure><h3 id="overridemimetype方法"><a class="anchor" href="#overridemimetype方法">#</a> overrideMimeType () 方法</h3>
<p>重写 XHR 响应的 MIME 类型</p>
<h2 id="进度事件"><a class="anchor" href="#进度事件">#</a> 进度事件</h2>
<p>Progress Events 规范定义了与客户端服务器通信有关的事件。有六个进度事件：</p>
<ul>
<li>loadstart: 在接受到响应数据的第一个字节时触发</li>
<li>progress: 在接收响应期间持续不断地触发</li>
<li>error: 在请求发生错误时触发</li>
<li>abort: 在因为调用 abort () 方法而终止连接时触发</li>
<li>load: 在接收到完整的响应数据时触发</li>
<li>loadend: 在通信完成或者触发 error、abort 或 load 事件后触发</li>
</ul>
<h3 id="load-事件"><a class="anchor" href="#load-事件">#</a> load 事件</h3>
<p>用于替代 readystatechange 事件</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">>=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token operator">||</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">304</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>reponseText<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="progress-事件"><a class="anchor" href="#progress-事件">#</a> progress 事件</h3>
<p>这个事件会在浏览器接收新数据期间周期性触发，event 中包含三个属性：</p>
<ul>
<li>lengthComputable: 表示进度信息是否可用的布尔值</li>
<li>position: 表示已经接收到的字节数</li>
<li>totalSize: 表示根据 Content-Length 响应头部确定的预期字节数</li>
</ul>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>xhr<span class="token punctuation">.</span><span class="token function-variable function">onprogress</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>lengthComputable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    box<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'Received'</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>position <span class="token operator">+</span> <span class="token string">' of '</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>totalSize <span class="token operator">+</span> <span class="token string">' bytes'</span><span class="token punctuation">.</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="跨域资源共享"><a class="anchor" href="#跨域资源共享">#</a> 跨域资源共享</h2>
<p>CORS，定义了在必须访问跨域资源时，浏览器与服务器应该如何沟通。在发送请求时，需要给它额外的 Origin 头部，其中包含请求页面的源信息 (协议、域名、端口)，以便服务器根据这个头部信息来决定是否给予响应</p>
<h3 id="ie-对-cors-的实现"><a class="anchor" href="#ie-对-cors-的实现">#</a> IE 对 CORS 的实现</h3>
<p><strong>已废弃</strong>，使用 XDomainRequest 实例，简称 XDR</p>
<h3 id="其他浏览器对-cors-的实现"><a class="anchor" href="#其他浏览器对-cors-的实现">#</a> 其他浏览器对 CORS 的实现</h3>
<p>在 XHR 对象的 open 方法中传入绝对 URL 即可，但是有以下这些限制：</p>
<ul>
<li>不能使用 setRequestHeader () 设置自定义头部</li>
<li>不能发送和接收 cookie</li>
<li>调用 getAllResponseHeader () 方法总会返回空字符串</li>
</ul>
<h3 id="preflighted-requests"><a class="anchor" href="#preflighted-requests">#</a> Preflighted Requests</h3>
<blockquote>
<p>CORS 通过一种叫做 Preflighted Requests 的透明服务器验证机制支持开发人员使用自定义的头部、GET 和 POST 之外的方法，以及不同类型的主体内容。</p>
</blockquote>
<p>这是一个 CORS 预检请求是用于检查服务器是否支持 CORS 即跨域资源共享。它一般是用了以下几个 HTTP 请求首部的 OPTIONS 请求：Access-Control-Request-Method 和 Access-Control-Request-Headers，以及一个 Origin 首部。当有必要的时候，浏览器会自动发出一个预检请求；所以在正常情况下，前端开发者不需要自己去发这样的请求。</p>
<h3 id="带凭据的请求"><a class="anchor" href="#带凭据的请求">#</a> 带凭据的请求</h3>
<p>默认情况下，跨域请求不能提供凭据 (cookie, HTTP 认证及客户端 SSL 证明等)。通过将 withCredentials 属性设置为 true，可以指定某个请求应该发送凭据。如果浏览器接收带凭据的请求，会用 <code>Access-Control-Allow-Credentials: true</code> HTTP 头部来响应</p>
<h2 id="其他跨域技术"><a class="anchor" href="#其他跨域技术">#</a> 其他跨域技术</h2>
<h3 id="图像-ping"><a class="anchor" href="#图像-ping">#</a> 图像 Ping</h3>
<p>这里通过创建一个 Image 实例，然后将 onload 和 onerror 事件处理程序指定为同一个函数。图像 Ping 常用于跟踪用户点击页面或动态广告曝光次数。图像 Ping 的两个缺点：一个只能发送 GET 请求，二是无法访问服务器的响应文本。因此，图像 Ping 只能用于浏览器与服务器间的单向通信。</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>img<span class="token punctuation">.</span>onload <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"done"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">"http://www.example.com/api/test?name=tony"</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="jsonp"><a class="anchor" href="#jsonp">#</a> JSONP</h3>
<blockquote>
<p>JSONP 是通过动态 script 元素来使用的，使用时可以为 src 属性指定一个跨域 URL。这里的 script 域 img 类似，都有能力不受限制地从其他域加载资源。因为 JSONP 是有效的 JS 代码，所以请求完成后，即在 JSONP 响应加载到页面中以后，就会立即执行</p>
</blockquote>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">handleResponse</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>ip<span class="token punctuation">,</span> res<span class="token punctuation">.</span>city<span class="token punctuation">,</span> res<span class="token punctuation">.</span>region_name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">script</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">"http://freegeoip.net/json/?callback=handleResponse"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>script<span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>JSONP 优点在于能够直接访问响应文本，支持浏览器与服务器之间的双向通信，但是还有缺点，一是从其他域加载代码，必须保证安全可靠，如果存在恶意代码就会造成破坏，二是确定请求是否失败这一点很不容易。</p>
<h3 id="comet"><a class="anchor" href="#comet">#</a> Comet</h3>
<p>两种实现 Comet 的方式：长轮询和流，长轮询是页面发起一个服务器的请求，然后服务器一直保持连接打开，直到有数据可发送。发送完数据之后，随即又发起一个到服务器的新请求，这一过程在页面打开过程中不断进行，可以使用 XHR 和 setTimeout () 实现；流就是浏览器向服务器发送一个请求，而服务器保持连接打开，然后周期性地向浏览器发送数据。</p>
<h3 id="服务器发送事件"><a class="anchor" href="#服务器发送事件">#</a> [服务器发送事件</h3>
<p>SSE 服务器围绕只读 Comet 交互推出的 API 或者模式，用于创建到服务器的单向连接，服务器可以通过这个连接发送任意数量的数据。服务器响应的 MIME 类型必须是 text/event-stream。</p>
<p>EventSource 的实例有一个 readyState 属性，值为 0 正连接到服务器，值 1 表示打开了连接，值 2 代表关闭了连接，还有三个事件：open (建立连接时触发)、message (从服务器接收到新事件时触发)、error (无法建立连接时触发)，响应的格式是纯文本</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span><span class="token string">"myevents.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>source<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token parameter">event</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">const</span> data <span class="token operator">=</span> event<span class="token punctuation">.</span>data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>source<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 强制立即断开连接并且不再重新连接</span></pre></td></tr></table></figure><h3 id="web-sockets"><a class="anchor" href="#web-sockets">#</a> Web Sockets</h3>
<blockquote>
<p>Web Sockets 的目标是在一个单独的持久连接上提供全双工、双向通信。在 JS 中创建了 Web Socket 之后，会有一个 HTTP 请求发送到浏览器以发起连接。在取得服务器响应后，建立的连接会使用 HTTP 升级从 HTTP 协议交换为 Web Socket 协议。也就是说标准的 HTTPg 服务器无法实现 Web Sockets，只能是支持这种协议的专门服务器才能正常工作。</p>
</blockquote>
<p>加密的连接以 wss://，未加密的连接用 ws:// 开头</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span><span class="token string">"ws://www.example.com/test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 传入绝对的 URL</span></pre></td></tr></table></figure><p>发送、接收和关闭事件</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>socket<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 只能发送纯文本</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>socket<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">// 当服务器向客户端发送消息时触发 message 事件</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">const</span> data <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token comment">// next</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 关闭 socket</span></pre></td></tr></table></figure><p><strong>其他事件</strong></p>
<ul>
<li>open: 在成功建立连接时触发</li>
<li>error: 在发生错误时触发，连接不能持续</li>
<li>close: 在连接关闭时触发</li>
</ul>
<p>WebSocket 对象不支持 DOM2 级事件监听器，也就是说不能用 addEventListener</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>socket<span class="token punctuation">.</span><span class="token function-variable function">onclose</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// 表示连接是否明确的关闭；服务器返回的状态码；包含服务器发回的消息</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>wasClean<span class="token punctuation">,</span> e<span class="token punctuation">.</span>code<span class="token punctuation">,</span> e<span class="token punctuation">.</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>JSON</tag>
        <tag>XMLHTTPRequest</tag>
        <tag>AJAX</tag>
        <tag>跨域</tag>
        <tag>Web Sockets</tag>
      </tags>
  </entry>
  <entry>
    <title>js字符串常用方法</title>
    <url>/2020/11/09/js%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<h2 id="1-charatx"><a class="anchor" href="#1-charatx">#</a> 1. charAt(x)</h2>
<p><code>charAt(x)</code>  返回字符串中 <code>x</code>  位置的字符，下标从  <code>0</code>  开始。</p>
<pre><code>//charAt(x)
var myString = 'jQuery FTW!!!';
console.log(myString.charAt(7));
//output: F
 
</code></pre>
<h2 id="2charcodeatx"><a class="anchor" href="#2charcodeatx">#</a> 2.charCodeAt(x)</h2>
<p><code>charCodeAt(x)</code>  返回字符串中 <code>x</code>  位置处字符的 <code>unicode</code>  值。</p>
<pre><code>//charCodeAt(position)
var message=&quot;jquery4u&quot;
//alert &quot;113&quot;
alert(message.charCodeAt(1)
 
</code></pre>
<h2 id="3concatv1v2"><a class="anchor" href="#3concatv1v2">#</a> 3.concat(v1,v2..)</h2>
<p><code>concat()</code>  方法用于连接两个或多个字符串，此方法不改变现有的字符串，返回拼接后的新的字符串。</p>
<pre><code>//concat(v1, v2,..)
var message=&quot;Sam&quot;
var final=message.concat(&quot; is a&quot;,&quot; hopeless romantic.&quot;)
//alerts &quot;Sam is a hopeless romantic.&quot;
alert(final)
 
</code></pre>
<h2 id="4fromcharcodec1c2"><a class="anchor" href="#4fromcharcodec1c2">#</a> 4.fromCharcode(c1,c2)</h2>
<p><code>fromCharcode(c1,c2)</code>  转换一组 <code>Unicode</code>  值转换为字符。</p>
<pre><code>//fromCharCode(c1, c2,...)
console.log(String.fromCharCode(97,98,99,120,121,122))
//output: abcxyz
console.log(String.fromCharCode(72,69,76,76,79))
//output: HELLO
 
</code></pre>
<h2 id="5indexofsubstr-start"><a class="anchor" href="#5indexofsubstr-start">#</a> 5.indexOf(substr, [start])</h2>
<p><code>indexOf</code>  方法搜索并 (如果找到) 返回字符串中搜索到的字符或子字符串的索引。如果没有找到，则返回 <code>-1</code> 。 <code>Start</code>  是一个可选参数，指定字符串中开始搜索的位置，默认值为 <code>0</code> 。</p>
<pre><code>//indexOf(char/substring)
var sentence=&quot;Hi, my name is Sam!&quot;
if (sentence.indexOf(&quot;Sam&quot;)!=-1)
alert(&quot;Sam is in there!&quot;)
 
</code></pre>
<h2 id="6lastindexofsubstr-start"><a class="anchor" href="#6lastindexofsubstr-start">#</a> 6.lastIndexOf(substr, [start])</h2>
<p><code>lastIndexOf()</code>  方法返回指定文本在字符串中最后一次出现的索引，如果未找到，则返回 <code>-1</code> 。 “ <code>Start</code> ” 是一个可选参数，指定字符串中开始搜索的位置，默认值为 <code>string.length-1</code> 。</p>
<pre><code>//lastIndexOf(substr, [start])
var myString = 'javascript rox';
console.log(myString.lastIndexOf('r'));
//output: 11
 
</code></pre>
<h2 id="7matchregexp"><a class="anchor" href="#7matchregexp">#</a> 7.match(regexp)</h2>
<p>根据正则表达式在字符串中搜索匹配项。如果没有找到匹配项，则返回一个信息数组或 <code>null</code> 。</p>
<pre><code>//match(regexp) //select integers only
var intRegex = /[0-9 -()+]+$/;  
 
var myNumber = '999';
var myInt = myNumber.match(intRegex);
console.log(isInt);
//output: 999
 
var myString = '999 JS Coders';
var myInt = myString.match(intRegex);
console.log(isInt);
//output: null
 
</code></pre>
<h2 id="8replaceregexpsubstr-replacetext"><a class="anchor" href="#8replaceregexpsubstr-replacetext">#</a> 8.replace(regexp/substr, replacetext)</h2>
<p><code>replace()</code>  方法用于在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的子串。</p>
<pre><code>//replace(substr, replacetext)
var myString = '999 JavaScript Coders';
console.log(myString.replace(/JavaScript/i, &quot;jQuery&quot;));
//output: 999 jQuery Coders
 
//replace(regexp, replacetext)
var myString = '999 JavaScript Coders';
console.log(myString.replace(new RegExp( &quot;999&quot;, &quot;gi&quot; ), &quot;The&quot;));
//output: The JavaScript Coders
 
</code></pre>
<h2 id="9searchregexp"><a class="anchor" href="#9searchregexp">#</a> 9.search(regexp)</h2>
<p><code>search()</code>  方法用于检索字符串中指定的子字符串，或检索与正则表达式相匹配的子字符串，如果找到，返回与  <code>regexp</code>  相匹配的子串的起始位置，否则返回  <code>-1</code> 。</p>
<pre><code>//search(regexp)
var intRegex = /[0-9 -()+]+$/;  
 
var myNumber = '999';
var isInt = myNumber.search(intRegex);
console.log(isInt);
//output: 0
 
</code></pre>
<h2 id="10slicestart-end"><a class="anchor" href="#10slicestart-end">#</a> 10.slice(start, [end])</h2>
<p><code>slice()</code>  方法可提取字符串的某个部分，返回一个新的字符串。包括字符串从  <code>start</code>  开始（包括 start）到  <code>end</code>  结束（不包括  <code>end</code> ）为止的所有字符。</p>
<pre><code>//slice(start, end)
var text=&quot;excellent&quot;
text.slice(0,4) //returns &quot;exce&quot;
text.slice(2,4) //returns &quot;ce&quot;
 
</code></pre>
<h2 id="11splitdelimiter-limit"><a class="anchor" href="#11splitdelimiter-limit">#</a> 11.split(delimiter, [limit])</h2>
<p><code>split()</code>  方法用于把一个字符串分割成字符串数组，返回一个字符串数组返回的数组中的字串不包括  <code>delimiter</code>  自身。 可选的 “ <code>limit</code> ” 是一个整数，允许各位指定要返回的最大数组的元素个数。</p>
<h2 id="12substrstart-length"><a class="anchor" href="#12substrstart-length">#</a> 12.substr(start, [length])</h2>
<p><code>substr()</code>  方法可在字符串中抽取从  <code>start</code>  下标开始的指定数目的字符。返回一个新的字符串，包含从  <code>start</code> （包括 start 所指的字符） 处开始的  <code>length</code>  个字符。如果没有指定  <code>length</code> ，那么返回的字符串包含从  <code>start</code>  到该字符串的结尾的字符。</p>
<pre><code>//substr(from, to)
var text=&quot;excellent&quot;
text.substr(0,4) //returns &quot;exce&quot;
text.substr(2,4) //returns &quot;cell&quot;
 
</code></pre>
<h2 id="13substringfrom-to"><a class="anchor" href="#13substringfrom-to">#</a> 13.substring(from, [to])</h2>
<p><code>substring()</code>  方法用于提取字符串中介于两个指定下标之间的字符，方返回的子串包括  <code>start</code>  处的字符，但不包括  <code>stop</code>  处的字符， <code>to</code>  可选，如果省略该参数，那么返回的子串会一直到字符串的结尾。</p>
<pre><code>//substring(from, [to])
var myString = 'javascript rox';
myString = myString.substring(0,10);
console.log(myString)
//output: javascript
 
</code></pre>
<h2 id="14tolowercase"><a class="anchor" href="#14tolowercase">#</a> 14.toLowerCase()</h2>
<p><code>toLowerCase()</code>  方法用于把字符串转换为小写。</p>
<pre><code>//toLowerCase()
var myString = 'JAVASCRIPT ROX';
myString = myString.toLowerCase();
console.log(myString)
//output: javascript rox
 
</code></pre>
<h2 id="15touppercase"><a class="anchor" href="#15touppercase">#</a> 15.toUpperCase()</h2>
<p><code>toUpperCase()</code>  方法用于把字符串转换为大写。</p>
<pre><code>//toUpperCase()
var myString = 'javascript rox';
myString = myString.toUpperCase();
console.log(myString)
//output: JAVASCRIPT ROX
 
</code></pre>
<h2 id="16-includes"><a class="anchor" href="#16-includes">#</a> 16. includes()</h2>
<p><code>includes()</code>  方法用于检查字符串是否包含指定的字符串或字符。</p>
<pre><code>//includes()
var mystring = &quot;Hello, welcome to edureka&quot;;
var n = mystring.includes(&quot;edureka&quot;);
//output: True
 
</code></pre>
<h2 id="17-endswith"><a class="anchor" href="#17-endswith">#</a> 17. endsWith()</h2>
<p><code>endsWith()</code>  函数检查字符串是否以指定的字符串或字符结束。</p>
<pre><code>//endsWith()
var mystr = &quot;List of javascript functions&quot;;
var n = mystr.endsWith(&quot;functions&quot;);
//output: True
 
</code></pre>
<h2 id="18-repeat"><a class="anchor" href="#18-repeat">#</a> 18. repeat()</h2>
<p><code>repeat()</code>  构造并返回一个新字符串，该字符串包含被连接在一起的指定数量的字符串的副本。</p>
<pre><code>//repeat()
var string = &quot;Welcome to Edureka&quot;;
string.repeat(2);
//output: Welcome to Edureka Welcome to Edureka
 
</code></pre>
<h2 id="19-valueof"><a class="anchor" href="#19-valueof">#</a> 19. valueOf()</h2>
<p><code>valueOf()</code>  方法返回一个 <code>String</code>  对象的原始值（primitive value），该值等同于 <code>String.prototype.toString()</code> 。</p>
<pre><code>//valueOf()
var mystr = &quot;Hello World!&quot;;
var res = mystr.valueOf();
//output: Hello World!
 
</code></pre>
<h2 id="20-trim"><a class="anchor" href="#20-trim">#</a> 20. trim()</h2>
<p><code>trim()</code>  方法会从一个字符串的两端删除空白字符。在这个上下文中的空白字符是所有的空白字符 (space, tab, no-break space 等) 以及所有行终止符字符（如 LF，CR）</p>
<pre><code>//trim()
var str = &quot;     Hello Edureka!     &quot;;
alert(str.trim());
</code></pre>
<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82ODQ0OTAzOTI3NzU0Nzg0Nzgx">参考博主</span></p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>字符串</tag>
      </tags>
  </entry>
  <entry>
    <title>js描述二叉树</title>
    <url>/2021/08/06/js%E6%8F%8F%E8%BF%B0%E4%BA%8C%E5%8F%89%E6%A0%91/</url>
    <content><![CDATA[<h2 id="前言"><a class="anchor" href="#前言">#</a> 前言</h2>
<p>本文根据《数据结构与算法 JavaScript 描述》来写的，相当于个人的读书笔记。</p>
<h2 id="树的简介"><a class="anchor" href="#树的简介">#</a> 树的简介</h2>
<p>树是计算机科学中经常用到的数据结构。树是一种非线性的数据结构，以分层的方式存储数据，树由一组以边连接的节点组成，一个节点可以有 0、1 或多个子节点。</p>
<h2 id="与树涉及的概念"><a class="anchor" href="#与树涉及的概念">#</a> 与树涉及的概念</h2>
<ul>
<li><strong>根节点</strong>：一棵树最上面的节点称为根节点</li>
<li><strong>父节点</strong>：如果一个节点下面连接多个节点，那么该节点称为父节点</li>
<li><strong>子节点</strong>：父节点下面的节点称为子节点</li>
<li><strong>叶子节点</strong>：没有任何子节点的节点称为叶子节点</li>
<li><strong>路径</strong>：从树中一个节点到另一个节点的这一组边称为路径</li>
<li><strong>树的遍历</strong>：以某种特定顺序访问树中所有节点</li>
<li><strong>树的深度</strong>：根节点是第 0 层，以此类推，树的层数就是树的深度</li>
</ul>
<h2 id="二叉树定义"><a class="anchor" href="#二叉树定义">#</a> 二叉树定义</h2>
<p>二叉树是一种特殊的树，它的子节点个数不超过两个。二叉树具有一些特殊的计算性质，使得在他们之上的一些操作异常高效。<strong>二叉查找树</strong>是一种特殊的二叉树，相对较小的值保存在左节点中，较大的值保存在右节点中。这一特性使得查找的效率很高。</p>
<h2 id="js-模拟二叉查找树"><a class="anchor" href="#js-模拟二叉查找树">#</a> JS 模拟二叉查找树</h2>
<p>这里主要介绍 BST 的插入方法：</p>
<ol>
<li>设根节点为当前节点</li>
<li>如果待插入节点保存的数据小于当前节点，则设新的当前节点为原节点的左节点，反之，执行第 4 步</li>
<li>如果当前节点的左节点为 null，就将新的节点插入这个位置，退出循环，反之，继续执行下一个循环</li>
<li>设新的当前节点为原节点的右节点</li>
<li>如果当前节点的右节点为 null，就将新的节点插入这个位置，退出循环，反之，继续执行下一个循环</li>
</ol>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">BST</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token function">insert</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">const</span> n <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">let</span> current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token keyword">let</span> parent<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>      parent <span class="token operator">=</span> current<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&lt;</span> current<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        current <span class="token operator">=</span> current<span class="token punctuation">.</span>left<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>          parent<span class="token punctuation">.</span>left <span class="token operator">=</span> n<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>          <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        current <span class="token operator">=</span> current<span class="token punctuation">.</span>right<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>          parent<span class="token punctuation">.</span>right <span class="token operator">=</span> n<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>          <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="遍历二叉树"><a class="anchor" href="#遍历二叉树">#</a> 遍历二叉树</h3>
<p>有三种遍历 BST 的方式：中序、先序和后序。</p>
<p><strong>中序遍历</strong>按照节点上的键值，以升序访问 BST 上的所有节点。</p>
<p><strong>先序遍历</strong>先访问根节点，然后以同样方式访问左子树和右子树。</p>
<p><strong>后序遍历</strong>先访问叶子节点，从左子树到右子树，再到根节点。</p>
<h4 id="中序遍历"><a class="anchor" href="#中序遍历">#</a> 中序遍历</h4>
<p><img data-src="../images/js%E6%8F%8F%E8%BF%B0%E4%BA%8C%E5%8F%89%E6%A0%91/inOrder.49acea8c.png" alt="中序遍历" /></p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">BST</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="3"></td><td><pre> <span class="token comment">// 左根右  中序遍历</span></pre></td></tr><tr><td data-num="4"></td><td><pre>   <span class="token function">inOrder</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>node <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">inOrder</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">inOrder</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>     <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="先序遍历"><a class="anchor" href="#先序遍历">#</a> 先序遍历</h4>
<p><img data-src="../images/js%E6%8F%8F%E8%BF%B0%E4%BA%8C%E5%8F%89%E6%A0%91/preOrder.ac4e92c8.png" alt="先序遍历" /></p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">BST</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token comment">// 根左右</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>node <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">preOrder</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">preOrder</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="后序遍历"><a class="anchor" href="#后序遍历">#</a> 后序遍历</h4>
<p><img data-src="../images/js%E6%8F%8F%E8%BF%B0%E4%BA%8C%E5%8F%89%E6%A0%91/posOrder.5f7af7a0.png" alt="后序遍历" /></p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">BST</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token comment">// 左右根</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token function">posOrder</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>node <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">posOrder</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">posOrder</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="测试"><a class="anchor" href="#测试">#</a> 测试</h4>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> nums <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BST</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>nums<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>nums<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>nums<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>nums<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">37</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>nums<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>nums<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>nums<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>nums<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>nums<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>nums<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>nums<span class="token punctuation">.</span><span class="token function">inOrder</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3 5 16 20 21 22 23 37 99</span></pre></td></tr><tr><td data-num="13"></td><td><pre>nums<span class="token punctuation">.</span><span class="token function">preOrder</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 23 16 3 5 21 20 22 45 37 99</span></pre></td></tr><tr><td data-num="14"></td><td><pre>nums<span class="token punctuation">.</span><span class="token function">posOrder</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5 3 20 22 21 16 37 99 45 23</span></pre></td></tr></table></figure><h2 id="元素查找"><a class="anchor" href="#元素查找">#</a> 元素查找</h2>
<h3 id="查找最大-最小值"><a class="anchor" href="#查找最大-最小值">#</a> 查找最大、最小值</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">BST</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function">getMin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">let</span> current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span>left <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      current <span class="token operator">=</span> current<span class="token punctuation">.</span>left<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">return</span> current<span class="token punctuation">.</span>data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token function">getMax</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">let</span> current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span>right <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      current <span class="token operator">=</span> current<span class="token punctuation">.</span>right<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">return</span> current<span class="token punctuation">.</span>data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="查找给定值"><a class="anchor" href="#查找给定值">#</a> 查找给定值</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">BST</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">let</span> current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>current <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span>data <span class="token operator">===</span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">return</span> current<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&lt;</span> current<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        current <span class="token operator">=</span> current<span class="token punctuation">.</span>left<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        current <span class="token operator">=</span> current<span class="token punctuation">.</span>right<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="元素删除"><a class="anchor" href="#元素删除">#</a> 元素删除</h2>
<p>从 BST 中删除节点的第一步是判断当前节点是否包含待删除的数据，如果包含，则删除该节点；如果不包含，则比较当前节点上的数据与待删除的数据。如果待删除数据小于当前节点的数据，则移至当前节点的左节点继续比较，反之，则移至当前节点的右节点。</p>
<p>如果待删除节点是叶子节点，那么只需要将父节点指向它的链接变成指向 null；如果待删除的节点只包含一个子节点，那么原本指向它的父节点指向它的子节点；如果待删除的节点包含两个子节点，正确的做法有两种，要么查找待删除节点左子树的最大值，要么查找其右子树的最小值，这里代码实现使用后一种方式。查找到最小值后，把最小值赋值到该节点，然后删除右子树的最小值。</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">BST</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token function">getSmallest</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      node <span class="token operator">=</span> node<span class="token punctuation">.</span>left<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">return</span> node<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token function">remove</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeNode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token function">removeNode</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">===</span> node<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token comment">// 没有子节点的节点</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>left <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>right <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>      <span class="token comment">// 没有左节点的节点</span></pre></td></tr><tr><td data-num="22"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>left <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token keyword">return</span> node<span class="token punctuation">.</span>right<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>      <span class="token comment">// 没有右节点的节点</span></pre></td></tr><tr><td data-num="27"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>right <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token keyword">return</span> node<span class="token punctuation">.</span>left<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre>      <span class="token keyword">let</span> tempNode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSmallest</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>      node<span class="token punctuation">.</span>data <span class="token operator">=</span> tempNode<span class="token punctuation">.</span>data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>      node<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeNode</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">,</span> tempNode<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>      <span class="token keyword">return</span> node<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&lt;</span> node<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>      node<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeNode</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>      <span class="token keyword">return</span> node<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>      node<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeNode</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>      <span class="token keyword">return</span> node<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="计数"><a class="anchor" href="#计数">#</a> 计数</h2>
<p>记录一组数据出现的次数</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">BST</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">let</span> node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    node<span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>完整代码</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="9"></td><td><pre>		<span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>		  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		    <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		    <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		    <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>		  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>		</pre></td></tr><tr><td data-num="16"></td><td><pre>		  <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>		    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>		  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>		</pre></td></tr><tr><td data-num="21"></td><td><pre>	<span class="token keyword">class</span> <span class="token class-name">BST</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>      </pre></td></tr><tr><td data-num="23"></td><td><pre>	  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span>left<span class="token punctuation">,</span>right</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>	    <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>  <span class="token comment">// 左根右  中序遍历</span></pre></td></tr><tr><td data-num="28"></td><td><pre>   <span class="token function">inOrder</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>node <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">inOrder</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">inOrder</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>     <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token comment">// 根左右  先序遍历</span></pre></td></tr><tr><td data-num="36"></td><td><pre>     <span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>       <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>node <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>         <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">preOrder</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>         <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">preOrder</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>       <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>     <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>	  <span class="token comment">// 左右根 后序遍历</span></pre></td></tr><tr><td data-num="44"></td><td><pre>	   <span class="token function">posOrder</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>	     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>node <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>	       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">posOrder</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>	       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">posOrder</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>	       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>	     <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>	   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>   <span class="token function">insert</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>     <span class="token keyword">const</span> n <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>       <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>     <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="56"></td><td><pre> </pre></td></tr><tr><td data-num="57"></td><td><pre>     <span class="token keyword">let</span> current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>     <span class="token keyword">let</span> parent<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>     <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>       parent <span class="token operator">=</span> current<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>       <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&lt;</span> current<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>         current <span class="token operator">=</span> current<span class="token punctuation">.</span>left<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>         <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>           parent<span class="token punctuation">.</span>left <span class="token operator">=</span> n<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>           <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>         <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>       <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>         current <span class="token operator">=</span> current<span class="token punctuation">.</span>right<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>         <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>           parent<span class="token punctuation">.</span>right <span class="token operator">=</span> n<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre>           <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="72"></td><td><pre>         <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="73"></td><td><pre>       <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="74"></td><td><pre>     <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="75"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="76"></td><td><pre>    <span class="token function">getMin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="77"></td><td><pre>       <span class="token keyword">let</span> current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="78"></td><td><pre>       <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span>left <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="79"></td><td><pre>         current <span class="token operator">=</span> current<span class="token punctuation">.</span>left<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="80"></td><td><pre>       <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>       <span class="token keyword">return</span> current<span class="token punctuation">.</span>data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="82"></td><td><pre>     <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="83"></td><td><pre>   </pre></td></tr><tr><td data-num="84"></td><td><pre>     <span class="token function">getMax</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="85"></td><td><pre>       <span class="token keyword">let</span> current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="86"></td><td><pre>       <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span>right <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="87"></td><td><pre>         current <span class="token operator">=</span> current<span class="token punctuation">.</span>right<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="88"></td><td><pre>       <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="89"></td><td><pre>       <span class="token keyword">return</span> current<span class="token punctuation">.</span>data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="90"></td><td><pre>     <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="91"></td><td><pre>		   <span class="token function">getSmallest</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="92"></td><td><pre>		    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="93"></td><td><pre>		      node <span class="token operator">=</span> node<span class="token punctuation">.</span>left<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="94"></td><td><pre>		    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="95"></td><td><pre>		    <span class="token keyword">return</span> node<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="96"></td><td><pre>		  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="97"></td><td><pre>		  <span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="98"></td><td><pre>		    <span class="token keyword">let</span> current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="99"></td><td><pre>		    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>current <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="100"></td><td><pre>		      <span class="token keyword">if</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span>data <span class="token operator">===</span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="101"></td><td><pre>		        <span class="token keyword">return</span> current<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="102"></td><td><pre>		      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&lt;</span> current<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="103"></td><td><pre>		        current <span class="token operator">=</span> current<span class="token punctuation">.</span>left<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="104"></td><td><pre>		      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="105"></td><td><pre>		        current <span class="token operator">=</span> current<span class="token punctuation">.</span>right<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="106"></td><td><pre>		      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="107"></td><td><pre>		    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="108"></td><td><pre>		    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="109"></td><td><pre>		  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="110"></td><td><pre>		   <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="111"></td><td><pre>		      <span class="token keyword">let</span> node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="112"></td><td><pre>		      node<span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="113"></td><td><pre>		      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="114"></td><td><pre>		    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="115"></td><td><pre>		  <span class="token function">remove</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="116"></td><td><pre>		    <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeNode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="117"></td><td><pre>		  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="118"></td><td><pre>		</pre></td></tr><tr><td data-num="119"></td><td><pre>		  <span class="token function">removeNode</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="120"></td><td><pre>		    <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="121"></td><td><pre>		    <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">===</span> node<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="122"></td><td><pre>		      <span class="token comment">// 没有子节点的节点</span></pre></td></tr><tr><td data-num="123"></td><td><pre>		      <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>left <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>right <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="124"></td><td><pre>		        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="125"></td><td><pre>		      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="126"></td><td><pre>		      <span class="token comment">// 没有左节点的节点</span></pre></td></tr><tr><td data-num="127"></td><td><pre>		      <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>left <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="128"></td><td><pre>		        <span class="token keyword">return</span> node<span class="token punctuation">.</span>right<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="129"></td><td><pre>		      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="130"></td><td><pre>		</pre></td></tr><tr><td data-num="131"></td><td><pre>		      <span class="token comment">// 没有右节点的节点</span></pre></td></tr><tr><td data-num="132"></td><td><pre>		      <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>right <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="133"></td><td><pre>		        <span class="token keyword">return</span> node<span class="token punctuation">.</span>left<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="134"></td><td><pre>		      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="135"></td><td><pre>		</pre></td></tr><tr><td data-num="136"></td><td><pre>		      <span class="token keyword">let</span> tempNode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSmallest</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="137"></td><td><pre>		      node<span class="token punctuation">.</span>data <span class="token operator">=</span> tempNode<span class="token punctuation">.</span>data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="138"></td><td><pre>		      node<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeNode</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">,</span> tempNode<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="139"></td><td><pre>		      <span class="token keyword">return</span> node<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="140"></td><td><pre>		    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&lt;</span> node<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="141"></td><td><pre>		      node<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeNode</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="142"></td><td><pre>		      <span class="token keyword">return</span> node<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="143"></td><td><pre>		    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="144"></td><td><pre>		      node<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeNode</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="145"></td><td><pre>		      <span class="token keyword">return</span> node<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="146"></td><td><pre>		    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="147"></td><td><pre>		  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="148"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="149"></td><td><pre>		</pre></td></tr><tr><td data-num="150"></td><td><pre>		<span class="token keyword">const</span> nums <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BST</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="151"></td><td><pre>		nums<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="152"></td><td><pre>		nums<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="153"></td><td><pre>		nums<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="154"></td><td><pre>		nums<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">37</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="155"></td><td><pre>		nums<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="156"></td><td><pre>		nums<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="157"></td><td><pre>		nums<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="158"></td><td><pre>		nums<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="159"></td><td><pre>		nums<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="160"></td><td><pre>		nums<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="161"></td><td><pre>		nums<span class="token punctuation">.</span><span class="token function">inOrder</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="162"></td><td><pre>         <span class="token comment">// 3 5 16 20 21 22 23 37 99</span></pre></td></tr><tr><td data-num="163"></td><td><pre>		nums<span class="token punctuation">.</span><span class="token function">preOrder</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="164"></td><td><pre>         <span class="token comment">// 23 16 3 5 21 20 22 45 37 99</span></pre></td></tr><tr><td data-num="165"></td><td><pre>		nums<span class="token punctuation">.</span><span class="token function">posOrder</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="166"></td><td><pre>         <span class="token comment">// 5 3 20 22 21 16 37 99 45 23</span></pre></td></tr><tr><td data-num="167"></td><td><pre></pre></td></tr><tr><td data-num="168"></td><td><pre>		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="169"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="170"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
      </categories>
      <tags>
        <tag>二叉树</tag>
        <tag>二叉查找树</tag>
        <tag>中序遍历</tag>
        <tag>先序遍历</tag>
        <tag>后序遍历</tag>
      </tags>
  </entry>
  <entry>
    <title>js常用数组方法</title>
    <url>/2020/11/12/js%E5%B8%B8%E7%94%A8%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<h2 id="es5"><a class="anchor" href="#es5">#</a> ES5</h2>
<h3 id="join-split"><a class="anchor" href="#join-split">#</a> join &amp; split</h3>
<pre><code>const colors = 'green, red, black';
const colorsArr = colors.split(',');
console.log(colorsArr); // [ 'green', ' red', ' black' ]
const colorsStr = colorsArr.join(',');
console.log(colorsStr); // green, red, black
</code></pre>
<h3 id="push-pop"><a class="anchor" href="#push-pop">#</a> push &amp; pop</h3>
<pre><code>const colors = [];
colors.push('green', 'red');
console.log(colors); // ['green', 'red']

const item = colors.pop();
console.log(item); // 'red'
console.log(colors); // ['green']
</code></pre>
<h3 id="shift-unshift"><a class="anchor" href="#shift-unshift">#</a> shift &amp; unshift</h3>
<pre><code>const colors = ['green', 'red'];
const item = colors.shift();
console.log(item); // 'green'
console.log(colors); // ['red']

colors.unshift('blue', 'grey');
console.log(colors); // ['blue', 'grey', 'red']
</code></pre>
<h3 id="reverse-sort"><a class="anchor" href="#reverse-sort">#</a> reverse &amp; sort</h3>
<pre><code>const values = [1, 3, 44, 43, 654, 0];
values.reverse();
console.log(values); // [ 0, 654, 43, 44, 3, 1 ]

values.sort();
console.log(values); // [ 0, 1, 3, 43, 44, 654 ] 首字母开始比较
values.sort((val1, val2) =&gt; val2 - val1);
console.log(values); // [ 654, 44, 43, 3, 1, 0 ]
</code></pre>
<h3 id="concat-slice-splice"><a class="anchor" href="#concat-slice-splice">#</a> concat, slice &amp; splice</h3>
<pre><code>const colors = ['red', 'green', 'blue'];
const colors2 = colors.concat('yellow', ['black']);
console.log(colors2); // [ 'red', 'green', 'blue', 'yellow', 'black' ]

const colors3 = colors2.slice(1, 5);
console.log(colors3); // [ 'green', 'blue', 'yellow', 'black' ]
console.log(colors2); // [ 'red', 'green', 'blue', 'yellow', 'black' ]

const remove1 = colors2.splice(0, 1);
console.log(remove1); // [ 'red' ]
console.log(colors2); // [ 'green', 'blue', 'yellow', 'black' ]
const remove2 = colors2.splice(1, 0, 'red', 'pink');
console.log(remove2); // [ ]
console.log(colors2); // [ 'green', 'red', 'pink', 'blue', 'yellow', 'black' ]
 
</code></pre>
<h3 id="indexof-lastindexof"><a class="anchor" href="#indexof-lastindexof">#</a> indexOf &amp; lastIndexOf</h3>
<pre><code>const values= [1, 3, 4, 6, 7, 4, 3, 1];
console.log(values.indexOf(4)); // 2
console.log(values.lastIndexOf(4)); // 5
console.log(values.lastIndexOf(4, 4)); // 2
console.log(values.lastIndexOf(4, 5)); // 5
</code></pre>
<h3 id="every-filter-foreach-map-some"><a class="anchor" href="#every-filter-foreach-map-some">#</a> every, filter, forEach, map &amp; some</h3>
<p>every &amp; some</p>
<pre><code>const values = [1, 3, 4, 6, 7, 4, 3, 1];
const everyResult = values.every((item, index, array) =&gt; &#123;
  return item &gt; 2;
&#125;);
console.log(everyResult); // false

const someResult = values.some((item, index, array) =&gt; &#123;
  return item &gt; 2;
&#125;);
console.log(someResult); // true
</code></pre>
<p>filter</p>
<pre><code>const values = [1, 3, 4, 6, 7, 4, 3, 1];
const filterResult = values.filter((item, index, array) =&gt; &#123;
  return item &gt; 2;
&#125;);
console.log(filterResult); // [ 3, 4, 6, 7, 4, 3 ]
const obj = [ &#123; num: 3 &#125;, &#123; num: 4 &#125;, &#123; num: 1 &#125;,&#123; num: 5 &#125;,&#123; num: 0 &#125;, &#123; num: 4 &#125;];
const filterObjResult = obj.filter((item, index, array) =&gt; &#123;
  return item.num &gt; 2;
&#125;);
console.log(filterObjResult); // [ &#123; num: 3 &#125;, &#123; num: 4 &#125;, &#123; num: 5 &#125;, &#123; num: 4 &#125; ]
</code></pre>
<p>map</p>
<pre><code>const values = [1, 3, 4, 6, 7, 4, 3, 1];
const mapResult = values.map((item, index, array) =&gt; &#123;
  return item * 2;
&#125;);
console.log(mapResult); // [ 2, 6, 8, 12, 14, 8, 6, 2 ]
const obj = [ &#123; num: 3 &#125;, &#123; num: 4 &#125;, &#123; num: 1 &#125;,&#123; num: 5 &#125;,&#123; num: 0 &#125;, &#123; num: 4 &#125;];
const mapObjResult = obj.map((item, index, array) =&gt; &#123;
  return item.num;
&#125;);
console.log(mapObjResult); // [ 3, 4, 1, 5, 0, 4 ]
</code></pre>
<p>forEach</p>
<pre><code>const values = [1, 3, 4, 6, 7, 4, 3, 1];
values.forEach((item, index, array) =&gt; &#123;
  array[index] = item * 2;
&#125;);
console.log(values); // [ 2, 6, 8, 12, 14, 8, 6, 2 ]
</code></pre>
<h3 id="reduce-reduceright"><a class="anchor" href="#reduce-reduceright">#</a> reduce &amp; reduceRight</h3>
<pre><code>const values = [1, 3, 4, 4, 4, 9];
const sum = values.reduce((prev, cur, index, array) =&gt; &#123;
  return prev + cur;
&#125;);
console.log(sum); // 25

const sumRight = values.reduceRight((prev, cur, index, array) =&gt; &#123;
  return prev + cur;
&#125;);
console.log(sumRight); // 25
</code></pre>
<h2 id="es6"><a class="anchor" href="#es6">#</a> ES6</h2>
<h3 id="拓展运算符"><a class="anchor" href="#拓展运算符">#</a> 拓展运算符 <code>...</code></h3>
<pre><code>const colors = ['green', 'red', 'pink'];
const colors1 = ['white', 'grey'];
const colors2 = [...colors, ...colors1];
console.log(colors2); // [ 'green', 'red', 'pink', 'white', 'grey' ]
</code></pre>
<h3 id="arrayfrom-arrayof"><a class="anchor" href="#arrayfrom-arrayof">#</a> Array.from() &amp; Array.of()</h3>
<pre><code>const obj = &#123;
  '0': '123',
  '1': '456',
  '2': 'c',
  length: 4
&#125;

const arr = Array.from(obj);
console.log(arr); // [ '123', '456', 'c', undefined ]
const values = [1, 1, 3, 5];
const setValue = new Set(values);
const newArr = Array.from(setValue); // 也可以直接[...new Set(values)]
console.log(newArr); // [ 1, 3, 5 ]
const newArr2 = Array.from(newArr, x =&gt; x * 2);
console.log(newArr2); // [ 2, 6, 10 ]

console.log(Array.of(undefined, 1, null)); // [ undefined, 1, null ]
</code></pre>
<h3 id="copywithintarget-start-0-end-thislength"><a class="anchor" href="#copywithintarget-start-0-end-thislength">#</a> copyWithin(target, start = 0, end = this.length)</h3>
<p>有效时应 start &gt; end</p>
<pre><code>const arr = [1, 3, 4, 4, 5, 8, 10, 1, 0].copyWithin(0, 3, 4);
console.log(arr); // [ 4, 3, 4, 4, 5, 8, 10, 1, 0 ]
const arr = [1, 3, 4, 4, 5, 8, 10, 1, 0].copyWithin(0, 3, 8);
console.log(arr1); // [ 4, 5, 8, 10, 1, 8, 10, 1, 0 ]
</code></pre>
<h3 id="fill"><a class="anchor" href="#fill">#</a> fill</h3>
<pre><code>const colors = ['green', 'red', 'pink'];
const colors1 = colors.fill('white');
console.log(colors1); // [ 'white', 'white', 'white' ] 
</code></pre>
<h3 id="find-findindex"><a class="anchor" href="#find-findindex">#</a> find &amp; findIndex</h3>
<pre><code>const values = [1, 3, 4, 5, 6, NaN];
const findResult = values.find(num =&gt; num &gt; 4 ); // 找不到为undefined
console.log(findResult); // 5
const findIndexResult = values.findIndex(num =&gt; num &gt; 4 ); // 找不到为-1
console.log(findIndexResult); // 3
</code></pre>
<h3 id="entries-keys-values"><a class="anchor" href="#entries-keys-values">#</a> entries(), keys() &amp; values()</h3>
<pre><code>const colors = [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;];
for (const index of colors.keys()) &#123;
  console.log(index); // 0 1 2
&#125;

for (const ele of colors.values()) &#123;
  console.log(ele); // red green blue
&#125;
for (const [index, ele] of colors.entries()) &#123;
  console.log(index, ele);
&#125;
// 0 red
// 1 green
// 2 blue
</code></pre>
<h2 id="es7"><a class="anchor" href="#es7">#</a> ES7</h2>
<h3 id="includes"><a class="anchor" href="#includes">#</a> includes</h3>
<p>第二个参数是搜索的起始位置</p>
<pre><code>const values = [1, 3, 4, 5, 6, NaN];
console.log(values.includes(NaN)); // true
console.log(values.includes(4, 3)); // false
</code></pre>
<h2 id="es10"><a class="anchor" href="#es10">#</a> ES10</h2>
<h3 id="flat-flatmap"><a class="anchor" href="#flat-flatmap">#</a> flat &amp; flatMap</h3>
<pre><code>const values = [1, 2, [3, 4]].flat();
console.log(values); // [1, 2, 3, 4]
const valuesDeep = [1, [2, [3]]];
console.log(valuesDeep.flat(Infinity)); // [1, 2, 3]
</code></pre>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>数组</tag>
      </tags>
  </entry>
  <entry>
    <title>js描述字典和集合</title>
    <url>/2021/09/07/js%E6%8F%8F%E8%BF%B0%E5%AD%97%E5%85%B8%E5%92%8C%E9%9B%86%E5%90%88/</url>
    <content><![CDATA[<h2 id="前言"><a class="anchor" href="#前言">#</a> 前言</h2>
<p>本文根据《数据结构与算法 JavaScript 描述》来写的，相当于个人的读书笔记。</p>
<h2 id="字典"><a class="anchor" href="#字典">#</a> 字典</h2>
<p>字典是一种以<strong>键 - 值对</strong>形式存储数据的数据结构。</p>
<h3 id="js-模拟实现字典"><a class="anchor" href="#js-模拟实现字典">#</a> JS 模拟实现字典</h3>
<p>实现基本的<strong>增加</strong>、<strong>查找</strong>、<strong>删除</strong>、<strong>展示功能</strong></p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Dictionary</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token function">remove</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token function">showAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key <span class="token operator">+</span> <span class="token string">"->"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="添加辅助功能"><a class="anchor" href="#添加辅助功能">#</a> 添加辅助功能</h4>
<p>获取字典中的元素个数 count、清除字典内的所有元素 clear</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Dictionary</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token comment">// 注意这里不能使用 length，否则返回 0</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token comment">// 同样这里设置 length 为 0 无效</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="为字典添加排序功能"><a class="anchor" href="#为字典添加排序功能">#</a> 为字典添加排序功能</h4>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Dictionary</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token comment">// 只需要在原先的基础上添加 sort 方法进行排序</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token function">showAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key <span class="token operator">+</span> <span class="token string">"->"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="集合"><a class="anchor" href="#集合">#</a> 集合</h2>
<p>集合是一种包含不同元素的数据结构。集合中的元素称为成员。集合的两个最重要的特性是：首先，集合中的成员是无序的；其次，集合中不允许相同的成员存在。</p>
<h3 id="集合的定义"><a class="anchor" href="#集合的定义">#</a> 集合的定义</h3>
<ul>
<li>不包含任何成员的集合称为空集，全集则是包含一切可能成员的集合</li>
<li>如果两个集合的成员完全相同，则称两个集合相等</li>
<li>如果一个集合中所有的成员都属于另外一个集合，则前一个集合称为后一个集合的子集</li>
</ul>
<h3 id="集合的操作"><a class="anchor" href="#集合的操作">#</a> 集合的操作</h3>
<ul>
<li>并集：将两个集合中的成员合并，得到一个新集合</li>
<li>交集：两个集合中共同存在的成员组成一个新的集合</li>
<li>补集：属于一个集合而不属于另一个集合的成员组成的集合</li>
</ul>
<h3 id="js-模拟实现-set-类"><a class="anchor" href="#js-模拟实现-set-类">#</a> JS 模拟实现 Set 类</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Set</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token function">remove</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">const</span> index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token comment">// 显示集合中的成员</span></pre></td></tr><tr><td data-num="23"></td><td><pre>  <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre>  <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span>length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="set-类的操作"><a class="anchor" href="#set-类的操作">#</a> Set 类的操作</h3>
<ul>
<li>union ()—— 并集</li>
<li>intersect ()—— 交集</li>
<li>subset ()—— 判定子集</li>
<li>difference ()—— 补集</li>
</ul>
<h4 id="并集"><a class="anchor" href="#并集">#</a> 并集</h4>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Set</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function">contains</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token function">union</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">set</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">const</span> nSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">ele</span> <span class="token operator">=></span> nSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    set<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">ele</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        nSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">return</span> nSet<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="交集"><a class="anchor" href="#交集">#</a> 交集</h4>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Set</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function">intersect</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">set</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">const</span> nSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">ele</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        nSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">return</span> nSet<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="判定子集"><a class="anchor" href="#判定子集">#</a> 判定子集</h4>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Set</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token comment">// 判断该集合是否是 set 的子集</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token function">subset</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">set</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> set<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>set<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="补集"><a class="anchor" href="#补集">#</a> 补集</h4>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Set</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token comment">// 该方法返回一个新集合，该集合包含的是那些属于第一个集合不属于第二个集合 (set) 的成员，如果需要两个集合不同的元素，那么需要遍历第二个集合同时比较第一个集合</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token function">difference</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">set</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">const</span> nSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">ele</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>set<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        nSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">return</span> nSet<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="es6-中提供的新数据结构-set"><a class="anchor" href="#es6-中提供的新数据结构-set">#</a> ES6 中提供的新数据结构 Set</h3>
<h4 id="语法介绍"><a class="anchor" href="#语法介绍">#</a> 语法介绍</h4>
<ul>
<li>add: 添加某个值，返回 Set 结构本身</li>
<li>delete: 删除某个值，返回一个布尔值表示是否删除成功</li>
<li>size: 返回 Set 中的成员总数</li>
<li>has: 返回一个布尔值，表示该值是否为 Set 成员</li>
<li>clear: 清除所有成员，没有返回值</li>
<li>keys: 使用 for...of 遍历，遍历的是 key</li>
<li>values: 使用 for...of 遍历，遍历的是 value</li>
<li>entries: 使用 for...of 遍历，遍历的是 [key, value]</li>
<li>forEach: 与数组一致，直接在变量值遍历， <code>set.forEach((value, key) =&gt; &#123;&#125;)</code></li>
</ul>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span></pre></td></tr><tr><td data-num="7"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">of</span> s<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>s<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>s<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h4 id="几点说明"><a class="anchor" href="#几点说明">#</a> 几点说明</h4>
<ol>
<li>在自定义的 Set 中不能判断 NaN，但是 ES6 提供的 Set 中能判断 NaN，并且认为 NaN 为同一个值</li>
<li>无论自定义 Set 还是 ES6 提供的 Set 都不能判断对象，都会认为对象都是不相等的，这也符合 JS 语法认为两个对象不相等</li>
</ol>
]]></content>
      <categories>
        <category>算法</category>
      </categories>
      <tags>
        <tag>字典</tag>
        <tag>集合</tag>
        <tag>Set</tag>
      </tags>
  </entry>
  <entry>
    <title>js描述排序</title>
    <url>/2021/08/12/js%E6%8F%8F%E8%BF%B0%E6%8E%92%E5%BA%8F/</url>
    <content><![CDATA[<h2 id="前言"><a class="anchor" href="#前言">#</a> 前言</h2>
<p>本文根据《数据结构与算法 JavaScript 描述》来写的，相当于个人的读书笔记。</p>
<h2 id="冒泡排序"><a class="anchor" href="#冒泡排序">#</a> 冒泡排序</h2>
<p>使用这种排序算法排序时，数据值会像气泡一样从数组的一端漂浮到另一端。它是最慢的排序算法之一，但也是最容易的排序算法。</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">bubbleSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">const</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">let</span> temp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> outer <span class="token operator">=</span> len<span class="token punctuation">;</span> outer <span class="token operator">>=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token operator">--</span>outer<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> inner <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> inner <span class="token operator">&lt;=</span> outer <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token operator">++</span>inner<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>inner<span class="token punctuation">]</span> <span class="token operator">></span> arr<span class="token punctuation">[</span>inner <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>inner<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        arr<span class="token punctuation">[</span>inner<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>inner <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        arr<span class="token punctuation">[</span>inner <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>动画来自<span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS93M2Nub3RlL2J1YmJsZS1zb3J0Lmh0bWw=">菜鸟教程 (opens new window)</span></p>
<p><img data-src="../images/js%E6%8F%8F%E8%BF%B0%E6%8E%92%E5%BA%8F/bubbleSort.b7d216a5.gif" alt="冒泡排序" /></p>
<h2 id="选择排序"><a class="anchor" href="#选择排序">#</a> 选择排序</h2>
<p>选择排序从数组的开头开始，将第一个元素和其他元素进行比较。检查完所有元素后，最小的元素会被放到数组的第一个位置，然后算法会从第二个位置继续。这个过程一直进行，当进行到数组的倒数第二个位置时，所有的数据便完成了排序。</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">selectionSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">let</span> min<span class="token punctuation">,</span> temp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">let</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> outer <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> outer <span class="token operator">&lt;</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token operator">++</span>outer<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    min <span class="token operator">=</span> outer<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> inner <span class="token operator">=</span> outer <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> inner <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> <span class="token operator">++</span>inner<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>inner<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>min<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        min <span class="token operator">=</span> inner<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>outer<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    arr<span class="token punctuation">[</span>outer<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>min<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    arr<span class="token punctuation">[</span>min<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>动画来自<span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS93M2Nub3RlL3NlbGVjdGlvbi1zb3J0Lmh0bWw=">菜鸟教程 (opens new window)</span></p>
<p><img data-src="../images/js%E6%8F%8F%E8%BF%B0%E6%8E%92%E5%BA%8F/selectionSort.44be35da.gif" alt="选择排序" /></p>
<h2 id="插入排序"><a class="anchor" href="#插入排序">#</a> 插入排序</h2>
<p>插入排序有两个循环。外循环将数组元素挨个移动，而内循环对外循环中选中的元素及它后面的那个元素进行比较。如果外循环中选中的元素比内循环中选中的元素小，那么数组元素会向右移动，为内循环中的这个元素腾出位置。可以想象扑克牌的排序</p>
<p>具体算法描述：</p>
<ol>
<li>从第一个元素开始，该元素可以认为已经被排序</li>
<li>取出下一个元素，在已经排序的元素序列中从后向前扫描</li>
<li>如果该元素大于新元素，将该元素移到下一位置</li>
<li>重复步骤 3，直到找到已排序的元素小于或等于新元素的位置</li>
<li>将新元素插入到该位置后</li>
<li>重复步骤 2~5</li>
</ol>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">insertionSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">let</span> temp<span class="token punctuation">,</span> inner<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">let</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> outer <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> outer <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> <span class="token operator">++</span>outer<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>outer<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    inner <span class="token operator">=</span> outer<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span>inner <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>inner <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">>=</span> temp<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      arr<span class="token punctuation">[</span>inner<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>inner <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token operator">--</span>inner<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    arr<span class="token punctuation">[</span>inner<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>动画来自<span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS93M2Nub3RlL2luc2VydGlvbi1zb3J0Lmh0bWw=">菜鸟教程 (opens new window)</span></p>
<p><img data-src="../images/js%E6%8F%8F%E8%BF%B0%E6%8E%92%E5%BA%8F/insertionSort.be81c151.gif" alt="插入排序" /></p>
<h2 id="希尔排序"><a class="anchor" href="#希尔排序">#</a> 希尔排序</h2>
<p>这个算法在插入排序的基础上做了很大的改善。希尔排序的核心理念与插入排序不同，它会首先比较距离较远的元素，而非相邻的元素。使用这种方案可以使离正确位置很远的元素更快的回到合适的位置。希尔排序的原理是通过定义一个间隔序列来表示在排序过程中进行比较的元素之前有多远的间隔。我们可以动态定义间隔序列。</p>
<h3 id="给定间隔序列的希尔排序"><a class="anchor" href="#给定间隔序列的希尔排序">#</a> 给定间隔序列的希尔排序</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">shellsort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">const</span> gaps <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> g <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> g <span class="token operator">&lt;</span> gaps<span class="token punctuation">.</span>length<span class="token punctuation">;</span> g<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> gaps<span class="token punctuation">[</span>g<span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token keyword">let</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token keyword">let</span> j<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">>=</span> gaps<span class="token punctuation">[</span>g<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> gaps<span class="token punctuation">[</span>g<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">></span> temp<span class="token punctuation">;</span> j <span class="token operator">-=</span> gaps<span class="token punctuation">[</span>g<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> gaps<span class="token punctuation">[</span>g<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="动态计算间隔序列的希尔排序"><a class="anchor" href="#动态计算间隔序列的希尔排序">#</a> 动态计算间隔序列的希尔排序</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">shellsort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">const</span> <span class="token constant">N</span> <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">let</span> h <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">while</span> <span class="token punctuation">(</span>h <span class="token operator">&lt;</span> <span class="token constant">N</span> <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    h <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">*</span> h <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 通过这个公式计算间隔序列</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token keyword">while</span> <span class="token punctuation">(</span>h <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> h<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token constant">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">>=</span> h <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> h<span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">-=</span> h<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">let</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> h<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        arr<span class="token punctuation">[</span>j <span class="token operator">-</span> h<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    h <span class="token operator">=</span> <span class="token punctuation">(</span>h <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="归并排序"><a class="anchor" href="#归并排序">#</a> 归并排序</h2>
<p>原理：把一系列排好序的子序列合并成一个大的完整有序序列</p>
<h3 id="自顶向下的归并排序"><a class="anchor" href="#自顶向下的归并排序">#</a> 自顶向下的归并排序</h3>
<p>通常来讲，归并排序会使用递归的算法来实现。但在 JS 中因递归深度原因造成这种方式可行性不高。<strong>但是</strong>，在<span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS93M2Nub3RlL21lcmdlLXNvcnQuaHRtbA==">菜鸟教程 (opens new window)</span> 有人提出了疑问，并且给出了 JS 自顶向下的方法，以下是教程中给出的代码:</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 未修改原数组</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">mergeSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">let</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> arr<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">let</span> middle <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>len <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword">let</span> left <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> middle<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token keyword">let</span> right <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>middle<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token keyword">return</span> <span class="token function">mergeArrays</span><span class="token punctuation">(</span><span class="token function">mergeSort</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">mergeSort</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">function</span> <span class="token function">mergeArrays</span><span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token keyword">while</span><span class="token punctuation">(</span>left<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> right<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>left<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> right<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>left<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>right<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token keyword">while</span> <span class="token punctuation">(</span>left<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>left<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>  <span class="token keyword">while</span><span class="token punctuation">(</span>right<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>right<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>  <span class="token keyword">return</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="自底向上的归并排序"><a class="anchor" href="#自底向上的归并排序">#</a> 自底向上的归并排序</h3>
<p>这个算法首先将数据集分解为一组只有一个元素的数组。然后通过创建一组左右数组将他们慢慢合并起来，每次合并都保存一部分排序好的数据，直到最后剩下的这个数组所有数组都已经完美排序。</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">mergeSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> arr<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">let</span> step <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">let</span> left<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">let</span> right<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword">while</span> <span class="token punctuation">(</span>step <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    right <span class="token operator">=</span> step<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span>right <span class="token operator">+</span> step <span class="token operator">&lt;=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token function">mergeArrays</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> left<span class="token punctuation">,</span> left <span class="token operator">+</span> step<span class="token punctuation">,</span> right<span class="token punctuation">,</span> right <span class="token operator">+</span> step<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      left <span class="token operator">=</span> right <span class="token operator">+</span> step<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      right <span class="token operator">=</span> left <span class="token operator">+</span> step<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 防止数组单数的时候</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>right <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token function">mergeArrays</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> left<span class="token punctuation">,</span> left <span class="token operator">+</span> step<span class="token punctuation">,</span> right<span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    step <span class="token operator">*=</span> <span class="token number">2</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token keyword">function</span> <span class="token function">mergeArrays</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> startLeft<span class="token punctuation">,</span> stopLeft<span class="token punctuation">,</span> startRight<span class="token punctuation">,</span> stopRight</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>  <span class="token keyword">const</span> rightArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>startRight<span class="token punctuation">,</span> stopRight<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>  <span class="token keyword">const</span> leftArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>startLeft<span class="token punctuation">,</span> stopLeft<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  rightArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>  leftArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>  <span class="token keyword">let</span> m <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>  <span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token operator">=</span> startLeft<span class="token punctuation">;</span> k <span class="token operator">&lt;</span> stopRight<span class="token punctuation">;</span> <span class="token operator">++</span>k<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>leftArr<span class="token punctuation">[</span>m<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> rightArr<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>      arr<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> leftArr<span class="token punctuation">[</span>m<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>      arr<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> rightArr<span class="token punctuation">[</span>n<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>动画来自<span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS93M2Nub3RlL21lcmdlLXNvcnQuaHRtbA==">菜鸟教程 (opens new window)</span></p>
<p><img data-src="../images/js%E6%8F%8F%E8%BF%B0%E6%8E%92%E5%BA%8F/mergeSort.9541d116.gif" alt="归并排序" /></p>
<h2 id="快速排序"><a class="anchor" href="#快速排序">#</a> 快速排序</h2>
<p>快速排序时处理大数据集最快的排序算法之一。它是一种分而治之的算法，通过递归的方式将数据依次分解为包含较小元素和较大元素的不同子序列。该算法不断重复这个步骤直到所有数据变成有序。</p>
<p>这个算法首先要在列表中选择一个元素作为基准值。数据排序围绕这个基准值进行，将列表中小于基准值的元素移到数组的底部，将大于基准值的元素移到数组的顶部。</p>
<p>排序步骤如下：</p>
<ol>
<li>选择一个基准元素，将列表分隔成两个子序列</li>
<li>对列表重新排序，所有小于基准值的元素放在基准值的前面，所有大于基准值的元素放到基准值的后面</li>
<li>分别对较小元素的子序列和较大元素的子序列重复步骤 1 和 2</li>
</ol>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">qSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">const</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">let</span> lesser <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">let</span> greater <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword">let</span> pivot <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> pivot<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      lesser<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      greater<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token keyword">return</span> <span class="token function">qSort</span><span class="token punctuation">(</span>lesser<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>pivot<span class="token punctuation">,</span> <span class="token function">qSort</span><span class="token punctuation">(</span>greater<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="参考教程"><a class="anchor" href="#参考教程">#</a> 参考教程</h2>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvJUU2JThGJTkyJUU1JTg1JUE1JUU2JThFJTkyJUU1JUJBJThG">维基百科 - 插入排序 (opens new window)</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS93M2Nub3RlL3Rlbi1zb3J0aW5nLWFsZ29yaXRobS5odG1s">菜鸟教程</span></li>
</ul>
]]></content>
      <categories>
        <category>算法</category>
      </categories>
      <tags>
        <tag>冒泡排序</tag>
        <tag>选择排序</tag>
        <tag>插入排序</tag>
        <tag>希尔排序</tag>
        <tag>归并排序</tag>
        <tag>快速排序</tag>
      </tags>
  </entry>
  <entry>
    <title>js描述二叉树</title>
    <url>/2021/09/02/js%E6%8F%8F%E8%BF%B0%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/</url>
    <content><![CDATA[<h2 id="前言"><a class="anchor" href="#前言">#</a> 前言</h2>
<p>本文根据《数据结构与算法 JavaScript 描述》来写的，相当于个人的读书笔记。</p>
<h2 id="栈"><a class="anchor" href="#栈">#</a> 栈</h2>
<h3 id="对栈的描述"><a class="anchor" href="#对栈的描述">#</a> 对栈的描述</h3>
<p>栈是一种特殊的<strong>列表</strong>，栈内的元素只能通过列表的一端访问，这一端称为<strong>栈顶</strong>，栈被称为一种后入先出 (LIFO, last-in-first-out) 的数据结构，任何不在栈顶的元素都无法访问。</p>
<p>对栈主要有两种操作，入栈使用 push，出栈使用 pop 方法；使用 peek () 方法则只返回栈顶元素而不删除，clear () 清除栈内所有的元素，length 属性记录栈内的元素个数，empty 判断栈内是否含有元素</p>
<h3 id="js-栈的模拟实现"><a class="anchor" href="#js-栈的模拟实现">#</a> JS 栈的模拟实现</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Stack</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token function">push</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">const</span> len <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span>length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">[</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span>length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>  <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="案例"><a class="anchor" href="#案例">#</a> 案例</h3>
<h4 id="数制间的转换"><a class="anchor" href="#数制间的转换">#</a> 数制间的转换</h4>
<p>只针对的是 2~9 的情况</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">mulBase</span><span class="token punctuation">(</span><span class="token parameter">num<span class="token punctuation">,</span> base</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">do</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>num <span class="token operator">%</span> base<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    num <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>num <span class="token operator">/=</span> base<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>num <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token keyword">let</span> converted <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token keyword">while</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    converted <span class="token operator">+=</span> s<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token keyword">return</span> converted<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">mulBase</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10000</span></pre></td></tr></table></figure><h4 id="判断回文"><a class="anchor" href="#判断回文">#</a> 判断回文</h4>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">isPalindrome</span><span class="token punctuation">(</span><span class="token parameter">word</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> word<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>word<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword">let</span> rword <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token keyword">while</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    rword <span class="token operator">+=</span> s<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token keyword">return</span> word <span class="token operator">===</span> rword<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">"aaa bb aaa"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token function">isPalindrome</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre> </pre></td></tr><tr><td data-num="16"></td><td><pre>        Copied<span class="token operator">!</span></pre></td></tr></table></figure><p>当然判断回文还可以用更简答的方法</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>str</pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span> <span class="token operator">===</span> str<span class="token punctuation">;</span></pre></td></tr></table></figure><h4 id="递归演示"><a class="anchor" href="#递归演示">#</a> 递归演示</h4>
<p>递归函数</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">return</span> n <span class="token operator">*</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>模拟递归</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">fact</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">while</span> <span class="token punctuation">(</span>n <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>n<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword">let</span> product <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token keyword">while</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    product <span class="token operator">*=</span> s<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token keyword">return</span> product<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="队列"><a class="anchor" href="#队列">#</a> 队列</h2>
<h3 id="对队列的描述"><a class="anchor" href="#对队列的描述">#</a> 对队列的描述</h3>
<p>队列是一种<strong>列表</strong>，不同的是队列只能在<strong>队尾插入元素</strong>，在<strong>队首删除元素</strong>。队列是一种先进先出 (FIFO, fist-in-first-out) 的数据结构。</p>
<p>队列的主要两种操作是：向队列中插入新元素和删除队列中的元素。插入操作也叫做入队，删除操作也叫做出队。front () 操作是读取队首的元素，back () 是读取队尾的元素，enqueue () 代表插入元素，dequeue () 代表删除元素，toString () 是显示所有的元素，empty () 判断队列是否为空，length () 是获取队列长度</p>
<h3 id="js-队列的模拟实现"><a class="anchor" href="#js-队列的模拟实现">#</a> JS 队列的模拟实现</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Queue</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token comment">// 向队尾添加一个元素</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token comment">// 删除队首的元素</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token comment">// 读取队首的元素</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token comment">// 读取队尾的元素</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>  <span class="token comment">// 显示队列的所有元素</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>  <span class="token comment">// 判断一个队列是否为空</span></pre></td></tr><tr><td data-num="29"></td><td><pre>  <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>  <span class="token comment">// 判断数组长度</span></pre></td></tr><tr><td data-num="33"></td><td><pre>  <span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span>length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="用队列对数据排序"><a class="anchor" href="#用队列对数据排序">#</a> 用队列对数据排序</h3>
<p>对于 0~99 的数字，<strong>基数排序</strong>将数据集扫描两次，第一次按各位上的数字进行排序，第二次按照十位数上的数字进行排序。比如有一组数：91、46、85、15、92、35、31、22</p>
<p>第一次扫描结果：91、31, 92、22, 85、15、35, 46 第二次扫描结果：15, 22, 31、35, 46, 85, 91、92</p>
<p>个位数小的排在前面，之后排列的是十位数，这样就能从小到大排序，这也就是基数排序的原理。</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">distribute</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> queues<span class="token punctuation">,</span> digit <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>digit <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    nums<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">num</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      queues<span class="token punctuation">[</span>num <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    nums<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">num</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      queues<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>num <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">function</span> <span class="token function">collection</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> queues</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>queues<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      nums<span class="token punctuation">[</span>index<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> queues<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token keyword">const</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">91</span><span class="token punctuation">,</span> <span class="token number">46</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">92</span><span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token keyword">const</span> queues <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token comment">// 创建 10 个队列，分别用于存储在各位或十位相同的数字</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>  queues<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token function">distribute</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> queues<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token function">collection</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> queues<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 91, 31, 92, 22, 85, 15, 35, 46</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token function">distribute</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> queues<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token function">collection</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> queues<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 15, 22, 31, 35, 46, 85, 91, 92</span></pre></td></tr></table></figure><h3 id="优先队列"><a class="anchor" href="#优先队列">#</a> 优先队列</h3>
<p>一般情况下，从队列中删除的元素，一定是率先入队的元素，但是也有一些队列在删除时不必准守先进先出的约定，这种队列叫做优先队列，删除元素时需要考虑优先级的限制。</p>
<p>例如病人按照严重程度有一个优先级 (code 越小优先级越高)：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Patient</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> code</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Queue</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token comment">// 删除优先级较高的元素</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">const</span> len <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span>length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>code <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>code<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>          index <span class="token operator">=</span> i<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>  <span class="token comment">// 显示队列的所有元素</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataStore<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>      <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>prev<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>next<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> code: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>next<span class="token punctuation">.</span>code<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> \n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>测试：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Patient</span><span class="token punctuation">(</span><span class="token string">"Smith"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> ed <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>ed<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Patient</span><span class="token punctuation">(</span><span class="token string">"Jones"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>ed<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Patient</span><span class="token punctuation">(</span><span class="token string">"Fehrenbach"</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>ed<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Patient</span><span class="token punctuation">(</span><span class="token string">"Brown"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>ed<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Patient</span><span class="token punctuation">(</span><span class="token string">"Igram"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>ed<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ed<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">let</span> seen <span class="token operator">=</span> ed<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>seen<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
      </categories>
      <tags>
        <tag>栈</tag>
        <tag>队列</tag>
      </tags>
  </entry>
  <entry>
    <title>js描述检索算法和高级算法</title>
    <url>/2021/09/16/js%E6%8F%8F%E8%BF%B0%E6%A3%80%E7%B4%A2%E7%AE%97%E6%B3%95%E5%92%8C%E9%AB%98%E7%BA%A7%E7%AE%97%E6%B3%95/</url>
    <content><![CDATA[<h2 id="前言"><a class="anchor" href="#前言">#</a> 前言</h2>
<p>本文根据《数据结构与算法 JavaScript 描述》来写的，相当于个人的读书笔记。</p>
<h2 id="顺序查找"><a class="anchor" href="#顺序查找">#</a> 顺序查找</h2>
<p>对于查找数据来说，最简单的方法就是从列表中的第一个元素开始对列表元素逐个进行判断，直到找到想要的结果，或者直到列表结尾也没有找到。这种方法称为顺序查找，也称线性查找</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 这里只是模拟，如果实际过程中可以使用 indexOf 更快的查询</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">seqSearch</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="查找最大值和最小值"><a class="anchor" href="#查找最大值和最小值">#</a> 查找最大值和最小值</h3>
<p>以下只是模拟过程，可以使用 Math.max 和 Math.min 替代</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 查找最小值</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">findMin</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">let</span> min <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> min<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      min <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token keyword">return</span> min<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">function</span> <span class="token function">findMax</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token keyword">let</span> max <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> max<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      max <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token keyword">return</span> max<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="使用自组织数据"><a class="anchor" href="#使用自组织数据">#</a> 使用自组织数据</h3>
<p>对于未排序的数据集来说，当被查找的数据位于数据集的起始位置时，查找是最快、最成功的。通过将成功找到的元素置于数据集的起始位置，可以保证在以后的操作中该元素能快速的找到。</p>
<p>数据自组织的意思就是：数据的位置并非由程序员在程序执行之前就组织好，而是在程序运行过程中由程序自动组织的。</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">seqSearch</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token keyword">let</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        arr<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>另外一种给函数添加自组织数据的方法是：将找到的元素移动到数据集的起始位置，但是如果这个元素已经很接近起始位置，则不会对它的位置进行交换。参照<strong> 80-20 原则</strong>，仅当数据处于数据集 20% 元素之外时，该数据才需要重新移动到数据集的起始位置。</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">seqSearch</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">></span> len <span class="token operator">*</span> <span class="token number">0.2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token keyword">let</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="二分查找"><a class="anchor" href="#二分查找">#</a> 二分查找</h2>
<p>算法只对有序的数据集有效。算法描述如下：</p>
<ol>
<li>将数组的第一个位置设置为下边界</li>
<li>将数组的最后一个位置设置为上边界</li>
<li>若下边界等于或小于上边界，则 a. 将中点设置为上边界与下边界之和除以 2 b. 如果中点的元素小于查询的值，则将下边界设置为中点元素所在的下标加 1 c. 如果中点的元素大于查询的值，则将上边界设置为中点元素所在的下标减 1 d. 如果中点元素即为要查找的元素，可以直接返回</li>
</ol>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">binSearch</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">let</span> upperBound <span class="token operator">=</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">let</span> lowerBound <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">while</span> <span class="token punctuation">(</span>lowerBound <span class="token operator">&lt;=</span> upperBound<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">let</span> mid <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>lowerBound <span class="token operator">+</span> upperBound<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">></span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      upperBound <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      lowerBound <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token keyword">return</span> mid<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="计算重复次数"><a class="anchor" href="#计算重复次数">#</a> 计算重复次数</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">const</span> position <span class="token operator">=</span> <span class="token function">binSearch</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    count<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">let</span> n <span class="token operator">=</span> position <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">===</span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        count<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        n<span class="token operator">--</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    n <span class="token operator">=</span> position <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">===</span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        count<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        n<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  <span class="token keyword">return</span> count<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="动态规划"><a class="anchor" href="#动态规划">#</a> 动态规划</h2>
<p>动态规划有时被认为是一种与递归相反的技术。递归是从顶部开始将问题分解，通过解决掉所有分解出小问题的方式，来解决整个问题。动态规划解决方案从底部开始解决问题，将所有的小问题解决掉，然后合并成一个整体解决方案，从而解决掉整个大问题。</p>
<h3 id="计算斐波那契数列"><a class="anchor" href="#计算斐波那契数列">#</a> 计算斐波那契数列</h3>
<h4 id="递归法"><a class="anchor" href="#递归法">#</a> 递归法</h4>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">recurFib</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">return</span> n<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">return</span> <span class="token function">recurFib</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">recurFib</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="动态规划法"><a class="anchor" href="#动态规划法">#</a> 动态规划法</h4>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 使用数组的原因是保存中间变量</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">dynFib</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">const</span> val <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">||</span> n <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  val<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  val<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    val<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> val<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token keyword">return</span> val<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="迭代法"><a class="anchor" href="#迭代法">#</a> 迭代法</h4>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">iterFib</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">let</span> last <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">let</span> nextLast <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    result <span class="token operator">=</span> last <span class="token operator">+</span> nextLast<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    nextLast <span class="token operator">=</span> last<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    last <span class="token operator">=</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token keyword">return</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="寻找最长公共子串"><a class="anchor" href="#寻找最长公共子串">#</a> 寻找最长公共子串</h3>
<p>这个算法使用一个二维数组储存两个字符串相同位置的字符比较结果，初始化时，该数组的每一个元素被设置为 0。每次在这两个数组的相同位置发现了匹配，则数组对应行和列的元素加 1，否则保持为 0，按照这种方式，一个变量会持续记录下找到多少个匹配项。当算法执行完毕后，这个变量会结合一个索引变量来获得最长公共子串。</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">lcs</span><span class="token punctuation">(</span><span class="token parameter">word1<span class="token punctuation">,</span> word2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">let</span> max <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">const</span> lcsarr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">const</span> w1Len <span class="token operator">=</span> word1<span class="token punctuation">.</span>length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword">const</span> w2Len <span class="token operator">=</span> word2<span class="token punctuation">.</span>length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> w1Len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    lcsarr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> w2Len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      lcsarr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> w1Len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> w2Len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>word1<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> word2<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        lcsarr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> lcsarr<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>max <span class="token operator">&lt;</span> lcsarr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        max <span class="token operator">=</span> lcsarr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        index <span class="token operator">=</span> i<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>  <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>max <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token keyword">return</span> str<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> index <span class="token operator">-</span> max<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> index<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    str <span class="token operator">+=</span> word1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>  <span class="token keyword">return</span> str<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="背包问题"><a class="anchor" href="#背包问题">#</a> 背包问题</h3>
<p>问题描述：试想你是一个保险箱大盗，打开一个装满奇珍异宝的保险箱，但是你必须将这些宝贝放入你的一个小背包中。保险箱的物品规格和价值不同。你希望自己的背包装进去的宝贝总价值最大。例如保险箱里有 5 件物品，尺寸分别是 3、4、10、11、13，且背包的容积为 16，那么恰当的解决方案是选取第 3 和第 5 件物品，它们的总尺寸是 16，总价值为 23。</p>
<h4 id="递归法-2"><a class="anchor" href="#递归法-2">#</a> 递归法</h4>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</pre></td></tr><tr><td data-num="2"></td><td><pre> * description:</pre></td></tr><tr><td data-num="3"></td><td><pre> * param &#123;type&#125; capacity - 容积 size - 物品尺寸 value - 物品价值 n - 物品数量</pre></td></tr><tr><td data-num="4"></td><td><pre> * return:</pre></td></tr><tr><td data-num="5"></td><td><pre> */</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">function</span> <span class="token function">knapsack</span><span class="token punctuation">(</span><span class="token parameter">capacity<span class="token punctuation">,</span> size<span class="token punctuation">,</span> value<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">||</span> capacity <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>size<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">></span> capacity<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">return</span> <span class="token function">knapsack</span><span class="token punctuation">(</span>capacity<span class="token punctuation">,</span> size<span class="token punctuation">,</span> value<span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      value<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token function">knapsack</span><span class="token punctuation">(</span>capacity <span class="token operator">-</span> size<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> size<span class="token punctuation">,</span> value<span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token function">knapsack</span><span class="token punctuation">(</span>capacity<span class="token punctuation">,</span> size<span class="token punctuation">,</span> value<span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="动态规划-2"><a class="anchor" href="#动态规划-2">#</a> 动态规划</h4>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">dKnapsack</span><span class="token punctuation">(</span><span class="token parameter">capacity<span class="token punctuation">,</span> size<span class="token punctuation">,</span> value<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">const</span> <span class="token constant">K</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token constant">K</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> capacity<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token constant">K</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> capacity<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>size<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> j<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token comment">//j 代表背包的容量 j - size [i - 1] 剩余的容量</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token comment">// 第一个值代表现在的价值 + 剩余容量的值 j - size [i - 1] 的价值</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token comment">// 第二个值代表之前的容量的价值</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token constant">K</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="16"></td><td><pre>          value<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token constant">K</span><span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> size<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>          <span class="token constant">K</span><span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token comment">// 这个容量还是不足以添加新容量</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token constant">K</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">K</span><span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  <span class="token keyword">return</span> <span class="token constant">K</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span>capacity<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="贪心算法"><a class="anchor" href="#贪心算法">#</a> 贪心算法</h2>
<p>贪心算法总是会选择当下的最优解，而不去考虑这一次选择会不会对未来的选择造成影响。使用贪心算法表明，实现者希望做出的这一系列局部最优选择能够带来最终的整体最优选择。</p>
<h3 id="找零问题"><a class="anchor" href="#找零问题">#</a> 找零问题</h3>
<p>问题描述：从商店购买了一些商品，找零 63 美分，店员要怎样给你找这些零钱？如果店员根据贪心算法找零，他会给你两个 25 美分，一个 10 美分和三个 1 美分。在没有使用 50 美分的情况下这是最少的硬币数量</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">makeChange</span><span class="token punctuation">(</span><span class="token parameter">origAmt<span class="token punctuation">,</span> coins</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>origAmt <span class="token operator">%</span> <span class="token number">.25</span> <span class="token operator">&lt;</span> origAmt<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    coins<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> Number<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>origAmt <span class="token operator">/</span> <span class="token number">.25</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    origAmt <span class="token operator">%=</span> <span class="token number">.25</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>origAmt <span class="token operator">%</span> <span class="token number">.1</span> <span class="token operator">&lt;</span> origAmt<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    coins<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> Number<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>origAmt <span class="token operator">/</span> <span class="token number">.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    origAmt <span class="token operator">%=</span> <span class="token number">.1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>origAmt <span class="token operator">%</span> <span class="token number">.05</span> <span class="token operator">&lt;</span> origAmt<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    coins<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> Number<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>origAmt <span class="token operator">/</span> <span class="token number">.05</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    origAmt <span class="token operator">%=</span> <span class="token number">.05</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>  coins<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> Number<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>origAmt <span class="token operator">/</span> <span class="token number">.01</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">const</span> origAmt <span class="token operator">=</span> <span class="token number">.63</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">const</span> coins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token function">makeChange</span><span class="token punctuation">(</span>origAmt<span class="token punctuation">,</span> coins<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="背包问题的贪心算法"><a class="anchor" href="#背包问题的贪心算法">#</a> 背包问题的贪心算法</h3>
<p>算法描述如下：</p>
<ol>
<li>背包的容量为 W，物品的价格为 v，重量为 w</li>
<li>根据 v/w 的比率对物品排序</li>
<li>按比率的降序方式来考虑物品</li>
<li>尽可能多地放入每个物品</li>
</ol>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</pre></td></tr><tr><td data-num="2"></td><td><pre> * @description: 计算物品的权重，然后使用插入排序对权重进行排序，然后遍历计算最大价值</pre></td></tr><tr><td data-num="3"></td><td><pre> * @param &#123;type&#125;</pre></td></tr><tr><td data-num="4"></td><td><pre> * @return:</pre></td></tr><tr><td data-num="5"></td><td><pre> */</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">function</span> <span class="token function">ksack</span><span class="token punctuation">(</span><span class="token parameter">values<span class="token punctuation">,</span> weights<span class="token punctuation">,</span> capacity</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token keyword">const</span> arr <span class="token operator">=</span> values<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ele<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=></span> ele <span class="token operator">/</span> weights<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token keyword">const</span> len <span class="token operator">=</span> values<span class="token punctuation">.</span>length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token comment">// 插入排序</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">let</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">let</span> temp1 <span class="token operator">=</span> values<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">let</span> temp2 <span class="token operator">=</span> weights<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">let</span> n <span class="token operator">=</span> i<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span>n <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> arr1<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> temp<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      arr1<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> arr1<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      values<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> values<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      weights<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> weights<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      n<span class="token operator">--</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    arr1<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    values<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> temp1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    weights<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> temp2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>  <span class="token keyword">let</span> w <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>  <span class="token keyword">let</span> val <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>  <span class="token keyword">while</span> <span class="token punctuation">(</span>w <span class="token operator">&lt;</span> capacity <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>w <span class="token operator">+</span> weights<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> capacity<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>      w <span class="token operator">+=</span> weights<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>      val <span class="token operator">+=</span> values<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    i<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>  <span class="token keyword">return</span> val<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token keyword">const</span> size <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token keyword">const</span> capacity <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">ksack</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> size<span class="token punctuation">,</span> capacity<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
      </categories>
      <tags>
        <tag>顺序查找</tag>
        <tag>二分查找</tag>
        <tag>动态规划</tag>
        <tag>贪心算法</tag>
      </tags>
  </entry>
  <entry>
    <title>js描述列表</title>
    <url>/2021/08/19/js%E6%8F%8F%E8%BF%B0%E9%93%BE%E8%A1%A8/</url>
    <content><![CDATA[<h2 id="前言"><a class="anchor" href="#前言">#</a> 前言</h2>
<p>本文根据《数据结构与算法 JavaScript 描述》来写的，相当于个人的读书笔记。</p>
<h2 id="对链表的概述"><a class="anchor" href="#对链表的概述">#</a> 对链表的概述</h2>
<p>链表是由一组节点组成的集合。每个节点都使用一个对象引用指向它的后继 (next)。指向另一个节点的引用叫做链。链表元素靠相互之间的关系进行引用，链表的尾元素指向一个 null 节点</p>
<h2 id="设计一个基于对象的链表"><a class="anchor" href="#设计一个基于对象的链表">#</a> 设计一个基于对象的链表</h2>
<h3 id="node-类"><a class="anchor" href="#node-类">#</a> Node 类</h3>
<p>element 保存节点上的数据，next 用来保存指向下一个节点的链表。</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>element <span class="token operator">=</span> element<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="linkedlist-类"><a class="anchor" href="#linkedlist-类">#</a> LinkedList 类</h3>
<p>该类保存一个头节点</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">LList</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token string">"head"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="查找-插入节点"><a class="anchor" href="#查找-插入节点">#</a> 查找、插入节点</h3>
<p>插入操作是插入到给定节点元素后，也就是新节点是给定元素的后继</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">LList</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">let</span> curNode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span>curNode<span class="token punctuation">.</span>element <span class="token operator">!==</span> item<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      curNode <span class="token operator">=</span> curNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">return</span> curNode<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token function">insert</span><span class="token punctuation">(</span><span class="token parameter">newElement<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">const</span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>newElement<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">const</span> curNode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    newNode<span class="token punctuation">.</span>next <span class="token operator">=</span> curNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    curNode<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="展示链表中的元素"><a class="anchor" href="#展示链表中的元素">#</a> 展示链表中的元素</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">LList</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">let</span> curNode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>curNode<span class="token punctuation">.</span>next <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>curNode<span class="token punctuation">.</span>next<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      curNode <span class="token operator">=</span> curNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="删除节点"><a class="anchor" href="#删除节点">#</a> 删除节点</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">LList</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function">findPrevious</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">let</span> curNode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">//curNode.next === null 这条判断语句是为了当链表中只有 head 时判断</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>curNode<span class="token punctuation">.</span>next <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> curNode<span class="token punctuation">.</span>next<span class="token punctuation">.</span>element <span class="token operator">!==</span> item<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      curNode <span class="token operator">=</span> curNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">return</span> curNode<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token function">remove</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">let</span> prevNode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findPrevious</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 这里的目的见 finPrevious 方法注释</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>prevNode<span class="token punctuation">.</span>next <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      prevNode<span class="token punctuation">.</span>next <span class="token operator">=</span> prevNode<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="双向链表"><a class="anchor" href="#双向链表">#</a> 双向链表</h2>
<p>注意<strong>插入</strong>和<strong>删除</strong>节点的变化，我认为书中有误</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>element <span class="token operator">=</span> element<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>previous <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">LList</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token string">"head"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">let</span> curNode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span>curNode<span class="token punctuation">.</span>element <span class="token operator">!==</span> item<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      curNode <span class="token operator">=</span> curNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">return</span> curNode<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token function">insert</span><span class="token punctuation">(</span><span class="token parameter">newElement<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">const</span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>newElement<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">const</span> curNode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>curNode<span class="token punctuation">.</span>next <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>      newNode<span class="token punctuation">.</span>next <span class="token operator">=</span> curNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>      curNode<span class="token punctuation">.</span>next<span class="token punctuation">.</span>previous <span class="token operator">=</span> newNode<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre>    curNode<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    newNode<span class="token punctuation">.</span>previous <span class="token operator">=</span> curNode<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>  <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token keyword">let</span> curNode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>curNode<span class="token punctuation">.</span>next <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>curNode<span class="token punctuation">.</span>next<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>      curNode <span class="token operator">=</span> curNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre></pre></td></tr><tr><td data-num="43"></td><td><pre>  <span class="token function">remove</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token keyword">let</span> curNode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>curNode<span class="token punctuation">.</span>next <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>      curNode<span class="token punctuation">.</span>previous<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>      curNode<span class="token punctuation">.</span>next<span class="token punctuation">.</span>previous <span class="token operator">=</span> curNode<span class="token punctuation">.</span>previous<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>      curNode<span class="token punctuation">.</span>previous<span class="token punctuation">.</span>next <span class="token operator">=</span> curNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    curNode <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="53"></td><td><pre></pre></td></tr><tr><td data-num="54"></td><td><pre>  <span class="token comment">// 找到最后一个节点</span></pre></td></tr><tr><td data-num="55"></td><td><pre>  <span class="token function">findLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    <span class="token keyword">let</span> curNode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>curNode<span class="token punctuation">.</span>next <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>      curNode <span class="token operator">=</span> curNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>    <span class="token keyword">return</span> curNode<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="62"></td><td><pre></pre></td></tr><tr><td data-num="63"></td><td><pre>  <span class="token function">disReverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>    <span class="token keyword">let</span> curNode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>curNode<span class="token punctuation">.</span>previous <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>curNode<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>      curNode <span class="token operator">=</span> curNode<span class="token punctuation">.</span>previous<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="70"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="循环链表"><a class="anchor" href="#循环链表">#</a> 循环链表</h2>
<p>循环链表和单向链表相似，唯一区别的是链表的尾节点不再指向 Null，而是指向头节点</p>
]]></content>
      <categories>
        <category>算法</category>
      </categories>
      <tags>
        <tag>链表</tag>
        <tag>双向链表</tag>
        <tag>循环链表</tag>
      </tags>
  </entry>
  <entry>
    <title>package.json字段含义</title>
    <url>/2020/12/10/package.json%E5%AD%97%E6%AE%B5%E5%90%AB%E4%B9%89/</url>
    <content><![CDATA[<h2 id="基本的配置"><a class="anchor" href="#基本的配置">#</a> 基本的配置</h2>
<p>下面都是一些简单的配置，能够一行描述清楚</p>
<ul>
<li>name: 项目的名称</li>
<li>version: 项目的版本</li>
<li>description: 项目的描述信息，在 NPM 中描述包的重要搜索内容</li>
<li>keywords: 一个数组，从字面意思也可知道描述项目的关键词，也有利于搜索</li>
<li>license: 该项目的协议，是否允许商用等权限，有 <code>MIT</code> 、 <code>ISC</code> 、 <code>GPL</code>  等</li>
<li>author: 项目的作者</li>
<li>contributors: 项目的贡献者</li>
<li>main: 项目的入口文件</li>
<li>private: 是否是私有库</li>
</ul>
<figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"test"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0.0.1"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token property">"private"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"app.js"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"test package by Tony"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token property">"keywords"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"Vue"</span><span class="token punctuation">,</span> <span class="token string">"Node"</span><span class="token punctuation">,</span> <span class="token string">"JavaScript"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">"Tony"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token property">"contributors"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Tom"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"email@email.com"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://www.example.com/"</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="scripts"><a class="anchor" href="#scripts">#</a> scripts</h2>
<p>指定了运行 npm 命令缩写，直接使用缩写能够避免每次都要输入很长的命令，有点像 webpack 的别名</p>
<figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">"serve"</span><span class="token operator">:</span> <span class="token string">"vue-cli-service serve"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"vue-cli-service build"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token property">"lint"</span><span class="token operator">:</span> <span class="token string">"vue-cli-service lint"</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="dependencies-devdependencies"><a class="anchor" href="#dependencies-devdependencies">#</a> dependencies、devDependencies</h2>
<ul>
<li>dependencies: 项目运行所依赖的模块</li>
<li>devDependencies: 项目开发所需要的模块，在生产中不需要</li>
</ul>
<p>一般来说，在介绍安装包的时候都有命令提示这个是项目运行所依赖的模块还是项目开发所需要的模块，例如使用 <code>yarn add node-sass</code>  就是项目运行所依赖的模块，使用 <code>yarn add jest -D</code>  就是项目开发所需要的模块</p>
<figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">"node-sass"</span><span class="token operator">:</span> <span class="token string">"^4.12.0"</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token property">"jest"</span><span class="token operator">:</span> <span class="token string">"^25.1.0"</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre> </pre></td></tr><tr><td data-num="10"></td><td><pre>        Copied!</pre></td></tr></table></figure><p><strong>版本号</strong></p>
<p>在使用这两个字段的时候你会发现每个按照包后面有版本号 (例如 <code>^4.12.0</code> )，这个非常重要，能够方便别人搭建环境时获取相关的包，防止因版本号不一致问题导致项目出错。</p>
<ul>
<li><code>4.12.0</code> : 代表安装这个版本的安装包</li>
<li><code>^4.12.0</code> : 安装 <code>4.x.x</code>  的最新版本 (不低于 4.12.0)</li>
<li><code>~4.12.0</code> : 安装的版本是 4.12.x 的最新版本</li>
<li><code>latest</code> : 安装最新版本</li>
</ul>
<h2 id="peerdependencies"><a class="anchor" href="#peerdependencies">#</a> peerDependencies</h2>
<p>用来供插件指定其所需要的主工具的版本。例如 A 模块是 B 模块的插件，然而用户安装了 B 模块 1.0 版本，但是 A 插件只能和 2.0 版本的 B 模块一起使用，这时需要提醒用户需要安装的是 B 的 2.0 版本</p>
<figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">"peerDependencies"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">"vue"</span><span class="token operator">:</span> <span class="token string">"^2.5.17"</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="bin"><a class="anchor" href="#bin">#</a> bin</h2>
<p>用来指定各个内部命令对应的可执行文件的位置，有点类似别名</p>
<figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">"bin"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"./bin/test.js"</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token property">"script"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"test build"</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre> </pre></td></tr><tr><td data-num="10"></td><td><pre>        Copied!</pre></td></tr></table></figure><h2 id="repository"><a class="anchor" href="#repository">#</a> repository</h2>
<p>记录项目代码所在的资源库</p>
<figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">"repository"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"git"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"git@github.com:zjgyb/zjgyb.github.io.git"</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="files"><a class="anchor" href="#files">#</a> files</h2>
<p>项目根目录的文件夹名</p>
<figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">"files"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"lib"</span><span class="token punctuation">,</span> <span class="token string">"src"</span><span class="token punctuation">,</span> <span class="token string">"package"</span><span class="token punctuation">,</span> <span class="token string">"types"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="homepage"><a class="anchor" href="#homepage">#</a> homepage</h2>
<p>项目主页 URL</p>
<figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">"homepage"</span><span class="token operator">:</span> <span class="token string">"https://zjgyb.github.io/"</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="bugs"><a class="anchor" href="#bugs">#</a> bugs</h2>
<p>提交 bug 的地方</p>
<figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">"bugs"</span><span class="token operator">:</span> <span class="token string">"https://github.com/zjgyb/zjgyb.github.io/issues"</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="style"><a class="anchor" href="#style">#</a> style</h2>
<p>指定样式文件所在的位置</p>
<figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">"style"</span><span class="token operator">:</span> <span class="token string">"lib/theme-chalk/index.css"</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="总结"><a class="anchor" href="#总结">#</a> 总结</h2>
<p>这里包含了大部分 <code>package.json</code>  的字段，还有一部分我认为没那么重要或者我还没发现，如果以后需要再进行补充</p>
]]></content>
      <categories>
        <category>前端</category>
      </categories>
  </entry>
  <entry>
    <title>less语法简介</title>
    <url>/2020/10/12/less%E8%AF%AD%E6%B3%95%E7%AE%80%E4%BB%8B/</url>
    <content><![CDATA[<h2 id="变量"><a class="anchor" href="#变量">#</a> 变量</h2>
<h3 id="值变量"><a class="anchor" href="#值变量">#</a> 值变量</h3>
<p>使用 <code>@</code> 定义变量</p>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token variable">@color<span class="token punctuation">:</span></span> #999<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token variable">@bgColor<span class="token punctuation">:</span></span> skyblue<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">@color</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token variable">@bgColor</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>CSS：</p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token property">background-color</span><span class="token punctuation">:</span> skyblue<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="选择器变量"><a class="anchor" href="#选择器变量">#</a> 选择器变量</h3>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token variable">@mySelector<span class="token punctuation">:</span></span> .box<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token variable">@Box<span class="token punctuation">:</span></span> box<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token selector">@&#123;mySelector&#125;</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token property">width</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token selector">.@&#123;Box&#125;</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token selector">#@&#123;Box&#125;</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>CSS：</p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">width</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token selector">#box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="属性变量"><a class="anchor" href="#属性变量">#</a> 属性变量</h3>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token variable">@color<span class="token punctuation">:</span></span> color<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token variable">@red<span class="token punctuation">:</span></span> red<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token property">@&#123;color&#125;</span><span class="token punctuation">:</span> <span class="token variable">@red</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="url变量"><a class="anchor" href="#url变量">#</a> url 变量</h3>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token variable">@images<span class="token punctuation">:</span></span> <span class="token string">"../img"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"@&#123;images&#125;/test.png"</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="声明变量"><a class="anchor" href="#声明变量">#</a> 声明变量</h3>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token atrule">@background<span class="token punctuation">:</span></span> <span class="token punctuation">&#123;</span> <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token variable">@background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="变量运算"><a class="anchor" href="#变量运算">#</a> 变量运算</h3>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token variable">@width<span class="token punctuation">:</span></span> 300px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token variable">@color<span class="token punctuation">:</span></span> #222<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token variable">@width</span> <span class="token operator">-</span> 20<span class="token punctuation">;</span> <span class="token comment">// 280px</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token variable">@width</span> <span class="token operator">-</span> 20 <span class="token operator">*</span> 5<span class="token punctuation">;</span> <span class="token comment">// 200px</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">@color</span> <span class="token operator">*</span> 2<span class="token punctuation">;</span> <span class="token comment">// #444</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token variable">@color</span> <span class="token operator">+</span> #111<span class="token punctuation">;</span> <span class="token comment">// #333</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="变量作用域"><a class="anchor" href="#变量作用域">#</a> 变量作用域</h3>
<p>就近原则</p>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token variable">@var<span class="token punctuation">:</span></span> <span class="token variable">@a</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token variable">@a<span class="token punctuation">:</span></span> 100%<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token variable">@var</span><span class="token punctuation">;</span> <span class="token comment">// 9%</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token variable">@a<span class="token punctuation">:</span></span> 9%<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="变量定义变量"><a class="anchor" href="#变量定义变量">#</a> 变量定义变量</h3>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token variable">@abc<span class="token punctuation">:</span></span> <span class="token string">'I am abc'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token variable">@var<span class="token punctuation">:</span></span> <span class="token string">'abc'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token selector">.box::before</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token variable">@@var</span><span class="token punctuation">;</span> <span class="token comment">// 'I am abc'</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="prop语法"><a class="anchor" href="#prop语法">#</a>  <code>$prop</code>  语法</h3>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.widget</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> #efefef<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token property">background-color</span><span class="token punctuation">:</span> $color<span class="token punctuation">;</span> <span class="token comment">// background-color: #efefef;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="嵌套"><a class="anchor" href="#嵌套">#</a> 嵌套</h2>
<h3 id=""><a class="anchor" href="#">#</a> &amp;</h3>
<p>代表上一层选择器，与 <code>sass</code>  相同</p>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.link</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token selector">&amp; + &amp;</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token selector">&amp; &amp;</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token selector">&amp;&amp;</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token selector">&amp;, &amp;ish</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> cyan<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>CSS</p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.link + .link</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token selector">.link .link</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token selector">.link.link</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token selector">.link, .linkish</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> cyan<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="媒体查询"><a class="anchor" href="#媒体查询">#</a> 媒体查询</h3>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token atrule">@media <span class="token punctuation">(</span>max-width<span class="token punctuation">:</span> 768px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token atrule">@media tv</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="混合方法"><a class="anchor" href="#混合方法">#</a> 混合方法</h2>
<p>就是把一种定义的类混入另一个类之中。</p>
<h3 id="无参数-默认参数-方法匹配"><a class="anchor" href="#无参数-默认参数-方法匹配">#</a> 无参数、默认参数、方法匹配</h3>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token selector">.container</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token mixin-usage function">.box</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token selector">.border(<span class="token variable">@a</span>: 10px, <span class="token variable">@b</span>: 20px, <span class="token variable">@c</span>: 30px, <span class="token variable">@color</span>: #eee)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token property">border</span><span class="token punctuation">:</span> solid 1px <span class="token variable">@color</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token property">box-shadow</span><span class="token punctuation">:</span> <span class="token variable">@argument</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token selector">.container</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token mixin-usage function">.border</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 5px<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token selector">.border(top, <span class="token variable">@width</span>: 5px, <span class="token variable">@color</span>: red)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token property">border-color</span><span class="token punctuation">:</span> transparent transparent <span class="token variable">@color</span> transparent<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token selector">.border(right, <span class="token variable">@width</span>: 5px, <span class="token variable">@color</span>: red)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>  <span class="token property">border-color</span><span class="token punctuation">:</span> transparent <span class="token variable">@color</span> transparent transparent<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token selector">.container</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>  <span class="token mixin-usage function">.border</span><span class="token punctuation">(</span>top<span class="token punctuation">,</span> 50px<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="命名空间"><a class="anchor" href="#命名空间">#</a> 命名空间</h3>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">#card()</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">background-color</span><span class="token punctuation">:</span> #eee<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token selector">.d(<span class="token variable">@w</span>: 300px)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token variable">@w</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token selector">#a(<span class="token variable">@h</span>: 300px)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token property">height</span><span class="token punctuation">:</span> <span class="token variable">@h</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token mixin-usage function">#card > .d > #a</span><span class="token punctuation">(</span>100px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// height: 100px</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token selector">.main</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token mixin-usage function">#card .d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// width: 300px;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token selector">.container</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token mixin-usage function">#card</span><span class="token punctuation">;</span> <span class="token comment">// background-color: #eee;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>  .<span class="token function">d</span><span class="token punctuation">(</span>20px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//width: 20px; 注意之前需要引入 #card，否则不生效</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="条件筛选when"><a class="anchor" href="#条件筛选when">#</a> 条件筛选 @when</h3>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 或</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token selector">.font(<span class="token variable">@size</span>:20px) when (<span class="token variable">@size</span>>50px), (<span class="token variable">@size</span>&lt;35px)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token variable">@size</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 且</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token selector">.font1(<span class="token variable">@size</span>:40px) when (<span class="token variable">@size</span>>35px) and (<span class="token variable">@size</span>&lt;50px)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token variable">@size</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 非</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token selector">.font2(<span class="token variable">@size</span>:40px) when not (<span class="token variable">@size</span>>50px)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token variable">@size</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token mixin-usage function">.font</span><span class="token punctuation">(</span>10px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// font-size: 10px;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  .<span class="token function">font</span><span class="token punctuation">(</span>40px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不渲染</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  .<span class="token function">font1</span><span class="token punctuation">(</span>10px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不渲染</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  .<span class="token function">font1</span><span class="token punctuation">(</span>40px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// font-size: 40px;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  .<span class="token function">font2</span><span class="token punctuation">(</span>10px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// font-size: 10px</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  .<span class="token function">font2</span><span class="token punctuation">(</span>60px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不渲染</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="不定参数"><a class="anchor" href="#不定参数">#</a> 不定参数</h3>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.boxShadow(...)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">box-shadow</span><span class="token punctuation">:</span> <span class="token variable">@arguments</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token mixin-usage function">.boxShadow</span><span class="token punctuation">(</span>1px 2px 3px #eee<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="important"><a class="anchor" href="#important">#</a> important</h3>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.border</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">border-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token property">border-style</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token mixin-usage function">.border !important</span><span class="token punctuation">;</span> <span class="token comment">//.border 内属性都会加上！important</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="循环方法"><a class="anchor" href="#循环方法">#</a> 循环方法</h3>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre>.<span class="token function">generate-columns</span><span class="token punctuation">(</span>4<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token selector">.generate-columns(<span class="token variable">@n</span>, <span class="token variable">@i</span>: 1) when (<span class="token variable">@i</span> &lt;= <span class="token variable">@n</span>)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token selector">.column-@&#123;i&#125;</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token variable">@i</span> <span class="token operator">*</span> 100% <span class="token operator">/</span> <span class="token variable">@n</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  .<span class="token function">generate-columns</span><span class="token punctuation">(</span><span class="token variable">@n</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token variable">@i</span> <span class="token operator">+</span> 1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="属性拼接"><a class="anchor" href="#属性拼接">#</a> 属性拼接</h3>
<p><code>+_</code> ：代表空格  <code>+</code> ：代表逗号</p>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.boxShadow</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">box-shadow+</span><span class="token punctuation">:</span> inset 0 0 10px #555<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token property">transform+_</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span><span class="token operator">-</span>50%<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token selector">.main</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token mixin-usage function">.boxShadow</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token property">box-shadow+</span><span class="token punctuation">:</span> 0 0 20px black<span class="token punctuation">;</span> <span class="token comment">// box-shadow: inset 0 0 10px #555, 0 0 20px black;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token property">transform+_</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// transform: translateY(-50%) scale(0.5);</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="函数使用"><a class="anchor" href="#函数使用">#</a> 函数使用</h3>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.average(<span class="token variable">@x</span>, <span class="token variable">@y</span>)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token variable">@result<span class="token punctuation">:</span></span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token variable">@x</span> <span class="token operator">+</span> <span class="token variable">@y</span><span class="token punctuation">)</span> <span class="token operator">/</span> 2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token property">padding</span><span class="token punctuation">:</span> .<span class="token function">average</span><span class="token punctuation">(</span>16px<span class="token punctuation">,</span> 50px<span class="token punctuation">)</span>[<span class="token variable">@result</span>]<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token atrule">@sizes<span class="token punctuation">:</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token property">mobile</span><span class="token punctuation">:</span> 320px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token property">tablet</span><span class="token punctuation">:</span> 768px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token property">desktop</span><span class="token punctuation">:</span> 1024px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token selector">.navbar</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token atrule">@media <span class="token punctuation">(</span>min-width<span class="token punctuation">:</span> @sizes[tablet]<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token property">display</span><span class="token punctuation">:</span> inline<span class="token operator">-</span>block<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="继承"><a class="anchor" href="#继承">#</a> 继承</h2>
<h3 id="extend"><a class="anchor" href="#extend">#</a> extend</h3>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token selector">.hide</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token selector">.container</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  &amp;<span class="token punctuation">:</span><span class="token function">extend</span><span class="token punctuation">(</span>.box<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token selector">.main</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  &amp;<span class="token punctuation">:</span><span class="token function">extend</span><span class="token punctuation">(</span>.box .hide<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token selector">.content</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token mixin-usage function">.box</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 也可以是 .box，但官网推荐加一个括号</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.box, .container</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token selector">.box .hide, .main</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token selector">.content</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token selector">.content .hide</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="all"><a class="anchor" href="#all">#</a> all</h3>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token selector">&amp;:after</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">'hello world'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token selector">.main:extend(.box all)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="导入"><a class="anchor" href="#导入">#</a> 导入</h2>
<p>可以在任意位置导入</p>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token variable">@import</span> <span class="token string">"main"</span><span class="token punctuation">;</span> <span class="token comment">// = import "main.less";</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token variable">@import</span> <span class="token punctuation">(</span>reference<span class="token punctuation">)</span> <span class="token string">"bootstrap.less"</span><span class="token punctuation">;</span> <span class="token comment">// 引入但不编译</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token variable">@import</span> <span class="token punctuation">(</span>once<span class="token punctuation">)</span> <span class="token string">"test"</span><span class="token punctuation">;</span> <span class="token comment">// 只会导入一次</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token variable">@import</span> <span class="token punctuation">(</span>multiple<span class="token punctuation">)</span> <span class="token string">"test"</span><span class="token punctuation">;</span> <span class="token comment">// 可以导入多次</span></pre></td></tr></table></figure><h2 id="函数"><a class="anchor" href="#函数">#</a> 函数</h2>
<ul>
<li>iscolor</li>
<li>isnumber</li>
<li>isstring</li>
<li>iskeyword</li>
<li>isurl</li>
<li>ispixed</li>
<li>ispercentage</li>
<li>isem</li>
<li>isunit</li>
</ul>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">isnumber</span><span class="token punctuation">(</span>blue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">isnumber</span><span class="token punctuation">(</span>22px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">isnumber</span><span class="token punctuation">(</span>20%<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">iscolor</span><span class="token punctuation">(</span>blue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">isurl</span><span class="token punctuation">(</span>blue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span></pre></td></tr></table></figure><h3 id="round"><a class="anchor" href="#round">#</a> round</h3>
<p>round (number, decimalPlaces) number: 代表浮点数 decimalPlaces: 可选，四舍五入的小数位数。默认为 0</p>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">round</span><span class="token punctuation">(</span>1.6<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">round</span><span class="token punctuation">(</span>1.66<span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1.7</span></pre></td></tr></table></figure><h3 id="max"><a class="anchor" href="#max">#</a> max</h3>
<p>返回最大值：</p>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">max</span><span class="token punctuation">(</span>1<span class="token punctuation">,</span> 0<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre> </pre></td></tr><tr><td data-num="3"></td><td><pre>        Copied!</pre></td></tr></table></figure><h2 id="插件plugin"><a class="anchor" href="#插件plugin">#</a> 插件 @plugin</h2>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 方法一</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">registerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token function-variable function">install</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">less<span class="token punctuation">,</span> pluginManager<span class="token punctuation">,</span> functions</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        functions<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'pi'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>            <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// 方法二</span></pre></td></tr><tr><td data-num="11"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token function-variable function">install</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">less<span class="token punctuation">,</span> pluginManager<span class="token punctuation">,</span> functions</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        functions<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'pi'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token variable">@plugin</span> <span class="token string">"my-plugin"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token selector">.show-me-pi</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token property">value</span><span class="token punctuation">:</span> <span class="token function">pi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="映射"><a class="anchor" href="#映射">#</a> 映射</h2>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">#colors()</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">primary</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token property">secondary</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token selector">.button</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> #colors[primary]<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #colors[secondary]<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="其他"><a class="anchor" href="#其他">#</a> 其他</h2>
<figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 注释 1</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">/* 注释 2 */</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token selector">.box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token property">width</span><span class="token punctuation">:</span> ~<span class="token string">'calc(300px - 30px)'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token property">alert</span><span class="token punctuation">:</span>~<span class="token string">"`alert(1)`"</span><span class="token punctuation">;</span> <span class="token comment">// 可以执行 js 代码，弹出 1</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>css</category>
      </categories>
  </entry>
  <entry>
    <title>typeof与instanceof</title>
    <url>/2020/10/30/typeof%E4%B8%8Einstanceof/</url>
    <content><![CDATA[<h2 id="一-typeof"><a class="anchor" href="#一-typeof">#</a> 一、typeof</h2>
<p><code>typeof</code>  操作符返回一个字符串，表示未经计算的操作数的类型</p>
<p>使用方法如下：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">typeof</span> operand</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">typeof</span><span class="token punctuation">(</span>operand<span class="token punctuation">)</span></pre></td></tr></table></figure><p><code>operand</code>  表示对象或原始值的表达式，其类型将被返回</p>
<p>举个例子</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">typeof</span> <span class="token number">1</span> <span class="token comment">// 'number'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">typeof</span> <span class="token string">'1'</span> <span class="token comment">// 'string'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">typeof</span> <span class="token keyword">undefined</span> <span class="token comment">// 'undefined'</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">typeof</span> <span class="token boolean">true</span> <span class="token comment">// 'boolean'</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">typeof</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'symbol'</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">typeof</span> <span class="token keyword">null</span> <span class="token comment">// 'object'</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">typeof</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 'object'</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">typeof</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> <span class="token comment">// 'object'</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">typeof</span> console <span class="token comment">// 'object'</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">typeof</span> console<span class="token punctuation">.</span>log <span class="token comment">// 'function'</span></pre></td></tr></table></figure><p>从上面例子，前 6 个都是基础数据类型。虽然 <code>typeof null</code>  为 <code>object</code> ，但这只是 <code> JavaScript</code>  存在的一个悠久  <code>Bug</code> ，不代表 <code>null </code> 就是引用数据类型，并且 <code>null </code> 本身也不是对象</p>
<p>所以， <code>null </code> 在  <code>typeof </code> 之后返回的是有问题的结果，不能作为判断 <code>null</code>  的方法。如果你需要在  <code>if</code>  语句中判断是否为  <code>null</code> ，直接通过 <code>===null</code>  来判断就好</p>
<p>同时，可以发现引用类型数据，用 <code>typeof</code>  来判断的话，除了 <code>function</code>  会被识别出来之外，其余的都输出 <code>object</code></p>
<p>如果我们想要判断一个变量是否存在，可以使用 <code>typeof</code> ：(不能使用 <code>if(a)</code> ， 若 <code>a</code>  未声明，则报错)</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> a <span class="token operator">!=</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment">// 变量存在</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="二-instanceof"><a class="anchor" href="#二-instanceof">#</a> 二、instanceof</h2>
<p><code>instanceof</code>  运算符用于检测构造函数的  <code>prototype</code>  属性是否出现在某个实例对象的原型链上</p>
<p>使用如下：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>object <span class="token keyword">instanceof</span> <span class="token class-name">constructor</span></pre></td></tr></table></figure><p><code>object</code>  为实例对象， <code>constructor</code>  为构造函数</p>
<p>构造函数通过 <code>new</code>  可以实例对象， <code>instanceof </code> 能判断这个对象是否是之前那个构造函数生成的对象</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 定义构建函数</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">let</span> <span class="token function-variable function">Car</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">let</span> benz <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>benz <span class="token keyword">instanceof</span> <span class="token class-name">Car</span> <span class="token comment">// true</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">let</span> car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>car <span class="token keyword">instanceof</span> <span class="token class-name">String</span> <span class="token comment">// true</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'xxx'</span></pre></td></tr><tr><td data-num="8"></td><td><pre>str <span class="token keyword">instanceof</span> <span class="token class-name">String</span> <span class="token comment">// false</span></pre></td></tr></table></figure><p>关于 <code>instanceof</code>  的实现原理，可以参考下面：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">myInstanceof</span><span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment">// 这里先用 typeof 来判断基础数据类型，如果是，直接返回 false</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> left <span class="token operator">!==</span> <span class="token string">'object'</span> <span class="token operator">||</span> left <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">//getProtypeOf 是 Object 对象自带的 API，能够拿到参数的原型对象</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">let</span> proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                  </pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span>proto <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span>proto <span class="token operator">===</span> right<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment">// 找到相同原型对象，返回 true</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeof</span><span class="token punctuation">(</span>proto<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>也就是顺着原型链去找，直到找到相同的原型对象，返回 <code>true</code> ，否则为 <code>false</code></p>
<h2 id="三-区别"><a class="anchor" href="#三-区别">#</a> 三、区别</h2>
<p><code>typeof</code>  与 <code>instanceof</code>  都是判断数据类型的方法，区别如下：</p>
<ul>
<li><code>typeof</code>  会返回一个变量的基本类型， <code>instanceof</code>  返回的是一个布尔值</li>
<li><code>instanceof</code>  可以准确地判断复杂引用数据类型，但是不能正确判断基础数据类型</li>
<li>而 <code> typeof</code>  也存在弊端，它虽然可以判断基础数据类型（ <code>null</code>  除外），但是引用数据类型中，除了 <code> function</code>  类型以外，其他的也无法判断</li>
</ul>
<p>可以看到，上述两种方法都有弊端，并不能满足所有场景的需求</p>
<p>如果需要通用检测数据类型，可以采用 <code>Object.prototype.toString</code> ，调用该方法，统一返回格式 <code>“[object Xxx]” </code> 的字符串</p>
<p>如下</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>       <span class="token comment">// "[object Object]"</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token comment">// 同上结果，加上 call 也 ok</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token comment">// "[object Number]"</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span>  <span class="token comment">// "[object String]"</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>  <span class="token comment">// "[object Boolean]"</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token comment">// "[object Function]"</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>   <span class="token comment">//"[object Null]"</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token comment">//"[object Undefined]"</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">123</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span>    <span class="token comment">//"[object RegExp]"</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//"[object Date]"</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>       <span class="token comment">//"[object Array]"</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span>  <span class="token comment">//"[object HTMLDocument]"</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span>   <span class="token comment">//"[object Window]"</span></pre></td></tr></table></figure><p>了解了 <code>toString</code>  的基本用法，下面就实现一个全局通用的数据类型判断方法</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">getType</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">let</span> type  <span class="token operator">=</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">!==</span> <span class="token string">"object"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 先进行 typeof 判断，如果是基础数据类型，直接返回</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">return</span> type<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token comment">// 对于 typeof 返回结果是 object 的，再进行如下的判断，正则返回结果</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\[object (\S+)\]$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">'$1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>使用如下</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>     <span class="token comment">// "Array" typeof [] 是 object，因此 toString 返回</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">getType</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span>  <span class="token comment">// "string" typeof 直接返回</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">getType</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span> <span class="token comment">// "Window" toString 返回</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">getType</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>   <span class="token comment">// "Null" 首字母大写，typeof null 是 object，需 toString 来判断</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">getType</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span>   <span class="token comment">// "undefined" typeof 直接返回</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment">// "undefined" typeof 直接返回</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token function">getType</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token comment">// "function" typeof 能判断，因此首字母小写</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token function">getType</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">123</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span>      <span class="token comment">//"RegExp" toString 返回</span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>use strict</title>
    <url>/2020/09/30/use%20strict/</url>
    <content><![CDATA[<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>严格模式<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="9"></td><td><pre>		<span class="token comment">// 00 - 严格模式：解决 js 版本一些不合适 不合理的地方 IE10 以上版本才会执行</span></pre></td></tr><tr><td data-num="10"></td><td><pre>		<span class="token string">'use strict'</span><span class="token punctuation">;</span> <span class="token comment">// 为整个脚本开启严格模式 IE10 以上版本</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token comment">// (function()&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token comment">// 	// 'use strict';// 为整个脚本开启严格模式</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token comment">// &#125;)()</span></pre></td></tr><tr><td data-num="14"></td><td><pre>		<span class="token comment">// function fn3()&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>		<span class="token comment">// 	'use strict'; // 为 fn3 这个函数开启严格模式</span></pre></td></tr><tr><td data-num="16"></td><td><pre>		<span class="token comment">// &#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>		<span class="token comment">// 01 - 严格模式的变化</span></pre></td></tr><tr><td data-num="18"></td><td><pre>		<span class="token comment">// 1 一定要先声明再定义  </span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token comment">//name='lhm'; // 错误</span></pre></td></tr><tr><td data-num="20"></td><td><pre>		<span class="token keyword">let</span> name<span class="token operator">=</span><span class="token string">'lhm'</span><span class="token punctuation">;</span> <span class="token comment">// 正确</span></pre></td></tr><tr><td data-num="21"></td><td><pre>		<span class="token comment">//2 不能随意删除声明的变量</span></pre></td></tr><tr><td data-num="22"></td><td><pre>		<span class="token comment">//delete name;// 不可以</span></pre></td></tr><tr><td data-num="23"></td><td><pre>		<span class="token comment">//3 函数中！！的 this 不再指向 window 而是 undefined</span></pre></td></tr><tr><td data-num="24"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//window</span></pre></td></tr><tr><td data-num="25"></td><td><pre>		<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//undefined</span></pre></td></tr><tr><td data-num="27"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>		<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>		<span class="token comment">//4 构造眼熟必须加 new 创建对象 不然里面的 this 指向的是 undefined</span></pre></td></tr><tr><td data-num="30"></td><td><pre>		<span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//undefined;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span>age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>		<span class="token comment">// Father ("张学友",63);</span></pre></td></tr><tr><td data-num="36"></td><td><pre>		<span class="token comment">//console.log (Father.name);// 报错</span></pre></td></tr><tr><td data-num="37"></td><td><pre>		<span class="token keyword">let</span> father<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token string">"张学友"</span><span class="token punctuation">,</span><span class="token number">63</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>father<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>		<span class="token comment">//05 定时器还是指向还是 window</span></pre></td></tr><tr><td data-num="40"></td><td><pre>		<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//window</span></pre></td></tr><tr><td data-num="42"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="43"></td><td><pre>		<span class="token comment">//06 函数参数不可以重名</span></pre></td></tr><tr><td data-num="44"></td><td><pre>		<span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>a</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token operator">+</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>		<span class="token punctuation">&#125;</span> <span class="token comment">// 报错</span></pre></td></tr><tr><td data-num="47"></td><td><pre>		</pre></td></tr><tr><td data-num="48"></td><td><pre>		<span class="token comment">//07 不可以在非函数代码块声明函数</span></pre></td></tr><tr><td data-num="49"></td><td><pre>		<span class="token comment">// if(true)&#123;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>		<span class="token comment">// 	function fn4()&#123;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>		<span class="token comment">// 		console.log ("不可以在非函数代码块声明函数")</span></pre></td></tr><tr><td data-num="52"></td><td><pre>		<span class="token comment">// 	&#125;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>		<span class="token comment">// &#125; // 报错</span></pre></td></tr><tr><td data-num="54"></td><td><pre>		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="55"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="56"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>vue-cli axios获取后台返回的图形验证码</title>
    <url>/2021/09/16/vue-cli%20axios%E8%8E%B7%E5%8F%96%E5%90%8E%E5%8F%B0%E8%BF%94%E5%9B%9E%E7%9A%84%E5%9B%BE%E5%BD%A2%E9%AA%8C%E8%AF%81%E7%A0%81/</url>
    <content><![CDATA[<p><strong>data 定义 <code>imgcodeUrl</code> </strong></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 获取图片验证码</span></pre></td></tr><tr><td data-num="2"></td><td><pre>		<span class="token function">getCodeImg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>			<span class="token comment">// this.time=1234567;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>			<span class="token keyword">this</span><span class="token punctuation">.</span>time <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"时间戳"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>			<span class="token keyword">this</span><span class="token punctuation">.</span>axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>conf<span class="token punctuation">.</span>api_base_url <span class="token operator">+</span> <span class="token string">"/validateCode/create/"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>time<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>					<span class="token literal-property property">responseType</span><span class="token operator">:</span> <span class="token string">"arraybuffer"</span></pre></td></tr><tr><td data-num="9"></td><td><pre>				<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>				<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>					<span class="token keyword">return</span> <span class="token string">'data:image/png;base64,'</span> <span class="token operator">+</span> <span class="token function">btoa</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>						byte</span><span class="token punctuation">)</span> <span class="token operator">=></span> data <span class="token operator">+</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>byte<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>				<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>					<span class="token keyword">this</span><span class="token punctuation">.</span>imgcodeUrl <span class="token operator">=</span> res<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>				<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr></table></figure><p><strong>使用</strong></p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>imgCodeUrl<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>图形验证码<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>axios</tag>
        <tag>图形验证码</tag>
      </tags>
  </entry>
  <entry>
    <title>vite</title>
    <url>/2021/02/09/vite/</url>
    <content><![CDATA[<h1 id="vite和vue-cli区别"><a class="anchor" href="#vite和vue-cli区别">#</a> vite 和 vue-cli 区别</h1>
<p><code>vite</code>  和 <code>vue-cli</code>  都是创建 SPA（单页面应用进程）项目的方式。区别如下：</p>
<p><img data-src="../images/vite/1650336851495.png" alt="1650336851495" /></p>
<p>注意：<strong>vite 基于 vue3</strong></p>
<h1 id="vite项目创建"><a class="anchor" href="#vite项目创建">#</a> vite 项目创建</h1>
<pre><code>npm init vite-app 项目名称
cd 项目名称
npm install
npm run dev
</code></pre>
<h1 id="vite项目基本结构"><a class="anchor" href="#vite项目基本结构">#</a> vite 项目基本结构</h1>
<p>梳理项目的结构</p>
<p><img data-src="../images/vite/1650337036351.png" alt="1650337036351" /></p>
<p>其中 src 目录又有</p>
<p><img data-src="../images/vite/1650337091708.png" alt="1650337091708" /></p>
<h1 id="vite项目运行流程"><a class="anchor" href="#vite项目运行流程">#</a> vite 项目运行流程</h1>
<p>在工程化项目中，vue 要做的事情就是：通过 main.js 把 App.vue 渲染到 index.html 的指定区域中</p>
<p>其中：</p>
<ul>
<li>App.vue 用来编写待渲染的模板结构</li>
<li>index.html 中需要预留一个 el 区域</li>
<li>main.js 把 App.vue 渲染到了 index.html 所预留的区域中</li>
</ul>
<h1 id="mainjs分析"><a class="anchor" href="#mainjs分析">#</a> main.js 分析</h1>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 按需导入 createApp 函数</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createApp <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 导入待渲染组件</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">"./App.vue"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 调用 app，创建 App 实例</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 调用 mount 方法把 APP 组件的 moan 结构 渲染到指定的 el 区域中</span></pre></td></tr><tr><td data-num="8"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">"#app"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>vite</tag>
        <tag>vue3</tag>
      </tags>
  </entry>
  <entry>
    <title>vue-cli公钥加密</title>
    <url>/2021/04/16/vue-cli%E5%85%AC%E9%92%A5%E5%8A%A0%E5%AF%86/</url>
    <content><![CDATA[<p><strong>初始化</strong></p>
<p>安装  <code>npm install jsencrypt</code></p>
<p>引入  <code>import &#123;JSEncrypt&#125; from 'jsencrypt'</code></p>
<p>data 里面定义公钥 **</p>
<p><code>publicKey:''</code></p>
<p><strong>代码仅供参考</strong></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 公钥加密</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	 <span class="token keyword">this</span><span class="token punctuation">.</span>time <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 时间戳</span></pre></td></tr><tr><td data-num="3"></td><td><pre>				 <span class="token keyword">let</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>					<span class="token literal-property property">data</span><span class="token operator">:</span> res2</pre></td></tr><tr><td data-num="5"></td><td><pre>				<span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>				 	<span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>					<span class="token literal-property property">url</span><span class="token operator">:</span> conf<span class="token punctuation">.</span>api_base_url <span class="token operator">+</span> <span class="token string">'/asymmetricCrypto/getPublicKey?t='</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>time<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>				 	<span class="token comment">// headers: &#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>				 	<span class="token comment">// 	'content-type': 'multipart/form-data'</span></pre></td></tr><tr><td data-num="10"></td><td><pre>				 	<span class="token comment">// &#125;,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>				 <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>				 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"后台获取公钥响应"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>				 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>				 <span class="token keyword">this</span><span class="token punctuation">.</span>publicKey <span class="token operator">=</span> res2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>				 <span class="token keyword">let</span> encrypt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSEncrypt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>				 <span class="token comment">// 设置公钥</span></pre></td></tr><tr><td data-num="17"></td><td><pre>				 <span class="token keyword">let</span> encryptStr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSEncrypt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>				 encryptStr<span class="token punctuation">.</span><span class="token function">setPublicKey</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>publicKey<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置 加密公钥</span></pre></td></tr><tr><td data-num="19"></td><td><pre>				 <span class="token keyword">this</span><span class="token punctuation">.</span>registerParams<span class="token punctuation">.</span>password<span class="token operator">=</span> encryptStr<span class="token punctuation">.</span><span class="token function">encrypt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>registerParams<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 进行加密</span></pre></td></tr><tr><td data-num="20"></td><td><pre>				 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"加密为"</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>registerParams<span class="token punctuation">.</span>password<span class="token punctuation">)</span>	</pre></td></tr><tr><td data-num="21"></td><td><pre>				 <span class="token keyword">this</span><span class="token punctuation">.</span>registerParams<span class="token punctuation">.</span>password <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getEncrypt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>registerParams<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 公钥加密</span></pre></td></tr><tr><td data-num="22"></td><td><pre>				 <span class="token keyword">this</span><span class="token punctuation">.</span>phone <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>contactPhone<span class="token punctuation">;</span>  <span class="token comment">// 写死手机和联系手机一致  </span></pre></td></tr><tr><td data-num="23"></td><td><pre>				 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"加密密码为："</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>registerParams<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>公钥加密</tag>
        <tag>vue-cli</tag>
      </tags>
  </entry>
  <entry>
    <title>vue.config.js解决跨域</title>
    <url>/2021/04/17/vue.config.js%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<p>** 根目录下建立 vue.config.js 文件 有就不用建 **</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token comment">// 解决打包时白屏问题</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token literal-property property">publicPath</span> <span class="token operator">:</span> <span class="token string">"./"</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token comment">// 配置 vue-cli 服务器</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token literal-property property">devServer</span> <span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		<span class="token comment">// 端口号</span></pre></td></tr><tr><td data-num="7"></td><td><pre>		<span class="token literal-property property">port</span> <span class="token operator">:</span> <span class="token number">8888</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token comment">// 是否自动打开</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		<span class="token literal-property property">open</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>		<span class="token comment">// 主机名</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token literal-property property">host</span> <span class="token operator">:</span> <span class="token string">"localhost"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token comment">// 关闭 https 协议</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token literal-property property">https</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>		<span class="token comment">// 配置跨域</span></pre></td></tr><tr><td data-num="15"></td><td><pre>		<span class="token literal-property property">proxy</span> <span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>			<span class="token comment">// 代理名称</span></pre></td></tr><tr><td data-num="17"></td><td><pre>			<span class="token string-property property">"/api"</span> <span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>				<span class="token comment">// 要跨域的公共接口地址</span></pre></td></tr><tr><td data-num="19"></td><td><pre>				<span class="token comment">// 谁要跨域就把谁的链接写在这里，使用 /api 便知道是这个跨域</span></pre></td></tr><tr><td data-num="20"></td><td><pre>				<span class="token literal-property property">target</span> <span class="token operator">:</span> <span class="token string">"http://真正ip"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="21"></td><td><pre>				<span class="token comment">// 是否开启跨域</span></pre></td></tr><tr><td data-num="22"></td><td><pre>				<span class="token literal-property property">changeOrigin</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="23"></td><td><pre>				<span class="token comment">// 重写代理名称</span></pre></td></tr><tr><td data-num="24"></td><td><pre>				<span class="token literal-property property">pathRewrite</span> <span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>					<span class="token string-property property">"^/api"</span> <span class="token operator">:</span> <span class="token string">""</span></pre></td></tr><tr><td data-num="26"></td><td><pre>				<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>			<span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="28"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="30"></td><td><pre>	<span class="token comment">// 关闭 eslint</span></pre></td></tr><tr><td data-num="31"></td><td><pre>	<span class="token literal-property property">lintOnSave</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="32"></td><td><pre>	<span class="token comment">// 打包时不生成.map 的后缀名文件</span></pre></td></tr><tr><td data-num="33"></td><td><pre>	<span class="token literal-property property">productionSourceMap</span> <span class="token operator">:</span> <span class="token boolean">false</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>记得关闭项目重启，不然没用</strong></p>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>跨域</tag>
      </tags>
  </entry>
  <entry>
    <title>vue传参用参</title>
    <url>/2021/04/08/vuex/</url>
    <content><![CDATA[<p><strong>前言</strong></p>
<p>vue-cli 项目中利用了 vuex 进行全局存储，但是会 vuex 有一个问题刷新就没有，于是这里是通过 getter 利用了本地存储来重新获取的方法。</p>
<p><strong>代码仅供学习参考</strong></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	createStore</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span></pre></td></tr><tr><td data-num="4"></td><td><pre> </pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>		<span class="token literal-property property">token</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 用户身份  正常置空，为了能够进入</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token literal-property property">loginState</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 登录状态，默认未登录 false</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		<span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><span class="token comment">// 账户名</span></pre></td></tr><tr><td data-num="10"></td><td><pre>		<span class="token literal-property property">loginToken</span><span class="token operator">:</span><span class="token string">''</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token literal-property property">getters</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	   <span class="token function">loginState</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>state<span class="token punctuation">.</span>loginState<span class="token operator">||</span>state<span class="token punctuation">.</span>loginState<span class="token operator">==</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	            state<span class="token punctuation">.</span>loginState <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'loginState'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	        <span class="token keyword">return</span> state<span class="token punctuation">.</span>loginState<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token function">token</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>		     <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>state<span class="token punctuation">.</span>token<span class="token operator">||</span>state<span class="token punctuation">.</span>token<span class="token operator">==</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>		         state<span class="token punctuation">.</span>token <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>		     <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>		     <span class="token keyword">return</span> state<span class="token punctuation">.</span>token<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>		 <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="25"></td><td><pre>		<span class="token function">username</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>		      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>state<span class="token punctuation">.</span>username<span class="token operator">||</span>state<span class="token punctuation">.</span>username<span class="token operator">==</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>		          state<span class="token punctuation">.</span>username <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>		      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>		      <span class="token keyword">return</span> state<span class="token punctuation">.</span>username<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>		  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="31"></td><td><pre>		 <span class="token function">loginToken</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>		        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>state<span class="token punctuation">.</span>loginToken<span class="token operator">||</span>state<span class="token punctuation">.</span>loginToken<span class="token operator">==</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>		            state<span class="token punctuation">.</span>loginToken <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'loginToken'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>		        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>		        <span class="token keyword">return</span> state<span class="token punctuation">.</span>loginToken<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>		    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="38"></td><td><pre>	<span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>		<span class="token punctuation">[</span><span class="token string">'setToken'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> token</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>			localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>			state<span class="token punctuation">.</span>token <span class="token operator">=</span> token<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="43"></td><td><pre>		<span class="token punctuation">[</span><span class="token string">'setLoginState'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> loginState</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>			localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"loginState"</span><span class="token punctuation">,</span> loginState<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>			state<span class="token punctuation">.</span>loginState <span class="token operator">=</span> loginState<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="47"></td><td><pre>		<span class="token punctuation">[</span><span class="token string">'setUsername'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> username</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>			localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>			state<span class="token punctuation">.</span>username <span class="token operator">=</span> username<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="51"></td><td><pre>		<span class="token punctuation">[</span><span class="token string">'setLoginToken'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> loginToken</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>			localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"LOGIN-TOKEN"</span><span class="token punctuation">,</span> loginToken<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>			state<span class="token punctuation">.</span>loginToken <span class="token operator">=</span> loginToken<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="55"></td><td><pre> </pre></td></tr><tr><td data-num="56"></td><td><pre>	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="57"></td><td><pre>	<span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="58"></td><td><pre>	<span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="59"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>使用</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>username</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>username</pre></td></tr></table></figure>]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vuex</tag>
        <tag>全局存储</tag>
      </tags>
  </entry>
  <entry>
    <title>vue传参用参</title>
    <url>/2021/03/25/vue%E4%BC%A0%E5%8F%82%E7%94%A8%E5%8F%82/</url>
    <content><![CDATA[<p>1、router-link 中传参</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;name:<span class="token punctuation">'</span>ProjectDetails<span class="token punctuation">'</span>, params:&#123;id:item.prjId&#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>接收</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre>this.$route.params.id</pre></td></tr></table></figure><p>2、传参 2 方法</p>
<p>使用：</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre>this.$router.push(&#123;</pre></td></tr><tr><td data-num="2"></td><td><pre>               name:'路径',</pre></td></tr><tr><td data-num="3"></td><td><pre>               query:&#123;</pre></td></tr><tr><td data-num="4"></td><td><pre>                   id:value</pre></td></tr><tr><td data-num="5"></td><td><pre>                &#125;</pre></td></tr><tr><td data-num="6"></td><td><pre>      &#125;)</pre></td></tr></table></figure><p>拿取：</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre>this.$route.query.id</pre></td></tr></table></figure>]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>router-link</tag>
      </tags>
  </entry>
  <entry>
    <title>vue实现倒计时小案例</title>
    <url>/2021/02/26/vue%E5%AE%9E%E7%8E%B0%E5%80%92%E8%AE%A1%E6%97%B6%E5%B0%8F%E6%A1%88%E4%BE%8B/</url>
    <content><![CDATA[<p>实现功能：234 基于 1 基础倒计时结束</p>
<p><strong>1 - 实现倒计时结束</strong></p>
<p><strong>2 - 同意按钮由 diabled=true 变成 false</strong></p>
<p><strong>3 - 背景颜色变化</strong></p>
<p><strong>4 - 实现点击同意跳转</strong></p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>agree<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>agreeBtn<span class="token punctuation">"</span></span>   <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>goStatement2()<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background-color</span><span class="token punctuation">:</span> #a9a9a9<span class="token punctuation">;</span> <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">:disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>data.disabled<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>		同意<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>countdown<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>				<span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>data.countdown!=0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>（<span class="token comment"></span>秒）<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>		<span class="token function">goStatement2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>			<span class="token comment">// 路由跳转</span></pre></td></tr><tr><td data-num="4"></td><td><pre>			<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'Statement2'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>			<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>				<span class="token literal-property property">countdown</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>				<span class="token literal-property property">disabled</span><span class="token operator">:</span><span class="token boolean">true</span></pre></td></tr><tr><td data-num="5"></td><td><pre>			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>			<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>				<span class="token comment">// 开始加载时候在顶部</span></pre></td></tr><tr><td data-num="8"></td><td><pre>				 window<span class="token punctuation">.</span><span class="token function">scroll</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>				<span class="token keyword">let</span> timer<span class="token operator">=</span><span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>					<span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>countdown <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>						data<span class="token punctuation">.</span>countdown<span class="token operator">--</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>					<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>countdown <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>						<span class="token comment">// 设置背景颜色变红</span></pre></td></tr><tr><td data-num="14"></td><td><pre>						document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".agreeBtn"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">"#D5191c"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>						document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".agreeBtn"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"disabled"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>						document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#countdown"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>				        data<span class="token punctuation">.</span>disabled<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>						<span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>					<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>					<span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>			<span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>				data</pre></td></tr><tr><td data-num="25"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>倒计时</tag>
      </tags>
  </entry>
  <entry>
    <title>vue挂载全局变量</title>
    <url>/2021/04/10/vue%E6%8C%82%E8%BD%BD%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F/</url>
    <content><![CDATA[<h1 id="vue2x挂载全局"><a class="anchor" href="#vue2x挂载全局">#</a> vue2.x 挂载全局</h1>
<p><strong>1. 在 main.js 文件中</strong></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 使用 Vue.prototype.$xxxx=xxx 的形式来挂载，</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$store <span class="token operator">=</span> store</pre></td></tr></table></figure><p><strong>2. 页面使用</strong></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 通过 this.$xxx 来获取挂载到全局的变量或者方法</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 在需要的页面 vue 文件中使用</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span><span class="token function">username</span>  <span class="token punctuation">(</span>橙色为store里定义的变量）</pre></td></tr></table></figure><p><strong>以封装一个正则表达式为例！</strong></p>
<p>创建我们的公用文件夹 <code>util</code> ---&gt; <code>util.js</code></p>
<p><code>util.js</code></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">PublicMethods</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'公用变量'</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token function">verificationPhon</span><span class="token punctuation">(</span><span class="token parameter">phone</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		<span class="token comment">// 大陆手机号码 11 位数，匹配格式：前三位固定格式 + 后 8 位任意数</span></pre></td></tr><tr><td data-num="7"></td><td><pre>		<span class="token comment">// 13 + 任意数 * 15 + 除 4 的任意数 * 18 + 除 1 和 4 的任意数 * 17 + 除 9 的任意数 * 147</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token comment">//  新增了 166、198、199 号段的手机号</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		<span class="token keyword">var</span> reg<span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89])\d&#123;8&#125;$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>		<span class="token keyword">return</span> reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">var</span> Plugins <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PublicMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> Plugins<span class="token punctuation">;</span></pre></td></tr></table></figure><p><strong>知识讲解</strong></p>
<p><code>export 和 export default的区别是什么？</code> <br />
通过 export 抛出去的变量或者方法，使用的时候需要用 { } 包裹住，来指明使用什么，而 export default 就方便些，抛出去后，直接用即可，可以自己试一下！</p>
<p>很好，我们现在已经将公用的方法以及变量抛出去了，那如何使用他呢？</p>
<p>首先打开我们 Vue 的命根子： <code>main.js</code></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> Plugins <span class="token keyword">from</span> <span class="token string">'@/utils/utils.js'</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>Plugins <span class="token operator">=</span> Plugins<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>App<span class="token punctuation">.</span>mpType <span class="token operator">=</span> <span class="token string">'app'</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token operator">...</span>App</pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>** 注意代码中的 Plugins，就是我们挂载到了 Vue 的实例上面了，也就是可以全局使用这个封装的 JS，接下来我们就去需要使用的页面使用它 **</p>
<p>比如点击图中的验证码按钮，就调用我们的这个方法，记得传入手机号</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>Plugins<span class="token punctuation">.</span><span class="token function">verificationPhon</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>phone<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h1 id="vue3x挂载全局"><a class="anchor" href="#vue3x挂载全局">#</a> Vue3.x 挂载全局</h1>
<p><strong>显然，用上面的方法是不行的</strong></p>
<p>同样在命根子 <code>main.js</code>  文件中  （注意：<strong>createApp 不能 create 两次，否则会变成 undefined</strong>）</p>
<p>// 挂载全局变量实验  挂载一个全局变量名字</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span>$name <span class="token operator">=</span> <span class="token string">'lhm'</span><span class="token punctuation">;</span> <span class="token comment">// 挂载全局</span></pre></td></tr><tr><td data-num="3"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueAxios<span class="token punctuation">,</span> axios<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ElementPlus<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token literal-property property">locale</span><span class="token operator">:</span> zhCn<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>需要的页面中调用</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> defineComponent<span class="token punctuation">,</span> getCurrentInstance<span class="token punctuation">,</span>onMounted<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre> </pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">appContext</span> <span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">config</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> globalProperties <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">getCurrentInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"全局变量："</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>globalProperties<span class="token punctuation">.</span>$name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>全局变量</tag>
      </tags>
  </entry>
  <entry>
    <title>vue打包问题</title>
    <url>/2021/04/02/vue%E6%89%93%E5%8C%85%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h1 id="前言"><a class="anchor" href="#前言">#</a> 前言</h1>
<p>都是在项目中遇到的问题，记录一下便于回顾</p>
<p><strong>问题 1</strong></p>
<p>因为联调时候跨域，在 vue.config.js 使用了跨域代理有</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token literal-property property">proxy</span><span class="token operator">:</span><span class="token string">'跨域ip'</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>于是打包出去会出现问题啦，看到请求的 url 不妥</p>
<p><strong>解决</strong></p>
<p>根目录下新建两个文件</p>
<p><code>.env.production</code>  // 生产环境</p>
<p><code>.env.development</code>  // 开发环境</p>
<p>在两个文件中定义变量和请求 ip</p>
<p>** <code>.env.development</code>  **</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token constant">VUE_APP_ENV</span><span class="token operator">=</span><span class="token string">"dev"</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token constant">VUE_APP_BASE_API</span><span class="token operator">=</span><span class="token string">"1111http://localhost:3000/"</span></pre></td></tr></table></figure><p><strong> <code>.env.production</code> </strong></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token constant">VUE_APP_ENV</span><span class="token operator">=</span><span class="token string">"dev"</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token constant">VUE_APP_BASE_API</span><span class="token operator">=</span><span class="token string">"2222http://localhost:4000/"</span></pre></td></tr></table></figure><p>于是在使用的页面中直接使用即可，打印出来就可以看到</p>
<p><strong>对应环境便会使用上对应 ip</strong></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_BASE_API</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>于是拼接 url 就可以，请求 url 为：</p>
<p><code>process.env.VUE_APP_BASE_API+&quot;/api&quot;</code></p>
<p><em>这样便实现开发联调和打包的问题</em></p>
<p><strong>问题 2</strong></p>
<p>vue-cli 的 url 带 #/ 问题</p>
<p>是因为在哈希模式下：</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> router<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token literal-property property">mode</span><span class="token operator">:</span><span class="token string">"hash"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">base</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    routes</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>打包时候将 <code>mode:hash</code>  改为 <code>mode:history</code>  即可</p>
<p><strong>但是要提醒后台进行 url 重定向</strong></p>
<p><em>不过开发模式下改了就看不到页面 ，所以开发时候要是哈希模式</em></p>
<p><strong>问题 3</strong></p>
<p><strong>还有打包时候 publicPath 要是相对路径./</strong></p>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue打包</tag>
        <tag>.env.production</tag>
        <tag>.env.development</tag>
      </tags>
  </entry>
  <entry>
    <title>vue生命周期</title>
    <url>/2021/05/13/vue%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
    <content><![CDATA[<p>Vue 所有的生命周期钩子自动绑定在 this 上下文到实例中，因此你可以访问数据，对属性和方法进行运算。这意味着你不能使用箭头函数来定义一个生命周期方法。这是因为箭头函数绑定了父上下文，因此 this 与你期待的 Vue 实例不同。</p>
<p><strong>一、什么是生命周期？</strong><br />
Vue 中的生命周期是指：组件从创建到销毁的一个过程，在这过程中，我们在每个特定阶段会触发一些方法（这些方法具备一些功能），我们给这些方法起了名字叫做 (生命周期钩子函数 / 组件钩子)</p>
<p><strong>二、为什么要学习生命周期</strong><br />
我们需要在生命周期钩子中实现项目功能，那么我们必须要知道每一个钩子函数的具体用途。</p>
<p><strong>初始化阶段</strong></p>
<p>初始化阶段的 4 个钩子： beforeCreate、created、beforeMount、mounted</p>
<p><strong>运行中阶段</strong></p>
<p>运行中阶段有两个钩子：beforeUpdate、updated；<br />
运行中阶段触发条件是：<em><strong>数据更新</strong></em></p>
<p><strong>销毁阶段</strong><br />
销毁阶段也是有两个钩子：beforeDestroy、destroyed. 这两个钩子用法基本相同。<br />
这两个钩子用法：计时器的关闭 第三方实例的删除<br />
组件销毁需要触发条件：</p>
<p>1、可以通过组件外部定义开关控制组件的销毁<br />
 2、组件内部定义 $destroy () 的方法，通过调用该方法控制组件销毁。</p>
<h1 id="1-beforecreate"><a class="anchor" href="#1-beforecreate">#</a> 1、beforeCreate</h1>
<p>在实例初始化之后，数据观测和 event/watcher 时间配置之前被调用。</p>
<ul>
<li>1、组件创建前触发，目的是为组件的 生命周期和组件中的事件做准备；</li>
<li>2、没有获得数据，真实 dom 也没有渲染出来</li>
<li>3、在此阶段内可以进行数据请求，提供一次修改数据的机会</li>
<li>4、此阶段执行一次</li>
</ul>
<h1 id="2-created"><a class="anchor" href="#2-created">#</a> 2、created</h1>
<p>实例已经创建完成之后被调用。在这一步，实例已经完成以下的配置：数据观测，属性和方法的运算，watch/event 事件回调。然而，挂载阶段还没开始，$el 属性目前不可见。</p>
<ul>
<li>1、组件创建结束</li>
<li>2、数据可以拿到了</li>
<li>3、可以进行数据请求，提供一次修改数据的机会</li>
<li>4、该过程执行一次</li>
</ul>
<h1 id="3-beforemount"><a class="anchor" href="#3-beforemount">#</a> 3、beforeMount</h1>
<p>在挂载开始之前被调用：相关的 render 函数首次被调用。<br />
该钩子在服务器端渲染期间不被调用。</p>
<p>1、组件挂载前<br />
 2、该阶段任务：<br />
判断 el，判断 template；<br />
如果 el 没有，那么我们需要手动挂载，如果有，那麽判断 template；<br />
如果 template 有，那么进行 render 函数，如果 template 没有，那么通过 outHTML 手动书写模板；<br />
3、数据可以获得，但是真实 dom 还没有渲染<br />
 4、可以进行数据请求，也提供了一次数据修改的机会</p>
<h1 id="4-mounted"><a class="anchor" href="#4-mounted">#</a> 4、mounted</h1>
<p>el 被新创建的 vm.<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mi>l</mi><mtext>替换，并挂在到实例上去之后调用该钩子函数。如果</mtext><mi>r</mi><mi>o</mi><mi>o</mi><mi>t</mi><mtext>实例挂载了一个文档内元素，当</mtext><mi>m</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>d</mi><mtext>被调用时</mtext><mi>v</mi><mi>m</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">el替换，并挂在到实例上去之后调用该钩子函数。如果root实例挂载了一个文档内元素，当mounted被调用时vm.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord cjk_fallback">替</span><span class="mord cjk_fallback">换</span><span class="mord cjk_fallback">，</span><span class="mord cjk_fallback">并</span><span class="mord cjk_fallback">挂</span><span class="mord cjk_fallback">在</span><span class="mord cjk_fallback">到</span><span class="mord cjk_fallback">实</span><span class="mord cjk_fallback">例</span><span class="mord cjk_fallback">上</span><span class="mord cjk_fallback">去</span><span class="mord cjk_fallback">之</span><span class="mord cjk_fallback">后</span><span class="mord cjk_fallback">调</span><span class="mord cjk_fallback">用</span><span class="mord cjk_fallback">该</span><span class="mord cjk_fallback">钩</span><span class="mord cjk_fallback">子</span><span class="mord cjk_fallback">函</span><span class="mord cjk_fallback">数</span><span class="mord cjk_fallback">。</span><span class="mord cjk_fallback">如</span><span class="mord cjk_fallback">果</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">o</span><span class="mord mathnormal">o</span><span class="mord mathnormal">t</span><span class="mord cjk_fallback">实</span><span class="mord cjk_fallback">例</span><span class="mord cjk_fallback">挂</span><span class="mord cjk_fallback">载</span><span class="mord cjk_fallback">了</span><span class="mord cjk_fallback">一</span><span class="mord cjk_fallback">个</span><span class="mord cjk_fallback">文</span><span class="mord cjk_fallback">档</span><span class="mord cjk_fallback">内</span><span class="mord cjk_fallback">元</span><span class="mord cjk_fallback">素</span><span class="mord cjk_fallback">，</span><span class="mord cjk_fallback">当</span><span class="mord mathnormal">m</span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal">d</span><span class="mord cjk_fallback">被</span><span class="mord cjk_fallback">调</span><span class="mord cjk_fallback">用</span><span class="mord cjk_fallback">时</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">m</span><span class="mord">.</span></span></span></span>el 也在文档内。该钩子在服务端渲染期间不被调用。</p>
<ul>
<li>1、组件挂载结束</li>
<li>2、数据获得，真实 dom 也获得了</li>
<li>3、可以进行数据请求，也可以修改数据</li>
<li>4、执行一次</li>
<li>5、可以进行真实 dom 的操作了</li>
</ul>
<p>总结：数据请求我们一般写在 created 钩子中，第三方库的实例化我们一般写在 mounted 钩子中；</p>
<h1 id="5-beforeupdate"><a class="anchor" href="#5-beforeupdate">#</a> 5、beforeUpdate</h1>
<p>数据更新时调用，发生在虚拟 DOM 重新渲染和打补丁之前。<br />
　　你可以在这个钩子中进一步第更改状态，这不会触发附加的重渲染过程。<br />
　　该钩子在服务端渲染期间不被调用。</p>
<ul>
<li>更新前</li>
<li>重新渲染 VDOM , 然后通过 diff 算法比较两次 vdom, 生成 patch 补丁对象，还未渲染到页面</li>
<li>这个钩子函数更多的是内部进行一些操作</li>
<li>可以触发多次，只要数据更新就会触发</li>
</ul>
<h1 id="6-updated"><a class="anchor" href="#6-updated">#</a> 6、updated</h1>
<p>由于数据更改导致的虚拟 DOM 重新渲染和打补丁，在这之后会调用该钩子。<br />
　　当这个钩子被调用时，组件 DOM 已经更新，所以你现在可以执行依赖于 DOM 的操作。然而在大多数情况下，你应该避免在此期间更改状态，因为这可能会导致更新无限循环。<br />
　　该钩子在服务端渲染期间不被调用。</p>
<ul>
<li>数据更新结束</li>
<li>真实 dom 得到了，数据也得到了（ 更新后的 ）</li>
<li>可以用于动态数据获取（ 第三方库实例化 ）</li>
<li>可以触发多次，只要数据更新就会触发</li>
</ul>
<p></p>
<h1 id="7-activated"><a class="anchor" href="#7-activated">#</a> 7、activated</h1>
<p>keep-alive 组件激活时调用。<br />
　　该钩子在服务器端渲染期间不被调用。</p>
<h1 id="8-deactivated"><a class="anchor" href="#8-deactivated">#</a> 8、deactivated</h1>
<p>keep-alive 组件停用时调用。<br />
　　该钩子在服务端渲染期间不被调用。</p>
<h1 id="9-beforedestroy"><a class="anchor" href="#9-beforedestroy">#</a> 9、beforeDestroy</h1>
<p><strong>类似于 React 生命周期的 componentWillUnmount</strong></p>
<p>实例销毁之间调用。在这一步，实例仍然完全可用。<br />
　　该钩子在服务端渲染期间不被调用。</p>
<h1 id="10-destroyed"><a class="anchor" href="#10-destroyed">#</a> 10、destroyed</h1>
<p>Vue 实例销毁后调用。调用后，Vue 实例指示的所有东西都会解绑定，所有的事件监听器会被移除，所有的子实例也会被销毁。</p>
<h1 id="含有keep-alive-生命周期钩子"><a class="anchor" href="#含有keep-alive-生命周期钩子">#</a> 含有 keep-alive 生命周期钩子：</h1>
<p>在被 keep-alive 包含的组件 / 路由中，会多出两个生命周期的钩子: activated 与 deactivated。<br />
在 2.2.0 及其更高版本中，activated 和 deactivated 将会在 树内的所有嵌套组件中触发。</p>
<p>activated 在组件第一次渲染时会被调用，之后在每次缓存组件被激活时调用。</p>
<h2 id="activated调用时机"><a class="anchor" href="#activated调用时机">#</a> activated 调用时机：</h2>
<p>第一次进入缓存路由 / 组件，在 mounted 后面，beforeRouteEnter 守卫传给 next 的回调函数之前调用：</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre>beforeMount=> 如果你是从别的路由/组件进来(组件销毁destroyed/或离开缓存deactivated)=></pre></td></tr><tr><td data-num="2"></td><td><pre>mounted=> activated 进入缓存组件 => 执行 beforeRouteEnter回调</pre></td></tr></table></figure><p>因为组件被缓存了，再次进入缓存路由 / 组件时，不会触发这些钩子：</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre>// beforeCreate created beforeMount mounted 都不会触发。</pre></td></tr></table></figure><p>所以之后的调用时机是：</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre>组件销毁destroyed/或离开缓存deactivated => activated 进入当前缓存组件 </pre></td></tr><tr><td data-num="2"></td><td><pre>    => 执行 beforeRouteEnter回调</pre></td></tr><tr><td data-num="3"></td><td><pre>    // 组件缓存或销毁，嵌套组件的销毁和缓存也在这里触发</pre></td></tr></table></figure><p>deactivated：组件被停用 (离开路由) 时调用</p>
<p>使用了 keep-alive 就不会调用 beforeDestroy (组件销毁前钩子) 和 destroyed (组件销毁)，因为组件没被销毁，被缓存起来了。<br />
这个钩子可以看作 beforeDestroy 的替代，如果你缓存了组件，要在组件销毁的的时候做一些事情，你可以放在这个钩子里。<br />
如果你离开了路由，会依次触发：</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre>组件内的离开当前路由钩子beforeRouteLeave =>  路由前置守卫 beforeEach =></pre></td></tr><tr><td data-num="2"></td><td><pre> 全局后置钩子afterEach => deactivated 离开缓存组件 => activated 进入缓存组件(如果你进入的也是缓存路由)</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre> // 如果离开的组件没有缓存的话 beforeDestroy会替换deactivated </pre></td></tr><tr><td data-num="5"></td><td><pre> // 如果进入的路由也没有缓存的话  全局后置钩子afterEach=>销毁 destroyed=> beforeCreate等</pre></td></tr></table></figure><p>关于生命周期钩子需要注意的内容：</p>
<p>ajax 请求最好放在 created 里面，因为此时已经可以访问 this 了，请求到数据就可以直接放在 data 里面。<br />
这里也碰到过几次，面试官问：ajax 请求应该放在哪个生命周期。</p>
<p>关于 dom 的操作要放在 mounted 里面，在 mounted 前面访问 dom 会是 undefined。</p>
<p>每次进入 / 离开组件都要做一些事情，用什么钩子：</p>
<p>（1）不缓存：<br />
进入的时候可以用 created 和 mounted 钩子，离开的时候用 beforeDestory 和 destroyed 钩子，beforeDestory 可以访问 this，destroyed 不可以访问 this。</p>
<p>（2）缓存了组件：<br />
缓存了组件之后，再次进入组件不会触发 beforeCreate、created 、beforeMount、 mounted，如果你想每次进入组件都做一些事情的话，你可以放在 activated 进入缓存组件的钩子中。<br />
同理：离开缓存组件的时候，beforeDestroy 和 destroyed 并不会触发，可以使用 deactivated 离开缓存组件的钩子来代替。</p>
<h1 id="触发钩子的完整顺序"><a class="anchor" href="#触发钩子的完整顺序">#</a> 触发钩子的完整顺序：</h1>
<p>将路由导航、keep-alive、和组件生命周期钩子结合起来的，触发顺序，假设是从 a 组件离开，第一次进入 b 组件：</p>
<p>1- beforeRouteLeave: 路由组件的组件离开路由前钩子，可取消路由离开。</p>
<p>2- beforeEach: 路由全局前置守卫，可用于登录验证、全局路由 loading 等。</p>
<p>3- beforeEnter: 路由独享守卫</p>
<p>4- beforeRouteEnter: 路由组件的组件进入路由前钩子。</p>
<p>5- beforeResolve: 路由全局解析守卫</p>
<p>6- afterEach: 路由全局后置钩子</p>
<p>7- beforeCreate: 组件生命周期，不能访问 this。</p>
<p>8- created: 组件生命周期，可以访问 this，不能访问 dom。</p>
<p>9- beforeMount: 组件生命周期</p>
<p>10- deactivated: 离开缓存组件 a，或者触发 a 的 beforeDestroy 和 destroyed 组件销毁钩子。</p>
<p>11- mounted: 访问 / 操作 dom。</p>
<p>12- activated: 进入缓存组件，进入 a 的嵌套子组件 (如果有的话)。</p>
<p>13- 执行 beforeRouteEnter 回调函数 next。</p>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>生命周期</tag>
      </tags>
  </entry>
  <entry>
    <title>vue退出组件封装</title>
    <url>/2021/05/12/vue%E9%80%80%E5%87%BA%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85/</url>
    <content><![CDATA[<p>quit.vue 退出登录组件单独封装</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token comment">&lt;!-- 退出弹窗 --></span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-dialog</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parentCenterDialogVisible<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>提示<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>305px<span class="token punctuation">"</span></span> <span class="token attr-name">center</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>	   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span> 确认退出？<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>	   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#footer</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>	     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dialog-footer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>	       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Visible= false<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">margin-right</span><span class="token punctuation">:</span>10px</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>取消<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>	       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>quit()<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>	         <span class="token punctuation">></span></span>确定<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>	     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>	   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>	 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-dialog</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre> </pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="16"></td><td><pre>	</pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>		<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'Quit'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>			<span class="token literal-property property">parentCenterDialogVisible</span><span class="token operator">:</span>String  <span class="token comment">// 获取父组件传来的值</span></pre></td></tr><tr><td data-num="21"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre>		<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>			<span class="token keyword">return</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>				<span class="token literal-property property">Visible</span><span class="token operator">:</span><span class="token boolean">true</span></pre></td></tr><tr><td data-num="25"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="27"></td><td><pre>		<span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>			<span class="token comment">// 退出登录</span></pre></td></tr><tr><td data-num="29"></td><td><pre>			<span class="token keyword">async</span> <span class="token function">quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>				<span class="token keyword">this</span><span class="token punctuation">.</span>Visible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">// 弹窗退出</span></pre></td></tr><tr><td data-num="31"></td><td><pre>				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">"pClose"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 触发父组件 pClose 事件，传至 false！！！</span></pre></td></tr><tr><td data-num="32"></td><td><pre>				<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>loginState <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>				<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>token <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>				<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>username <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>				localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>				localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>				localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"loginState"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>				<span class="token comment">// 回到登录页</span></pre></td></tr><tr><td data-num="39"></td><td><pre>				<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>					<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'Login'</span></pre></td></tr><tr><td data-num="41"></td><td><pre>				<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="42"></td><td><pre>			<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="43"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="46"></td><td><pre> </pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="48"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>父组件使用传值 和 接受子组件的值（接收值使用事件触发）</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Quit</span> <span class="token attr-name">:parentCenterDialogVisible</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>centerDialogVisible<span class="token punctuation">"</span></span> <span class="token attr-name">@pClose</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>closeDialog($event)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> </pre></td></tr><tr><td data-num="2"></td><td><pre> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Quit</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">import</span> Quit <span class="token keyword">from</span> <span class="token string">'@/components/quit.vue'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>   <span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>			Quit</pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>   <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>       <span class="token keyword">return</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token literal-property property">centerDialogVisible</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>     <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre> <span class="token comment">// 方法 methods 中：</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token comment">// 子组件 this.$emit 触发事件以此改变父组件</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token function">closeDialog</span><span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"父组件接收子组件传的值"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>centerDialogVisible<span class="token operator">=</span>msg<span class="token punctuation">;</span>  <span class="token comment">// 接受子组件传过来的值</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p><strong>成功封装！！！</strong></p>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>组件封装</tag>
      </tags>
  </entry>
  <entry>
    <title>vue项目中使用登录拦截</title>
    <url>/2021/04/26/vue%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8%E7%99%BB%E5%BD%95%E6%8B%A6%E6%88%AA/</url>
    <content><![CDATA[<h1 id="一-路由拦截"><a class="anchor" href="#一-路由拦截">#</a> 一、路由拦截</h1>
<p><strong>如果开发的是后台管理项目，希望必须登录才能访问其他页面的话，就用下面的这种方式进行拦截</strong></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> Router <span class="token keyword">from</span> <span class="token string">'vue-router'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'@/components/Home/home'</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> Login <span class="token keyword">from</span> <span class="token string">'@/components/Login/login'</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Router<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">const</span> router <span class="token operator">=</span>  <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'history'</span><span class="token punctuation">,</span>   <span class="token comment">// 去除路由中的 # 号</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'login'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token literal-property property">component</span><span class="token operator">:</span> Login</pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token literal-property property">component</span><span class="token operator">:</span> Home</pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token comment">// 导航守卫</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token comment">// 参数 1 : to 目标路由对象</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token comment">// 参数 2 : from 来源路由对象</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment">// 参数 3 : next () 下一步</span></pre></td></tr><tr><td data-num="28"></td><td><pre>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>  <span class="token comment">// 1. 判断是不是登录页面</span></pre></td></tr><tr><td data-num="30"></td><td><pre>  <span class="token comment">// 是登录页面</span></pre></td></tr><tr><td data-num="31"></td><td><pre>  <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>path <span class="token operator">===</span> <span class="token string">'/login'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="33"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token comment">// 不是登录页面</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token comment">// 2. 判断 是否登录过</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token keyword">let</span> token <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    token <span class="token operator">?</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="38"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> router</pre></td></tr></table></figure><p><strong>如果开发的不是后台管理项目，并希望可以看到某些不用登录就可以访问的页面，就用这种方式进行拦截</strong></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> Router <span class="token keyword">from</span> <span class="token string">'vue-router'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'@/components/Home/home'</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> Cart <span class="token keyword">from</span> <span class="token string">'@/components/Cart/cart'</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> Login <span class="token keyword">from</span> <span class="token string">'@/components/Login/login'</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Router<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">const</span> router <span class="token operator">=</span>  <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'history'</span><span class="token punctuation">,</span>   <span class="token comment">// 去除路由中的 # 号</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  	 <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token literal-property property">component</span><span class="token operator">:</span> Home</pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/cart'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'cart'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>      	<span class="token literal-property property">requireAuth</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">// 添加该字段，表示进入这个路由是需要登录的</span></pre></td></tr><tr><td data-num="22"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="23"></td><td><pre>      <span class="token literal-property property">component</span><span class="token operator">:</span> Cart</pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="27"></td><td><pre>      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'login'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="28"></td><td><pre>      <span class="token literal-property property">component</span><span class="token operator">:</span> Login</pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>  <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="32"></td><td><pre></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token comment">// 导航守卫</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token comment">// 参数 1 : to 目标路由对象</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token comment">// 参数 2 : from 来源路由对象</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token comment">// 参数 3 : next () 下一步</span></pre></td></tr><tr><td data-num="37"></td><td><pre>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>	<span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>requireAuth<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token comment">// 判断该路由是否需要登录权限</span></pre></td></tr><tr><td data-num="39"></td><td><pre>	 	<span class="token keyword">let</span> token <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="40"></td><td><pre>	    <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>              <span class="token comment">// 通过 localStorage.getItem () 获取当前的 token 是否存在</span></pre></td></tr><tr><td data-num="41"></td><td><pre>	        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="42"></td><td><pre>	    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>	    <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>	        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>	            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="46"></td><td><pre>	            <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>	            	<span class="token literal-property property">redirect</span><span class="token operator">:</span> to<span class="token punctuation">.</span>fullPath    <span class="token comment">// 将跳转的路由 path 作为参数，登录成功后跳转到该路由</span></pre></td></tr><tr><td data-num="48"></td><td><pre>	            <span class="token punctuation">&#125;</span>  </pre></td></tr><tr><td data-num="49"></td><td><pre>	        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="50"></td><td><pre>	    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>	<span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>	    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="54"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="56"></td><td><pre></pre></td></tr><tr><td data-num="57"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> router</pre></td></tr></table></figure><p>当一个导航触发时，全局前置守卫按照创建顺序调用。守卫是异步解析执行，此时导航在所有守卫 resolve 完之前一直处于 等待中。</p>
<p>每个守卫方法接收三个参数：</p>
<p><code>to：</code>  Route    ——&gt;   即将要进入的目标 路由对象<br />
 <code>from：</code>  Route    ——&gt;   当前导航正要离开的路由<br />
 <code>next：</code>  Function    ——&gt;   一定要调用该方法来 resolve 这个钩子。执行效果依赖 next 方法的调用参数。<br />
     <code>next ()：</code>  进行管道中的下一个钩子。如果全部钩子执行完了，则导航的状态就是 confirmed (确认的)。<br />
    <code> next (false)：</code>  中断当前的导航。如果浏览器的 URL 改变了 (可能是用户手动或者浏览器后退按钮)，那么 URL 地址会重置到 from 路由对应的地址。<br />
    <code> next (’/’) </code> 或者  <code>next (&#123; path: ‘/’ &#125;)：</code>  跳转到一个不同的地址。当前的导航被中断，然后进行一个新的导航。你可以向 next 传递任意位置对象，且允许设置诸如 replace: true、name: ‘home’ 之类的选项以及任何用在 router-link 的 to prop 或 router.push 中的选项。<br />
     <code>next (error)：</code>  (2.4.0+) 如果传入 next 的参数是一个 Error 实例，则导航会被终止且该错误会被传递给  <code>router.onError()</code>  注册过的回调。</p>
<p>确保要调用  <code>next </code> 方法，否则钩子就不会被 resolved。</p>
<h1 id="二-拦截器"><a class="anchor" href="#二-拦截器">#</a> 二、拦截器</h1>
<p>在 src 目录下新建一个 http 目录，在该目录下新建 <code>http.js</code>  文件</p>
<p>在  <code>http.js </code> 文件里写上如下代码</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./../router'</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">//http request 拦截器</span></pre></td></tr><tr><td data-num="5"></td><td><pre>axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      config<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>Authorization <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">return</span> config</pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">//http response 拦截器</span></pre></td></tr><tr><td data-num="18"></td><td><pre>axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">return</span> response</pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>      <span class="token keyword">switch</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token keyword">case</span> <span class="token number">401</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="26"></td><td><pre>          <span class="token comment">// 401 清除 token 信息并跳转到登录页面</span></pre></td></tr><tr><td data-num="27"></td><td><pre>          localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span>   <span class="token comment">//  清除本地的 token</span></pre></td></tr><tr><td data-num="28"></td><td><pre>          <span class="token comment">// 只有在当前路由不是登录页面才跳转</span></pre></td></tr><tr><td data-num="29"></td><td><pre>          router<span class="token punctuation">.</span>currentRoute<span class="token punctuation">.</span>path <span class="token operator">!==</span> <span class="token string">'/login'</span> <span class="token operator">&amp;&amp;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>          router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>              <span class="token literal-property property">redirect</span><span class="token operator">:</span> router<span class="token punctuation">.</span>currentRoute<span class="token punctuation">.</span>path</pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="36"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token comment">// console.log(JSON.stringify(error))</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token comment">// console : Error: Request failed with status code 402</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="41"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> axios</pre></td></tr></table></figure><p>在 main.js 文件里引入 http.js 文件</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'./http/http'</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 将 axios 挂载到 prototype 上，在组件中可以直接使用 this.axios 访问</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>axios <span class="token operator">=</span> axios</pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">/* eslint-disable no-new */</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  router<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> App <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'&lt;App/>'</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>在组件里使用</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">this</span><span class="token punctuation">.</span>axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>路由守卫</tag>
      </tags>
  </entry>
  <entry>
    <title>中介者模式</title>
    <url>/2021/07/10/%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<h2 id="前言"><a class="anchor" href="#前言">#</a> 前言</h2>
<p>本文聊的是中介者模式，参考自曾探的《JavaScript 设计模式与开发实践》，相当于个人读书笔记。</p>
<h2 id="定义"><a class="anchor" href="#定义">#</a> 定义</h2>
<blockquote>
<p>中介者模式的定义：用一个中介对象来封装一系列的对象交互，中介者使各对象不需要显式地相互引用，从而使其耦合松散，而且可以独立地改变它们之间的交互。</p>
</blockquote>
<p>中介者模式使网状的多对多关系变成相对简单的一对多关系。</p>
<h2 id="例子-购买商品"><a class="anchor" href="#例子-购买商品">#</a> 例子 - 购买商品</h2>
<p>这个例子的内容是：编写一个手机购买的页面，在购买流程中选择手机的颜色以及输入购买的数量，有两个区域显示选择的颜色和输入的数量，同时还有一个按钮用来提示信息。</p>
<p>以下是 html 代码：</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  选择颜色：</pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>colorSelect<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>请选择<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>red<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>红色<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>blue<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>蓝色<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>  购买的数量：</pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>numberInput<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>  选择的颜色：</pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>colorInfo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>  输入的数量：</pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>numberInfo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nextBtn<span class="token punctuation">"</span></span> <span class="token attr-name">disabled</span><span class="token punctuation">></span></span>请选择手机颜色和购买数量<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>以下是 js 代码：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> colorSelect <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"colorSelect"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> numberInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"numberInput"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> colorInfo <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"colorInfo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> numberInfo <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"numberInfo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> nextBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"nextBtn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> goods <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token literal-property property">red</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token literal-property property">blue</span><span class="token operator">:</span> <span class="token number">6</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>colorSelect<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"change"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token keyword">const</span> color <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token keyword">const</span> number <span class="token operator">=</span> numberInput<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token keyword">const</span> stock <span class="token operator">=</span> goods<span class="token punctuation">[</span>color<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  colorInfo<span class="token punctuation">.</span>innerText <span class="token operator">=</span> color<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>color<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token comment">//select 未选择时</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    nextBtn<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    nextBtn<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"请选择手机颜色"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span>number <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> number <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    nextBtn<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    nextBtn<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"请输入正确的购买数量"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>number <span class="token operator">></span> stock<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    nextBtn<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    nextBtn<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"库存不足"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre>  nextBtn<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>  nextBtn<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"放入购物车"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre></pre></td></tr><tr><td data-num="40"></td><td><pre>numberInput<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>  <span class="token keyword">const</span> color <span class="token operator">=</span> colorSelect<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>  <span class="token keyword">const</span> number <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>  <span class="token keyword">const</span> stock <span class="token operator">=</span> goods<span class="token punctuation">[</span>color<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>  numberInfo<span class="token punctuation">.</span>innerText <span class="token operator">=</span> number<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>color<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    nextBtn<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    nextBtn<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"请选择手机颜色"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="50"></td><td><pre></pre></td></tr><tr><td data-num="51"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span>number <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> number <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>    nextBtn<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>    nextBtn<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"请输入正确的购买数量"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>    <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="56"></td><td><pre></pre></td></tr><tr><td data-num="57"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>number <span class="token operator">></span> stock<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>    nextBtn<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>    nextBtn<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"库存不足"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>    <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="62"></td><td><pre></pre></td></tr><tr><td data-num="63"></td><td><pre>  nextBtn<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>  nextBtn<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"放入购物车"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>实现的基本思路是：在选择颜色或者输入购买数量时，获取其他区域的值来判断按钮该显示什么信息。判断思路如下：</p>
<ol>
<li>手机颜色是否已选，如未选则按钮显示<strong>请选择手机颜色</strong></li>
<li>手机数量输入框是否输入正整数，如输入错误按钮显示<strong>请输入正确的购买数量</strong></li>
<li>接下来判断手机库存是否充足，若不充足按钮显示<strong>库存不足</strong></li>
<li>如果前面条件都不满足，那么按钮显示<strong>放入购物车</strong></li>
</ol>
<h3 id="新需求"><a class="anchor" href="#新需求">#</a> 新需求</h3>
<p>现在有了新需求，客户不仅需要选择颜色和输入数量，同时还需要选择内存。</p>
<p>以下是 html 代码：</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  选择颜色：</pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>colorSelect<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>请选择<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>red<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>红色<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>blue<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>蓝色<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>  选择内存：</pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>memorySelect<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>请选择<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>64G<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>64G<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>128G<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>128G<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre>  购买的数量：</pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>numberInput<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="16"></td><td><pre>  选择的颜色：</pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>colorInfo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="18"></td><td><pre>  选择的内存：</pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>memoryInfo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="20"></td><td><pre>  输入的数量：</pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>numberInfo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nextBtn<span class="token punctuation">"</span></span> <span class="token attr-name">disabled</span><span class="token punctuation">></span></span>请选择手机颜色和购买数量<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>以下是 js 代码：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> colorSelect <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"colorSelect"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> memorySelect <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"memorySelect"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> numberInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"numberInput"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> colorInfo <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"colorInfo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> numberInfo <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"numberInfo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> nextBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"nextBtn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">const</span> goods <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token string-property property">"red|128G"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token string-property property">"red|64G"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token string-property property">"blue|128G"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token string-property property">"blue|64G"</span><span class="token operator">:</span> <span class="token number">6</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>colorSelect<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"change"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token keyword">const</span> color <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token keyword">const</span> memory <span class="token operator">=</span> memorySelect<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token keyword">const</span> number <span class="token operator">=</span> numberInput<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token keyword">const</span> stock <span class="token operator">=</span> goods<span class="token punctuation">[</span>color <span class="token operator">+</span> <span class="token string">"|"</span> <span class="token operator">+</span> memory<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  colorInfo<span class="token punctuation">.</span>innerText <span class="token operator">=</span> color<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>color<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token comment">//select 未选择时</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    nextBtn<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    nextBtn<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"请选择手机颜色"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>memory<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    nextBtn<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    nextBtn<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"请选择手机内存大小"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span>number <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> number <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    nextBtn<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    nextBtn<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"请输入正确的购买数量"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre></pre></td></tr><tr><td data-num="40"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>number <span class="token operator">></span> stock<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    nextBtn<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    nextBtn<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"库存不足"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre></pre></td></tr><tr><td data-num="46"></td><td><pre>  nextBtn<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>  nextBtn<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"放入购物车"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre></pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token comment">// 增加 memorySelect 事件</span></pre></td></tr><tr><td data-num="51"></td><td><pre>memorySelect<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"change"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token comment">// 修改 numberInput 事件</span></pre></td></tr><tr><td data-num="53"></td><td><pre>numberInput<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>实现的基本思路是：在原先的基础上新增一个是否选择内存的判断条件，同时还需要增加选择内存这个选择事件框改变时的状态代码。</p>
<p>从这中间我们发现新增了大量的代码，同时如果再新增条件时，那么在每个事件中新增代码，这大大增加了代码量，因此需要更好的方式书写代码。</p>
<h3 id="引入中介者"><a class="anchor" href="#引入中介者">#</a> 引入中介者</h3>
<p>通过增加一个中介者来使所有的节点对象相互通信，从原先的多对多，变成现在的一对多</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> goods <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token string-property property">"red|128G"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token string-property property">"red|64G"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token string-property property">"blue|128G"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token string-property property">"blue|64G"</span><span class="token operator">:</span> <span class="token number">6</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">const</span> mediator <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token keyword">const</span> colorSelect <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"colorSelect"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token keyword">const</span> memorySelect <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"memorySelect"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token keyword">const</span> numberInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"numberInput"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token keyword">const</span> colorInfo <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"colorInfo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token keyword">const</span> numberInfo <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"numberInfo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token keyword">const</span> nextBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"nextBtn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token function">changed</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token keyword">const</span> color <span class="token operator">=</span> colorSelect<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token keyword">const</span> memory <span class="token operator">=</span> memorySelect<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token keyword">const</span> number <span class="token operator">=</span> numberInput<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token keyword">const</span> stock <span class="token operator">=</span> goods<span class="token punctuation">[</span>color <span class="token operator">+</span> <span class="token string">"|"</span> <span class="token operator">+</span> memory<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> colorSelect<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        colorInfo<span class="token punctuation">.</span>innerText <span class="token operator">=</span> color<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> memorySelect<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        memoryInfo<span class="token punctuation">.</span>innerText <span class="token operator">=</span> memory<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> numberInput<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        numberInfo<span class="token punctuation">.</span>innerText <span class="token operator">=</span> number<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>color<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token comment">//select 未选择时</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        nextBtn<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        nextBtn<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"请选择手机颜色"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>memory<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        nextBtn<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        nextBtn<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"请选择手机内存大小"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span>number <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> number <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        nextBtn<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        nextBtn<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"请输入正确的购买数量"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>        <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre></pre></td></tr><tr><td data-num="47"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>number <span class="token operator">></span> stock<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>        nextBtn<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>        nextBtn<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"库存不足"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>        <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="52"></td><td><pre></pre></td></tr><tr><td data-num="53"></td><td><pre>      nextBtn<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>      nextBtn<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"放入购物车"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre></pre></td></tr><tr><td data-num="59"></td><td><pre>colorSelect<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"change"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>  mediator<span class="token punctuation">.</span><span class="token function">changed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="62"></td><td><pre></pre></td></tr><tr><td data-num="63"></td><td><pre>memorySelect<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"change"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>  mediator<span class="token punctuation">.</span><span class="token function">changed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre></pre></td></tr><tr><td data-num="67"></td><td><pre>numberInput<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>  mediator<span class="token punctuation">.</span><span class="token function">changed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="69"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>实现的基本思路是利用闭包，同时各个事件把自身当成参数传入到中介者中，然后所有改变的事情都在中介者中定义，这样就避免了因新增需求而改变每个事件内的代码。</p>
<h2 id="总结"><a class="anchor" href="#总结">#</a> 总结</h2>
<p>优点：中介者模式使各个对象之间得以解耦，以中介者和对象之间的一对多关系取代了对象之间的网状多对多关系，各个对象只需要关注自身功能的实现，对象之间的交互关系交给了中介者对象来实现和维护。</p>
<p>缺点：系统中增加一个中介者对象，因为对象之间交互的复杂性，转移成了中介者对象的复杂性，使得中介者过于庞大，难以维护。</p>
<p>因此应该根据实际需要判断是否引入中介者。</p>
]]></content>
      <categories>
        <category>设计模式</category>
      </categories>
      <tags>
        <tag>中介者模式</tag>
        <tag>设计模式</tag>
      </tags>
  </entry>
  <entry>
    <title>代理模式</title>
    <url>/2021/07/08/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<h2 id="前言"><a class="anchor" href="#前言">#</a> 前言</h2>
<p>本文聊的是代理模式，参考自曾探的《JavaScript 设计模式与开发实践》，相当于个人读书笔记。</p>
<h2 id="作用"><a class="anchor" href="#作用">#</a> 作用</h2>
<p>为一个对象提供一个代用品或占位符，以便控制对它的访问。代理模式解决的问题是在直接访问对象可能带来的问题通过增加中间层来使实现对某一对象的访问。</p>
<p>现实中的例子例如经纪人这个角色</p>
<h2 id="使用场景"><a class="anchor" href="#使用场景">#</a> 使用场景</h2>
<p>根据职责划分为以下使用场景：</p>
<ol>
<li>保护代理 (Protect or Access)- 对某些请求进行筛选，用于对象应该有不同访问权限的情况</li>
<li>虚拟代理 - 把一些开销很大的对象延迟到需要它的时候去创建</li>
<li>缓存 (Cache) 代理 - 为一些开销大的运算结果提供暂时的存储</li>
<li>防火墙 (Firewall) 代理 - 控制网络资源的访问，保护主机</li>
<li>远程代理 - 为一个对象在不同地址空间提供局部代表</li>
<li>智能引用代理 (Smart Reference)- 取代了简单的指针，它在访问对象时执行一些附加操作</li>
<li>写时复制代理 (Copy-on-Write)- 通过用于复制一个庞大对象的情况</li>
<li>同步化 (Synchronization) 代理</li>
</ol>
<h2 id="虚拟代理实现图片预加载"><a class="anchor" href="#虚拟代理实现图片预加载">#</a> 虚拟代理实现图片预加载</h2>
<p>通过代理对象先加载小的占位 loading 图，然后需要加载图片加载完之后替换 loading 图</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> myImage <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">const</span> imageNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>imageNode<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token function">setSrc</span><span class="token punctuation">(</span><span class="token parameter">src</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      imageNode<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">const</span> proxyImage <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    myImage<span class="token punctuation">.</span><span class="token function">setSrc</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token function">setSrc</span><span class="token punctuation">(</span><span class="token parameter">src</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      myImage<span class="token punctuation">.</span><span class="token function">setSrc</span><span class="token punctuation">(</span><span class="token string">"./loading.gif"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用小的 loading 先占位，避免白屏</span></pre></td></tr><tr><td data-num="21"></td><td><pre>      img<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>proxyImage<span class="token punctuation">.</span><span class="token function">setSrc</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="27"></td><td><pre>  <span class="token string">"https://zjgyb.github.io/JavaScript设计模式之策略模式/bg.jpeg"</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>防抖与节流利用的也是虚拟代理</p>
<h2 id="缓存代理实现乘积缓存"><a class="anchor" href="#缓存代理实现乘积缓存">#</a> 缓存代理实现乘积缓存</h2>
<p>当第一次运算的时候调用对象，然后把第一次运算的结果保存下来</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">mult</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'计算开始'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    result <span class="token operator">*=</span> args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token keyword">return</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">const</span> proxyMult <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">let</span> key <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token keyword">return</span> cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">return</span> cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">mult</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="总结"><a class="anchor" href="#总结">#</a> 总结</h2>
<p>优点：职责清晰、高拓展性、智能化</p>
<p>缺点：需要额外的工作，实现可能比较复杂、增加程序的代码量</p>
<p>代理模式与适配器模式的区别：适配器模式主要改变所考虑对象的接口，而代理模式不能改变所代理类的接口</p>
<p>代理模式与装饰器模式的区别：装饰器模式为了增强功能，而代理模式为了加以控制</p>
<h2 id="参考文章"><a class="anchor" href="#参考文章">#</a> 参考文章</h2>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS9kZXNpZ24tcGF0dGVybi9wcm94eS1wYXR0ZXJuLmh0bWw=">菜鸟教程</span></li>
</ul>
]]></content>
      <categories>
        <category>设计模式</category>
      </categories>
      <tags>
        <tag>设计模式</tag>
        <tag>代理模式</tag>
      </tags>
  </entry>
  <entry>
    <title>代码压缩</title>
    <url>/2021/02/16/%E4%BB%A3%E7%A0%81%E5%8E%8B%E7%BC%A9/</url>
    <content><![CDATA[<h2 id="通过node实现代码压缩"><a class="anchor" href="#通过node实现代码压缩">#</a> 通过 node 实现代码压缩</h2>
<ol>
<li><span class="exturl" data-url="aHR0cHM6Ly9ub2RlanMub3JnL2VuLw==">安装 nodejs (opens new window)</span></li>
<li>接下来使用 <code>npm init -y</code>  生成一个默认的 package.json 文件</li>
<li><code>npm install uglify-es</code>  下载包</li>
<li>最后使用 <code>npx uglifyjs -c -m -o finename.min.js -- filename.js</code></li>
</ol>
]]></content>
      <categories>
        <category>node</category>
      </categories>
      <tags>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title>前端工程化</title>
    <url>/2021/10/04/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/</url>
    <content><![CDATA[<h1 id="前端工程化"><a class="anchor" href="#前端工程化">#</a> 前端工程化</h1>
<p>实际的前端开发</p>
<ul>
<li>** 模块化 ** （js 的模块化 、css 模块化、资源的模块化）</li>
<li><strong>组件化</strong> （复用现有的 UI 结构、样式、行为）</li>
<li><strong>规范化</strong>（目录结构的划分、编码规范化、接口规范化、文档规范化、GIT 分支管理）</li>
<li><strong>自动化</strong> （自动化搭建、自动部署、自动化测试）</li>
</ul>
<p><strong>理解</strong></p>
<p><strong>前端工程化开发</strong>指的是：在企业级的前端开发项目开发中，把前端开发作需要的工具、技术、流程、经验等进行规范标准化。</p>
<p><strong>工具:</strong></p>
<p>早期 grunt      gulp</p>
<p><strong>目前</strong> webpack  parcel (第三方工具)</p>
]]></content>
      <tags>
        <tag>-前端工程化</tag>
      </tags>
  </entry>
  <entry>
    <title>单例模式</title>
    <url>/2021/07/02/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<h2 id="解释"><a class="anchor" href="#解释">#</a> 解释</h2>
<h3 id="什么是单例模式"><a class="anchor" href="#什么是单例模式">#</a> 什么是单例模式？</h3>
<p>单例就是保证一个类只有<strong>一个</strong>实例，实现的方法是判断实例是否存在与否，如果存在直接返回，如果不存在就创建了再返回，这就确保了一个类只有一个实例对象。</p>
<p>在《JavaScript 设计模式与开发实践》中单例模式的定义是：</p>
<ul>
<li>保证一个类仅有一个实例，并提供一个访问它的全局访问点</li>
</ul>
<h3 id="模块作用"><a class="anchor" href="#模块作用">#</a> 模块作用</h3>
<ol>
<li>模块间通信</li>
<li>系统中某个类的对象只能存在一个</li>
<li>保护自己的属性和方法</li>
</ol>
<h2 id="实现一个单例模式"><a class="anchor" href="#实现一个单例模式">#</a> 实现一个单例模式</h2>
<p>下面例子中 <code>instance</code>  就是实例变量， <code>getInstance</code>  方法是判断是否创建实例变量</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">static</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>instance<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>instance<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>Singleton<span class="token punctuation">.</span>instance <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">const</span> a <span class="token operator">=</span> Singleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"sven1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">const</span> b <span class="token operator">=</span> Singleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"sven2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">===</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></pre></td></tr></table></figure><h3 id="使用闭包的方式实现"><a class="anchor" href="#使用闭包的方式实现">#</a> 使用闭包的方式实现</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>Singleton<span class="token punctuation">.</span>getInstance <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token keyword">return</span> <span class="token parameter">name</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>instance<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">return</span> instance<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="透明的单例模式"><a class="anchor" href="#透明的单例模式">#</a> 透明的单例模式</h2>
<p>在上面的例子中，我们通过 <code>Singleton.getInstance()</code>  方法来获取单例类，这个类并不直观 (不透明性)，因此我们使用透明，以下是创建一个 div 节点</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> CreateDiv <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">const</span> <span class="token function-variable function">CreateDiv</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>instance<span class="token punctuation">)</span> <span class="token keyword">return</span> instance<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>html <span class="token operator">=</span> html<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span>instance <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token class-name">CreateDiv</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">let</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>html<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token keyword">return</span> CreateDiv<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateDiv</span><span class="token punctuation">(</span><span class="token string">"sven1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateDiv</span><span class="token punctuation">(</span><span class="token string">"sven2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">===</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="用代理实现单例模式"><a class="anchor" href="#用代理实现单例模式">#</a> 用代理实现单例模式</h3>
<p>在上面的例子中会感觉代码有些奇怪，同时代码生涩难懂，下面使用代理类来改善代码</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">CreateDiv</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>html <span class="token operator">=</span> html<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">let</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>html<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">const</span> ProxySingletonCreateDiv <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>instance<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateDiv</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">return</span> instance<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxySingletonCreateDiv</span><span class="token punctuation">(</span><span class="token string">"sven1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxySingletonCreateDiv</span><span class="token punctuation">(</span><span class="token string">"sven2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">===</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></pre></td></tr></table></figure><h2 id="javascript-中的单例模式"><a class="anchor" href="#javascript-中的单例模式">#</a> JavaScript 中的 “单例模式”</h2>
<ul>
<li>单例模式的核心是确保只有一个实例，并提供全局访问。全局变量不是单例模式，但在 JavaScript 开发中，我们经常会把全局变量当成单例来使用</li>
</ul>
<p>以下其实是全局变量，但它满足了创建单例模式的条件</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> home <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token string">"Chinese styles"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function">door</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token function">window</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">//...</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="惰性单例"><a class="anchor" href="#惰性单例">#</a> 惰性单例</h2>
<p>使用了惰性单例模式：在需要的时候创建单例，再次调用就使用第一次实例化后的实例对象</p>
<p>例如：点击登录按钮跳出弹窗就可以使用惰性单例模式</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loginBtn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">createLoginLayer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">let</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"Modal"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword">return</span> div<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">getSingle</span> <span class="token operator">=</span> <span class="token parameter">fn</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token keyword">let</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>arg</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">return</span> result <span class="token operator">||</span> <span class="token punctuation">(</span>result <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">const</span> createSingleLoginLayer <span class="token operator">=</span> <span class="token function">getSingle</span><span class="token punctuation">(</span>createLoginLayer<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"loginBtn"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token keyword">let</span> loginLayer <span class="token operator">=</span> <span class="token function">createSingleLoginLayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  loginLayer<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"block"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="在-vue-中的使用"><a class="anchor" href="#在-vue-中的使用">#</a> 在 Vue 中的使用</h2>
<h3 id="目录结构"><a class="anchor" href="#目录结构">#</a> 目录结构</h3>
<figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>|- src</pre></td></tr><tr><td data-num="2"></td><td><pre>|   |- components</pre></td></tr><tr><td data-num="3"></td><td><pre>|       |- dialog-container</pre></td></tr><tr><td data-num="4"></td><td><pre>|           |- dialog-container.vue</pre></td></tr><tr><td data-num="5"></td><td><pre>|           |- index.js</pre></td></tr><tr><td data-num="6"></td><td><pre>|   |- App.vue</pre></td></tr><tr><td data-num="7"></td><td><pre>|   |- main.js</pre></td></tr></table></figure><h3 id="具体实现"><a class="anchor" href="#具体实现">#</a> 具体实现</h3>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">&lt;!-- dialog-container.vue --></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list in lists<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list.id<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>del(list.id)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token comment"></span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token function">del</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token keyword">const</span> index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lists<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">ele</span> <span class="token operator">=></span> ele<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">!==</span> index<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>          <span class="token keyword">this</span><span class="token punctuation">.</span>lists<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>具体单例使用</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> Container <span class="token keyword">from</span> <span class="token string">"./dialog-container.vue"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>Container<span class="token punctuation">.</span>installSlot <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword">let</span> <span class="token punctuation">[</span>component<span class="token punctuation">,</span> lists<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> list</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> list <span class="token operator">===</span> <span class="token string">"object"</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> id <span class="token operator">===</span> <span class="token string">"string"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>component<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">const</span> container <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>Container<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        lists <span class="token operator">=</span> <span class="token punctuation">[</span>list<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        component <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">container</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>          <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>              lists</pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>        document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>component<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>$el<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        lists<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>  <span class="token function-variable function">install</span><span class="token operator">:</span> <span class="token parameter">Vue</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$dialog <span class="token operator">=</span> Container<span class="token punctuation">.</span>installSlot<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>配置及使用</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> Dialog <span class="token keyword">from</span> <span class="token string">"./components/dialog-container"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Dialog<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hi(<span class="token punctuation">'</span>content<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Hellos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"App"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token function">hi</span><span class="token punctuation">(</span><span class="token parameter">domId</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token keyword">const</span> id <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>          <span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>          <span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token comment">// 使用</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$dialog</span><span class="token punctuation">(</span>domId<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>          id<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="20"></td><td><pre>          <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The id is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>id<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="总结"><a class="anchor" href="#总结">#</a> 总结</h2>
<p>单例模式其他具体场景不是很清楚，希望以后能够看到其他用法，对于设计模式我也才刚开始看，继续努力。</p>
<h2 id="参考文章"><a class="anchor" href="#参考文章">#</a> 参考文章</h2>
<ul>
<li>《JavaScript 设计模式与开发实践》</li>
<li><span class="exturl" data-url="aHR0cDovL3d3dy5jb2RlY2VvLmNvbS9hcnRpY2xlL2phdmFzY3JpcHQtc2luZ2xlLWluc3RhbmNlLmh0bWw=">http://www.codeceo.com/article/javascript-single-instance.html(opens new window)</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9zb2xvamlhbmcuZ2l0aHViLmlvLzIwMTgvMDQvMzAvJUU1JThEJTk1JUU0JUJFJThCJUU2JUE4JUExJUU1JUJDJThGJUU1JTlDJUE4RGlhbG9nJUU3JUIxJUJCJUU3JUJCJTg0JUU0JUJCJUI2JUU0JUI4JUFEJUU3JTlBJTg0JUU0JUJEJUJGJUU3JTk0JUE4Lw==">Solo Jiang's blog(opens new window)</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zNDc1NDQ0Nw==">知乎 - 从 ES6 重新认识 JavaScript 设计模式 (一): 单例模式 (opens new window)</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1YN0dKNDg1cjIwQSZhbXA7bGlzdD1QTDlueGZxMXRsS0tuc2k2OEE2R2Jzdi1pcDhrUk5GSzctJmFtcDtpbmRleD0y">YouTube</span></li>
</ul>
]]></content>
      <categories>
        <category>设计模式</category>
      </categories>
      <tags>
        <tag>设计模式</tag>
        <tag>单例模式</tag>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>异步任务</title>
    <url>/2021/08/26/%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/</url>
    <content><![CDATA[<h1 id="异步任务"><a class="anchor" href="#异步任务">#</a> 异步任务</h1>
<p>Javascript 把异步任务又做了进一步的划分，异步任务分为两类，分别是：</p>
<p>宏任务、微任务</p>
<h2 id="宏任务"><a class="anchor" href="#宏任务">#</a> 宏任务</h2>
<ul>
<li>
<p>异步 ajax 请求</p>
</li>
<li>
<p>setTimeout、setInterval</p>
</li>
<li>
<p>文件操作</p>
</li>
<li>
<p>其它宏任务</p>
</li>
</ul>
<h2 id="微任务"><a class="anchor" href="#微任务">#</a> 微任务</h2>
<ul>
<li>Promise.then () .catch () 和 finally</li>
<li>process.nextTick</li>
<li>其它微任务</li>
</ul>
<h2 id="执行顺序"><a class="anchor" href="#执行顺序">#</a> 执行顺序</h2>
<p>每个宏任务执行完之后，都是会检查是否存在待执行的微任务</p>
<p>如果有，则执行所有微任务之后，再继续执行下一个任务</p>
<p><img data-src="../images/%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/1650288054890.png" alt="1650288054890" /></p>
<p>帮助理解场景</p>
<p><img data-src="../images/%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/1650288202536.png" alt="1650288202536" /></p>
<h1 id="测试1"><a class="anchor" href="#测试1">#</a> 测试 1</h1>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"4"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>正确答案： 2431</p>
<p>分析：</p>
<p>console.log (“2”) 处为同步任务</p>
<p>console.log (“4”) 处为同步任务</p>
<p>console.log (“3”) 处为微任务</p>
<p>console.log (“1”) 处为宏任务</p>
<h1 id="测试2"><a class="anchor" href="#测试2">#</a> 测试 2</h1>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"4"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"5"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    consle<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>     <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"9"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>正确答案 ：156234789</p>
]]></content>
      <tags>
        <tag>异步任务</tag>
        <tag>宏任务</tag>
        <tag>微任务</tag>
      </tags>
  </entry>
  <entry>
    <title>构造函数与原型</title>
    <url>/2020/10/10/%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%B8%8E%E5%8E%9F%E5%9E%8B/</url>
    <content><![CDATA[<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zh<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>构造函数和原型<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>	</pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">	</pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 在<span class="token constant">ES6</span>之前没有类的概念，对象不是通过类来创建，而是通过构造函数 <span class="token operator">--</span><span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>	</pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token comment">// 构造函数创建对象</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>		<span class="token comment">// 实例成员  构造函数通过 this 执行构造的成员  name age sing  只能通过实例化的对象访问 不能 Star.name 只能 ldh.name</span></pre></td></tr><tr><td data-num="17"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span>age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token comment">//this.sing=function ()&#123;   // 会为方法单独开辟内存空间，造成浪费内存，所以一般是放在原型对象 prototype 中</span></pre></td></tr><tr><td data-num="20"></td><td><pre>		<span class="token comment">// 	console.log (this.name+"会唱歌！他已经"+this.age+"岁了！");</span></pre></td></tr><tr><td data-num="21"></td><td><pre>		<span class="token comment">// &#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	</pre></td></tr><tr><td data-num="24"></td><td><pre>	</pre></td></tr><tr><td data-num="25"></td><td><pre>	</pre></td></tr><tr><td data-num="26"></td><td><pre>	<span class="token comment">// 构造函数问题  存在浪费内存问题</span></pre></td></tr><tr><td data-num="27"></td><td><pre>	</pre></td></tr><tr><td data-num="28"></td><td><pre>	<span class="token comment">// 构造函数原型 prototype 实现函数共享  共享的对象放在 prototype</span></pre></td></tr><tr><td data-num="29"></td><td><pre>	<span class="token comment">// 公共方法放在原型对象上，实现共享，不会再开辟空间</span></pre></td></tr><tr><td data-num="30"></td><td><pre>	<span class="token comment">// Star.prototype.dance=function()&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>	<span class="token comment">// 	console.log (this.name+"会跳舞！！");</span></pre></td></tr><tr><td data-num="32"></td><td><pre>	<span class="token comment">// &#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>	<span class="token comment">// Star.prototype.sing=function()&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>	<span class="token comment">// 	console.log (this.name+"会唱歌！！");</span></pre></td></tr><tr><td data-num="35"></td><td><pre>	<span class="token comment">// &#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>	<span class="token comment">// 上面简化写法，但是这个简化是替换，上面是追加方法</span></pre></td></tr><tr><td data-num="37"></td><td><pre>	</pre></td></tr><tr><td data-num="38"></td><td><pre>   <span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>	   <span class="token literal-property property">constructor</span><span class="token operator">:</span>Star<span class="token punctuation">,</span>   <span class="token comment">// 说明指向哪个构造函数，不可以省略</span></pre></td></tr><tr><td data-num="40"></td><td><pre>	   <span class="token function-variable function">sing</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>		 	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"会唱歌！！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>	   <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="43"></td><td><pre>	   <span class="token function-variable function">dance</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>		   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"会跳舞！！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>	   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>	</pre></td></tr><tr><td data-num="48"></td><td><pre>	<span class="token keyword">let</span> ldh<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">"刘德华"</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 创建一个空对象  this 再指向对象，执行构造函数的代码，添加属性和方法</span></pre></td></tr><tr><td data-num="49"></td><td><pre>	ldh<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">'----'</span><span class="token operator">+</span>ldh<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>	</pre></td></tr><tr><td data-num="52"></td><td><pre>	<span class="token comment">// 静态成员  实例成员</span></pre></td></tr><tr><td data-num="53"></td><td><pre>	</pre></td></tr><tr><td data-num="54"></td><td><pre>	<span class="token comment">// 静态成员在构造函数本身添加的成员</span></pre></td></tr><tr><td data-num="55"></td><td><pre>	Star<span class="token punctuation">.</span>sex<span class="token operator">=</span><span class="token string">'男'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>	</pre></td></tr><tr><td data-num="57"></td><td><pre>	<span class="token comment">// 只能通过构造函数访问</span></pre></td></tr><tr><td data-num="58"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Star<span class="token punctuation">.</span>sex<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 只能通过构造函数访问</span></pre></td></tr><tr><td data-num="59"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh<span class="token punctuation">.</span>sex<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 不可以这样访问！！</span></pre></td></tr><tr><td data-num="60"></td><td><pre>	</pre></td></tr><tr><td data-num="61"></td><td><pre>	<span class="token comment">// 实例成员 构造函数通过 this 执行构造的成员  name age sing  只能通过实例化的对象访问 不能 Star.name 只能 ldh.name</span></pre></td></tr><tr><td data-num="62"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Star<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 不可以这样访问！！</span></pre></td></tr><tr><td data-num="63"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 只能通过实例化的对象访问</span></pre></td></tr><tr><td data-num="64"></td><td><pre>	</pre></td></tr><tr><td data-num="65"></td><td><pre>	<span class="token keyword">let</span> zxy<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">"张学友"</span><span class="token punctuation">,</span><span class="token number">63</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>	zxy<span class="token punctuation">.</span><span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>	ldh<span class="token punctuation">.</span><span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"1.放在prototype原型对象上，实现原型共享，不会开辟新的内存空间地址都一样"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>zxy<span class="token punctuation">.</span>dance<span class="token operator">===</span>ldh<span class="token punctuation">.</span>dance<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"2.没有放在prototype原型对象上，开辟新的内存空间 地址不一样"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>zxy<span class="token punctuation">.</span>sing<span class="token operator">===</span>ldh<span class="token punctuation">.</span>sing<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="72"></td><td><pre>	<span class="token comment">// 原型是一个对象，所有的构造函数都默认有个原型对象 prototype  eg: Star 默认有 prototype</span></pre></td></tr><tr><td data-num="73"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>Star<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="74"></td><td><pre>    <span class="token comment">// 每个对象有一个属性__proto__指向构造函数的原型对象 prototype  也会写成 [[prototype]] 遍历两层</span></pre></td></tr><tr><td data-num="75"></td><td><pre>	   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="76"></td><td><pre>	   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>zxy<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="77"></td><td><pre>	   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"对象有一个属性—__proto__指向构造函数的原型对象prototype "</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="78"></td><td><pre>	   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh<span class="token punctuation">.</span>__proto__<span class="token operator">===</span><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="79"></td><td><pre>	   <span class="token comment">// 知识点！！！</span></pre></td></tr><tr><td data-num="80"></td><td><pre>	   <span class="token comment">// 方法查找规则</span></pre></td></tr><tr><td data-num="81"></td><td><pre>	   <span class="token comment">// 1. 先去看对象 ldh 是否有这个 sing 方法，有就执行</span></pre></td></tr><tr><td data-num="82"></td><td><pre>	   <span class="token comment">// 2. 没有和这个方法就去___proto__(对象的原型)，这个对象原型指向构造函数的原型对象</span></pre></td></tr><tr><td data-num="83"></td><td><pre>	   </pre></td></tr><tr><td data-num="84"></td><td><pre>	   </pre></td></tr><tr><td data-num="85"></td><td><pre>	   <span class="token comment">//constructor 构造函数  指明构造函数   告诉我们是哪个构造函数创建的</span></pre></td></tr><tr><td data-num="86"></td><td><pre>	   console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>ldh<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="87"></td><td><pre>	   console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="88"></td><td><pre>	   <span class="token comment">//console.log (ldh.__proto__.constructor);   // 指向构造函数 Star</span></pre></td></tr><tr><td data-num="89"></td><td><pre>	   <span class="token comment">//console.log (Star.prototype.constructor);   // 指向构造函数 Star</span></pre></td></tr><tr><td data-num="90"></td><td><pre>	   </pre></td></tr><tr><td data-num="91"></td><td><pre>	   </pre></td></tr><tr><td data-num="92"></td><td><pre>	   <span class="token comment">// 通过原型对象扩展方法 比如说数组</span></pre></td></tr><tr><td data-num="93"></td><td><pre>	   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="94"></td><td><pre>	   <span class="token comment">// 追加方法，只能采取。的形式</span></pre></td></tr><tr><td data-num="95"></td><td><pre>	   <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sum</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="96"></td><td><pre>		   <span class="token keyword">let</span> sum<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="97"></td><td><pre>		   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="98"></td><td><pre>			   sum<span class="token operator">=</span>sum<span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="99"></td><td><pre>		   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="100"></td><td><pre>		   <span class="token keyword">return</span> sum<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="101"></td><td><pre>	   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="102"></td><td><pre>	   <span class="token keyword">var</span> arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="103"></td><td><pre>	   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="104"></td><td><pre>	    <span class="token comment">//call 方法调用</span></pre></td></tr><tr><td data-num="105"></td><td><pre>		<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="106"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"继续加油"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="107"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"call可以改变this指向"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="108"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="109"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"call可以传参"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="110"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token operator">+</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="111"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="112"></td><td><pre>		<span class="token keyword">var</span> o<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="113"></td><td><pre>			<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'lhm'</span></pre></td></tr><tr><td data-num="114"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="115"></td><td><pre>		<span class="token comment">// 改变 this 指向</span></pre></td></tr><tr><td data-num="116"></td><td><pre>		<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="117"></td><td><pre>		</pre></td></tr><tr><td data-num="118"></td><td><pre>		<span class="token comment">// 构造函数继承，利用 call</span></pre></td></tr><tr><td data-num="119"></td><td><pre>		<span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="120"></td><td><pre>			<span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="121"></td><td><pre>			<span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span>age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="122"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="123"></td><td><pre>		</pre></td></tr><tr><td data-num="124"></td><td><pre>		<span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">money</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="125"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"赚大钱了！！！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="126"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="127"></td><td><pre>		</pre></td></tr><tr><td data-num="128"></td><td><pre>		<span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>score</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="129"></td><td><pre>			<span class="token function">Father</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 此时 this 为调用  继承父亲构造函数属性</span></pre></td></tr><tr><td data-num="130"></td><td><pre>			<span class="token keyword">this</span><span class="token punctuation">.</span>score<span class="token operator">=</span>score<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="131"></td><td><pre>			</pre></td></tr><tr><td data-num="132"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="133"></td><td><pre>		<span class="token comment">// 实现继承父类 prototype 共享方法 start</span></pre></td></tr><tr><td data-num="134"></td><td><pre>		<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="135"></td><td><pre>		<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token operator">=</span>Son<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="136"></td><td><pre>		<span class="token comment">// 实现继承父类 prototype 共享方法 end</span></pre></td></tr><tr><td data-num="137"></td><td><pre>		</pre></td></tr><tr><td data-num="138"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Son</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="139"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="140"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"--------"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="141"></td><td><pre>		<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">exam</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="142"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"孩子要考试！！！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="143"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="144"></td><td><pre>		<span class="token keyword">let</span> son<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token string">"刘德华"</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="145"></td><td><pre>		<span class="token comment">// console.dir(Son);</span></pre></td></tr><tr><td data-num="146"></td><td><pre>	    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>son<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">'---'</span><span class="token operator">+</span>son<span class="token punctuation">.</span>age<span class="token operator">+</span><span class="token string">'------'</span><span class="token operator">+</span>son<span class="token punctuation">.</span>score<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="147"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"习题！！！！！！"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="148"></td><td><pre>	  <span class="token keyword">function</span> <span class="token function">Temp</span><span class="token punctuation">(</span><span class="token parameter">role<span class="token punctuation">,</span>weapon</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="149"></td><td><pre>	    <span class="token keyword">this</span><span class="token punctuation">.</span>role <span class="token operator">=</span> role<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="150"></td><td><pre>	    <span class="token keyword">this</span><span class="token punctuation">.</span>weapon <span class="token operator">=</span> weapon<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="151"></td><td><pre>	    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">skill</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="152"></td><td><pre>	        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'你会点啥'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="153"></td><td><pre>	    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="154"></td><td><pre>	 <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="155"></td><td><pre>	 </pre></td></tr><tr><td data-num="156"></td><td><pre>	 <span class="token keyword">let</span> son2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Temp</span><span class="token punctuation">(</span><span class="token string">'李白'</span><span class="token punctuation">,</span><span class="token string">'剑'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="157"></td><td><pre>	  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>son2<span class="token punctuation">.</span>role<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="158"></td><td><pre>	  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Temp<span class="token punctuation">.</span>role<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不可以通过构造函数访问实例成员 1</span></pre></td></tr><tr><td data-num="159"></td><td><pre> </pre></td></tr><tr><td data-num="160"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"对象方法Object.keys() Object.values() "</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="161"></td><td><pre>	<span class="token keyword">let</span> oo<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="162"></td><td><pre>		<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'lhm'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="163"></td><td><pre>		<span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="164"></td><td><pre>		<span class="token literal-property property">sex</span><span class="token operator">:</span><span class="token string">'女'</span></pre></td></tr><tr><td data-num="165"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="166"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>oo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="167"></td><td><pre>	<span class="token keyword">let</span> arr2<span class="token operator">=</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>oo<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="168"></td><td><pre>	arr2<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="169"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"数组遍历"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="170"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="171"></td><td><pre>	<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="172"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>oo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="173"></td><td><pre>	<span class="token comment">//define 定义  property 属性</span></pre></td></tr><tr><td data-num="174"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"对象方法Object.defineProperty  修改或者新增 新增颜色暗"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="175"></td><td><pre>	Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>oo<span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="176"></td><td><pre>		<span class="token literal-property property">value</span><span class="token operator">:</span><span class="token string">'lll'</span></pre></td></tr><tr><td data-num="177"></td><td><pre>	<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="178"></td><td><pre>    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>oo<span class="token punctuation">,</span><span class="token string">'score'</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="179"></td><td><pre>      	<span class="token literal-property property">value</span><span class="token operator">:</span><span class="token number">666</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="180"></td><td><pre>		<span class="token literal-property property">writable</span><span class="token operator">:</span><span class="token boolean">false</span>  <span class="token punctuation">,</span><span class="token comment">// 不允许修改属性</span></pre></td></tr><tr><td data-num="181"></td><td><pre>		<span class="token literal-property property">enumerable</span><span class="token operator">:</span><span class="token boolean">false</span> <span class="token punctuation">,</span><span class="token comment">// 不允许遍历，但是可以读取，如下</span></pre></td></tr><tr><td data-num="182"></td><td><pre>		<span class="token literal-property property">configurable</span><span class="token operator">:</span><span class="token boolean">false</span> <span class="token comment">// 不允许删除 不允许再次定义修改特性</span></pre></td></tr><tr><td data-num="183"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>   </pre></td></tr><tr><td data-num="184"></td><td><pre>	oo<span class="token punctuation">.</span>score<span class="token operator">=</span><span class="token number">888</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="185"></td><td><pre>	</pre></td></tr><tr><td data-num="186"></td><td><pre>	<span class="token comment">//enumerable:false 不允许遍历 start</span></pre></td></tr><tr><td data-num="187"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oo<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="188"></td><td><pre>	<span class="token keyword">let</span> arr3<span class="token operator">=</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>oo<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="189"></td><td><pre>	arr3<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="190"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"数组遍历测试2："</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="191"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="192"></td><td><pre>	<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="193"></td><td><pre>	<span class="token comment">//enumerable:false 不允许遍历 end</span></pre></td></tr><tr><td data-num="194"></td><td><pre>	</pre></td></tr><tr><td data-num="195"></td><td><pre>	<span class="token comment">//configurable 不允许删除 start</span></pre></td></tr><tr><td data-num="196"></td><td><pre>	<span class="token keyword">delete</span> oo<span class="token punctuation">.</span>score<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="197"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"configurable不允许删除"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="198"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oo<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="199"></td><td><pre>	<span class="token comment">//configurable 不允许删除 end</span></pre></td></tr><tr><td data-num="200"></td><td><pre>	</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>	</pre></td></tr><tr><td data-num="201"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="202"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>原型</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/2022/05/11/%E6%9F%A5%E6%BC%8F%E8%A1%A5%E7%BC%BA/</url>
    <content><![CDATA[<hr />
<h2 id="title查漏补缺date2022-05-11-203811cagegories查漏"><a class="anchor" href="#title查漏补缺date2022-05-11-203811cagegories查漏">#</a> title: 查漏补缺<br />
 date:2022-05-11 20:38:11<br />
cagegories: 查漏</h2>
<h1 id="前言"><a class="anchor" href="#前言">#</a> 前言</h1>
<pre><code>   职场没有借口，没记住就是没道理。吃一堑长一智了，不过今天的面试很喜欢，问到了很多知识点。虽然说的不清不楚，总结一下。之前老是记不住。。别依赖查一下，还是记记为好。始终热爱！
</code></pre>
<h1 id="flex"><a class="anchor" href="#flex">#</a> flex</h1>
<p>flex-basis: <em>number</em>|auto|initial|inherit;</p>
<h2 id="flex-basis"><a class="anchor" href="#flex-basis">#</a> flex-basis</h2>
<table>
<thead>
<tr>
<th style="text-align:left">值</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><em>number</em></td>
<td style="text-align:left">一个长度单位或者一个百分比，规定灵活项目的初始长度。</td>
</tr>
<tr>
<td style="text-align:left">auto</td>
<td style="text-align:left">默认值。长度等于灵活项目的长度。如果该项目未指定长度，则长度将根据内容决定。</td>
</tr>
<tr>
<td style="text-align:left">initial</td>
<td style="text-align:left">设置该属性为它的默认值。请参阅 <a href="https://www.runoob.com/cssref/css-initial.html"><em>initial</em></a>。</td>
</tr>
<tr>
<td style="text-align:left">inherit</td>
<td style="text-align:left">从父元素继承该属性。请参阅 <a href="https://www.runoob.com/cssref/css-inherit.html"><em>inherit</em></a>。</td>
</tr>
</tbody>
<tbody>
<tr>
<td style="text-align:left">flex-direction: row</td>
<td style="text-align:left">row-reverse</td>
<td>column</td>
<td>column-reverse</td>
<td>initial</td>
<td>inherit;</td>
</tr>
</tbody>
</table>
<h2 id="flex-direction"><a class="anchor" href="#flex-direction">#</a> flex-direction</h2>
<table>
<thead>
<tr>
<th style="text-align:left">值</th>
<th style="text-align:left">描述</th>
<th style="text-align:left">实例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">row</td>
<td style="text-align:left">默认值。灵活的项目将水平显示，正如一个行一样。</td>
<td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS90cnkvdHJ5LnBocD9maWxlbmFtZT10cnljc3MzX2ZsZXhib3hfZmxleGxpbmUtcm93">尝试一下 »</span></td>
</tr>
<tr>
<td style="text-align:left">row-reverse</td>
<td style="text-align:left">与 row 相同，但是以相反的顺序。</td>
<td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS90cnkvdHJ5LnBocD9maWxlbmFtZT10cnljc3MzX2ZsZXhib3hfZmxleGxpbmUtcm93LXJldmVyc2U=">尝试一下 »</span></td>
</tr>
<tr>
<td style="text-align:left">column</td>
<td style="text-align:left">灵活的项目将垂直显示，正如一个列一样。</td>
<td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS90cnkvdHJ5LnBocD9maWxlbmFtZT10cnljc3MzX2ZsZXhib3hfZmxleGxpbmUtY29sdW1u">尝试一下 »</span></td>
</tr>
<tr>
<td style="text-align:left">column-reverse</td>
<td style="text-align:left">与 column 相同，但是以相反的顺序。</td>
<td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS90cnkvdHJ5LnBocD9maWxlbmFtZT10cnljc3MzX2ZsZXhib3hfZmxleGxpbmUtY29sdW1uLXJldmVyc2U=">尝试一下 »</span></td>
</tr>
<tr>
<td style="text-align:left">initial</td>
<td style="text-align:left">设置该属性为它的默认值。请参阅 <a href="https://www.runoob.com/cssref/css-initial.html"><em>initial</em></a>。</td>
<td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS90cnkvdHJ5LnBocD9maWxlbmFtZT10cnljc3MzX2ZsZXhib3hfZmxleGxpbmUtaW5pdGlhbA==">尝试一下 »</span></td>
</tr>
<tr>
<td style="text-align:left">inherit</td>
<td style="text-align:left">从父元素继承该属性。请参阅 <a href="https://www.runoob.com/cssref/css-inherit.html"><em>inherit</em></a>。</td>
<td style="text-align:left"></td>
</tr>
</tbody>
<tbody>
<tr>
<td style="text-align:left">flex-wrap: nowrap</td>
<td style="text-align:left">wrap</td>
<td style="text-align:left">wrap-reverse</td>
<td>initial</td>
<td>inherit;</td>
</tr>
</tbody>
</table>
<h2 id="flex-wrap"><a class="anchor" href="#flex-wrap">#</a> flex-wrap</h2>
<table>
<thead>
<tr>
<th style="text-align:left">值</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">nowrap</td>
<td style="text-align:left">默认值。规定灵活的项目不拆行或不拆列。</td>
</tr>
<tr>
<td style="text-align:left">wrap</td>
<td style="text-align:left">规定灵活的项目在必要的时候拆行或拆列。</td>
</tr>
<tr>
<td style="text-align:left">wrap-reverse</td>
<td style="text-align:left">规定灵活的项目在必要的时候拆行或拆列，但是以相反的顺序。</td>
</tr>
<tr>
<td style="text-align:left">initial</td>
<td style="text-align:left">设置该属性为它的默认值。请参阅 <a href="https://www.runoob.com/cssref/css-initial.html"><em>initial</em></a>。</td>
</tr>
<tr>
<td style="text-align:left">inherit</td>
<td style="text-align:left">从父元素继承该属性。请参阅 <a href="https://www.runoob.com/cssref/css-inherit.html"><em>inherit</em></a>。</td>
</tr>
</tbody>
<tbody>
<tr>
<td style="text-align:left">flex-flow: <em>flex-direction</em> <em>flex-wrap</em></td>
<td style="text-align:left">initial</td>
<td>inherit;</td>
</tr>
</tbody>
</table>
<h2 id="flex-flow"><a class="anchor" href="#flex-flow">#</a> flex-flow</h2>
<table>
<thead>
<tr>
<th style="text-align:left">值</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><em>flex-direction</em></td>
<td style="text-align:left">可能的值：  row row-reverse column column-reverse initial inherit 默认值是 &quot;row&quot;。规定灵活项目的方向。</td>
</tr>
<tr>
<td style="text-align:left"><em>flex-wrap</em></td>
<td style="text-align:left">可能的值：  nowrap wrap wrap-reverse initial inherit 默认值是 &quot;nowrap&quot;。规定灵活项目是否拆行或拆列。</td>
</tr>
<tr>
<td style="text-align:left">initial</td>
<td style="text-align:left">设置该属性为它的默认值。请参阅 <a href="https://www.runoob.com/cssref/css-initial.html"><em>initial</em></a>。</td>
</tr>
<tr>
<td style="text-align:left">inherit</td>
<td style="text-align:left">从父元素继承该属性。请参阅 <a href="https://www.runoob.com/cssref/css-inherit.html"><em>inherit</em></a>。</td>
</tr>
</tbody>
<tbody>
<tr>
<td style="text-align:left">flex-shrink: <em>number</em></td>
<td style="text-align:left">initial</td>
<td>inherit;</td>
</tr>
</tbody>
</table>
<h2 id="flex-shrink"><a class="anchor" href="#flex-shrink">#</a> flex-shrink</h2>
<table>
<thead>
<tr>
<th style="text-align:left">值</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><em>number</em></td>
<td style="text-align:left">一个数字，规定项目将相对于其他灵活的项目进行收缩的量。默认值是 1。</td>
</tr>
<tr>
<td style="text-align:left">initial</td>
<td style="text-align:left">设置该属性为它的默认值。请参阅 <a href="https://www.runoob.com/cssref/css-initial.html"><em>initial</em></a>。</td>
</tr>
<tr>
<td style="text-align:left">inherit</td>
<td style="text-align:left">从父元素继承该属性。请参阅 <a href="https://www.runoob.com/cssref/css-inherit.html"><em>inherit</em></a>。</td>
</tr>
</tbody>
<tbody>
<tr>
<td style="text-align:left">flex-grow: <em>number</em></td>
<td style="text-align:left">initial</td>
<td>inherit;</td>
</tr>
</tbody>
</table>
<h2 id="flex-grow"><a class="anchor" href="#flex-grow">#</a> flex-grow</h2>
<table>
<thead>
<tr>
<th style="text-align:left">值</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><em>number</em></td>
<td style="text-align:left">一个数字，规定项目相对于其他灵活的项目进行扩展的量。默认值是 0。</td>
</tr>
<tr>
<td style="text-align:left">initial</td>
<td style="text-align:left">设置该属性为它的默认值。请参阅 <a href="https://www.runoob.com/cssref/css-initial.html"><em>initial</em></a>。</td>
</tr>
<tr>
<td style="text-align:left">inherit</td>
<td style="text-align:left">从父元素继承该属性。请参阅 <a href="https://www.runoob.com/cssref/css-inherit.html"><em>inherit</em></a>。</td>
</tr>
</tbody>
<tbody>
<tr>
<td style="text-align:left">flex: <em>flex-grow</em> <em>flex-shrink</em> <em>flex-basis</em></td>
<td style="text-align:left">auto</td>
<td>initial</td>
<td>inherit;</td>
</tr>
</tbody>
</table>
<h2 id="flex-2"><a class="anchor" href="#flex-2">#</a> flex</h2>
<table>
<thead>
<tr>
<th style="text-align:left">值</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><em>flex-grow</em></td>
<td style="text-align:left">一个数字，规定项目将相对于其他灵活的项目进行扩展的量。</td>
</tr>
<tr>
<td style="text-align:left"><em>flex-shrink</em></td>
<td style="text-align:left">一个数字，规定项目将相对于其他灵活的项目进行收缩的量。</td>
</tr>
<tr>
<td style="text-align:left"><em>flex-basis</em></td>
<td style="text-align:left">项目的长度。合法值：&quot;auto&quot;、&quot;inherit&quot; 或一个后跟 &quot;%&quot;、&quot;px&quot;、&quot;em&quot; 或任何其他长度单位的数字。</td>
</tr>
<tr>
<td style="text-align:left">auto</td>
<td style="text-align:left">与 1 1 auto 相同。</td>
</tr>
<tr>
<td style="text-align:left">none</td>
<td style="text-align:left">与 0 0 auto 相同。</td>
</tr>
<tr>
<td style="text-align:left">initial</td>
<td style="text-align:left">设置该属性为它的默认值，即为 0 1 auto。请参阅 <a href="https://www.runoob.com/cssref/css-initial.html"><em>initial</em></a>。</td>
</tr>
<tr>
<td style="text-align:left">inherit</td>
<td style="text-align:left">从父元素继承该属性。请参阅 <a href="https://www.runoob.com/cssref/css-inherit.html"><em>inherit</em></a>。</td>
</tr>
</tbody>
</table>
<h1 id="position"><a class="anchor" href="#position">#</a> position</h1>
<table>
<thead>
<tr>
<th style="text-align:left">值</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS9jc3MvY3NzLXBvc2l0aW9uaW5nLmh0bWwjcG9zaXRpb24tYWJzb2x1dGU=">absolute</span></td>
<td style="text-align:left">生成绝对定位的元素，相对于 static 定位以外的第一个父元素进行定位。元素的位置通过 &quot;left&quot;, &quot;top&quot;, &quot;right&quot; 以及 &quot;bottom&quot; 属性进行规定。</td>
</tr>
<tr>
<td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS9jc3MvY3NzLXBvc2l0aW9uaW5nLmh0bWwjcG9zaXRpb24tZml4ZWQ=">fixed</span></td>
<td style="text-align:left">生成固定定位的元素，相对于浏览器窗口进行定位。元素的位置通过 &quot;left&quot;, &quot;top&quot;, &quot;right&quot; 以及 &quot;bottom&quot; 属性进行规定。</td>
</tr>
<tr>
<td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS9jc3MvY3NzLXBvc2l0aW9uaW5nLmh0bWwjcG9zaXRpb24tcmVsYXRpdmU=">relative</span></td>
<td style="text-align:left">生成相对定位的元素，相对于其正常位置进行定位。因此，&quot;left:20&quot; 会向元素的 LEFT 位置添加 20 像素。</td>
</tr>
<tr>
<td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS9jc3MvY3NzLXBvc2l0aW9uaW5nLmh0bWwjcG9zaXRpb24tc3RhdGlj">static</span></td>
<td style="text-align:left">默认值。没有定位，元素出现在正常的流中（忽略 top, bottom, left, right 或者 z-index 声明）。</td>
</tr>
<tr>
<td style="text-align:left"><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS9jc3MvY3NzLXBvc2l0aW9uaW5nLmh0bWwjcG9zaXRpb24tc3RpY2t5">sticky</span></td>
<td style="text-align:left">粘性定位，该定位基于用户滚动的位置。它的行为就像 position:relative; 而当页面滚动超出目标区域时，它的表现就像 position:fixed;，它会固定在目标位置。<strong>注意:</strong> Internet Explorer, Edge 15 及更早 IE 版本不支持 sticky 定位。 Safari 需要使用 -webkit- prefix (查看以下实例)。</td>
</tr>
<tr>
<td style="text-align:left">inherit</td>
<td style="text-align:left">规定应该从父元素继承 position 属性的值。</td>
</tr>
<tr>
<td style="text-align:left">initial</td>
<td style="text-align:left">设置该属性为默认值，详情查看 <span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS9jc3NyZWYvY3NzLWluaXRpYWwuaHRtbA==">CSS initial 关键字</span>。</td>
</tr>
</tbody>
</table>
<h1 id="webstoragecookie"><a class="anchor" href="#webstoragecookie">#</a> webStorage/cookie</h1>
<p><strong>sessionStorage、localStorage 和 cookie 的区别？</strong></p>
<p>共同点：都是保存在浏览器端、且同源的<br />
区别：<br />
1、cookie 数据始终在同源的 http 请求中携带（即使不需要）。即 cookie 在浏览器和服务器间来回传递，而 sessionStorage 和 localStorage 不会自动把数据发送给服务器，仅在本地保存。cookie 数据还有路径（path）的概念，可以限制 cookie 只属于某个路径下 。<br />
2、存储大小限制也不同，cookie 数据不能超过 4K，同时因为每次 http 请求都会携带 cookie、所以 cookie 只适合保存很小的数据，如会话标识。sessionStorage 和 localStorage 虽然也有存储大小的限制，但比 cookie 大得多，可以达到 5M 或更大<br />
 3、数据有效期不同。sessionStorage：仅在当前浏览器窗口关闭之前有效；localStorage：始终有效，窗口或浏览器关闭也一直保存，因此用作持久数据；cookie：只在设置的 cookie 过期时间之前有效，即使窗口关闭或浏览器关闭<br />
 4、作用域不同，sessionStorage 不在不同的浏览器窗口中共享，即使是同一个页面；localstorage 在所有同源窗口中都是共享的；cookie 也是在所有同源窗口中都是共享的<br />
 5、web Storage 支持事件通知机制，可以将数据更新的通知发送给监听者<br />
 6、web Storage 的 api 接口使用更方便。</p>
<h1 id="slice"><a class="anchor" href="#slice">#</a> slice</h1>
<p><em>array</em>.slice(<em>start</em>, <em>end</em>)</p>
<h2 id="slice-参数"><a class="anchor" href="#slice-参数">#</a> slice 参数</h2>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><em>start</em></td>
<td style="text-align:left">可选。规定从何处开始选取。如果该参数为负数，则表示从原数组中的倒数第几个元素开始提取，slice (-2) 表示提取原数组中的倒数第二个元素到最后一个元素（包含最后一个元素）。</td>
</tr>
<tr>
<td style="text-align:left"><em>end</em></td>
<td style="text-align:left">可选。规定从何处结束选取。该参数是数组片断结束处的数组下标。如果没有指定该参数，那么切分的数组包含从 start 到数组结束的所有元素。如果该参数为负数， 则它表示在原数组中的倒数第几个元素结束抽取。 slice (-2,-1) 表示抽取了原数组中的倒数第二个元素到最后一个元素（不包含最后一个元素，也就是只有倒数第二个元素）。</td>
</tr>
</tbody>
</table>
<h1 id="splice"><a class="anchor" href="#splice">#</a> splice</h1>
<p><em>array</em>.splice(<em>index</em>,<em>howmany</em>,<em>item1</em>,.....,<em>itemX</em>)</p>
<h2 id="参数-values"><a class="anchor" href="#参数-values">#</a> 参数 Values</h2>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><em>index</em></td>
<td style="text-align:left">必需。规定从何处添加 / 删除元素。 该参数是开始插入和（或）删除的数组元素的下标，必须是数字。</td>
</tr>
<tr>
<td style="text-align:left"><em>howmany</em></td>
<td style="text-align:left">可选。规定应该删除多少元素。必须是数字，但可以是 &quot;0&quot;。 如果未规定此参数，则删除从 index 开始到原数组结尾的所有元素。</td>
</tr>
<tr>
<td style="text-align:left"><em>item1</em>, ..., <em>itemX</em></td>
<td style="text-align:left">可选。要添加到数组的新元素</td>
</tr>
</tbody>
</table>
<h1 id="substr"><a class="anchor" href="#substr">#</a> substr</h1>
<p><em>string</em>.substr(<em>start</em>,<em>length</em>)</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> str<span class="token operator">=</span><span class="token string">"Hello world!"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">var</span> n<span class="token operator">=</span>str<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//llo world!</span></pre></td></tr></table></figure><h1 id="substring"><a class="anchor" href="#substring">#</a> substring</h1>
<p><em>string</em>.substring(from, to)</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">from</td>
<td style="text-align:left">必需。一个非负的整数，规定要提取的子串的第一个字符在 string Object 中的位置。</td>
</tr>
<tr>
<td style="text-align:left">to</td>
<td style="text-align:left">可选。一个非负的整数，比要提取的子串的最后一个字符在 string Object 中的位置多 1。 如果省略该参数，那么返回的子串会一直到字符串的结尾。</td>
</tr>
</tbody>
</table>
<h1 id="rgba和opacity的区别"><a class="anchor" href="#rgba和opacity的区别">#</a> rgba 和 opacity 的区别</h1>
<p>rgba () 和 opacity 都能实现透明效果，但最大的不同是 opacity 作用于元素，以及元素内的所有内容的透明度，而 rgba () 只作用于元素的颜色或其背景色。（设置 rgba 透明的元素的子元素不会继承透明效果！）比如，我们写透明的黑色部分都是用 opcity（0.5），但这带出来一个问题就是如果你在这一 div 上写字的话，然后那个字体也会变成透明色。所以我们采取 rgba 的样式写，前面三个数字分别对应 r,g,b, 的三种颜色，第四位的数字对应的是透明的系数。</p>
]]></content>
  </entry>
  <entry>
    <title>正则表达式</title>
    <url>/2020/10/02/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
    <content><![CDATA[<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>正则表达式<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>		</pre></td></tr><tr><td data-num="9"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="10"></td><td><pre>		</pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token comment">// 正则表达式作为一个对象，过滤敏感关键词 用于匹配字符中字符组合的模式</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token comment">// 1 - 创建正则表达式  </span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token comment">// 00 对象 RegExp</span></pre></td></tr><tr><td data-num="14"></td><td><pre>		<span class="token keyword">var</span> regexp<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">abc</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 只要包含 abc 的都可以返回 true</span></pre></td></tr><tr><td data-num="15"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>regexp<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>		</pre></td></tr><tr><td data-num="17"></td><td><pre>		<span class="token comment">// 01 字面量创建</span></pre></td></tr><tr><td data-num="18"></td><td><pre>		<span class="token keyword">var</span> r<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">abc</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token comment">// 2 - 测试正则表达式 regexp.test (str) 返回 true 和 false</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//false</span></pre></td></tr><tr><td data-num="21"></td><td><pre>	    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="22"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'abccc'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="23"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"-------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>		</pre></td></tr><tr><td data-num="25"></td><td><pre>		<span class="token comment">// 3 - 正则表达式的特殊字符  </span></pre></td></tr><tr><td data-num="26"></td><td><pre>		<span class="token comment">// 00 边界符 ^ 开头 $ 结尾</span></pre></td></tr><tr><td data-num="27"></td><td><pre>		<span class="token keyword">var</span> r2<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^abc</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>  <span class="token comment">// 以 abc 开头都可以返回 true</span></pre></td></tr><tr><td data-num="28"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r2<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'aabc'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//false</span></pre></td></tr><tr><td data-num="29"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r2<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'abccc'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="30"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r2<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'abcd'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="31"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"-------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>		<span class="token keyword">var</span> r3<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^abc$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>  <span class="token comment">// 以 abc 开头和结尾返回 true 精确匹配</span></pre></td></tr><tr><td data-num="33"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r3<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'aabc'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//false</span></pre></td></tr><tr><td data-num="34"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r3<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'abccc'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span></pre></td></tr><tr><td data-num="35"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r3<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'abcd'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span></pre></td></tr><tr><td data-num="36"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r3<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="37"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"-------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>		</pre></td></tr><tr><td data-num="39"></td><td><pre>		<span class="token comment">// 01 字符类 [] 只包含 [] 里面其中一个字符就可以</span></pre></td></tr><tr><td data-num="40"></td><td><pre>		<span class="token keyword">var</span> r4<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[abc_]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>  <span class="token comment">// 只要包含 abc 中的其中一个</span></pre></td></tr><tr><td data-num="41"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r4<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//true</span></pre></td></tr><tr><td data-num="42"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r4<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="43"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r4<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span></pre></td></tr><tr><td data-num="44"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r4<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="45"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r4<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="46"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"-------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>		<span class="token keyword">var</span> r5<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[abc]$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>  <span class="token comment">// 以 a 或者 b 或者 c 开头并结尾，选其中一个</span></pre></td></tr><tr><td data-num="48"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r5<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//true</span></pre></td></tr><tr><td data-num="49"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r5<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="50"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r5<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="51"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r5<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span></pre></td></tr><tr><td data-num="52"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"-------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>		<span class="token keyword">var</span> r6<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[a-z]$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>  <span class="token comment">// 以 a 到 z 英文小写这个字符开头并结尾，选其中一个</span></pre></td></tr><tr><td data-num="54"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r6<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//true</span></pre></td></tr><tr><td data-num="55"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r6<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'z'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="56"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r6<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="57"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r6<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'gg'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span></pre></td></tr><tr><td data-num="58"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"-------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>		<span class="token keyword">var</span> r6<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[a-zA-Z]$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>  <span class="token comment">// 以 a 到 z A-Z 英文开头并结尾，选其中一个 </span></pre></td></tr><tr><td data-num="60"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r6<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//true</span></pre></td></tr><tr><td data-num="61"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r6<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="62"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r6<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'G'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="63"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r6<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span></pre></td></tr><tr><td data-num="64"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"-------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>		<span class="token keyword">var</span> r7<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[^a-zA-Z]$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>  <span class="token comment">// 中括号里面 ^ 是取反的意思，不能去里面</span></pre></td></tr><tr><td data-num="66"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r7<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//false</span></pre></td></tr><tr><td data-num="67"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r7<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span></pre></td></tr><tr><td data-num="68"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r7<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'G'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span></pre></td></tr><tr><td data-num="69"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r7<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="70"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"-------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre>		</pre></td></tr><tr><td data-num="72"></td><td><pre>		<span class="token comment">// 02 量词符  注意 &#123;&#125; 里面中间不能有空格</span></pre></td></tr><tr><td data-num="73"></td><td><pre>		<span class="token comment">// * 重复 0 次或更多次  </span></pre></td></tr><tr><td data-num="74"></td><td><pre>		<span class="token keyword">var</span> r8<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[a-zA-Z]*$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>  </pre></td></tr><tr><td data-num="75"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r8<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//true</span></pre></td></tr><tr><td data-num="76"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r8<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'AA'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="77"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r8<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'G'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="78"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r8<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span></pre></td></tr><tr><td data-num="79"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"-------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="80"></td><td><pre>		<span class="token comment">// + 重复 1 次或更多次</span></pre></td></tr><tr><td data-num="81"></td><td><pre>		<span class="token keyword">var</span> r9<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[a-zA-Z]+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="82"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r9<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//true</span></pre></td></tr><tr><td data-num="83"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r9<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'AA'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="84"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r9<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'G'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="85"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r9<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span></pre></td></tr><tr><td data-num="86"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"-------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="87"></td><td><pre>		<span class="token comment">// ? 重复 0 次或 1 次</span></pre></td></tr><tr><td data-num="88"></td><td><pre>		<span class="token keyword">var</span> r10<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[a-zA-Z]?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>  </pre></td></tr><tr><td data-num="89"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r10<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//true</span></pre></td></tr><tr><td data-num="90"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r10<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'AA'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span></pre></td></tr><tr><td data-num="91"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r10<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'G'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="92"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r10<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span></pre></td></tr><tr><td data-num="93"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"-------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="94"></td><td><pre>		<span class="token comment">// &#123;n&#125; 重复 n 次</span></pre></td></tr><tr><td data-num="95"></td><td><pre>		<span class="token keyword">var</span> r11<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[a-zA-Z]&#123;2&#125;$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="96"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r11<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//false</span></pre></td></tr><tr><td data-num="97"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r11<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'AA'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="98"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r11<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'G'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span></pre></td></tr><tr><td data-num="99"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r11<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span></pre></td></tr><tr><td data-num="100"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"-------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="101"></td><td><pre>		<span class="token comment">// &#123;n,&#125; 重复 n 次或更多次</span></pre></td></tr><tr><td data-num="102"></td><td><pre>		<span class="token keyword">var</span> r12<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[a-zA-Z]&#123;2,&#125;$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="103"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r12<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//false</span></pre></td></tr><tr><td data-num="104"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r12<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'AA'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="105"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r12<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Gdfd'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="106"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r12<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span></pre></td></tr><tr><td data-num="107"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"-------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="108"></td><td><pre>		<span class="token comment">// &#123;n,m&#125; 重复 n 次到 m 次</span></pre></td></tr><tr><td data-num="109"></td><td><pre>		<span class="token keyword">var</span> r13<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[a-zA-Z]&#123;2,4&#125;$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="110"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r13<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//false</span></pre></td></tr><tr><td data-num="111"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r13<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'AA'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="112"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r13<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Gfd'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="113"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r13<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'tttt'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="114"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r13<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'ttttff'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span></pre></td></tr><tr><td data-num="115"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"-------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="116"></td><td><pre>		</pre></td></tr><tr><td data-num="117"></td><td><pre>		<span class="token comment">// 4 - 正则表达式的替换</span></pre></td></tr><tr><td data-num="118"></td><td><pre>		<span class="token keyword">var</span> str<span class="token operator">=</span><span class="token string">'red和green'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="119"></td><td><pre>		<span class="token comment">// 以前</span></pre></td></tr><tr><td data-num="120"></td><td><pre>		<span class="token keyword">let</span> newStr<span class="token operator">=</span>str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"red"</span><span class="token punctuation">,</span><span class="token string">"orange"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 部分替换</span></pre></td></tr><tr><td data-num="121"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"替换后的str："</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="122"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newStr<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="123"></td><td><pre>		<span class="token comment">// 正则表达式替换  全局匹配 //g   忽略带小写  //i</span></pre></td></tr><tr><td data-num="124"></td><td><pre>		<span class="token keyword">let</span> newStr1<span class="token operator">=</span>str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">e</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 将所有 e 替换成 *</span></pre></td></tr><tr><td data-num="125"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newStr1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="126"></td><td><pre>		</pre></td></tr><tr><td data-num="127"></td><td><pre>		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="128"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="129"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>正则表达式</tag>
      </tags>
  </entry>
  <entry>
    <title>策略模式</title>
    <url>/2021/07/25/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<h2 id="前言"><a class="anchor" href="#前言">#</a> 前言</h2>
<p>本文聊的是策略模式，参考自曾探的《JavaScript 设计模式与开发实践》，相当于个人读书笔记。</p>
<h2 id="定义"><a class="anchor" href="#定义">#</a> 定义</h2>
<blockquote>
<p>策略模式的定义：定义一系列的算法，把它们一个个封装起来，并且使它们可以相互替换</p>
</blockquote>
<p>一个基于策略模式的程序至少由两部分组成。一部分是一组策略类，策略类封装了具体的算法，并负责具体的计算过程。第二部分是环境类 Context，Context 接受客户的请求，随后把请求委托给某一个策略类。要做到这点，说明 Context 中要维持对某个策略对象的引用</p>
<h2 id="计算奖金"><a class="anchor" href="#计算奖金">#</a> 计算奖金</h2>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 这个是策略类</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> strategies <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token constant">S</span><span class="token punctuation">(</span><span class="token parameter">salary</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">return</span> salary <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token constant">A</span><span class="token punctuation">(</span><span class="token parameter">salary</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">return</span> salary <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token constant">B</span><span class="token punctuation">(</span><span class="token parameter">salary</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">return</span> salary <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">// 这个是环境类 接收客户的请求</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">calculateBonus</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">level<span class="token punctuation">,</span> salary</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token keyword">return</span> strategies<span class="token punctuation">[</span>level<span class="token punctuation">]</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">calculateBonus</span><span class="token punctuation">(</span><span class="token string">"S"</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 80000</span></pre></td></tr><tr><td data-num="20"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">calculateBonus</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 30000</span></pre></td></tr></table></figure><h2 id="实现缓动动画"><a class="anchor" href="#实现缓动动画">#</a> 实现缓动动画</h2>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">&lt;!-- 这是 html 代码 --></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token property">background-color</span><span class="token punctuation">:</span> blueviolet<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>  test box</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 策略模式定义动画效果，这是策略类</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> tween <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function">linear</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span>c <span class="token operator">*</span> t<span class="token punctuation">)</span> <span class="token operator">/</span> d <span class="token operator">+</span> b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token function">easeIn</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">return</span> c <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">/=</span> d<span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">+</span> b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token function">strongEaseIn</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">return</span> c <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">/=</span> d<span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">**</span> <span class="token number">4</span> <span class="token operator">+</span> b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token function">strongEaseOut</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">return</span> c <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">=</span> t <span class="token operator">/</span> d <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">**</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token function">sineaseIn</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">return</span> c <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">/=</span> d<span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">+</span> b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token function">sineaseOut</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">return</span> c <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">=</span> t <span class="token operator">/</span> d <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Animate</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">dom</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>dom <span class="token operator">=</span> dom<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>startTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>startPos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>endPos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>propertyName <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//dom 节点需要被改变的 css 属性名，例如 left, right</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>easing <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 动画效果</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>duration <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 动画持续时间</span></pre></td></tr><tr><td data-num="32"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre>  <span class="token function">start</span><span class="token punctuation">(</span><span class="token parameter">propertyName<span class="token punctuation">,</span> endPos<span class="token punctuation">,</span> duration<span class="token punctuation">,</span> easing</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>startTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>startPos <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>propertyName<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>propertyName <span class="token operator">=</span> propertyName<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>endPos <span class="token operator">=</span> endPos<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>duration <span class="token operator">=</span> duration<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>easing <span class="token operator">=</span> tween<span class="token punctuation">[</span>easing<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 这是环境类</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token keyword">const</span> timeId <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token function">clearInterval</span><span class="token punctuation">(</span>timeId<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="47"></td><td><pre></pre></td></tr><tr><td data-num="48"></td><td><pre>  <span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>    <span class="token keyword">let</span> t <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">>=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>startTime <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>duration<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updated</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>endPos<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="54"></td><td><pre></pre></td></tr><tr><td data-num="55"></td><td><pre>    <span class="token keyword">let</span> pos <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">easing</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="56"></td><td><pre>      t <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>startTime<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="57"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>startPos<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="58"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>endPos <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>startPos<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="59"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>duration</pre></td></tr><tr><td data-num="60"></td><td><pre>    <span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updated</span><span class="token punctuation">(</span>pos<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="63"></td><td><pre></pre></td></tr><tr><td data-num="64"></td><td><pre>  <span class="token function">updated</span><span class="token punctuation">(</span><span class="token parameter">pos</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>style<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>propertyName<span class="token punctuation">]</span> <span class="token operator">=</span> pos <span class="token operator">+</span> <span class="token string">"px"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="67"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="68"></td><td><pre></pre></td></tr><tr><td data-num="69"></td><td><pre><span class="token comment">// 测试动画</span></pre></td></tr><tr><td data-num="70"></td><td><pre><span class="token keyword">const</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"box"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre><span class="token keyword">const</span> animate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animate</span><span class="token punctuation">(</span>box<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="72"></td><td><pre>animate<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">"left"</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">"strongEaseOut"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="73"></td><td><pre><span class="token comment">// animate.start("top", 500, 1000, "strongEaseOut");</span></pre></td></tr></table></figure><h2 id="实现表单校验"><a class="anchor" href="#实现表单校验">#</a> 实现表单校验</h2>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">&lt;!-- html 代码 --></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/test.com/register<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>registerForm<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>  请输入用户名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span> 请输入密码：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>  请输入手机号码: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>phoneNumber<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="第一版"><a class="anchor" href="#第一版">#</a> 第一版</h3>
<p>没有使用策略模式：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> registerForm <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"registerForm"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>registerForm<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"submit"</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>registerForm<span class="token punctuation">.</span>username<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"用户名不能为空"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>registerForm<span class="token punctuation">.</span>password<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"密码长度不能少于6位"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^1[3|5|8][0-9]&#123;9&#125;$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>registerForm<span class="token punctuation">.</span>phoneNumber<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"手机号码格式不正确"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="第二版"><a class="anchor" href="#第二版">#</a> 第二版</h3>
<p>使用策略模式增加可拓展性</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 策略类</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> strategies <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function">isNonEmpty</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> errorMsg</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token keyword">return</span> errorMsg<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token function">minLength</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> length<span class="token punctuation">,</span> errorMsg</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token keyword">return</span> errorMsg<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token function">isMobile</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> errorMsg</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^1[3|5|8][0-9]&#123;9&#125;$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token keyword">return</span> errorMsg<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token comment">// 环境类</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Validator</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>cache <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>  <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">dom<span class="token punctuation">,</span> rule<span class="token punctuation">,</span> errorMsg</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">const</span> ary <span class="token operator">=</span> rule<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>      <span class="token keyword">const</span> strategy <span class="token operator">=</span> ary<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 取出规则名</span></pre></td></tr><tr><td data-num="30"></td><td><pre>      ary<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>dom<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第一个参数为 value 值</span></pre></td></tr><tr><td data-num="31"></td><td><pre>      ary<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>errorMsg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第二个参数为 errorMsg 值</span></pre></td></tr><tr><td data-num="32"></td><td><pre>      <span class="token keyword">return</span> strategies<span class="token punctuation">[</span>strategy<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>dom<span class="token punctuation">,</span> ary<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre>  <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>      <span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token keyword">return</span> msg<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">validateFunc</span> <span class="token operator">=</span> <span class="token parameter">form</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>  <span class="token keyword">const</span> validate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Validator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>  validate<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>form<span class="token punctuation">.</span>username<span class="token punctuation">,</span> <span class="token string">"isNonEmpty"</span><span class="token punctuation">,</span> <span class="token string">"用户名不能为空"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>  validate<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>form<span class="token punctuation">.</span>password<span class="token punctuation">,</span> <span class="token string">"minLength:6"</span><span class="token punctuation">,</span> <span class="token string">"密码长度不能少于6位"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>  validate<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>form<span class="token punctuation">.</span>phoneNumber<span class="token punctuation">,</span> <span class="token string">"isMobile"</span><span class="token punctuation">,</span> <span class="token string">"手机号码格式不正确"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>  <span class="token keyword">const</span> errorMsg <span class="token operator">=</span> validate<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre></pre></td></tr><tr><td data-num="53"></td><td><pre>  <span class="token keyword">return</span> errorMsg<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre></pre></td></tr><tr><td data-num="56"></td><td><pre><span class="token keyword">const</span> registerForm <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"registerForm"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>registerForm<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"submit"</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>  <span class="token keyword">const</span> errorMsg <span class="token operator">=</span> <span class="token function">validateFunc</span><span class="token punctuation">(</span>registerForm<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>errorMsg<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>    <span class="token function">alert</span><span class="token punctuation">(</span>errorMsg<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>    <span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="63"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="单个表单多个校验"><a class="anchor" href="#单个表单多个校验">#</a> 单个表单多个校验</h3>
<p><code>validate.add</code>  方法中第二个参数变成数组实现单个表单的多个校验</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Validator</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>cache <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">dom<span class="token punctuation">,</span> rule</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> rule<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token keyword">const</span> errorMsg <span class="token operator">=</span> rule<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>errorMsg<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token keyword">const</span> ary <span class="token operator">=</span> rule<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>strategy<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">const</span> strategy <span class="token operator">=</span> ary<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 取出规则名</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        ary<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>dom<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第一个参数为 value 值</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        ary<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>errorMsg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第二个参数为 errorMsg 值</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">return</span> strategies<span class="token punctuation">[</span>strategy<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>dom<span class="token punctuation">,</span> ary<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>      <span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token keyword">return</span> msg<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token comment">// 策略类</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token keyword">const</span> strategies <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>  <span class="token function">isNonEmpty</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> errorMsg</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>      <span class="token keyword">return</span> errorMsg<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="36"></td><td><pre>  <span class="token function">minLength</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> length<span class="token punctuation">,</span> errorMsg</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>      <span class="token keyword">return</span> errorMsg<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="41"></td><td><pre>  <span class="token function">isMobile</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> errorMsg</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^1[3|5|8][0-9]&#123;9&#125;$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>      <span class="token keyword">return</span> errorMsg<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">validateFunc</span> <span class="token operator">=</span> <span class="token parameter">form</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>  <span class="token keyword">const</span> validate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Validator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>  validate<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>form<span class="token punctuation">.</span>username<span class="token punctuation">,</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token punctuation">&#123;</span> <span class="token literal-property property">strategy</span><span class="token operator">:</span> <span class="token string">"isNonEmpty"</span><span class="token punctuation">,</span> <span class="token literal-property property">errorMsg</span><span class="token operator">:</span> <span class="token string">"用户名不能为空"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="52"></td><td><pre>    <span class="token punctuation">&#123;</span> <span class="token literal-property property">strategy</span><span class="token operator">:</span> <span class="token string">"minLength:6"</span><span class="token punctuation">,</span> <span class="token literal-property property">errorMsg</span><span class="token operator">:</span> <span class="token string">"用户名长度不能少于6位"</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>  validate<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>form<span class="token punctuation">.</span>password<span class="token punctuation">,</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="55"></td><td><pre>    <span class="token punctuation">&#123;</span> <span class="token literal-property property">strategy</span><span class="token operator">:</span> <span class="token string">"minLength:6"</span><span class="token punctuation">,</span> <span class="token literal-property property">errorMsg</span><span class="token operator">:</span> <span class="token string">"密码长度不能少于6位"</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>  validate<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>form<span class="token punctuation">.</span>phoneNumber<span class="token punctuation">,</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="58"></td><td><pre>    <span class="token punctuation">&#123;</span> <span class="token literal-property property">strategy</span><span class="token operator">:</span> <span class="token string">"isMobile"</span><span class="token punctuation">,</span> <span class="token literal-property property">errorMsg</span><span class="token operator">:</span> <span class="token string">"手机号码格式不正确"</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>  <span class="token keyword">const</span> errorMsg <span class="token operator">=</span> validate<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre></pre></td></tr><tr><td data-num="62"></td><td><pre>  <span class="token keyword">return</span> errorMsg<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="63"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="64"></td><td><pre></pre></td></tr><tr><td data-num="65"></td><td><pre><span class="token keyword">const</span> registerForm <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"registerForm"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>registerForm<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"submit"</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>  <span class="token keyword">const</span> errorMsg <span class="token operator">=</span> <span class="token function">validateFunc</span><span class="token punctuation">(</span>registerForm<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>errorMsg<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>    <span class="token function">alert</span><span class="token punctuation">(</span>errorMsg<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre>    <span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="72"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="73"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="总结"><a class="anchor" href="#总结">#</a> 总结</h2>
<p>优点：</p>
<ul>
<li>策略模式利用组合、委托和多态等技术和思想，可以有效地避免多重条件选择语句</li>
<li>策略模式提供了对开放 - 封闭原则的完美支持，将算法封装在独立的 strategy，使得它们易于切换，易于理解，易于扩展</li>
<li>策略模式中的算法也可以复用在系统的其他地方，从而避免许多重复的复制粘贴工作</li>
<li>在策略模式中利用组合和委托来让 Context 拥有执行算法的能力，是继承中轻便的替代方案</li>
</ul>
<p>缺点：</p>
<ul>
<li>使程序增加许多策略类或者策略对象</li>
<li>strategy 要向客户暴露它所有实现，同时了解各个 strategy 不同之处</li>
</ul>
]]></content>
      <categories>
        <category>设计模式</category>
      </categories>
      <tags>
        <tag>设计模式</tag>
        <tag>策略模式</tag>
      </tags>
  </entry>
  <entry>
    <title>缓慢动画简单实现</title>
    <url>/2021/03/19/%E7%BC%93%E6%85%A2%E5%8A%A8%E7%94%BB%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<p><strong>封装 <code>animate.js</code> </strong></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> target<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment">//console.log (callback);  callback = function () &#123;&#125;  调用的时候 callback ()</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 先清除以前的定时器，只保留当前的一个定时器执行</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function">clearInterval</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    obj<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token comment">// 步长值写到定时器的里面</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token comment">// 把我们步长值改为整数 不要出现小数的问题</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token comment">// var step = Math.ceil((target - obj.offsetLeft) / 10);</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token keyword">var</span> step <span class="token operator">=</span> <span class="token punctuation">(</span>target <span class="token operator">-</span> obj<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        step <span class="token operator">=</span> step <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span> <span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>offsetLeft <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token comment">// 停止动画 本质是停止定时器</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token function">clearInterval</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token comment">// 回调函数写到定时器结束里面</span></pre></td></tr><tr><td data-num="16"></td><td><pre>            <span class="token comment">// if (callback) &#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token comment">//     // 调用函数</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token comment">//     callback();</span></pre></td></tr><tr><td data-num="19"></td><td><pre>            <span class="token comment">// &#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>            callback <span class="token operator">&amp;&amp;</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token comment">// 把每次加 1 这个步长值改为一个慢慢变小的值  步长公式：(目标值 - 现在的位置) / 10</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        obj<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> obj<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> step <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>animate缓慢动画</tag>
      </tags>
  </entry>
  <entry>
    <title>网络协议</title>
    <url>/2021/10/19/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/</url>
    <content><![CDATA[<h1 id="网络协议"><a class="anchor" href="#网络协议">#</a> 网络协议</h1>
<h2 id="封装类协议"><a class="anchor" href="#封装类协议">#</a> 封装类协议</h2>
<ol>
<li>链路层：以太网 / PPP/HDLC/ 帧中继，常考以太网帧格式，帧中继的特点</li>
<li>网络层：IP 常考 IP 报头格式</li>
<li>传输层：TCP/UDP 常考 TCP 三次握手 拥塞和流量控制</li>
</ol>
<h3 id="以太网帧结构"><a class="anchor" href="#以太网帧结构">#</a> 以太网帧结构</h3>
<ol>
<li>目的地址 / 源地址为 MAC 地址</li>
<li>数据 46~1500，最小 64 字节，最长 1518 字节</li>
<li>校验 4 字节</li>
<li>先导字段不算帧长</li>
</ol>
<p><img data-src="../images/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/1650879404359.png" alt="1650879404359" /></p>
<h3 id="帧中继"><a class="anchor" href="#帧中继">#</a> 帧中继</h3>
<ul>
<li>第二层  本地标识 DLCL</li>
<li>面向连接</li>
<li>CIR 承诺速率  EIR 扩展速率</li>
<li>2~45Mbps</li>
<li>不保证可靠的提交</li>
<li>帧长可变  1600~4096 字节</li>
</ul>
<p><img data-src="../images/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/1650879585256.png" alt="1650879585256" /></p>
<h3 id="hdlc"><a class="anchor" href="#hdlc">#</a> HDLC</h3>
<ul>
<li>高级链路控制协议</li>
<li>面向比特的数据链路层协议</li>
<li>帧边界 “0111 1110”</li>
<li>三种类型帧  记忆：信传  监差  无链</li>
<li>特殊字符     REJ 传后面的  SREJ 选择接受发过的不重发</li>
</ul>
<p><img data-src="../images/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/1650879960224.png" alt="1650879960224" /></p>
<p>习题：</p>
<p><img data-src="../images/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/1650880293323.png" alt="1650880293323" /></p>
<h2 id="路由协议"><a class="anchor" href="#路由协议">#</a> 路由协议</h2>
<h3 id="igp内部网关协议"><a class="anchor" href="#igp内部网关协议">#</a> IGP（内部网关协议）</h3>
<ul>
<li>用于 AS 内部</li>
</ul>
<h4 id="rip"><a class="anchor" href="#rip">#</a> RIP</h4>
<ol>
<li>基于 UDP520</li>
<li>最大 15 跳，16 跳不可达，用于小型网络</li>
<li>30s 周期性更新路由表，180s 更新表示不存在，240s 删除路由表</li>
<li>RIPv1 RIPv2 区别</li>
<li>距离矢量协议</li>
</ol>
<h4 id="ospf"><a class="anchor" href="#ospf">#</a> OSPF</h4>
<ol>
<li>点对点网络每 10s 发送一次 hello</li>
<li>224.0.0.5 运行 OSPF 的路由器</li>
<li>224.0.0.6 OSPF 指定备用路由器 DR/BDR</li>
<li>链路状态路由器</li>
<li>基于 IP</li>
</ol>
<h3 id="egp外部网关协议"><a class="anchor" href="#egp外部网关协议">#</a> EGP（外部网关协议）</h3>
<ul>
<li>用于 AS 之间</li>
</ul>
<h4 id="bgp"><a class="anchor" href="#bgp">#</a> BGP</h4>
<ol>
<li>基于 TCP 179</li>
<li>打开 open 建立邻居关系</li>
<li>更新 update 发送新的路由器</li>
<li>保持活动状态 Keepalive 对 Open 应答 / 周期性确认邻居关系</li>
<li>通告 Notification 报告检测到的错误</li>
</ol>
<h2 id="功能类协议"><a class="anchor" href="#功能类协议">#</a> 功能类协议</h2>
<ol>
<li>ICMP：封装在 IP 报文中，传递差错控制</li>
<li>ARP (IP-----MAC)   RAPR (MAC----IP)</li>
<li>NAT 网络地址转换，将私有地址转换为公网 IP 地址</li>
<li>ACL  访问控制列表 实现用户访问控制</li>
<li>STP 生成树协议，防止二层环路</li>
<li>DHCP  动态主机配置协议，动态分配 IP 地址</li>
<li>其它 VRRP.DNS WWW FTP/TFTP</li>
</ol>
<h1 id="ipv4"><a class="anchor" href="#ipv4">#</a> IPv4</h1>
<ul>
<li>报文格式如下图：</li>
<li>基本 IP 头部 20 字节，最小 5 位</li>
<li>IP 头部最多 60 字节，最多 15 位</li>
<li>TTL 生存期（8 位）256 每经过一个 - 1</li>
</ul>
<p><img data-src="../images/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/1650880445466.png" alt="1650880445466" /></p>
<p>问题：</p>
<p><img data-src="../images/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/1650880715772.png" alt="1650880715772" /></p>
<h1 id="ipv6"><a class="anchor" href="#ipv6">#</a> IPv6</h1>
<ul>
<li>
<p>报文格式如下图</p>
</li>
<li>
<p>IPv6 头部 40 字节</p>
</li>
</ul>
<p><img data-src="../images/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/1650880552607.png" alt="1650880552607" /></p>
<h1 id="特殊地址"><a class="anchor" href="#特殊地址">#</a> 特殊地址</h1>
<ol>
<li>0.0.0.0  没有表示 0</li>
<li>255.255.255.255   广播地址</li>
<li>169.254.0.0/16  自动获取 IP 地址，DHCP 故障</li>
<li>127.0.0.0/8 本地环回地址</li>
<li>私有地址   1 个 A 类 16 个 B 类  256 个 C 类                                                              A 类 10.0.0.0/8   10.0.0.0-10.255.255.255                       B 类 172.16.0.0/12   172.16.0.0-172.31.255.255                     C 类 192.168.0.0/16  192.168.0.0-192.168.255.255</li>
<li>224.0.0.1 所有主机</li>
<li>224.0.0.2 所有路由器</li>
<li>224.0.0.5 OSPF 路由器</li>
<li>224.0.0.6 DR/BDP 组播接收地址</li>
<li>224.0.0.9 RIPv2 组播更新地址</li>
<li>224.0.0.18 VRRP 组播地址</li>
</ol>
]]></content>
      <categories>
        <category>软考</category>
      </categories>
      <tags>
        <tag>网络协议</tag>
        <tag>IP地址规划</tag>
        <tag>网络规划</tag>
        <tag>IPv4</tag>
        <tag>IPv6</tag>
        <tag>特殊地址</tag>
      </tags>
  </entry>
  <entry>
    <title>职业链模式</title>
    <url>/2021/07/06/%E8%81%8C%E4%B8%9A%E9%93%BE%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<h2 id="前言"><a class="anchor" href="#前言">#</a> 前言</h2>
<p>本文聊的是职业链模式，参考自曾探的《JavaScript 设计模式与开发实践》，相当于个人读书笔记。</p>
<h2 id="定义"><a class="anchor" href="#定义">#</a> 定义</h2>
<blockquote>
<p>使多个对象都有机会处理请求，从而避免请求的发送者和接受者之间的耦合关系，将这些对象连成一条链，并沿着这条链传递该请求，直到有一个对象处理它为止。</p>
</blockquote>
<p>真实场景：JS 事件捕获与冒泡</p>
<h2 id="例子"><a class="anchor" href="#例子">#</a> 例子</h2>
<p>假设有一个负责售卖手机的电商网站，经过 500 元定金和 200 元定金预定后，现在到了正式购买的阶段。对于已经支付过 500 元定金的用户返回 100 元优惠券，支付过 200 元定金的用户返回 50 元，没有支付过定金的用户没有优惠券，并且还收到库存的限制，支付过定金的不受此限制。</p>
<p>以下字段表示：</p>
<ul>
<li>orderType: 表示订单类型，值为 1 是 500 元定金用户，值为 2 是 200 元定金用户，值为 3 是普通用户</li>
<li>pay: 表示用户是否已经支付定金，值为 true 或者 false</li>
<li>stock: 表示当前用于普通购买的手机库存数量，已经支付过 500 元或者 200 元定金的用户不受此限制</li>
</ul>
<h3 id="正常流程"><a class="anchor" href="#正常流程">#</a> 正常流程</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">order</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">orderType<span class="token punctuation">,</span> pay<span class="token punctuation">,</span> stock</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>orderType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>pay <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"500元定金预约，得到100元优惠券"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>stock <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"普通购买，无优惠券"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"手机库存不足"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>orderType <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>pay <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"200元定金预约，得到50元优惠券"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>stock <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"普通购买，无优惠券"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"手机库存不足"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>orderType <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>stock <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"普通购买，无优惠券"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"手机库存不足"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token function">order</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 500 元定金预约，得到 100 元优惠券</span></pre></td></tr></table></figure><h3 id="用职责链模式重构代码"><a class="anchor" href="#用职责链模式重构代码">#</a> 用职责链模式重构代码</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">order500</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">orderType<span class="token punctuation">,</span> pay<span class="token punctuation">,</span> stock</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>orderType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> pay <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"500元定金预约，得到100元优惠券"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function">order200</span><span class="token punctuation">(</span>orderType<span class="token punctuation">,</span> pay<span class="token punctuation">,</span> stock<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">order200</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">orderType<span class="token punctuation">,</span> pay<span class="token punctuation">,</span> stock</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>orderType <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> pay <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"200元定金预约，得到50元优惠券"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token function">orderNormal</span><span class="token punctuation">(</span>orderType<span class="token punctuation">,</span> pay<span class="token punctuation">,</span> stock<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">orderNormal</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">orderType<span class="token punctuation">,</span> pay<span class="token punctuation">,</span> stock</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>stock <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"普通购买，无优惠券"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"手机库存不足"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token function">order500</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 500 元定金预约，得到 100 元优惠券</span></pre></td></tr></table></figure><h3 id="优化"><a class="anchor" href="#优化">#</a> 优化</h3>
<p>虽然上面代码能够实现其功能，但是函数之间非常耦合，函数之间不能灵活拆分和重组，因此需要优化一下。增加 <code>Chain</code>  类来优化</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">order500</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">orderType<span class="token punctuation">,</span> pay<span class="token punctuation">,</span> stock</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>orderType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> pay <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"500元定金预约，得到100元优惠券"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">return</span> <span class="token string">"nextSuccessor"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">order200</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">orderType<span class="token punctuation">,</span> pay<span class="token punctuation">,</span> stock</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>orderType <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> pay <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"200元定金预约，得到50元优惠券"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">return</span> <span class="token string">"nextSuccessor"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">orderNormal</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">orderType<span class="token punctuation">,</span> pay<span class="token punctuation">,</span> stock</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>stock <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"普通购买，无优惠券"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"手机库存不足"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Chain</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>fn <span class="token operator">=</span> fn<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>successor <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre>  <span class="token function">setNextSuccessor</span><span class="token punctuation">(</span><span class="token parameter">successor</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>successor <span class="token operator">=</span> successor<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>  <span class="token function">passRequest</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token keyword">let</span> ret <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>ret <span class="token operator">===</span> <span class="token string">"nextSuccessor"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>successor <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>successor<span class="token punctuation">.</span><span class="token function">passRequest</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token keyword">return</span> ret<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token keyword">const</span> chainOrder500 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Chain</span><span class="token punctuation">(</span>order500<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token keyword">const</span> chainOrder200 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Chain</span><span class="token punctuation">(</span>order200<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token keyword">const</span> chainOrderNormal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Chain</span><span class="token punctuation">(</span>orderNormal<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre></pre></td></tr><tr><td data-num="49"></td><td><pre>chainOrder500<span class="token punctuation">.</span><span class="token function">setNextSuccessor</span><span class="token punctuation">(</span>chainOrder200<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>chainOrder200<span class="token punctuation">.</span><span class="token function">setNextSuccessor</span><span class="token punctuation">(</span>chainOrderNormal<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre></pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token comment">// 测试</span></pre></td></tr><tr><td data-num="53"></td><td><pre>chainOrder500<span class="token punctuation">.</span><span class="token function">passRequest</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="异步的职责链"><a class="anchor" href="#异步的职责链">#</a> 异步的职责链</h2>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Chain</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>fn <span class="token operator">=</span> fn<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>successor <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token function">setNextSuccessor</span><span class="token punctuation">(</span><span class="token parameter">successor</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>successor <span class="token operator">=</span> successor<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token function">passRequest</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">let</span> ret <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>ret <span class="token operator">===</span> <span class="token string">"nextSuccessor"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>successor <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>successor<span class="token punctuation">.</span><span class="token function">passRequest</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">return</span> ret<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token function">next</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>successor <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>successor<span class="token punctuation">.</span><span class="token function">passRequest</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token keyword">const</span> fn1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Chain</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>  <span class="token keyword">return</span> <span class="token string">"nextSuccessor"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token keyword">const</span> fn2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Chain</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token keyword">const</span> fn3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Chain</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre>fn1<span class="token punctuation">.</span><span class="token function">setNextSuccessor</span><span class="token punctuation">(</span>fn2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setNextSuccessor</span><span class="token punctuation">(</span>fn3<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre></pre></td></tr><tr><td data-num="43"></td><td><pre>fn1<span class="token punctuation">.</span><span class="token function">passRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="总结"><a class="anchor" href="#总结">#</a> 总结</h2>
<p>优点：</p>
<ol>
<li>解耦了发送者和 N 个接受者之间的复杂关系，由于不知道链中的哪个节点可以处理你发出的请求，所以只需要把请求传递给第一个节点即可。</li>
<li>链中的节点对象可以灵活地拆分重组</li>
<li>手动指定起始节点</li>
</ol>
<p>缺点：</p>
<ol>
<li>不能保证某个请求一定会被链中的节点处理，需要在链尾增加一个保底的接受者节点</li>
<li>程序中多了一些节点对象</li>
</ol>
]]></content>
      <categories>
        <category>设计模式</category>
      </categories>
      <tags>
        <tag>设计模式</tag>
        <tag>职责链模式</tag>
      </tags>
  </entry>
  <entry>
    <title>观察者模式</title>
    <url>/2021/07/20/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<h2 id="前言"><a class="anchor" href="#前言">#</a> 前言</h2>
<p>本文聊的是观察者模式，参考自曾探的《JavaScript 设计模式与开发实践》，相当于个人读书笔记。</p>
<h2 id="观察者模式"><a class="anchor" href="#观察者模式">#</a> 观察者模式</h2>
<p>观察者模式又名发布订阅模式，它定义对象间的一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都将得到通知。在 JavaScript 开发中，我们一般用事件模型来替代传统的发布订阅模式</p>
<p>发布 - 订阅模式可以广泛应用于<strong>异步编程</strong>中，这是一种替代传递回调函数的方案；还可以取代对象之间硬编码的通知机制，一个对象不用再<strong>显式</strong>地调用另外一个对象的某个接口</p>
<h2 id="dom-事件"><a class="anchor" href="#dom-事件">#</a> DOM 事件</h2>
<p>例如简单的监听事件，一开始需要注册监听事件，然后当用户点击的时候就会自动执行监听事件内的代码</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="自定义事件"><a class="anchor" href="#自定义事件">#</a> 自定义事件</h2>
<h3 id="简单的发布订阅"><a class="anchor" href="#简单的发布订阅">#</a> 简单的发布订阅</h3>
<p>例如售楼处发布售楼消息给客户，实现的过程分三步：</p>
<ol>
<li>首先指定<strong>发布者</strong>，例如下面代码变量的 <code>salesOffices</code> ，意味着售楼处</li>
<li>然后给发布者添加一个缓存列表，用于存放回调函数以便通知<strong>订阅者</strong>，例如下面代码中的 <code>salesOffices.listen</code>  方法</li>
<li>最后发布消息，发布者遍历这个缓存列表，依次触发里面存放订阅者的回调函数</li>
</ol>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> salesOffices <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">clientList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 缓存列表，存放订阅者的回调函数</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function">listen</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 增加订阅者</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>clientList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">// 发布消息</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clientList<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>clientList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>salesOffices<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">price<span class="token punctuation">,</span> squareMeter</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"价格= "</span> <span class="token operator">+</span> price<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"squareMeter "</span> <span class="token operator">+</span> squareMeter<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>salesOffices<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">price<span class="token punctuation">,</span> squareMeter</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"价格= "</span> <span class="token operator">+</span> price<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"squareMeter "</span> <span class="token operator">+</span> squareMeter<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>salesOffices<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token number">20000</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="完善发布订阅"><a class="anchor" href="#完善发布订阅">#</a> 完善发布订阅</h3>
<p>在上面的问题中我们实现了简单的发布订阅，但是还是存在问题，就是订阅者会受到发布者发布的所有消息，而这些消息有的可能不是订阅者所需要的。因此解决办法是增加一个 key，让订阅者只订阅自己感兴趣的内容</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> salesOffices <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">clientList</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">// 缓存列表，存放订阅者的回调函数</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function">listen</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 增加订阅者</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>clientList<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>clientList<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>clientList<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> <span class="token operator">...</span>arg</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>clientList<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clientList<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> fn<span class="token punctuation">;</span> <span class="token punctuation">(</span>fn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clientList<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arg<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>salesOffices<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">"squareMeter88"</span><span class="token punctuation">,</span> <span class="token parameter">price</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"价格= "</span> <span class="token operator">+</span> price<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>salesOffices<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">"squareMeter110"</span><span class="token punctuation">,</span> <span class="token parameter">price</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"价格= "</span> <span class="token operator">+</span> price<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre>salesOffices<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"squareMeter88"</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>salesOffices<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"squareMeter110"</span><span class="token punctuation">,</span> <span class="token number">30000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>在订阅后我们可能需要取消订阅事件，因此增加取消订阅的事件</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>salesOffices<span class="token punctuation">.</span>remove <span class="token operator">=</span> <span class="token punctuation">(</span>key<span class="token punctuation">,</span> fn<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">let</span> fns <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clientList<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fns<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fn<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 取消对应 key 的所有订阅消息</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      fns <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>fns<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> fns<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">let</span> _fn <span class="token operator">=</span> fns<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>_fn <span class="token operator">===</span> fn<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>          fns<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>          <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>salesOffices<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">'squareMeter88'</span><span class="token punctuation">,</span> <span class="token function-variable function">fn1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">price</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"价格= "</span> <span class="token operator">+</span> price<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>salesOffices<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">"squareMeter100"</span><span class="token punctuation">,</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token parameter">price</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"价格= "</span> <span class="token operator">+</span> price<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre>salesOffices<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">'squareMeter88'</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>salesOffices<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"squareMeter100"</span><span class="token punctuation">,</span> fn2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 取消订阅的事件</span></pre></td></tr><tr><td data-num="30"></td><td><pre>salesOffices<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"squareMeter100"</span><span class="token punctuation">,</span> <span class="token number">30000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="网站登录"><a class="anchor" href="#网站登录">#</a> 网站登录</h2>
<p>在使用 AJAX 进行获取数据之后我们需要渲染多个模块，一般情况下，我们会根据请求之后显式地调用定义好的函数，例如下面的例子：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 普通模式，显式调用函数</span></pre></td></tr><tr><td data-num="2"></td><td><pre>login<span class="token punctuation">.</span><span class="token function">succ</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  header<span class="token punctuation">.</span><span class="token function">setAvatar</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>avatar<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  nav<span class="token punctuation">.</span><span class="token function">setAvatar</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>avatar<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  message<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  cart<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="使用观察者模式"><a class="anchor" href="#使用观察者模式">#</a> 使用观察者模式</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 使用观察者模式</span></pre></td></tr><tr><td data-num="2"></td><td><pre>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token string">'https://www.example.com?login'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  login<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">'loginSucc'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 发布消息</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 根据各个模块去订阅消息</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">const</span> header <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  login<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">'loginSucc'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    header<span class="token punctuation">.</span><span class="token function">setAvatar</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>avatar<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token function">setAvatar</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">const</span> nav <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  login<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">'loginSucc'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    nav<span class="token punctuation">.</span><span class="token function">setAvatar</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>avatar<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token function">setAvatar</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="总结"><a class="anchor" href="#总结">#</a> 总结</h2>
<p>发布订阅模式的优点：</p>
<ol>
<li>时间上的解耦</li>
<li>对象之间的解耦</li>
</ol>
<p>缺点：</p>
<ol>
<li>创建订阅者本身需要消耗一定的时间和内存</li>
<li>当订阅一个消息后这个消息最后可能不会发生，但是订阅者会始终存在内存中</li>
<li>过度使用会造成对象之间引用的不清晰，难以跟踪维护和理解</li>
</ol>
]]></content>
      <categories>
        <category>设计模式</category>
      </categories>
      <tags>
        <tag>设计模式</tag>
        <tag>观察者模式</tag>
      </tags>
  </entry>
  <entry>
    <title>解构.箭头函数.剩余参数.Array扩展方法.Set</title>
    <url>/2020/10/28/%E8%A7%A3%E6%9E%84.%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0.%E5%89%A9%E4%BD%99%E5%8F%82%E6%95%B0.Array%E6%89%A9%E5%B1%95%E6%96%B9%E6%B3%95.Set/</url>
    <content><![CDATA[<p><strong>学习笔记</strong></p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>解构.箭头函数.剩余参数.Array扩展方法.Set<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>hh<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="10"></td><td><pre>		<span class="token comment">// 1 - 数组解构</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token comment">// 00 数组解构允许我们一一解构，数量一致，多余的没有对应的值，就为 undefined</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"数组解构"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token keyword">let</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">,</span>d<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1</span></pre></td></tr><tr><td data-num="15"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2</span></pre></td></tr><tr><td data-num="16"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3</span></pre></td></tr><tr><td data-num="17"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//undefined</span></pre></td></tr><tr><td data-num="18"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"对象解构"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token comment">//01 对象解构 没有的属性解构为 undefined</span></pre></td></tr><tr><td data-num="20"></td><td><pre>		<span class="token keyword">let</span> person<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>			<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'lhm'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre>			<span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span></pre></td></tr><tr><td data-num="23"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>		<span class="token comment">// 对象解构 1</span></pre></td></tr><tr><td data-num="25"></td><td><pre>		<span class="token keyword">let</span> <span class="token punctuation">&#123;</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>sex<span class="token punctuation">&#125;</span><span class="token operator">=</span>person<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//lhm</span></pre></td></tr><tr><td data-num="27"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//18</span></pre></td></tr><tr><td data-num="28"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//undefined</span></pre></td></tr><tr><td data-num="29"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"----------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>		<span class="token comment">// 对象解构 2</span></pre></td></tr><tr><td data-num="31"></td><td><pre>		<span class="token keyword">let</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">name</span><span class="token operator">:</span>myName<span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span>myAge<span class="token punctuation">,</span><span class="token literal-property property">sex</span><span class="token operator">:</span>mySex<span class="token punctuation">&#125;</span><span class="token operator">=</span>person<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myName<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myAge<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mySex<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"----------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>		</pre></td></tr><tr><td data-num="37"></td><td><pre>		<span class="token comment">// 2 - 箭头函数</span></pre></td></tr><tr><td data-num="38"></td><td><pre>		<span class="token keyword">const</span> <span class="token function-variable function">fn</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>		<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>		<span class="token comment">// 箭头函数</span></pre></td></tr><tr><td data-num="43"></td><td><pre>		<span class="token keyword">let</span> <span class="token function-variable function">sum</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">n1<span class="token punctuation">,</span>n2</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>			<span class="token keyword">return</span> n1<span class="token operator">+</span>n2<span class="token punctuation">;</span> <span class="token comment">// 只有一句代码，可以简化</span></pre></td></tr><tr><td data-num="45"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>		<span class="token comment">// 00 箭头函数的简化 1</span></pre></td></tr><tr><td data-num="48"></td><td><pre>		<span class="token keyword">let</span> <span class="token function-variable function">sum2</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">n1<span class="token punctuation">,</span>n2</span><span class="token punctuation">)</span><span class="token operator">=></span>n1<span class="token operator">+</span>n2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum2</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>		<span class="token comment">// 00 箭头函数的简化 2</span></pre></td></tr><tr><td data-num="51"></td><td><pre>		<span class="token keyword">let</span> <span class="token function-variable function">sum3</span><span class="token operator">=</span><span class="token parameter">n1</span><span class="token operator">=></span>n1<span class="token operator">+</span><span class="token number">6</span><span class="token punctuation">;</span>  <span class="token comment">// 只有一个参数，可以简化括号</span></pre></td></tr><tr><td data-num="52"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum3</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>		</pre></td></tr><tr><td data-num="54"></td><td><pre>		<span class="token comment">// 01 箭头函数中的 this 指向，箭头函数指向的是上下文的 this</span></pre></td></tr><tr><td data-num="55"></td><td><pre>		<span class="token keyword">let</span> <span class="token function-variable function">sum5</span><span class="token operator">=</span><span class="token parameter">n1</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//window</span></pre></td></tr><tr><td data-num="57"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>		<span class="token function">sum5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>		</pre></td></tr><tr><td data-num="60"></td><td><pre>		<span class="token keyword">let</span> father<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>			<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'爸爸'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="62"></td><td><pre>			<span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span></pre></td></tr><tr><td data-num="63"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>		<span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"fn2的执行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>			<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"箭头函数的执行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 箭头函数指向的是上下文的 this，在这里就是上两行那个 this</span></pre></td></tr><tr><td data-num="70"></td><td><pre>				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token operator">+</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="72"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="73"></td><td><pre>		</pre></td></tr><tr><td data-num="74"></td><td><pre>		<span class="token keyword">let</span> fn3<span class="token operator">=</span><span class="token function">fn2</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>father<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//call 改变 this 指向便调用函数</span></pre></td></tr><tr><td data-num="75"></td><td><pre>		<span class="token function">fn3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 执行箭头函数</span></pre></td></tr><tr><td data-num="76"></td><td><pre>		</pre></td></tr><tr><td data-num="77"></td><td><pre>		<span class="token comment">// 02 箭头函数面试题</span></pre></td></tr><tr><td data-num="78"></td><td><pre>		<span class="token keyword">var</span> obj<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="79"></td><td><pre>			<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'gg'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="80"></td><td><pre>			<span class="token function-variable function">say</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 对象本身没有 this 指向</span></pre></td></tr><tr><td data-num="82"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="83"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="84"></td><td><pre>	  obj<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//undefined</span></pre></td></tr><tr><td data-num="85"></td><td><pre>	</pre></td></tr><tr><td data-num="86"></td><td><pre>	<span class="token comment">// 通过 call 改变 this 指向便可以</span></pre></td></tr><tr><td data-num="87"></td><td><pre>	 <span class="token keyword">function</span> <span class="token function">fn4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="88"></td><td><pre>		 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="89"></td><td><pre>	 <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="90"></td><td><pre>	 <span class="token function">fn4</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//gg</span></pre></td></tr><tr><td data-num="91"></td><td><pre>	</pre></td></tr><tr><td data-num="92"></td><td><pre>	 <span class="token comment">// 习题</span></pre></td></tr><tr><td data-num="93"></td><td><pre>	 <span class="token keyword">let</span> btn<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="94"></td><td><pre>	 <span class="token comment">//btn.onclick = () => &#123;console.log (this);&#125; //window  上文 this 就是 window</span></pre></td></tr><tr><td data-num="95"></td><td><pre>	  btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//btn  函数中的 this 指向调用者</span></pre></td></tr><tr><td data-num="96"></td><td><pre>	  </pre></td></tr><tr><td data-num="97"></td><td><pre>	  <span class="token comment">//3 - 剩余参数...args  在箭头函数中不能用 argument</span></pre></td></tr><tr><td data-num="98"></td><td><pre>	  <span class="token keyword">const</span> <span class="token function-variable function">fn6</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="99"></td><td><pre>		  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1</span></pre></td></tr><tr><td data-num="100"></td><td><pre>		  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[2,3,4]</span></pre></td></tr><tr><td data-num="101"></td><td><pre>		  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2,3,4</span></pre></td></tr><tr><td data-num="102"></td><td><pre>		  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"-----------"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="103"></td><td><pre>	  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="104"></td><td><pre>	  <span class="token function">fn6</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="105"></td><td><pre> </pre></td></tr><tr><td data-num="106"></td><td><pre> </pre></td></tr><tr><td data-num="107"></td><td><pre>     <span class="token comment">// 例子：求和</span></pre></td></tr><tr><td data-num="108"></td><td><pre>	<span class="token keyword">const</span> <span class="token function-variable function">s</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="109"></td><td><pre>		<span class="token keyword">let</span> t<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="110"></td><td><pre>		args<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=></span>t<span class="token operator">+=</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 箭头函数简化写法 一个参数不写括号  一个内容省略 return</span></pre></td></tr><tr><td data-num="111"></td><td><pre>		<span class="token keyword">return</span> t<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="112"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="113"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">s</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="114"></td><td><pre>	</pre></td></tr><tr><td data-num="115"></td><td><pre>	</pre></td></tr><tr><td data-num="116"></td><td><pre>    <span class="token comment">// 4 - 解构和剩余参数结合运用</span></pre></td></tr><tr><td data-num="117"></td><td><pre>	<span class="token keyword">let</span> family<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'lhm'</span><span class="token punctuation">,</span><span class="token string">'ljt'</span><span class="token punctuation">,</span><span class="token string">'ljp'</span><span class="token punctuation">,</span><span class="token string">'ljx'</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="118"></td><td><pre>	<span class="token keyword">let</span> <span class="token punctuation">[</span>s1<span class="token punctuation">,</span><span class="token operator">...</span>s2<span class="token punctuation">]</span><span class="token operator">=</span>family<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="119"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//lhm</span></pre></td></tr><tr><td data-num="120"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//['ljt','ljp','ljx'];</span></pre></td></tr><tr><td data-num="121"></td><td><pre>	</pre></td></tr><tr><td data-num="122"></td><td><pre>	<span class="token comment">//5 - 扩展运算符 拆分成逗号分割的参数序列</span></pre></td></tr><tr><td data-num="123"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">...</span>family<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//lhm ljt ljp ljx</span></pre></td></tr><tr><td data-num="124"></td><td><pre>	<span class="token comment">// 扩展运算符的运用  数组合并</span></pre></td></tr><tr><td data-num="125"></td><td><pre>	<span class="token keyword">let</span> arr1<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="126"></td><td><pre>	<span class="token keyword">let</span> arr2<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="127"></td><td><pre>	<span class="token keyword">let</span> arr3<span class="token operator">=</span><span class="token punctuation">[</span><span class="token operator">...</span>arr1<span class="token punctuation">,</span><span class="token operator">...</span>arr2<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 或者 arr1.push (...arr2); console.log (arr1);</span></pre></td></tr><tr><td data-num="128"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="129"></td><td><pre>	</pre></td></tr><tr><td data-num="130"></td><td><pre>	<span class="token comment">// 6-Array 扩展方法</span></pre></td></tr><tr><td data-num="131"></td><td><pre>	<span class="token comment">// 00 Array.from 将类数组！！或可以遍历的对象！！转换为数组 如下形式的数组</span></pre></td></tr><tr><td data-num="132"></td><td><pre>	<span class="token keyword">var</span>  obj6 <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="133"></td><td><pre>		<span class="token string-property property">"0"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="134"></td><td><pre>		<span class="token string-property property">"1"</span><span class="token operator">:</span><span class="token number">200</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="135"></td><td><pre>		<span class="token string-property property">"length"</span><span class="token operator">:</span><span class="token number">2</span></pre></td></tr><tr><td data-num="136"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="137"></td><td><pre>	<span class="token keyword">var</span> newArr6<span class="token operator">=</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>obj6<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="138"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArr6<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="139"></td><td><pre>	<span class="token comment">// 转换为数组且遍历</span></pre></td></tr><tr><td data-num="140"></td><td><pre>	<span class="token keyword">var</span> newArr7<span class="token operator">=</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>obj6<span class="token punctuation">,</span><span class="token parameter">item</span><span class="token operator">=></span>item<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="141"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArr7<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="142"></td><td><pre>	<span class="token comment">//01 Array.find () 进行查找 找出第一个符合条件的成员  没有返回 undefined</span></pre></td></tr><tr><td data-num="143"></td><td><pre>	<span class="token keyword">let</span> arr7<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="144"></td><td><pre>		<span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="145"></td><td><pre>		<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'lhm'</span></pre></td></tr><tr><td data-num="146"></td><td><pre>	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="147"></td><td><pre>		<span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="148"></td><td><pre>		<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'ljt'</span></pre></td></tr><tr><td data-num="149"></td><td><pre>	<span class="token punctuation">&#125;</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="150"></td><td><pre>	</pre></td></tr><tr><td data-num="151"></td><td><pre>	<span class="token keyword">let</span> target<span class="token operator">=</span>arr7<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=></span>item<span class="token punctuation">.</span>id<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="152"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&#123;id:2,name:'ljt'&#125;</span></pre></td></tr><tr><td data-num="153"></td><td><pre>	</pre></td></tr><tr><td data-num="154"></td><td><pre>	<span class="token comment">// 02 findIndex 返回符合条件的索引</span></pre></td></tr><tr><td data-num="155"></td><td><pre>	<span class="token keyword">let</span> index<span class="token operator">=</span>arr7<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=></span>item<span class="token punctuation">.</span>name<span class="token operator">==</span><span class="token string">'ljt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="156"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="157"></td><td><pre>	</pre></td></tr><tr><td data-num="158"></td><td><pre>	<span class="token comment">// 03 includes 方法 true 包含 false 不包含 判断数组中是否有这个值</span></pre></td></tr><tr><td data-num="159"></td><td><pre>	<span class="token keyword">let</span> arr8<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="160"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr8<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span></pre></td></tr><tr><td data-num="161"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr8<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span></pre></td></tr><tr><td data-num="162"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr8<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false</span></pre></td></tr><tr><td data-num="163"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"----------"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="164"></td><td><pre>	<span class="token comment">// 8-Set 数据结构  类数组 但是没有重复的值 常在搜索历史中使用</span></pre></td></tr><tr><td data-num="165"></td><td><pre>	<span class="token comment">// 创建</span></pre></td></tr><tr><td data-num="166"></td><td><pre>	<span class="token keyword">let</span> ss2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="167"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ss2<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//0</span></pre></td></tr><tr><td data-num="168"></td><td><pre>	<span class="token keyword">let</span> ss3<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="169"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ss3<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2</span></pre></td></tr><tr><td data-num="170"></td><td><pre>	<span class="token comment">// 常用数组去重</span></pre></td></tr><tr><td data-num="171"></td><td><pre>	<span class="token keyword">let</span> ss4<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="172"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ss4<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2</span></pre></td></tr><tr><td data-num="173"></td><td><pre>	<span class="token keyword">let</span> newArr4<span class="token operator">=</span><span class="token punctuation">[</span><span class="token operator">...</span>ss4<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="174"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArr4<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="175"></td><td><pre>	<span class="token comment">// Set 方法 add delete has clear 遍历 forEach</span></pre></td></tr><tr><td data-num="176"></td><td><pre>	ss4<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'e'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="177"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ss4<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4</span></pre></td></tr><tr><td data-num="178"></td><td><pre>	ss4<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 返回布尔值 代表是删除成功</span></pre></td></tr><tr><td data-num="179"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ss4<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3</span></pre></td></tr><tr><td data-num="180"></td><td><pre>	ss4<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 返回布尔值 代表是否拥有</span></pre></td></tr><tr><td data-num="181"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ss4<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="182"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Set遍历"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="183"></td><td><pre>	ss4<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="184"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="185"></td><td><pre>	<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="186"></td><td><pre>	ss4<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 没有返回值</span></pre></td></tr><tr><td data-num="187"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"set清除"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="188"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ss4<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//0</span></pre></td></tr><tr><td data-num="189"></td><td><pre>	</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="190"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="191"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>es6</tag>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>认识函数</title>
    <url>/2020/09/18/%E8%AE%A4%E8%AF%86%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>函数<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>发送短信1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>发送短信2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>发送短信3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">	</pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token comment">// 1 - 创建函数方式</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token comment">// 01 自定义函数</span></pre></td></tr><tr><td data-num="14"></td><td><pre>		<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>		<span class="token comment">// 02 函数体方式 </span></pre></td></tr><tr><td data-num="16"></td><td><pre>		<span class="token keyword">var</span> <span class="token function-variable function">fn</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>		<span class="token comment">// 03 创建对象方式</span></pre></td></tr><tr><td data-num="18"></td><td><pre>		<span class="token comment">// 所有函数都是 Function 的实例</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token keyword">var</span> fn<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'console.log(a+b)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>		<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用</span></pre></td></tr><tr><td data-num="21"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>__proto__<span class="token operator">===</span><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>		<span class="token comment">// 所有的函数都是 Function 的实例 对象</span></pre></td></tr><tr><td data-num="24"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>		</pre></td></tr><tr><td data-num="26"></td><td><pre>		<span class="token comment">// 2 - 函数的调用</span></pre></td></tr><tr><td data-num="27"></td><td><pre>		<span class="token comment">//01 普通函数调用 fn () fn.call (o)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>		<span class="token comment">//02 对象函数  ldh.sayHi ();</span></pre></td></tr><tr><td data-num="29"></td><td><pre>		<span class="token comment">//03 构造函数  new Star ()</span></pre></td></tr><tr><td data-num="30"></td><td><pre>		<span class="token comment">//04 绑定事件函数  btn.onclick=function ()&#123;&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>		<span class="token comment">//05 定时器函数 setIterval (function ()&#123;&#125;,1000);</span></pre></td></tr><tr><td data-num="32"></td><td><pre>		<span class="token comment">//06 立即执行函数 (function ()&#123;console.log ("立即执行，到达人生巅峰！")&#125;)()</span></pre></td></tr><tr><td data-num="33"></td><td><pre>		<span class="token comment">// (function ()&#123;console.log ("立即执行，到达人生巅峰！")&#125;)()</span></pre></td></tr><tr><td data-num="34"></td><td><pre>		</pre></td></tr><tr><td data-num="35"></td><td><pre>		<span class="token comment">// 3-this 指向问题  	一般情况下指向函数调用者</span></pre></td></tr><tr><td data-num="36"></td><td><pre>		<span class="token comment">//01 普通函数调用 </span></pre></td></tr><tr><td data-num="37"></td><td><pre>		<span class="token comment">//fn ()  this 指向 window</span></pre></td></tr><tr><td data-num="38"></td><td><pre>		<span class="token comment">//fn.call (o)  this 指向对象 o</span></pre></td></tr><tr><td data-num="39"></td><td><pre>		<span class="token comment">//02 对象函数  ldh.sayHi ();  this 指向实例对象 ldh</span></pre></td></tr><tr><td data-num="40"></td><td><pre>		<span class="token comment">//03 构造函数  new Star ()  指向实力对象  eg:zxy=new Star ("" 张学友) this 指向 zxy</span></pre></td></tr><tr><td data-num="41"></td><td><pre>		<span class="token comment">//04 绑定事件函数  btn.onclick=function ()&#123;&#125;  this 指向 btn 指向函数调用者</span></pre></td></tr><tr><td data-num="42"></td><td><pre>		<span class="token comment">//05 定时器函数 setIterval (function ()&#123;&#125;,1000);  this 指向 window</span></pre></td></tr><tr><td data-num="43"></td><td><pre>		<span class="token comment">//06 立即执行函数 (function ()&#123;console.log ("立即执行，到达人生巅峰！")&#125;)()  this 指向 window</span></pre></td></tr><tr><td data-num="44"></td><td><pre>		</pre></td></tr><tr><td data-num="45"></td><td><pre>		 <span class="token comment">// 4 - 改变 this 指向</span></pre></td></tr><tr><td data-num="46"></td><td><pre>		 <span class="token comment">// 01 call 方法  call 调用函数  改变 this 指向 实现继承</span></pre></td></tr><tr><td data-num="47"></td><td><pre>		 <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>			 <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'lhm'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="49"></td><td><pre>			 <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span></pre></td></tr><tr><td data-num="50"></td><td><pre>		 <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>		 <span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>			 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>			 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">'----'</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>			 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token operator">+</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>		 <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>		 <span class="token function">fn2</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>		 <span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>			 <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>			 <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span>age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>		 <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>		 <span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sing</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>			 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">'会唱歌！'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="63"></td><td><pre>		 <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>		 <span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>			 <span class="token comment">// 实现继承</span></pre></td></tr><tr><td data-num="66"></td><td><pre>			 <span class="token function">Father</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>		 <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>		  <span class="token comment">// 继承父亲 prototype 方法</span></pre></td></tr><tr><td data-num="69"></td><td><pre>		  <span class="token class-name">Son</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>		  <span class="token class-name">Son</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token operator">=</span>Son<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre>		 <span class="token keyword">let</span> son<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token string">"刘德华"</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="72"></td><td><pre>		 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>son<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">'--'</span><span class="token operator">+</span>son<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="73"></td><td><pre>		 son<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="74"></td><td><pre>		 <span class="token comment">// 02 apply 方法  跟 call 方法一样  要求第二个参数是一个数组</span></pre></td></tr><tr><td data-num="75"></td><td><pre>		 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"apply方法"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="76"></td><td><pre>		 <span class="token keyword">let</span> arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span> <span class="token comment">// 传多了就接收前面的</span></pre></td></tr><tr><td data-num="77"></td><td><pre>		 <span class="token function">fn2</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="78"></td><td><pre>		 <span class="token comment">//apply 内置应用</span></pre></td></tr><tr><td data-num="79"></td><td><pre>		 <span class="token keyword">let</span> max<span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>Math<span class="token punctuation">,</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="80"></td><td><pre>		 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>max<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>		 <span class="token comment">// 03 bind 方法  bind 捆绑 改变 this 指向   跟 call 一样，但是 call 可以调用函数 bind 不可以调用函数</span></pre></td></tr><tr><td data-num="82"></td><td><pre>		 <span class="token keyword">let</span> a<span class="token operator">=</span><span class="token function">fn2</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 不调用 但是返回一个新函数，a 就是改变 this 指向产生的新函数</span></pre></td></tr><tr><td data-num="83"></td><td><pre>		 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"bind方法："</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="84"></td><td><pre>	     <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="85"></td><td><pre>		 <span class="token comment">//bind 方法应用 实际开发用的最多</span></pre></td></tr><tr><td data-num="86"></td><td><pre>		 <span class="token comment">// 有的函数不想立即调用，但是又想改变 this 指向</span></pre></td></tr><tr><td data-num="87"></td><td><pre>		 <span class="token comment">// 发送短信案例 点击之后禁用 3s 才能点击 让定时器自己调用</span></pre></td></tr><tr><td data-num="88"></td><td><pre>		 <span class="token keyword">var</span> btns<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="89"></td><td><pre>		 btns<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="90"></td><td><pre>			 item<span class="token punctuation">.</span><span class="token function-variable function">onclick</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="91"></td><td><pre>				 <span class="token keyword">this</span><span class="token punctuation">.</span>disabled<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="92"></td><td><pre>				 <span class="token comment">//bind 不会立即调用 让 setTimeout 调用 但成功改变 this 指向</span></pre></td></tr><tr><td data-num="93"></td><td><pre>				 <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="94"></td><td><pre>					<span class="token keyword">this</span><span class="token punctuation">.</span>disabled<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="95"></td><td><pre>				 <span class="token punctuation">&#125;</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="96"></td><td><pre>			 <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="97"></td><td><pre>		 <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="98"></td><td><pre>		<span class="token comment">////call apply bind 总结</span></pre></td></tr><tr><td data-num="99"></td><td><pre>		<span class="token comment">//call apply 基本一样，call 经常做继承 apply 传参必须是数组，经常跟数组相关</span></pre></td></tr><tr><td data-num="100"></td><td><pre>		<span class="token comment">//bind 不会调用函数 fn.bind () 不调用  跟定时器经常相关</span></pre></td></tr><tr><td data-num="101"></td><td><pre>		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="102"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="103"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>函数</tag>
      </tags>
  </entry>
  <entry>
    <title>递归函数及深浅拷贝</title>
    <url>/2020/10/30/%E9%80%92%E5%BD%92%E5%87%BD%E6%95%B0%E5%8F%8A%E6%B7%B1%E6%B5%85%E6%8B%B7%E8%B4%9D/</url>
    <content><![CDATA[<h3 id="深拷贝-浅拷贝"><a class="anchor" href="#深拷贝-浅拷贝">#</a> 深拷贝 &amp; 浅拷贝</h3>
<ul>
<li>浅拷贝：仅仅是复制了引用，彼此之间的操作会互相影响，相同地址</li>
<li>深拷贝：在堆中重新分配内存，不同的地址，相同的值，互不影响</li>
</ul>
<p>总的来说，深浅拷贝的主要区别就是：复制的是引用还是复制的是实例</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>递归函数及深浅拷贝<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>		</pre></td></tr><tr><td data-num="9"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="10"></td><td><pre>		<span class="token comment">// 递归函数：一个函数在内部调用本身，我们就说这个函数是递归函数，自己调用自己，防止栈溢出，一定要加上 return;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token comment">// 打印 6 句话</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token keyword">let</span> num<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"递归打印"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>			<span class="token keyword">if</span><span class="token punctuation">(</span>num<span class="token operator">&lt;=</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>				num<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>				<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>			<span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>		<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>		<span class="token comment">// 应用：利用递归求阶乘</span></pre></td></tr><tr><td data-num="24"></td><td><pre>		<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>			<span class="token comment">// 递归必须加 return 实行退出</span></pre></td></tr><tr><td data-num="26"></td><td><pre>			<span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>			<span class="token keyword">return</span>  n<span class="token operator">*</span><span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>		<span class="token comment">// 递归求斐波那契数列（兔子数列）1 1 2 3 5 8 13 21 ... 前两项的和就是后一项</span></pre></td></tr><tr><td data-num="31"></td><td><pre>		<span class="token comment">// 01 用户输入一个数字，就可以求出是这个数字对应的兔子序列  输入 3 打印 3 对应的序列值 2</span></pre></td></tr><tr><td data-num="32"></td><td><pre>		<span class="token keyword">let</span> start<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>		<span class="token keyword">let</span> sum<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>		<span class="token keyword">function</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>			<span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">2</span><span class="token operator">||</span>n<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>			<span class="token keyword">return</span> <span class="token function">g</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">g</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"递归数列："</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="39"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">g</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>	  <span class="token comment">// 02 应用 根据 id 返回数据对象</span></pre></td></tr><tr><td data-num="41"></td><td><pre>	  <span class="token keyword">var</span> data<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>		  <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="43"></td><td><pre>		  <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'家电'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="44"></td><td><pre>		  <span class="token literal-property property">goods</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>			  <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">11</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="46"></td><td><pre>			  <span class="token literal-property property">gname</span><span class="token operator">:</span><span class="token string">'冰箱'</span></pre></td></tr><tr><td data-num="47"></td><td><pre>		  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>			  <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="49"></td><td><pre>			  <span class="token literal-property property">gname</span><span class="token operator">:</span><span class="token string">'洗衣机'</span></pre></td></tr><tr><td data-num="50"></td><td><pre>		  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>			  <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">13</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="52"></td><td><pre>			  <span class="token literal-property property">gname</span><span class="token operator">:</span><span class="token string">'服饰'</span></pre></td></tr><tr><td data-num="53"></td><td><pre>		  <span class="token punctuation">&#125;</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="54"></td><td><pre>	  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="55"></td><td><pre>	  <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>	  		  <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="57"></td><td><pre>	  		  <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'哈哈'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="58"></td><td><pre>	  		  <span class="token literal-property property">goods</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>	  			  <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">21</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="60"></td><td><pre>	  			  <span class="token literal-property property">gname</span><span class="token operator">:</span><span class="token string">'冰箱2'</span></pre></td></tr><tr><td data-num="61"></td><td><pre>	  		  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>	  			  <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">22</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="63"></td><td><pre>	  			  <span class="token literal-property property">gname</span><span class="token operator">:</span><span class="token string">'洗衣机2'</span></pre></td></tr><tr><td data-num="64"></td><td><pre>	  		  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>	  			  <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">23</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="66"></td><td><pre>	  			  <span class="token literal-property property">gname</span><span class="token operator">:</span><span class="token string">'服饰2'</span></pre></td></tr><tr><td data-num="67"></td><td><pre>	  		  <span class="token punctuation">&#125;</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="68"></td><td><pre>	  <span class="token punctuation">&#125;</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="69"></td><td><pre>	 <span class="token keyword">var</span> ooo<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>	  <span class="token keyword">function</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span>id</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="71"></td><td><pre>		<span class="token comment">// 遍历数组</span></pre></td></tr><tr><td data-num="72"></td><td><pre>		arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="73"></td><td><pre>			<span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>id<span class="token operator">==</span>id<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="74"></td><td><pre>				ooo<span class="token operator">=</span>item<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="75"></td><td><pre>				<span class="token keyword">return</span> item<span class="token punctuation">;</span>  <span class="token comment">// 赋值给 else if 的递归结果</span></pre></td></tr><tr><td data-num="76"></td><td><pre>				<span class="token comment">// 利用递归，遍历里层数据  如果外面没有的话</span></pre></td></tr><tr><td data-num="77"></td><td><pre>			<span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>goods <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>goods<span class="token punctuation">.</span>length<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="78"></td><td><pre>					ooo<span class="token operator">=</span><span class="token function">getId</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>goods<span class="token punctuation">,</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="79"></td><td><pre>				<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="80"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>		<span class="token keyword">return</span> ooo<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="82"></td><td><pre>	  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="83"></td><td><pre>	    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"根据id返回对象:"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="84"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getId</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="85"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getId</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="86"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getId</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="87"></td><td><pre>		</pre></td></tr><tr><td data-num="88"></td><td><pre>		<span class="token comment">// 3 - 浅拷贝 拷贝一层  里面的 goods 拷贝的是地址 导致两个地址一样</span></pre></td></tr><tr><td data-num="89"></td><td><pre>		<span class="token keyword">var</span> b<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="90"></td><td><pre>	   <span class="token comment">// 浅拷贝方法 1</span></pre></td></tr><tr><td data-num="91"></td><td><pre>		<span class="token comment">// for(let key in data)&#123;</span></pre></td></tr><tr><td data-num="92"></td><td><pre>		<span class="token comment">// 	b[key]=data[key];</span></pre></td></tr><tr><td data-num="93"></td><td><pre>		<span class="token comment">// &#125;</span></pre></td></tr><tr><td data-num="94"></td><td><pre>		<span class="token comment">// 浅拷贝方法 2</span></pre></td></tr><tr><td data-num="95"></td><td><pre>		Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="96"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"b拷贝"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="97"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>  </pre></td></tr><tr><td data-num="98"></td><td><pre>		b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>goods<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>gname<span class="token operator">=</span><span class="token string">"呵呵呵浅拷贝地址相同改名"</span><span class="token punctuation">;</span>  <span class="token comment">// 导致 b 和 data 都改了</span></pre></td></tr><tr><td data-num="99"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="100"></td><td><pre>		</pre></td></tr><tr><td data-num="101"></td><td><pre>		<span class="token comment">//04 深拷贝  将拷贝的数据开辟另外的空间</span></pre></td></tr><tr><td data-num="102"></td><td><pre>		<span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="103"></td><td><pre>			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token operator">!=</span><span class="token string">"object"</span><span class="token operator">||</span><span class="token operator">!</span>obj<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="104"></td><td><pre>			<span class="token keyword">let</span> newObj<span class="token operator">=</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="105"></td><td><pre>			<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="106"></td><td><pre>				<span class="token comment">// 拥有 key 值</span></pre></td></tr><tr><td data-num="107"></td><td><pre>			   <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="108"></td><td><pre>				   <span class="token comment">// 进行递归  数组对象就递归 deepClone 再次查询 简单类型直接赋值</span></pre></td></tr><tr><td data-num="109"></td><td><pre>				   newObj<span class="token operator">=</span><span class="token keyword">typeof</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token operator">==</span><span class="token string">"object"</span><span class="token operator">?</span><span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="110"></td><td><pre>			   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="111"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="112"></td><td><pre>			<span class="token keyword">return</span> newObj<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="113"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="114"></td><td><pre>		c<span class="token operator">=</span><span class="token function">deepClone</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="115"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"深拷贝"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="116"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="117"></td><td><pre>		c<span class="token punctuation">.</span>goods<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>gname<span class="token operator">=</span><span class="token string">"深拷贝修改"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="118"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 深拷贝没有修改到原先的数据</span></pre></td></tr><tr><td data-num="119"></td><td><pre>		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="120"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="121"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>闭包</title>
    <url>/2020/11/20/%E9%97%AD%E5%8C%85/</url>
    <content><![CDATA[<h1 id="学习笔记"><a class="anchor" href="#学习笔记">#</a> 学习笔记</h1>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>高阶和闭包<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>内容1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>内容2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>内容3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>内容4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="15"></td><td><pre>			<span class="token comment">// 1 - 高阶函数是对其它函数进行操作的函数</span></pre></td></tr><tr><td data-num="16"></td><td><pre>			<span class="token comment">//01 高阶函数：把函数作为参数</span></pre></td></tr><tr><td data-num="17"></td><td><pre>			<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>				callback <span class="token operator">&amp;&amp;</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>			<span class="token function">fn</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"高阶函数！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>			<span class="token comment">//02 高阶函数：返回一个函数</span></pre></td></tr><tr><td data-num="24"></td><td><pre>			<span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>				<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"高阶函数的返回"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>				<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>			<span class="token keyword">let</span> fn2 <span class="token operator">=</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>			<span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre> </pre></td></tr><tr><td data-num="32"></td><td><pre>			<span class="token comment">// 2 - 闭包 Closure 有权访问另一个作用域中变量的函数。 --javaScript 高级程序设计</span></pre></td></tr><tr><td data-num="33"></td><td><pre>			<span class="token comment">// 简单理解  一个作用域可以访问另外一个函数内部的局部变量</span></pre></td></tr><tr><td data-num="34"></td><td><pre>			<span class="token keyword">function</span> <span class="token function">fn4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>				<span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>				<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"闭包拿到的值"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>					num<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>				<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>			<span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token function">fn4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>			<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>			<span class="token comment">// 闭包存储了 num 没有释放</span></pre></td></tr><tr><td data-num="45"></td><td><pre>			<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>			<span class="token comment">// 3 - 闭包的运用</span></pre></td></tr><tr><td data-num="47"></td><td><pre>			<span class="token comment">// 点击 li 得到索引不用再添加 index 属性</span></pre></td></tr><tr><td data-num="48"></td><td><pre>			<span class="token keyword">let</span> lis <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"ul li"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>		 <span class="token comment">// 闭包形式</span></pre></td></tr><tr><td data-num="50"></td><td><pre>			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lis<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>			 <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>					lis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>						console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="54"></td><td><pre>					<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>			 <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="56"></td><td><pre> </pre></td></tr><tr><td data-num="57"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>			<span class="token comment">// 闭包应用 02 2s 之后打印 li 的内容 异步任务不会立即执行，放到任务队列里面，即使是 0 也要等待</span></pre></td></tr><tr><td data-num="59"></td><td><pre>			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lis<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>				<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>					<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>						console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>					<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="64"></td><td><pre>				<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="65"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>			</pre></td></tr><tr><td data-num="67"></td><td><pre>			<span class="token comment">// 闭包应用 03 计算打车价格  起步价 13（3 公里内） 之后一公里 5 元 用户输入公里数 拥堵多收 10 元</span></pre></td></tr><tr><td data-num="68"></td><td><pre>			<span class="token keyword">var</span> car<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">distance</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>		    <span class="token keyword">let</span> start<span class="token operator">=</span><span class="token number">13</span><span class="token punctuation">;</span><span class="token comment">// 起步价  局部变量</span></pre></td></tr><tr><td data-num="70"></td><td><pre>			<span class="token keyword">let</span> total<span class="token punctuation">;</span> <span class="token comment">// 总价 局部变量</span></pre></td></tr><tr><td data-num="71"></td><td><pre>			<span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="72"></td><td><pre>				<span class="token function-variable function">normal</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">distance</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="73"></td><td><pre>					<span class="token keyword">if</span><span class="token punctuation">(</span>distance<span class="token operator">&lt;=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="74"></td><td><pre>						total<span class="token operator">=</span>start<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="75"></td><td><pre>					<span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="76"></td><td><pre>						total<span class="token operator">=</span>start<span class="token operator">+</span><span class="token number">5</span><span class="token operator">*</span><span class="token punctuation">(</span>distance<span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="77"></td><td><pre>					<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="78"></td><td><pre>					<span class="token keyword">return</span> total<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="79"></td><td><pre>				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="80"></td><td><pre>				<span class="token function-variable function">yd</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">flag</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>					<span class="token keyword">return</span> flag<span class="token operator">?</span>total<span class="token operator">+</span><span class="token number">10</span><span class="token operator">:</span>total<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="82"></td><td><pre>				<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="83"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="84"></td><td><pre>			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="85"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"车费："</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="86"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>car<span class="token punctuation">.</span><span class="token function">normal</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="87"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>car<span class="token punctuation">.</span><span class="token function">yd</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="88"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>car<span class="token punctuation">.</span><span class="token function">yd</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="89"></td><td><pre>			</pre></td></tr><tr><td data-num="90"></td><td><pre>			<span class="token comment">// 思考题</span></pre></td></tr><tr><td data-num="91"></td><td><pre>			<span class="token keyword">let</span> name<span class="token operator">=</span><span class="token string">"the window"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="92"></td><td><pre>			<span class="token keyword">let</span> obj1<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="93"></td><td><pre>				<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'myObj1'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="94"></td><td><pre>				<span class="token function-variable function">getNameTest</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="95"></td><td><pre>					<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="96"></td><td><pre>						<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="97"></td><td><pre>					<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="98"></td><td><pre>				<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="99"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="100"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">.</span><span class="token function">getNameTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="101"></td><td><pre>			</pre></td></tr><tr><td data-num="102"></td><td><pre>			<span class="token keyword">let</span> obj2<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="103"></td><td><pre>				<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'myObj2'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="104"></td><td><pre>				<span class="token function-variable function">getNameTest</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="105"></td><td><pre>					<span class="token keyword">let</span> that<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="106"></td><td><pre>					<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="107"></td><td><pre>						<span class="token keyword">return</span> that<span class="token punctuation">.</span>name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="108"></td><td><pre>					<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="109"></td><td><pre>				<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="110"></td><td><pre>			<span class="token punctuation">&#125;</span>	</pre></td></tr><tr><td data-num="111"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj2<span class="token punctuation">.</span><span class="token function">getNameTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="112"></td><td><pre>		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="113"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="114"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h1 id="拓展理解"><a class="anchor" href="#拓展理解">#</a> 拓展理解</h1>
<h2 id="使用闭包的其他几类场景"><a class="anchor" href="#使用闭包的其他几类场景">#</a> 使用闭包的其他几类场景</h2>
<p>1、函数作为参数</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">'Rocky'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">'foo'</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">function</span> <span class="token function">fo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">return</span> fo</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">'f'</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token function">p</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token function">f</span><span class="token punctuation">(</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// foo</span></pre></td></tr></table></figure><p>先看 <code>f(foo())</code>  里面的 <code>foo()</code> ，它执行完之后，里面的变量 <code>a</code>  没有被回收，因为被 <code>fo()</code>  引用着，所以 <code>foo()</code>  与其词法环境就是一个闭包。</p>
<p>2、使用回调函数就是在使用闭包</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>window<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Rocky'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">timeHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>3、节流与防抖</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 防抖</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> wait <span class="token operator">=</span> <span class="token number">50</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">let</span> timer</pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>wait<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 节流</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">let</span> canRun <span class="token operator">=</span> <span class="token boolean">true</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>canRun<span class="token punctuation">)</span> <span class="token keyword">return</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        canRun <span class="token operator">=</span> <span class="token boolean">false</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token function">setTimeout</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>            canRun <span class="token operator">=</span> <span class="token boolean">true</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="使用闭包需要注意什么"><a class="anchor" href="#使用闭包需要注意什么">#</a> 使用闭包需要注意什么</h2>
<blockquote>
<p>容易导致内存泄漏。闭包会携带包含其它的函数作用域，因此会比其他函数占用更多的内存。过度使用闭包会导致内存占用过多，所以要谨慎使用闭包。</p>
</blockquote>
<h2 id="闭包的内存泄漏"><a class="anchor" href="#闭包的内存泄漏">#</a> 闭包的内存泄漏</h2>
<p>在文章开始我们提到了：<strong>不正当地使用闭包可能会造成内存泄漏。</strong></p>
<p>先看以下两个例子：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">let</span> test <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token string">'rocky'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Rocky'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">let</span> fn1Child <span class="token operator">=</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token function">fn1Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>上例是一个闭包，但是它造成内存泄漏了吗？并没有，因为返回的函数中并没有对  <code>fn1</code>  函数内部的引用，也就是说，函数  <code>fn1</code>  内部的  <code>test</code>  变量完全是可以被回收的，那我们再来看：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">let</span> test <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token string">'rocky'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">return</span> test</pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">let</span> fn2Child <span class="token operator">=</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token function">fn2Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>显然它也是闭包，并且因为  <code>return</code>  的函数中存在函数  <code>fn2</code>  中的  <code>test</code>  变量引用，所以  <code>test</code>  并不会被回收，也就造成了内存泄漏。</p>
<p>那么怎样解决呢？</p>
<p>其实在函数调用后，把外部的引用关系置空就好了，如下：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">let</span> test <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token string">'rocky'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">return</span> test</pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">let</span> fn2Child <span class="token operator">=</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token function">fn2Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>fn2Child <span class="token operator">=</span> <span class="token keyword">null</span>  <span class="token comment">// 置空</span></pre></td></tr></table></figure><p>综上，我们以后就不要再说闭包会造成内存泄漏啦！</p>
<p>应该说成：<strong>不正当地使用闭包可能会造成内存泄漏。</strong></p>
<h2 id="怎么检查内存泄露"><a class="anchor" href="#怎么检查内存泄露">#</a> 怎么检查内存泄露</h2>
<ul>
<li>performance 面板 和 memory 面板可以找到泄露的现象和位置</li>
</ul>
<p>详细可以查看：<span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82ODQ0OTA0MDQ4OTYxNzgxNzc0I2NvbW1lbnQ=">js 内存泄漏场景、如何监控以及分析</span></p>
<h2 id="闭包的作用"><a class="anchor" href="#闭包的作用">#</a> 闭包的作用</h2>
<p>OK，最后来概括一下闭包的作用</p>
<ul>
<li>保护函数的私有变量不受外部的干扰。形成不销毁的栈内存。</li>
<li>保存，把一些函数内的值保存下来。闭包可以实现方法和属性的私有化</li>
</ul>
<h2 id="更多精彩"><a class="anchor" href="#更多精彩">#</a> 更多精彩</h2>
<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTM3NDY5MjIyMjUxNTYwOTkw">JS 闭包经典使用场景和含闭包必刷题</span></p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>函数</tag>
        <tag>闭包</tag>
      </tags>
  </entry>
  <entry>
    <title>ES6</title>
    <url>/2022/05/08/ES6/</url>
    <content><![CDATA[<h1 id="前提"><a class="anchor" href="#前提">#</a> 前提</h1>
<pre><code>我决定再次好好学习一番。
</code></pre>
<h1 id="含义"><a class="anchor" href="#含义">#</a> 含义</h1>
<p>​       <code> ES</code>  全称 <code>ECMAScript</code> , 是脚本语言的规范，平时编写的 JavaScript 是 ECMA 一种体现，所以 ES 新特性其实指的是 JavaScript 的新特。<strong>所以 ES 新特性指的就是 JavaScript 的新特性。</strong></p>
<ul>
<li>ECMA: 欧洲计算机制造商协会</li>
</ul>
<h1 id="原因"><a class="anchor" href="#原因">#</a> 原因</h1>
<ul>
<li>ES6 的版本变动内容最多，具有里程碑意义。</li>
<li>ES6 加入许多新的语法特性，编程实现更加简单、高效</li>
<li>ES6 前端发展趋势，就业必备技能</li>
</ul>
<h1 id="let"><a class="anchor" href="#let">#</a> let</h1>
<ul>
<li>变量不能重复声明</li>
<li>块级作用域，只在代码块有效</li>
<li>不存在变量提升</li>
<li>不影响作用域链</li>
</ul>
<p>let 实际练习</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>es6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="7"></td><td><pre>		<span class="token selector">*</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>			<span class="token property">margin</span><span class="token punctuation">:</span>0px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>			<span class="token property">padding</span><span class="token punctuation">:</span>0px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token selector">.item</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>			<span class="token property">display</span><span class="token punctuation">:</span>inline-block<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>			<span class="token property">margin</span><span class="token punctuation">:</span>20px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>			<span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>			<span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>			<span class="token property">border</span><span class="token punctuation">:</span>1px solid #000<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>			<span class="token property">text-align</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>			<span class="token property">line-height</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="21"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="22"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="23"></td><td><pre>		</pre></td></tr><tr><td data-num="24"></td><td><pre>				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="25"></td><td><pre>				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="26"></td><td><pre>				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="27"></td><td><pre>			</pre></td></tr><tr><td data-num="28"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="29"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="30"></td><td><pre>		   <span class="token keyword">let</span> items<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">".item"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>			 <span class="token comment">// for(var i=0;i&lt;items.length;i++)&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>				  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>				 items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>					 <span class="token comment">// this.style.backgroundColor="pink";</span></pre></td></tr><tr><td data-num="35"></td><td><pre>					 items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor<span class="token operator">=</span><span class="token string">"pink"</span><span class="token punctuation">;</span><span class="token comment">//var 定义：这里的 i 已经是循环结束的 i 了，为 3，此时 items [3] 没有；而用 let 定义则为块级作用域，每个 let 互不影响。</span></pre></td></tr><tr><td data-num="36"></td><td><pre>				 <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>				 </pre></td></tr><tr><td data-num="38"></td><td><pre>			 <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="40"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h1 id="const"><a class="anchor" href="#const">#</a> const</h1>
<p>const 用来声明常量</p>
<p>注意事项</p>
<ul>
<li>
<p>一定要赋初始值</p>
</li>
<li>
<p>一般常量使用大写（潜规则） const NAME=‘lhm’</p>
</li>
<li>
<p>常量的值不能修改</p>
</li>
<li>
<p>块级作用域</p>
</li>
<li>
<p>对于数组和对象的元素修改，不算做常量的修改，不会报错。因为地址没变</p>
<p>const TEAM=[‘l’,‘k’];            TEMA.push(“o”);</p>
</li>
</ul>
<h1 id="解构赋值"><a class="anchor" href="#解构赋值">#</a> 解构赋值</h1>
<ul>
<li>数组的结构</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> <span class="token constant">F4</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"小沈阳"</span><span class="token punctuation">,</span><span class="token string">"刘能"</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">let</span> <span class="token punctuation">[</span>xiao<span class="token punctuation">,</span>liu<span class="token punctuation">]</span><span class="token operator">=</span><span class="token constant">F4</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xiao<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>liu<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul>
<li>对象的结构</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> zhao<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'赵本山'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">66</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token function-variable function">xiaopin</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"我可以演小品"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">let</span> <span class="token punctuation">&#123;</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>xiaopin<span class="token punctuation">&#125;</span><span class="token operator">=</span>zhao<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xiaopin<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token function">xiaopin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">let</span> <span class="token punctuation">&#123;</span>xiaopin<span class="token punctuation">&#125;</span><span class="token operator">=</span>zhao<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token function">xiaopin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">// 修改名字解构</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">let</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">xiaopin</span><span class="token operator">:</span>xp<span class="token punctuation">&#125;</span><span class="token operator">=</span>zhao<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token function">xp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h1 id="模板字符串"><a class="anchor" href="#模板字符串">#</a> 模板字符串 `</h1>
<ul>
<li>声明</li>
<li>内容中可以直接换行符，单引双引不可以</li>
<li>直接进行变量的拼接 <code>$&#123; &#125;</code></li>
</ul>
<h1 id="对象的简化写法"><a class="anchor" href="#对象的简化写法">#</a> 对象的简化写法</h1>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> name<span class="token operator">=</span><span class="token string">"lhm"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">let</span> age<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 简写 1  </span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 同名可以简写 原 name:name,age:age</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 函数可以直接书写 change () 原 change=function ()&#123;&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> school<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  name<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  age<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    </pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h1 id="箭头函数"><a class="anchor" href="#箭头函数">#</a> 箭头函数</h1>
<p>特性</p>
<ul>
<li>this 是静态的，this 始终指向函数声明 <code>所在作用域下的this的值</code> ，看外层作用域是啥。即时是 call/apply/bind 也不能改变指向。</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 箭头函数 bind</span></pre></td></tr><tr><td data-num="2"></td><td><pre>			<span class="token keyword">var</span> name<span class="token operator">=</span><span class="token string">'lhm'</span><span class="token punctuation">;</span>  <span class="token comment">// 定义在 window 全局作用域</span></pre></td></tr><tr><td data-num="3"></td><td><pre>			<span class="token keyword">const</span> school<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>				<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'ggg'</span></pre></td></tr><tr><td data-num="5"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>			</pre></td></tr><tr><td data-num="7"></td><td><pre>			<span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>			<span class="token keyword">let</span> <span class="token function-variable function">getName2</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>  <span class="token comment">// 箭头函数！！！</span></pre></td></tr><tr><td data-num="11"></td><td><pre>				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>			<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>			<span class="token function">getName2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>			<span class="token function">getName</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>school<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>			<span class="token function">getName2</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>school<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 改变不了 this 指向</span></pre></td></tr></table></figure><ul>
<li>不能使用构造函数实例化对象</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> <span class="token function-variable function">Person</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>  <span class="token comment">//this 执的不对</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span>age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">let</span> me<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"hhh"</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>me<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul>
<li>不能使用 arguments 变量</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> <span class="token function-variable function">fn</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//not defined</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul>
<li>
<p>箭头函数的缩写</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//01 只有一个变量形参可省略括号</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">//02 只有一内容可省略 &#123;&#125; 花括号</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">//let add=(n)=>return n+2;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 直接简写</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">let</span> <span class="token function-variable function">add</span><span class="token operator">=</span><span class="token parameter">n</span><span class="token operator">=></span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li>
</ul>
<p>注意：</p>
<ul>
<li>箭头函数适合与 this 无关的回调，比如并使其，数组的方法回调</li>
<li>箭头函数不适合与 this 有关回调，比如事件回调，对象的方法</li>
</ul>
<h1 id="函数形参赋初始值"><a class="anchor" href="#函数形参赋初始值">#</a> 函数形参赋初始值</h1>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token operator">=</span><span class="token number">10</span></span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// 赋初始值，当没有赋值时为初始值</span></pre></td></tr><tr><td data-num="2"></td><td><pre> <span class="token keyword">return</span> a<span class="token operator">+</span>b<span class="token operator">+</span>c<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//13</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">function</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">host</span><span class="token operator">:</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span>username<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//baidu.com</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//kkk</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token literal-property property">host</span><span class="token operator">:</span><span class="token string">'baidu.com'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token literal-property property">username</span><span class="token operator">:</span><span class="token string">'kkk'</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h1 id="rest参数"><a class="anchor" href="#rest参数">#</a> rest 参数</h1>
<ul>
<li>rest 获取函数的实参（数组），代替 ES5 获取实参方式 arguments (对象)</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//ES6 得到数组，可以使用数组方法，提高使用参数的灵活程度</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">//ES5 得到对象</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token function">fn2</span><span class="token punctuation">(</span><span class="token string">'l'</span><span class="token punctuation">,</span><span class="token string">'g'</span><span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h1 id="扩展运算符"><a class="anchor" href="#扩展运算符">#</a> 扩展运算符</h1>
<ul>
<li>[...] 扩展运算符将【数组】转换为逗号分隔的【参数序列】</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">let</span> b<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">let</span> c<span class="token operator">=</span><span class="token punctuation">[</span><span class="token operator">...</span>a<span class="token punctuation">,</span><span class="token operator">...</span>b<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="4"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>作用</p>
<ul>
<li>数组合并</li>
<li>数组克隆</li>
<li>将伪数组转换为真正的数组</li>
</ul>
<h1 id="symbol类型"><a class="anchor" href="#symbol类型">#</a> Symbol 类型</h1>
<p>ES6 引入了新的原始数据 Symbol 表示独一无二的值。它是 javascript 的第七种数据类型，是一种类似于字符串的数据类型</p>
<ol>
<li>Symbol 的值是 <code>唯一</code> 的，是用来解决命名冲突的问题</li>
<li>Symbol 的值 <code>不能与其他数据进行运算</code></li>
<li>Symbol 定义的对象属性 <code>不能使用for in 循环遍历</code> ，但是可以使用 Reflect.ownKeys 来获取对象的所有键名</li>
</ol>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 创建 Symbol</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">let</span> a<span class="token operator">=</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">let</span> b<span class="token operator">=</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'hh'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">let</span> c<span class="token operator">=</span>Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'kk'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 比较</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">let</span> d<span class="token operator">=</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'hh'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token operator">===</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">let</span> e<span class="token operator">=</span>Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'kk'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token operator">===</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span></pre></td></tr></table></figure><p>使用场景：给对象添加属性和方法（表示独一无二）</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 向对象中添加方法 up down</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">let</span> game<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token operator">...</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 声明对象</span></pre></td></tr><tr><td data-num="6"></td><td><pre> <span class="token keyword">let</span> methods<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token literal-property property">up</span><span class="token operator">:</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token literal-property property">down</span><span class="token operator">:</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// 添加方式 1</span></pre></td></tr><tr><td data-num="11"></td><td><pre>game<span class="token punctuation">[</span>methods<span class="token punctuation">.</span>up<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"up方法"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>game<span class="token punctuation">[</span>methods<span class="token punctuation">.</span>down<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"down"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">// 添加方式二</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token keyword">let</span> youxi<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>			  <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'狼人杀'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="20"></td><td><pre>			  <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"say"</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>			    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"say"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>			  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="23"></td><td><pre>			  <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"dance"</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>			    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"dance"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>			  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>youxi<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="symbol内置属性"><a class="anchor" href="#symbol内置属性">#</a> Symbol 内置属性</h2>
<p>不一一演示，介绍一下 hasInstance</p>
<ul>
<li>自行控制类型检测 <code>Symbol.hasInstance</code></li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>			  <span class="token keyword">static</span><span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>hasInstance<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>			    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>			   <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment">//return 返回控制类型检测结果</span></pre></td></tr><tr><td data-num="5"></td><td><pre>			  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>			<span class="token keyword">let</span> o<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>			<span class="token keyword">let</span> arr3<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3 <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul>
<li>Symbol.isConcatSpreadable 控制数值是否可以展开，用于 Array.prototype.concat ()</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> arr2<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[1,2,3,4,5,6]</span></pre></td></tr><tr><td data-num="4"></td><td><pre>arr2<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>isConcatSpreadable<span class="token punctuation">]</span><span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[1,2,3,[4,5,6]]</span></pre></td></tr></table></figure><h1 id="迭代器iterator"><a class="anchor" href="#迭代器iterator">#</a> 迭代器 iterator</h1>
<p>迭代器是一个接口 Itertor, 为各种不同的数据结构提供统一的访问机制，任何数据结构只要不输 Iterator, 就可以完成遍历操作。</p>
<ul>
<li>
<p>ES6 创造了一种新的遍历命令 for...of 循环，Iterator 接口主要供 for...of 消费</p>
</li>
<li>
<p>原生具备 iterator 接口的数据（可用 for...of 遍历）</p>
</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> xiyou<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'唐僧'</span><span class="token punctuation">,</span><span class="token string">'八戒'</span><span class="token punctuation">,</span><span class="token string">'悟空'</span><span class="token punctuation">,</span><span class="token string">'沙僧'</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>			<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> v <span class="token keyword">of</span> xiyou<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//in 键名 0123 of 键值</span></pre></td></tr><tr><td data-num="3"></td><td><pre>				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>			<span class="token comment">// 工作原理</span></pre></td></tr><tr><td data-num="6"></td><td><pre>			<span class="token keyword">let</span> n<span class="token operator">=</span>xiyou<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>工作原理</p>
<ul>
<li>创造一个指针对象，指向当前数据结构的位置</li>
<li>第一次调用对象的 next 方法，指针自动指向数据结构的第一个成员</li>
<li>接下来不断调用 next 方法，指针一直完后移动，直到指向最后一个成员</li>
<li>每调用 next 方法返回一个包含 value 和 done 属性的对象</li>
</ul>
<h1 id="生成器"><a class="anchor" href="#生成器">#</a> 生成器</h1>
<ul>
<li>
<p>一个特殊的函数</p>
</li>
<li>
<p>异步编程解决方案</p>
</li>
<li>
<p>函数代码的分隔符</p>
</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token operator">*</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"hello gen"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">let</span> iterator<span class="token operator">=</span><span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token comment">// 生成器函数</span></pre></td></tr><tr><td data-num="8"></td><td><pre>			<span class="token keyword">function</span> <span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>				<span class="token keyword">yield</span> <span class="token string">'一直没有耳朵'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>				<span class="token keyword">yield</span> <span class="token string">'一直没有尾巴'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>				<span class="token keyword">yield</span> <span class="token string">'真奇怪'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>			<span class="token keyword">let</span> iterator<span class="token operator">=</span><span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="参数传递"><a class="anchor" href="#参数传递">#</a> 参数传递</h2>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 生成器参数传递 </span></pre></td></tr><tr><td data-num="2"></td><td><pre>		<span class="token keyword">function</span> <span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>			<span class="token keyword">let</span> one<span class="token operator">=</span><span class="token keyword">yield</span> <span class="token string">'一直没有耳朵'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>one<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>			<span class="token keyword">let</span> two<span class="token operator">=</span><span class="token keyword">yield</span> <span class="token string">'一直没有尾巴'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>two<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>			<span class="token keyword">let</span> three<span class="token operator">=</span><span class="token keyword">yield</span> <span class="token string">'真奇怪'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>three<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>		<span class="token keyword">let</span> iterator<span class="token operator">=</span><span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'AAA'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 作为第一次结果</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'BBB'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 作为第二次结果</span></pre></td></tr><tr><td data-num="14"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'CCC'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 作为第三次结果</span></pre></td></tr></table></figure><h2 id="异步编程应用"><a class="anchor" href="#异步编程应用">#</a> 异步编程应用</h2>
<p><strong>实现 1：</strong></p>
<ol>
<li>1s 后控制台输出 111</li>
<li>2s 后输出 222</li>
<li>3s 后输出 333</li>
</ol>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 异步函数 1</span></pre></td></tr><tr><td data-num="2"></td><td><pre>			<span class="token keyword">function</span> <span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>				<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>				  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>					iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 继续回调</span></pre></td></tr><tr><td data-num="6"></td><td><pre>				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>			<span class="token comment">// 异步函数 2</span></pre></td></tr><tr><td data-num="9"></td><td><pre>			<span class="token keyword">function</span> <span class="token function">two</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>				<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>				  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>				  iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 继续回调</span></pre></td></tr><tr><td data-num="13"></td><td><pre>				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>			<span class="token comment">// 异步函数 3</span></pre></td></tr><tr><td data-num="16"></td><td><pre>			<span class="token keyword">function</span> <span class="token function">three</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>				<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>				  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">333</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>			<span class="token keyword">function</span> <span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>			    <span class="token keyword">yield</span> <span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>					<span class="token keyword">yield</span> <span class="token function">two</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>				  <span class="token keyword">yield</span> <span class="token function">three</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>			<span class="token keyword">let</span> iterator<span class="token operator">=</span><span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>			iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p><strong>实现 2：</strong></p>
<ul>
<li>得到用户数据</li>
<li>得到订单数据</li>
<li>得到商品数据</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 异步函数 1</span></pre></td></tr><tr><td data-num="2"></td><td><pre>			<span class="token keyword">function</span> <span class="token function">getUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>				<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>				  <span class="token keyword">let</span> data<span class="token operator">=</span><span class="token string">'用户数据'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>					iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 继续回调</span></pre></td></tr><tr><td data-num="6"></td><td><pre>				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>			<span class="token comment">// 异步函数 2</span></pre></td></tr><tr><td data-num="9"></td><td><pre>			<span class="token keyword">function</span> <span class="token function">getOrders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>				<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>				<span class="token keyword">let</span> data<span class="token operator">=</span><span class="token string">'订单数据'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>				iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 继续回调</span></pre></td></tr><tr><td data-num="13"></td><td><pre>				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>			<span class="token comment">// 异步函数 3</span></pre></td></tr><tr><td data-num="16"></td><td><pre>			<span class="token keyword">function</span> <span class="token function">getGoods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>				<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>				<span class="token keyword">let</span> data<span class="token operator">=</span><span class="token string">'商品数据'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>				iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 继续回调</span></pre></td></tr><tr><td data-num="20"></td><td><pre>				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>			<span class="token keyword">function</span> <span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>			    <span class="token keyword">let</span> users<span class="token operator">=</span><span class="token keyword">yield</span> <span class="token function">getUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"1:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>					<span class="token keyword">let</span> orders<span class="token operator">=</span><span class="token keyword">yield</span> <span class="token function">getOrders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"2:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>orders<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>				  <span class="token keyword">let</span> goods<span class="token operator">=</span><span class="token keyword">yield</span> <span class="token function">getGoods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"3:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>goods<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>			<span class="token keyword">let</span> iterator<span class="token operator">=</span><span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>			iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h1 id="promise"><a class="anchor" href="#promise">#</a> Promise</h1>
<p>Promise 是 ES6 引入的异步编程的新解决方案。语法上 Promise 是一个构造函数，用来封装异步操作可以获取其成功或者失败的结果</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>			  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>			    <span class="token keyword">let</span> data<span class="token operator">=</span><span class="token string">'数据库数据'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>					<span class="token keyword">if</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>						    <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>					<span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>						<span class="token keyword">let</span> err<span class="token operator">=</span><span class="token string">"出错了"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>						<span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>					<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>			  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>			p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>			  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>			  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h1 id="set集合"><a class="anchor" href="#set集合">#</a> Set 集合</h1>
<p>ES6 提供了新的数据结构 Set (集合), 它 <code>类似于数组</code> ， <code>但成员的值都是唯一的</code> ， <code>实现自动去重</code> 。集合 <code>实现了iterator接口</code> ，所以可以使用扩展运算符和 for of 进行遍历，集合的属性和方法。</p>
<ul>
<li>size 返回集合的元素个数</li>
<li>add 增加一个新元素</li>
<li>delete 删除元素，返回 boolean 值</li>
<li>has 检测集合中是否包含某个元素，返回 boolean 值</li>
<li>clear 清空集合</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">let</span> s2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'大事儿'</span><span class="token punctuation">,</span><span class="token string">'小事儿'</span><span class="token punctuation">,</span><span class="token string">'好事儿'</span><span class="token punctuation">,</span><span class="token string">'小事儿'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>s2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"喜事儿"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s2<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">"大事儿"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 返回布尔值</span></pre></td></tr><tr><td data-num="6"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s2<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">"大事儿"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 返回布尔值</span></pre></td></tr><tr><td data-num="7"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>s2<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 清空集合</span></pre></td></tr><tr><td data-num="9"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p><strong>应用：</strong></p>
<ol>
<li>数组去重</li>
<li>数组交集</li>
<li>数组并集</li>
</ol>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">let</span> arr2<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 数组去重</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 数组交集</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">let</span> rst<span class="token operator">=</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre> <span class="token keyword">let</span> b<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token keyword">if</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">return</span> item<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rst<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">// 数组交集</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">let</span> c<span class="token operator">=</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>arr<span class="token punctuation">,</span><span class="token operator">...</span>arr2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">// 数组差集</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">let</span> diff<span class="token operator">=</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token keyword">let</span> b<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>b<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">return</span> item<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>diff<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h1 id="map"><a class="anchor" href="#map">#</a> Map</h1>
<p>ES6 提供了 Map 数据结构，它 <code>类似于对象</code> 。也是键值对的集合。但是键的范围不限于字符串，各种类型的值（包括对象）都可以当作键，Map <code>也实现了iterator接口</code> ，所以可以使用扩展运算符和 for of 进行遍历，Map 的属性和方法</p>
<ul>
<li>size 返回 Map 元素个数</li>
<li>set 增加新元素，返回当前 Map</li>
<li>get 赶回键名对象的键值</li>
<li>has 返回 Map 是否包含某个元素，返回 boolean 值</li>
<li>clear 清空集合，返回 undefined</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> m<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	m<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'lhm'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">let</span> info<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	m<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>info<span class="token punctuation">,</span><span class="token string">'ggg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//lhm</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//undefined</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	m<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	m<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h1 id="class"><a class="anchor" href="#class">#</a> class</h1>
<p>​       ES6 提供了接近语言的写法，引入了 class 这个概念，作为对象的模板。语法糖，让对象原型更加清晰，像面向对象的编程。</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//es5</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">function</span> <span class="token function">Phone</span><span class="token punctuation">(</span><span class="token parameter">brand<span class="token punctuation">,</span>price</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>brand<span class="token operator">=</span>brand<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>price<span class="token operator">=</span>price<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	  <span class="token function-variable function">hello</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"es5 hello方法"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		</pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token class-name">Phone</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">call</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"es5 call方法"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token comment">//es6</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token keyword">class</span> <span class="token class-name">Mobile</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>		<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">brand<span class="token punctuation">,</span>price</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>			<span class="token keyword">this</span><span class="token punctuation">.</span>brand<span class="token operator">=</span>brand<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>			<span class="token keyword">this</span><span class="token punctuation">.</span>price<span class="token operator">=</span>price<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"es6 call方法"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	<span class="token keyword">let</span> phone<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token string">"华为"</span><span class="token punctuation">,</span><span class="token number">2999</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>	<span class="token keyword">let</span> phone2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Mobile</span><span class="token punctuation">(</span><span class="token string">"小米"</span><span class="token punctuation">,</span><span class="token number">1999</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>phone2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>静态属性</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//es5 写法</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">Phone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  </pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>Phone<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">'小米'</span><span class="token punctuation">;</span> <span class="token comment">// 属于类，不属于实例对象</span></pre></td></tr><tr><td data-num="6"></td><td><pre>Phone<span class="token punctuation">.</span><span class="token function-variable function">call</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// 属于类，不属于实例对象</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"call()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 相当于 es6 的 static 定义的成员，只在类中访问</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Phone2</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token keyword">static</span> name<span class="token operator">=</span><span class="token string">"小米"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token keyword">static</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"call()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">let</span> phone<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>phone<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//undefined</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">let</span> phone2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Phone2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>phone2<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//undefined</span></pre></td></tr></table></figure><h2 id="继承"><a class="anchor" href="#继承">#</a> 继承</h2>
<p><strong>es5 实现继承</strong></p>
<ul>
<li>
<p>call 方法改变指向  Phone.call (this,brand,price)</p>
</li>
<li>
<p>改变原型</p>
<p><code>SmartPhone.prototype=new Phone</code>   <code>SmartPhone.prototype.constructor=SmartPhone</code></p>
</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//es5 实现继承</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token comment">// 父类</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">function</span> <span class="token function">Phone</span><span class="token punctuation">(</span><span class="token parameter">brand<span class="token punctuation">,</span>price</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>brand<span class="token operator">=</span>brand<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>price<span class="token operator">=</span>price<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token class-name">Phone</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">call</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"父类 call()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token comment">// 子类</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">function</span> <span class="token function">SmartPhone</span><span class="token punctuation">(</span><span class="token parameter">brand<span class="token punctuation">,</span>price<span class="token punctuation">,</span>color<span class="token punctuation">,</span>size</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token function">Phone</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>brand<span class="token punctuation">,</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 实现继承 1 改变 this 指向</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token operator">=</span>color<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>size<span class="token operator">=</span>size<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token comment">// 实现继承 2 设置子类原型</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token class-name">SmartPhone</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token class-name">SmartPhone</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token operator">=</span>SmartPhone<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	</pre></td></tr><tr><td data-num="20"></td><td><pre>	<span class="token comment">// 添加自己的方法</span></pre></td></tr><tr><td data-num="21"></td><td><pre>	<span class="token class-name">SmartPhone</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">game</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"子类 game()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>	<span class="token keyword">let</span> s<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SmartPhone</span><span class="token punctuation">(</span><span class="token string">"锤子"</span><span class="token punctuation">,</span><span class="token number">2999</span><span class="token punctuation">,</span><span class="token string">"red"</span><span class="token punctuation">,</span><span class="token string">"375px"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>	<span class="token function">s</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>	s<span class="token punctuation">.</span><span class="token function">game</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>brand<span class="token punctuation">,</span>s<span class="token punctuation">.</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p><strong>es6 实现继承</strong></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//es6 实现继承</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token comment">// 父类</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">class</span> <span class="token class-name">Phone</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">brand<span class="token punctuation">,</span>price</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>brand<span class="token operator">=</span>brand<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>price<span class="token operator">=</span>price<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"父类 call()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token comment">// 子类</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token keyword">class</span> <span class="token class-name">SmartPhone</span> <span class="token keyword">extends</span> <span class="token class-name">Phone</span><span class="token punctuation">&#123;</span>    <span class="token comment">// 实现继承 1   extends</span></pre></td></tr><tr><td data-num="15"></td><td><pre>		<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">brand<span class="token punctuation">,</span>price<span class="token punctuation">,</span>color<span class="token punctuation">,</span>size</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>		<span class="token keyword">super</span><span class="token punctuation">(</span>brand<span class="token punctuation">,</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 实现继承 2 super ()</span></pre></td></tr><tr><td data-num="17"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token operator">=</span>color<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>size<span class="token operator">=</span>size<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	<span class="token function">game</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"子类 game()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>	<span class="token keyword">let</span> s<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SmartPhone</span><span class="token punctuation">(</span><span class="token string">"锤子"</span><span class="token punctuation">,</span><span class="token number">2999</span><span class="token punctuation">,</span><span class="token string">"red"</span><span class="token punctuation">,</span><span class="token string">"375px"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>	<span class="token function">s</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>	s<span class="token punctuation">.</span><span class="token function">game</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>brand<span class="token punctuation">,</span>s<span class="token punctuation">.</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="重写"><a class="anchor" href="#重写">#</a> 重写</h2>
<p>es6 重写直接定义就可以覆盖，调用时就近原则</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 子类</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">class</span> <span class="token class-name">SmartPhone</span> <span class="token keyword">extends</span> <span class="token class-name">Phone</span><span class="token punctuation">&#123;</span>    <span class="token comment">// 实现继承 1   extends</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">brand<span class="token punctuation">,</span>price<span class="token punctuation">,</span>color<span class="token punctuation">,</span>size</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token keyword">super</span><span class="token punctuation">(</span>brand<span class="token punctuation">,</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 实现继承 2 super ()</span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token operator">=</span>color<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>size<span class="token operator">=</span>size<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token function">game</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"子类 game()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token comment">// 直接重写</span></pre></td></tr><tr><td data-num="12"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"子类 call()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="gettersetter"><a class="anchor" href="#gettersetter">#</a> getter/setter</h2>
<p>class 里面的 get 和 set 动态设置属性</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Phone</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">get</span> <span class="token function">price</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"price属性被读取"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">3999</span><span class="token punctuation">;</span><span class="token comment">//return 值就是 price 值</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword">set</span> <span class="token function">price</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"price属性被设置"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//9999</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">let</span> p<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>p<span class="token punctuation">.</span>price<span class="token operator">=</span><span class="token number">9999</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h1 id="数值扩展"><a class="anchor" href="#数值扩展">#</a> 数值扩展</h1>
<ul>
<li>Number.EPSTLON 是 JavaScript 表示的最小精度</li>
<li>EPSTLON 属性的值接近于 2.2204604925...E-16</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token operator">+</span><span class="token number">0.2</span><span class="token operator">===</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 当误差小于精度时，认为相等</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">function</span> <span class="token function">equal</span><span class="token punctuation">(</span><span class="token parameter">n1<span class="token punctuation">,</span>n2</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">if</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>n1<span class="token operator">-</span>n2<span class="token punctuation">)</span><span class="token operator">&lt;</span>Number<span class="token punctuation">.</span><span class="token constant">EPSTLON</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token operator">+</span><span class="token number">0.2</span><span class="token punctuation">,</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="进制"><a class="anchor" href="#进制">#</a> 进制</h2>
<ul>
<li>二进制 0b</li>
<li>八进制 0o</li>
<li>十进制就是平常的数</li>
<li>十六进制 0x</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0b1010</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//10</span></pre></td></tr><tr><td data-num="2"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0o777</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//511</span></pre></td></tr><tr><td data-num="3"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//100</span></pre></td></tr><tr><td data-num="4"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0xff</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//255</span></pre></td></tr></table></figure><h1 id="对象的方法扩展"><a class="anchor" href="#对象的方法扩展">#</a> 对象的方法扩展</h1>
<ul>
<li>Object.is 判断两个数值是否相等</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">,</span><span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//true</span></pre></td></tr><tr><td data-num="2"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">,</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//true</span></pre></td></tr><tr><td data-num="3"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token operator">===</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false  区别！</span></pre></td></tr></table></figure><ul>
<li>Object.assign 对象的合并</li>
<li>Object 的 setPrototypeof 设置对象原型</li>
</ul>
<h1 id="数组的方法扩展"><a class="anchor" href="#数组的方法扩展">#</a> 数组的方法扩展</h1>
<p>ES6 数组的方法扩展</p>
<ul>
<li><strong>Array.from () 将伪数组转换成真正的数组</strong></li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">//es5 中 将参数转换成数组</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">//es6 中 将参数转换成数组</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">let</span> arr1 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p><strong>使用扩展运算符 将伪数组转换成真正的数组</strong></p>
<pre><code class="language-jvascript">let lis = document.querySelectorAll(&quot;li&quot;);
console.log(Array.from([...lis]));
</code></pre>
<ul>
<li><strong>Array.of () 将一组值（任意的数据类型），转换成数组</strong></li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'张三'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul>
<li>
<p><strong>Array.find () : 找出第一个符合条件的数组成员</strong></p>
</li>
<li>
<p><strong>Array.findIndex ()：找出第一个符合条件的数组成员的索引</strong></p>
</li>
<li>
<p>**Array.entries () 对键值对进行遍历 **</p>
</li>
</ul>
<p>keys () 对键名的遍历<br />
 values () 对值进行遍历<br />
返回一个遍历器，可以使用 for …of 来对<span class="exturl" data-url="aHR0cHM6Ly9zby5jc2RuLm5ldC9zby9zZWFyY2g/cT0lRTYlOTUlQjAlRTclQkIlODQmYW1wO3NwbT0xMDAxLjIxMDEuMzAwMS43MDIw">数组</span>进行遍历</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token keyword">of</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">78</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> v <span class="token keyword">of</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">78</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>index<span class="token punctuation">,</span>value<span class="token punctuation">]</span> <span class="token keyword">of</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">78</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h1 id="字符串方法的扩展"><a class="anchor" href="#字符串方法的扩展">#</a> 字符串方法的扩展</h1>
<ul>
<li>startsWith：判断字符串开头是否包含某个字符</li>
<li>endsWith：判断字符串结尾是否包含某个字符</li>
<li>includes：判断字符串中是否包含某个字符</li>
</ul>
<h1 id="模块化"><a class="anchor" href="#模块化">#</a> 模块化</h1>
<p>模块化是将一个大的程序文件拆分为许多小的文件，然后将小文件组合起来</p>
<p>优势：</p>
<ol>
<li>防止命名冲突</li>
<li>代码复用</li>
<li>高维护性</li>
</ol>
<p>ES6 之前的模块化</p>
<ul>
<li>CommonJS</li>
<li>AMD</li>
<li>CMD</li>
</ul>
<p><strong>ES6 模块化语法</strong></p>
<ul>
<li>export 命令主要由两个命令构成：export import</li>
<li>import 命令用于输入其它模块提供的功能</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 方式 1</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	name<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	hello</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 对应</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">import</span> m <span class="token keyword">from</span> <span class="token string">'./demo.js'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 方式 2</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">export</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  name <span class="token keyword">as</span> n<span class="token punctuation">,</span> <span class="token comment">// 别名</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  hello</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">// 对应</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>name<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./demo.js"</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> <span class="token keyword">from</span> <span class="token string">"./demo.js"</span></pre></td></tr></table></figure><h1 id="es7"><a class="anchor" href="#es7">#</a> ES7</h1>
<h2 id="数组方法includes"><a class="anchor" href="#数组方法includes">#</a> 数组方法 includes</h2>
<ul>
<li>Array.prototype.includes</li>
</ul>
<p>​        arr.includes(‘hhh‘’)//true</p>
<h2 id="指数运算符"><a class="anchor" href="#指数运算符">#</a> 指数运算符</h2>
<ul>
<li>Math.pow (2,10) //2 的 10 次方  1024</li>
</ul>
<h1 id="es8"><a class="anchor" href="#es8">#</a> ES8</h1>
<h2 id="asyncawait"><a class="anchor" href="#asyncawait">#</a> async/await</h2>
<p>async</p>
<ul>
<li><code>返回值为promise对象</code></li>
<li>promise 对象的 <code>结果</code> 由 async 函数 <code>执行的返回值</code> 决定</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">return</span>  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">let</span> result<span class="token operator">=</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>await</p>
<ul>
<li>await 必须写在 async 函数中</li>
<li>await 右侧边大师一般为 promise 对象</li>
<li>await <code>返回的是promise成功的值</code></li>
<li>await 的值 promise 失败了，就会抛出异常， <code>通过try catch捕获处理</code></li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> p<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token comment">//resolve ("成功了");</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token comment">//reject ("失败了");</span></pre></td></tr><tr><td data-num="4"></td><td><pre>			<span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">"出错了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token keyword">try</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>     <span class="token keyword">let</span> rst<span class="token operator">=</span><span class="token keyword">await</span> p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rst<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="对象方法的扩展"><a class="anchor" href="#对象方法的扩展">#</a> 对象方法的扩展</h2>
<ul>
<li>Object.keys () 获取键名</li>
<li>Object.value () 获取键值</li>
<li>Object.entries () 方法返回的一个给定对象的可遍历属性的数组</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> school<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>		  <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"hhh"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		  <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">19</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		  <span class="token literal-property property">sex</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"男"</span><span class="token punctuation">,</span><span class="token string">"女"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>school<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>school<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>school<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 得到数组，第一个为键名 第二个为键值</span></pre></td></tr><tr><td data-num="10"></td><td><pre>		<span class="token keyword">let</span> m<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>school<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取 Map 对象</span></pre></td></tr></table></figure><ul>
<li><code>Object.getOwnPropertyDescriptors</code>  返回对象属性的描述对象 <code>configurable   enumerable   writable</code></li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptors</span><span class="token punctuation">(</span>school<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 创建对象 第一个参数原型对象 第二个参数描述对象</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> obj<span class="token operator">=</span>Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token literal-property property">value</span><span class="token operator">:</span><span class="token string">"哈哈"</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token literal-property property">configurable</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 可删除</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token literal-property property">enumerable</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 可枚举</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token literal-property property">writable</span><span class="token operator">:</span><span class="token boolean">true</span> <span class="token comment">// 可读</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><img data-src="../images/ES6/1652099709117.png" alt="1652099709117" /></p>
<h1 id="es9"><a class="anchor" href="#es9">#</a> ES9</h1>
<h1 id="对象的扩展运算符rest"><a class="anchor" href="#对象的扩展运算符rest">#</a> 对象的扩展运算符 rest</h1>
<ul>
<li css-module=".users1,...users2"></li>
</ul>
<p><strong>更多知识请浏览网络的海洋</strong></p>
]]></content>
      <categories>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>es6</tag>
        <tag>es7</tag>
        <tag>es8</tag>
        <tag>es9</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS布局</title>
    <url>/2020/10/25/CSS%E5%B8%83%E5%B1%80/</url>
    <content><![CDATA[<h2 id="一些名词"><a class="anchor" href="#一些名词">#</a> 一些名词</h2>
<ul>
<li>静态布局</li>
<li>自适应布局</li>
<li>流式布局 (百分比布局)</li>
<li>响应式布局 (媒体查询)</li>
<li>弹性布局 (rem/em、flex、grid 布局)</li>
<li>圣杯布局</li>
<li>双飞翼布局</li>
</ul>
<h2 id="静态布局"><a class="anchor" href="#静态布局">#</a> 静态布局</h2>
<p>最传统的布局方式，网页中所有尺寸都是由 px 作为单位，设置了 min-width，如果宽度小于最小宽度就会出现滚动条，如果大于这个宽度则内容居中外加背景</p>
<h2 id="自适应布局"><a class="anchor" href="#自适应布局">#</a> 自适应布局</h2>
<p>多个 html 文件在不同分辨率屏幕显示来达到自适应布局</p>
<p>下面这张图很好的解释了自适应布局与响应式布局的区别</p>
<p><img data-src="../images/CSS%E5%B8%83%E5%B1%80/responsive-adaptive.d6bc5a3a.jpg" alt="区别" /></p>
<h2 id="流式布局"><a class="anchor" href="#流式布局">#</a> 流式布局</h2>
<p>网页中主要划分区域的尺寸使用百分数，搭配 (min-<em>, max-</em>) 使用，分别为不同的屏幕设置布局格式，当屏幕大小改变时，会出现不同的布局。特点是布局改变，元素不变</p>
<h2 id="响应式布局"><a class="anchor" href="#响应式布局">#</a> 响应式布局</h2>
<p>利用媒体查询可以检测到屏幕的尺寸，并设置不同的 CSS 样式，就可以实现响应式布局</p>
<figure class="highlight scss"><figcaption data-lang="Sass (Scss)"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token atrule"><span class="token rule">@media</span> screen <span class="token function">and</span><span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 767px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="栅格布局"><a class="anchor" href="#栅格布局">#</a> 栅格布局</h3>
<p>现在许多框架都有自己的栅格布局，但是使用的尺寸大致相同，例如 Element 定义的尺寸：</p>
<ul>
<li>xs:  <code>&lt;768px</code> , extra small</li>
<li>sm:  <code>&gt;=768px</code> , small</li>
<li>md:  <code>&gt;=992</code> , medium</li>
<li>lg:  <code>&gt;=1200</code> , large</li>
<li>xl:  <code>&gt;=1920</code> , extra large</li>
</ul>
<h2 id="弹性布局"><a class="anchor" href="#弹性布局">#</a> 弹性布局</h2>
<p>利用 rem/em 等方式布局</p>
<h2 id="五大布局结论"><a class="anchor" href="#五大布局结论">#</a> 五大布局结论</h2>
<p>随着新技术的出现和时代的发展潮流，越来越多的网站舍弃了之前的<strong>不太灵活</strong>的静态布局，而是使用响应式布局，当然很多时候响应式布局会结合弹性布局一起使用，这样网站能够在所有设备上都能很好的展现出来。</p>
<h2 id="圣杯布局和双飞翼布局"><a class="anchor" href="#圣杯布局和双飞翼布局">#</a> 圣杯布局和双飞翼布局</h2>
<ul>
<li>圣杯布局与双飞翼布局都属于三列布局的经典布局</li>
<li>它们的效果图一致，但是实现方法不同</li>
</ul>
<h3 id="效果图"><a class="anchor" href="#效果图">#</a> 效果图</h3>
<p><img data-src="../images/CSS%E5%B8%83%E5%B1%80/css-display.7775c5c8.png" alt="效果图" /></p>
<h3 id="三栏布局的代码示例"><a class="anchor" href="#三栏布局的代码示例">#</a> 三栏布局的代码示例</h3>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>main clearfix<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>中间自适应<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>footer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight scss"><figcaption data-lang="Sass (Scss)"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">body </span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token selector">.header,</pre></td></tr><tr><td data-num="7"></td><td><pre>.footer </span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token property">background-color</span><span class="token punctuation">:</span> purple<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">// 清除浮动</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token selector">.clearfix::after </span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token property">clear</span><span class="token punctuation">:</span> both<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token selector">.left,</pre></td></tr><tr><td data-num="20"></td><td><pre>.center,</pre></td></tr><tr><td data-num="21"></td><td><pre>.right </span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token property">height</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>  <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token selector">.left </span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>  <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>  <span class="token property">background-color</span><span class="token punctuation">:</span> orange<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>  <span class="token property">margin-left</span><span class="token punctuation">:</span> -100%<span class="token punctuation">;</span> <span class="token comment">//center 在 left 前面才会有这样的效果</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token selector">.center </span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>  <span class="token property">background-color</span><span class="token punctuation">:</span> #eee<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token selector">.right </span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>  <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>  <span class="token property">background-color</span><span class="token punctuation">:</span> blueviolet<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>  <span class="token property">margin-left</span><span class="token punctuation">:</span> -300px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>效果图：</p>
<p><img data-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABDsAAAMnCAYAAAAwAFlMAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAACOdSURBVHhe7dgxkSRWFATB4XMk1xaPIyYAS2FEoK0XcupHGsmhoj4/n58vAAAAwCvMDgAAAOApZgcAAADwFLMDAAAAeIrZAQAAADzF7AAAAACeYnYAAAAATzE7AAAAgKeYHQAAAMBTzA4AAADgKWYHAAAA8BSzAwAAAHiK2QEAAAA8xewAAAAAnmJ2AAAAAE8xOwAAAICnmB0AAADAU8wOAAAA4ClmBwAAAPAUswMAAAB4itkBAAAAPMXsAAAAAJ5idgAAAABPMTsAAACAp5gdAAAAwFPMDgAAAOApZgcAAADwFLMDAAAAeIrZAQAAADzF7AAAAACeYnYAAAAATzE7AAAAgKeYHQAAAMBTzA4AAADgKWYHAAAA8BSzAwAAAHiK2QEAAAA8xewAAAAAnmJ2AAAAAE8xOwAAAICnmB0AAADAU8wOAAAA4ClmBwAAAPAUswMAAAB4itkBAAAAPMXsAAAAAJ5idgAAAABPMTsAAACAp5gdAAAAwFPMDgAAAOApZgcAAADwFLMDAAAAeIrZAQAAADzF7AAAAACeYnYAAAAATzE7AAAAgKeYHQAAAMBTzA4AAADgKWYHAAAA8BSzAwAAAHiK2QEAAAA8xewAAAAAnmJ2AAAAAE8xOwAAAICnmB0AAADAU8wOAAAA4ClmBwAAAPAUswMAAAB4itkBAAAAPMXsAAAAAJ5idgAAAABPMTsAAACAp5gdAAAAwFPMDgAAAOApZgcAAADwFLMDAAAAeIrZAQAAADzF7AAAAACeYnYAAAAATzE7AAAAgKeYHQAAAMBTzA4AAADgKWYHAAAA8BSzAwAAAHiK2QEAAAA8xewAAAAAnmJ2AAAAAE8xOwAAAICnmB0AAADAU8wOAAAA4ClmBwAAAPAUswMAAAB4itkBAAAAPMXsAAAAAJ5idgAAAABPMTsAAACAp5gdAAAAwFPMDgAAAOApZgcAAADwFLMDAAAAeIrZAQAAADzF7AAAAACeYnYAAAAATzE7AAAAgKeYHQAAAMBTzA4AAADgKWYHAAAA8BSzAwAAAHiK2QEAAAA8xewAAAAAnmJ2AAAAAE8xOwAAAICnmB0AAADAU8wOAAAA4ClmBwAAAPAUswMAAAB4itkBAAAAPMXsAAAAAJ5idgAAAABPMTsAAACAp5gdAAAAwFPMDgAAAOApZgcAAADwFLMDAAAAeIrZAQAAADzl8/37+QJNv7+/AMD/5J8//wLwCLMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAJrMDwlaoAQA3K5YBaDI7IGyFGgBws2IZgCazA8JWqAEANyuWAWgyOyBshRoAcLNiGYAmswPCVqgBADcrlgFoMjsgbIUaAHCzYhmAps/P5+cLAAAA8AqzAwAAAHiK2QEAAAA8xewAAAAAnmJ2AAAAAE8xOwAAAICnmB0AAADAU8wOAAAA4ClmBwAAAPAUswMAAAB4itkBAAAAPMXsAAAAAJ5idgAAAABPMTsAAACAp5gdAAAAwFPMDgAAAOApZgcAAADwFLMDAAAAeIrZAQAAADzF7AAAAACeYnYAAAAATzE7AAAAgKeYHQAAAMBTzA4AAADgKWYHAAAA8BSzAwAAAHiK2QEAAAA8xewAAAAAnmJ2AAAAAE8xOwAAAICnmB0AAADAU8wOAAAA4ClmBwAAAPAUswMAAAB4itkBAAAAPMXsAAAAAJ5idgAAAABPMTsAAACAp5gdAAAAwFPMDgAAAOApZgcAAADwFLMDAAAAeIrZAQAAADzF7AAAAACeYnYAAAAATzE7AAAAgKeYHQAAAMBTzA4AAADgKWYHAAAA8BSzAwAAAHiK2QEAAAA8xewAAAAAnmJ2AAAAAE8xOwAAAICnmB0AAADAU8wOAAAA4ClmBwAAAPCQn+9/uBhDXcLmY+4AAAAASUVORK5CYII=" alt="效果" /></p>
<p>从效果图可以看出，中间的文字内容没有很好的显示出来，这是因为 left 和 right 两个元素是覆盖在 center 上的，而 center 的宽度是 100%，因此造成了这样的效果，为了解决这一问题，圣杯布局和双飞翼布局使用了不同的方案来解决这一问题</p>
<h3 id="圣杯布局方案"><a class="anchor" href="#圣杯布局方案">#</a> 圣杯布局方案</h3>
<p>给父元素添加一定的 margin，同时给 left 和 right 元素添加定位来使其在合适的位置</p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.main</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">margin-left</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token property">margin-right</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token selector">.left</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token property">left</span><span class="token punctuation">:</span> -200px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token selector">.right</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token property">right</span><span class="token punctuation">:</span> -300px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>其实目的很简单，通过父元素的 margin 来增加 center 左右边距的距离，同时 left 和 right 元素根据定位补充 center 的空白，这样很好的实现了三栏布局</p>
<h3 id="双飞翼布局方案"><a class="anchor" href="#双飞翼布局方案">#</a> 双飞翼布局方案</h3>
<p>通过给 center 增加子元素，然后子元素设置一定的外边距来解决上面三栏布局的问题</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    中间自适应</pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="最终效果"><a class="anchor" href="#最终效果">#</a> 最终效果</h3>
<p><img data-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA70AAALbCAYAAAA2B+dfAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAACOLSURBVHhe7dyxsRyLeYRR5CNGwRAYAROgR4feM2gpAwagGBgD6dKlpSq6TAGqeVXLWl018ICnn1KrdYxTF3d3dmcW1tc1C3z64dMPnwEAAGCR0QsAAMAsoxcAAIBZRi8AAACzjF4AAABmGb0AAADMMnoBAACYZfQCAAAwy+gFAABgltELAADALKMXAACAWUYvAAAAs4xeAAAAZhm9AAAAzDJ6AQAAmGX0AgAAMMvoBQAAYJbRCwAAwCyjFwAAgFlGLwAAALOMXgAAAGYZvQAAAMwyegEAAJhl9AIAADDL6AUAAGCW0QsAAMAsoxcAAIBZRi8AAACzjF4AAABmGb0AAADMMnoBAACYZfQCAAAwy+gFAABgltELAADALKMXAACAWUYvAAAAs4xeAAAAZhm9AAAAzDJ6AQAAmGX0AgAAMMvoBQAAYJbRCwAAwCyjFwAAgFlGLwAAALOMXgAAAGYZvQAAAMwyegEAAJhl9AIAADDL6AUAAGCW0QsAAMAsoxcAAIBZRi8AAACzjF4AAABmGb0AAADMMnoBAACYZfQCAAAwy+gFAABgltELAADALKMXAACAWUYvAAAAs4xeAAAAZhm9AAAAzDJ6AQAAmGX0AgAAMMvoBQAAYJbRCwAAwKxPn//t02dgx9///ncA/kn+9V/+HYD/Y4xeGJMiDYAbKaYA6Gb0wpgUaQDcSDEFQDejF8akSPv/6K9//evnX/3qV5//9Kc/xecBfo4UUwB0M3phTIq0xzP+fvnLX/7kCHzG4nPcH//4xx9/f35++vTpi55jn9d8fJ/Ht57zb3/72+ff/OY3P3nc7373u3+c99e//vWPr0vHvfzhD3/46vUBfK8UUwB0M3phTIq0x/eM3r/85S8/HvuMxnTMy3PsMz6/NCqf1z9DNT330TOuX0P2eb/n/O/j+vEa4h89n+kXv/jFfzn+a37qswEkKaYA6Gb0wpgUaY9vGb3P2PyerwR/HL3fMz6f497P84zd573SsP2p63oef55/XQfAP0uKKQC6Gb0w5jUe09D8kvc7rO/j8v3rxO9ed2/T6P2W8fnxPC/P4E13hr90/MuXzvu81/sd3ef5Z/h/6Y4xwE9JMQVAN6MXxnzpjukzDNOd3ue4r43ej18Dfv/K8nP85eh9fM9of13H67zPZ3k//8evVz/Pf7zDDPA9UkwB0M3ohTH/26P353y9+Xm/j4+9+9pIfjyPP8//+c9//k93cp+fz+/vI/j1Wd9fD/CtUkwB0M3ohTHXo/fjWH18bfS+32n9ko/nSY8915XO/fI+xp/XPP/78/MZ3of68/jrM7/+Xj6OeIDvkWIKgG5GL4x5jbs0FL/ka6P340h8fv+fGr2v63od8/Lxut6PfR5//zyvO7/pnADfK8UUAN2MXhjzGr3P0HsPtWfs/Zw7vd87en/O15tf7/XfGb2va3pe/7zP836vv4vn2K+9H8C3SjEFQDejF8akSHs8YzCN3ndp9KbB+rXR+xqcr/dMPp4nPfaM1HTul/fR+z6Cn/d53d19Pffy/hqAnyPFFADdjF4YkyLt8YzJnzN6vzYUn+OvRu/H6/vWO73P88+/53297v3u7uv4dD6AnyPFFADdjF4YkyLt8XFUJt87Dp/j3kfu8/vP+XrzM1Bfd2d/6ho/+pavLX/LMQDfIsUUAN2MXhiTIu3xDMmL0fsMyPfx+tx1fT33vO59BH/Jx/P8/ve//8efn+ee63w/x5f89re//XHMPtf0Pa97vF83wLdKMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAN6MXxqRIA+BGiikAuhm9MCZFGgA3UkwB0M3ohTEp0gC4kWIKgG5GL4xJkQbAjRRTAHQzemFMijQAbqSYAqCb0QtjUqQBcCPFFADdjF4YkyINgBsppgDoZvTCmBRpANxIMQVAt08/fPrhMwAAACwyegEAAJhl9AIAADDL6AUAAGCW0QsAAMAsoxcAAIBZRi8AAACzjF4AAABmGb0AAADMMnoBAACYZfQCAAAwy+gFAABgltELAADALKMXAACAWUYvAAAAs4xeAAAAZhm9AAAAzDJ6AQAAmGX0AgAAMMvoBQAAYJbRCwAAwCyjFwAAgFlGLwAAALOMXgAAAGYZvQAAAMwyegEAAJhl9AIAADDL6AUAAGCW0QsAAMAsoxcAAIBZRi8AAACzjF4AAABmGb0AAADMMnoBAACYZfQCAAAwy+gFAABgltELAADALKMXAACAWUYvAAAAs4xeAAAARv3w+T8A/9EHO51UCkAAAAAASUVORK5CYII=" alt="效果图" /></p>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.inner</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token property">margin-left</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token property">margin-right</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="参考文章"><a class="anchor" href="#参考文章">#</a> 参考文章</h2>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC82NTUxNzQ5MA==">知乎 (opens new window)</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC81ODM1NTE2OA==">知乎 - BarryDong</span></li>
</ul>
]]></content>
      <categories>
        <category>css</category>
      </categories>
  </entry>
  <entry>
    <title>React组件</title>
    <url>/2021/09/22/React%E7%BB%84%E4%BB%B6/</url>
    <content><![CDATA[<h1 id="props深入"><a class="anchor" href="#props深入">#</a> props 深入</h1>
<h2 id="基本认识"><a class="anchor" href="#基本认识">#</a> 基本认识</h2>
<ul>
<li>组件是封闭的，是要接首外部的数据要通过 props 来实现</li>
<li>props 作用：接收传递给组件的数据</li>
<li>传递数据：给组件标签添加属性</li>
<li>接收数据：函数组件通过 props 接收组件，类组件通过 this.props 接收数据</li>
<li>注意：传非字符串数据用 {} 定义 ，可以传函数 数组 对象等</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createRoot <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 容器</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">createRoot</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 渲染容器</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">></span>类组件接收数据名字：<span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">function</span> <span class="token function">Hi</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">></span>函数组件接收数据名字：<span class="token punctuation">&#123;</span>props<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">// 使用 JSX 创建元素 传递数据</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">const</span> title<span class="token operator">=</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token operator">&lt;</span>Hello name<span class="token operator">=</span><span class="token string">"helloname"</span> age<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token number">19</span><span class="token punctuation">&#125;</span> color<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span><span class="token string">'pink'</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token operator">&lt;</span>Hi name<span class="token operator">=</span><span class="token string">"hiname"</span> fn<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"函数"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="20"></td><td><pre>tag<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token operator">&lt;</span>p<span class="token operator">></span>这是一个标签<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 渲染页面</span></pre></td></tr></table></figure><p>特点：</p>
<ul>
<li>可以给组件传递任意类型的数据</li>
<li>props 是只读的对象，只能读取属性的值，无法修改对象</li>
<li>注意：使用类组件时，如果写了构造函数，应该把 props 传递 super (), 否则，无法在构造函数中获取 props!</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// 将 props 传递给父类构造函数</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>age<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="children属性"><a class="anchor" href="#children属性">#</a> children 属性</h2>
<ul>
<li>children 属性：表示组件标签的子节点。当组件标签有子节点时，props 就会有该属性</li>
<li>children 属性与普通的 props 一样，值可以是任意值（文本、React 元素、组件甚至是函数）</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 文本子节点</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">Hello</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token literal-property property">组件的子节点</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>props<span class="token punctuation">.</span>children<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 函数子节点</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">Hello</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  props<span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>	组件的子节点被调用了</pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">// &lt;Hello > 我是文本子节点 & lt;/Hello></span></pre></td></tr><tr><td data-num="20"></td><td><pre> <span class="token comment">// &lt;Hello>&#123;()=>console.log (' 函数子节点 ')&#125;&lt;/Hello></span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">const</span> title<span class="token operator">=</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="23"></td><td><pre> <span class="token operator">&lt;</span>Hello<span class="token operator">></span><span class="token operator">&lt;</span>p<span class="token operator">></span>哈哈哈我是p<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Hello<span class="token operator">></span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>react<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="props校验"><a class="anchor" href="#props校验">#</a> props 校验</h2>
<ul>
<li>对于组件来说，props 是外来的，无法保证徐建使用者传来什么格式的数据</li>
<li>如果传入数据合适不对，可能会导致组件内部报错</li>
<li>关键问题：组件的使用者不知道明确的错误原因</li>
</ul>
<p>比如下面：小明要求传入的 color 是个数组格式，而小红在使用时传了字符串，使得报错，但是不知道什么错误</p>
<p><img data-src="../images/React%E7%BB%84%E4%BB%B6/1650806450388.png" alt="1650806450388" /></p>
<p>props 校验</p>
<ul>
<li>允许在创建组件的时候，就指定 props 的类型、格式等</li>
<li>作用：捕获使用组件时因为 props 导致的错误，给出明确的错误提示，增加组建的健壮性</li>
</ul>
<p><img data-src="../images/React%E7%BB%84%E4%BB%B6/1650807266760.png" alt="1650807266760" /></p>
<p>使用步骤</p>
<ol>
<li>安装包 <code>prop-types</code>  (yarn add prop-types /npm i prop-types 包)</li>
<li>导入 prop-types 包      需要 js 文件放在第一行                                               <code>import PropTypes from “prop-types”</code></li>
<li>使用组件名.propTypes={} 来给组件的 prop 添加校验规则</li>
</ol>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">"prop-types"</span><span class="token punctuation">;</span> <span class="token comment">// 需第一行</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createRoot <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 容器</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">createRoot</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 渲染容器</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">Hello</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>	接收颜色：</pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token operator">&lt;</span>ul<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#123;</span>props<span class="token punctuation">.</span>colors<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">&#123;</span>index<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token punctuation">&#123;</span>item<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>Hello<span class="token punctuation">.</span>propTypes<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token literal-property property">colors</span><span class="token operator">:</span>PropTypes<span class="token punctuation">.</span>array</pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">// 使用 JSX 创建元素</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">const</span> title<span class="token operator">=</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token operator">&lt;</span>Hello colors<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">[</span><span class="token string">'pink'</span><span class="token punctuation">,</span><span class="token string">'orange'</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Hello<span class="token operator">></span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 渲染页面</span></pre></td></tr></table></figure><p><strong>约束规则</strong></p>
<ol>
<li>常见类型：array/bool/func/number/object/string</li>
<li>React 元素类型：element</li>
<li>必填项：isRequired</li>
<li>特定结构的对象：shape ({})</li>
</ol>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 添加 props 校验</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 属性 a 的类型 数值 (number)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 属性 fn 的类型 函数（func) 并且为必填项</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 属性 tag 的类型 React 元素 (element)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 属性 filter 的类型 对象且是格式如 (&#123;area:' 上海 ',price:1999&#125;)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>App<span class="token punctuation">.</span>propTypes<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token literal-property property">a</span><span class="token operator">:</span>PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token literal-property property">fn</span><span class="token operator">:</span>PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token literal-property property">tag</span><span class="token operator">:</span>PropTypes<span class="token punctuation">.</span>element<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token literal-property property">filter</span><span class="token operator">:</span>PropTypes<span class="token punctuation">.</span><span class="token function">shape</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token literal-property property">area</span><span class="token operator">:</span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token literal-property property">price</span><span class="token operator">:</span>PropTypes<span class="token punctuation">.</span>number</pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="默认值"><a class="anchor" href="#默认值">#</a> 默认值</h2>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 未传入默认值生效  指定分页大小</span></pre></td></tr><tr><td data-num="2"></td><td><pre>App<span class="token punctuation">.</span>defaultProps<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  pageSize；<span class="token number">10</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h1 id="父传子"><a class="anchor" href="#父传子">#</a> 父传子</h1>
<ul>
<li>父组件提供要传递的 state 数据</li>
<li>给子组件标签添加属性，值为 state 中的数据</li>
<li>子组件中通过 props 接收父组件传递数据</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		<span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">></span>子组件接收父亲的姓：<span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token literal-property property">lastName</span><span class="token operator">:</span><span class="token string">'L'</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token operator">&lt;</span>p<span class="token operator">></span>父组件中的姓：<span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>lastName<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>		<span class="token operator">&lt;</span>Son  name<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>lastName<span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="15"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="16"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h1 id="子传父"><a class="anchor" href="#子传父">#</a> 子传父</h1>
<ul>
<li>父组件提供一个回调函数（用于接收数据）</li>
<li>将该函数作为属性的值，传递给子组件</li>
</ul>
<p>思路：利用回调函数，父组件提供回调，子组件调用，将要传递的数据作为回调函数的参数</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		<span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">"son子组件中的值"</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token function-variable function">handleClick</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">getSonMsg</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="10"></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>		 <span class="token operator">&lt;</span>p<span class="token operator">></span>子组件接收父亲的姓：<span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>		 <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">&#125;</span><span class="token operator">></span>点我给父亲传值<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>		<span class="token literal-property property">lastName</span><span class="token operator">:</span><span class="token string">'L'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="21"></td><td><pre>		<span class="token literal-property property">sonMsg</span><span class="token operator">:</span><span class="token string">''</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	<span class="token function-variable function">getMsg</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>			<span class="token literal-property property">sonMsg</span><span class="token operator">:</span>msg</pre></td></tr><tr><td data-num="26"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="30"></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="31"></td><td><pre>		<span class="token operator">&lt;</span>p<span class="token operator">></span>父组件中的姓：<span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>lastName<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="32"></td><td><pre>		<span class="token operator">&lt;</span>p<span class="token operator">></span>父组件接收子组件的值：<span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>sonMsg<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="33"></td><td><pre>		<span class="token operator">&lt;</span>Son  name<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>lastName<span class="token punctuation">&#125;</span> getSonMsg<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>getMsg<span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="34"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="35"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="36"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h1 id="兄弟之间通讯"><a class="anchor" href="#兄弟之间通讯">#</a> 兄弟之间通讯</h1>
<ul>
<li>将共享状态升到最近的公共组件中，由公共父组件管理这个状态</li>
<li>思想：状态提升</li>
<li>功能父组件职责：1 提供共享状态 2 提供操作共享状态的方法</li>
<li>要通讯的子组件只需通过 props 接收状态或操作状态的方法</li>
</ul>
<p><img data-src="../images/React%E7%BB%84%E4%BB%B6/1650802946180.png" alt="1650802946180" /></p>
<p>以下计数器为例，借用最近的父亲 Father 实现兄弟 Son1 Son2 之间的通信:</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createRoot <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 容器</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">createRoot</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 渲染容器</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Son1</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		 <span class="token operator">&lt;</span>p<span class="token operator">></span>计数器的值：<span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>count<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Son2</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="16"></td><td><pre>		 <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>addCount<span class="token punctuation">&#125;</span><span class="token operator">></span>点击计数器加<span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="17"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>	state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	  <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">0</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>	<span class="token function-variable function">addCount</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>			<span class="token literal-property property">count</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span></pre></td></tr><tr><td data-num="27"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="31"></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="32"></td><td><pre>	   <span class="token operator">&lt;</span>Son1 count<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="33"></td><td><pre>		 <span class="token operator">&lt;</span>Son2 addCount<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>addCount<span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="34"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="35"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="36"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token comment">// 使用 JSX 创建元素</span></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token keyword">const</span> title<span class="token operator">=</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="41"></td><td><pre> <span class="token operator">&lt;</span>Father <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 渲染页面</span></pre></td></tr></table></figure><h1 id="context"><a class="anchor" href="#context">#</a> Context</h1>
<p>如图：APP 组件要传递数据给 Child 组件，该如何处理？</p>
<p>&lt;img src=&quot;../images/React%E7%BB%84%E4%BB%B6/1650803664701.png&quot; alt=&quot;1650803664701&quot; style=&quot;zoom: 80%;&quot; /&gt;</p>
<ul>
<li>使用 Context 代替 props 一层层繁琐的传递</li>
<li>作用：跨组件传递数据（比如：主题、语言）</li>
</ul>
<p>使用步骤：</p>
<ul>
<li>调用 React.createContext () 创建 Provide (提供数据) 和 Consumer (消费数据) 两个组件</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span>Provider<span class="token punctuation">,</span>Consumer<span class="token punctuation">&#125;</span><span class="token operator">=</span>React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul>
<li>
<p>使用 Provider 组件作为父节点</p>
</li>
<li>
<p>设置 value 属性，表示要传递的数据</p>
</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Provider</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pink<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>App<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Child1</span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Provider</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><ul>
<li>使用 Consumer 接收参数</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Consumer</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre> &#123;data=><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>data参数表示要接受的数据：&#123;data&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>&#125;</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Consumer</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>总体为：</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createRoot <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 容器</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">createRoot</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 渲染容器</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> Provider<span class="token punctuation">,</span> Consumer <span class="token punctuation">&#125;</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	  <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">99</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token operator">&lt;</span>p<span class="token operator">></span>我是<span class="token constant">APP</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>		<span class="token operator">&lt;</span>Provider value<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">&#125;</span><span class="token operator">></span></pre></td></tr><tr><td data-num="15"></td><td><pre>		   <span class="token operator">&lt;</span>Son1 <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="16"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">></span></pre></td></tr><tr><td data-num="17"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="18"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">Son1</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="24"></td><td><pre>	 <span class="token operator">&lt;</span>p<span class="token operator">></span>我是Son1<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="25"></td><td><pre>	 <span class="token operator">&lt;</span>Son2 <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="26"></td><td><pre>	<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="27"></td><td><pre>	<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">Son2</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>	<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="31"></td><td><pre>	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="32"></td><td><pre>	 <span class="token operator">&lt;</span>p<span class="token operator">></span>我是Son2<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="33"></td><td><pre>	 <span class="token operator">&lt;</span>Son3 <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="34"></td><td><pre>	<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="35"></td><td><pre>	<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">Son3</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>	<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="39"></td><td><pre>	<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="40"></td><td><pre>	<span class="token operator">&lt;</span>p<span class="token operator">></span>我是Son3<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="41"></td><td><pre>	<span class="token operator">&lt;</span>Consumer<span class="token operator">></span></pre></td></tr><tr><td data-num="42"></td><td><pre>	<span class="token punctuation">&#123;</span><span class="token parameter">data</span><span class="token operator">=></span><span class="token operator">&lt;</span>span<span class="token operator">></span>Son3接收的App的数据为：<span class="token punctuation">&#123;</span>data<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>	<span class="token operator">&lt;</span><span class="token operator">/</span>Consumer<span class="token operator">></span></pre></td></tr><tr><td data-num="44"></td><td><pre>	<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="45"></td><td><pre>	<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token comment">// 使用 JSX 创建元素</span></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token keyword">const</span> title<span class="token operator">=</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="49"></td><td><pre><span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="50"></td><td><pre> <span class="token operator">&lt;</span>Father <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 渲染页面</span></pre></td></tr></table></figure><h1 id="组件生命周期"><a class="anchor" href="#组件生命周期">#</a> 组件生命周期</h1>
<ul>
<li>意义：组件的生命周期有助于理解组建的运行方式、完成更复杂的组件功能、分析组件的错误原因等</li>
<li>组件的生命周期：组件从被创建到挂载到页面中运行，再到组件不用时卸载的过程</li>
<li>生命周期的每个阶段总是伴随着一些方法调用，这些方法就是生命周期的钩子函数</li>
<li>钩子函数的作用：为开发人员在不同阶段操作组件提供了时机</li>
</ul>
<p><strong>生命周期三个阶段</strong></p>
<ol>
<li>每个阶段的执行时机</li>
<li>每个阶段钩子函数的执行顺序</li>
<li>每个阶段钩子函数的作用</li>
</ol>
<p>导致变化图：</p>
<p><img data-src="../images/React%E7%BB%84%E4%BB%B6/1650853447865.png" alt="1650853447865" /></p>
<h2 id="创建时"><a class="anchor" href="#创建时">#</a> 创建时</h2>
<ul>
<li>执行时机：组件创建时（页面加载时）</li>
<li>执行顺序： <code>constructor()</code> ------ <code>render()</code> -------- <code>componentDidMount()</code></li>
</ul>
<p><img data-src="../images/React%E7%BB%84%E4%BB%B6/1650852739257.png" alt="1650852739257" /></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		<span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">0</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		<span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"生命周期钩子函数：这是constructor()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"生命周期钩子函数：这是render()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"bean"</span><span class="token operator">></span>打豆豆次数<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>		<span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="15"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="16"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token comment">// 组件挂载（完成 DOM 渲染） 常用：发送 ajax 请求  获取 DOM</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"生命周期钩子函数：这是componentDidMount()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"获取DOM"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	  <span class="token keyword">const</span> p<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">"bean"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>执行结果说明顺序</p>
<p><img data-src="../images/React%E7%BB%84%E4%BB%B6/1650853318804.png" alt="1650853318804" /></p>
<h2 id="更新时"><a class="anchor" href="#更新时">#</a> 更新时</h2>
<p>更新触发钩子函数 <code>render()</code> --&gt; <code>componentDidUpdate()</code> , 触发更新情况：</p>
<ul>
<li>setState()</li>
<li>forceUpdate () 强制更新</li>
<li>New Props (接收到新属性时，一般是子组件接收父组件传数据时)</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		<span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">0</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		<span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"生命周期钩子函数：constructor()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token function-variable function">addCount</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"这里是addCount()"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>			<span class="token literal-property property">count</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token function-variable function">force</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">forceUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"生命周期钩子函数：render()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="21"></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="22"></td><td><pre>		<span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"bean"</span><span class="token operator">></span>打豆豆次数<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="23"></td><td><pre>	  <span class="token operator">&lt;</span>Son count<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="24"></td><td><pre>		<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>addCount<span class="token punctuation">&#125;</span><span class="token operator">></span>增加<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="25"></td><td><pre>		<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>force<span class="token punctuation">&#125;</span><span class="token operator">></span>强制更新<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="26"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="27"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>	<span class="token comment">// 组件挂载（完成 DOM 渲染） 常用：发送 ajax 请求  获取 DOM</span></pre></td></tr><tr><td data-num="30"></td><td><pre>	<span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"生命周期钩子函数：componentDidMount()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>  state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>     <span class="token literal-property property">hi</span><span class="token operator">:</span><span class="token string">'hi'</span></pre></td></tr><tr><td data-num="37"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"子组件---生命周期钩子函数：render()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>		<span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>count<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="41"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>  <span class="token comment">// 可以获取 DOM 发请求 如果 setState 必须放在 if 条件中，一般是比较上一次的 props 看是否相同</span></pre></td></tr><tr><td data-num="43"></td><td><pre>	<span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"子组件-----生命周期钩子函数：componentDidUpdate()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token comment">// 比较！！！</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prevProps<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>prevProps<span class="token operator">!==</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>        <span class="token literal-property property">hi</span><span class="token operator">:</span><span class="token string">'hi lhm'</span></pre></td></tr><tr><td data-num="50"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="53"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><img data-src="../images/React%E7%BB%84%E4%BB%B6/1650854671941.png" alt="1650854671941" /></p>
<h2 id="卸载时"><a class="anchor" href="#卸载时">#</a> 卸载时</h2>
<ul>
<li>执行时机：组件从页面中消失   <code>componentWillUnmount()</code></li>
</ul>
<p><img data-src="../images/React%E7%BB%84%E4%BB%B6/1650855107298.png" alt="1650855107298" /></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		<span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">0</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		<span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"生命周期钩子函数：constructor()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token function-variable function">addCount</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"这里是addCount()"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>			<span class="token literal-property property">count</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token function-variable function">force</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">forceUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token function-variable function">judge</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"这是judge() 判断豆豆时候活着"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token operator">&lt;</span><span class="token number">3</span><span class="token operator">?</span><span class="token operator">&lt;</span>Son count<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span><span class="token operator">:</span><span class="token operator">&lt;</span>p<span class="token operator">></span>豆豆被打死了<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="21"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"生命周期钩子函数：render()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="25"></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="26"></td><td><pre>		<span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"bean"</span><span class="token operator">></span>打豆豆次数<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="27"></td><td><pre>	  <span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">judge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>		<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>addCount<span class="token punctuation">&#125;</span><span class="token operator">></span>增加<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="29"></td><td><pre>		<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>force<span class="token punctuation">&#125;</span><span class="token operator">></span>强制更新<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="30"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="31"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="32"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>	<span class="token comment">// 组件挂载（完成 DOM 渲染） 常用：发送 ajax 请求  获取 DOM</span></pre></td></tr><tr><td data-num="34"></td><td><pre>	<span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"生命周期钩子函数：componentDidMount()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"子组件---生命周期钩子函数：render()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>		<span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>count<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="42"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>	<span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"子组件-----生命周期钩子函数：componentDidUpdate()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>  <span class="token comment">// 卸载时！！！</span></pre></td></tr><tr><td data-num="47"></td><td><pre>	<span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"子组件-----生命周期钩子函数：componentWillUnmount()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h1 id="组件复用"><a class="anchor" href="#组件复用">#</a> 组件复用</h1>
<ul>
<li>
<p>处理方式：复用相似的功能（联想函数封装）</p>
</li>
<li>
<p>复用 1-state  2 - 操作 state 的方法</p>
</li>
<li>
<p>方式：1-render props 模式  2 - 高阶组件（HOC)</p>
</li>
<li>
<p>注意：这两方式不是新的 API，而是编码技巧</p>
</li>
</ul>
<h2 id="render-props"><a class="anchor" href="#render-props">#</a> render props</h2>
<ul>
<li>在使用组件时，添加一个值为函数 props, 通过函数参数来获取 state</li>
<li>使用函数的返回值作为要渲染的 UI 内容</li>
</ul>
<p>实现复用</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createRoot <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">createRoot</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>  </pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Mouse</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	 state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		   <span class="token literal-property property">x</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>			 <span class="token literal-property property">y</span><span class="token operator">:</span><span class="token number">0</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	 <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	 <span class="token comment">// 记得箭头函数改变 this 指向</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	 <span class="token function-variable function">getPos</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		 <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>			 <span class="token literal-property property">x</span><span class="token operator">:</span>e<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>			 <span class="token literal-property property">y</span><span class="token operator">:</span>e<span class="token punctuation">.</span>clientY</pre></td></tr><tr><td data-num="16"></td><td><pre>		 <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	 <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre> <span class="token comment">// 监听光标变化，改变数据</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	 <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>		 window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"mousemove"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>getPos<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>	 <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	 <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>     <span class="token comment">// 使用函数的返回值作为要渲染的 UI 内容！！！</span></pre></td></tr><tr><td data-num="24"></td><td><pre>		 <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>	 <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment">// 使用 JSX 创建元素</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token keyword">const</span> title<span class="token operator">=</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="30"></td><td><pre>   <span class="token comment">// 在使用组件时，添加一个值为函数 props, 通过函数参数来获取 state</span></pre></td></tr><tr><td data-num="31"></td><td><pre>  <span class="token operator">&lt;</span>Mouse render<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token parameter">mouse</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token operator">&lt;</span>p<span class="token operator">></span>当前光标位置为 x<span class="token operator">:</span><span class="token punctuation">&#123;</span>mouse<span class="token punctuation">.</span>x<span class="token punctuation">&#125;</span> y<span class="token operator">:</span><span class="token punctuation">&#123;</span>mouse<span class="token punctuation">.</span>y<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="32"></td><td><pre>	<span class="token operator">&lt;</span>Mouse render<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token parameter">mouse</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">0</span><span class="token operator">--</span><span class="token operator">></span> <span class="token operator">></span>会动的盒子<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 渲染页面</span></pre></td></tr></table></figure><ul>
<li>推荐：最好属性名字用 children 代替 render 属性</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Mouse</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token operator">...</span><span class="token operator">...</span>同上</pre></td></tr><tr><td data-num="3"></td><td><pre>	 <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>     <span class="token comment">// 使用 children</span></pre></td></tr><tr><td data-num="5"></td><td><pre>		 <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	 <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 使用 JSX 创建元素  使用 children!!!</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">const</span> title<span class="token operator">=</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token operator">&lt;</span>Mouse<span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token parameter">mouse</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token operator">&lt;</span>p<span class="token operator">></span>当前光标位置为 x<span class="token operator">:</span><span class="token punctuation">&#123;</span>mouse<span class="token punctuation">.</span>x<span class="token punctuation">&#125;</span> y<span class="token operator">:</span><span class="token punctuation">&#123;</span>mouse<span class="token punctuation">.</span>y<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Mouse<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token operator">&lt;</span>Mouse<span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token parameter">mouse</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">1</span><span class="token operator">--</span><span class="token operator">>></span>会动的盒子<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Mouse<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p><strong>代码优化</strong></p>
<ol>
<li>推荐：给 render props 模式添加 props 校验</li>
<li>在组件卸载时接触 mousemove 事件绑定</li>
</ol>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">"prop-types"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">...</span>同上</pre></td></tr><tr><td data-num="3"></td><td><pre>Mouse<span class="token punctuation">.</span>propTypes<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token literal-property property">children</span><span class="token operator">:</span>PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">.</span>isRequired</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token operator">...</span>同上</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 组件卸载接触绑定</span></pre></td></tr><tr><td data-num="8"></td><td><pre> <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>	 window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"mousemove"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>getPos<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	 <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="hoc高阶组件"><a class="anchor" href="#hoc高阶组件">#</a> HOC 高阶组件</h2>
<h3 id="理解"><a class="anchor" href="#理解">#</a> 理解</h3>
<ul>
<li>目的：实现状态逻辑复用</li>
<li>采用包装装饰模式，比如说，手机壳</li>
<li>手机：获取保护功能</li>
<li>手机壳：提供保护功能</li>
<li>高阶组件就相当于手机壳，通过包装组件，增强组件功能</li>
</ul>
<p><strong>实现</strong></p>
<ul>
<li>高阶组件（HOC,Higher-Order-Component) 是一个函数，接收要包装的函数，返回增强后的组件</li>
<li>高阶函数内部创建一个类组件，在这个类组件中提供复用的状态逻辑代码，通过 props 将复用的状态传递给被包装组件 WrappedComponent</li>
</ul>
<h3 id="使用"><a class="anchor" href="#使用">#</a> 使用</h3>
<ul>
<li>创建一个函数，名字约定以 With 开头</li>
<li>指定函数参数（作为要渲染的组件，应大写字母开头）</li>
<li>在函数内部创建一个类徐建，提供复用的状态逻辑代码，并返回</li>
<li>在该组件中渲染参数组件，同时将状态通过 props 传递给参数组件</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createRoot <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">createRoot</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>  </pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 高阶组件</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">function</span> <span class="token function">WithMouse</span><span class="token punctuation">(</span><span class="token parameter">WrappedComponent</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token comment">// 复用逻辑</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">class</span> <span class="token class-name">Mouse</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		 state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>			   <span class="token literal-property property">x</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>				 <span class="token literal-property property">y</span><span class="token operator">:</span><span class="token number">0</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		 <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		 <span class="token comment">// 记得箭头函数改变 this 指向</span></pre></td></tr><tr><td data-num="14"></td><td><pre>		 <span class="token function-variable function">getPos</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>			 <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>				 <span class="token literal-property property">x</span><span class="token operator">:</span>e<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>				 <span class="token literal-property property">y</span><span class="token operator">:</span>e<span class="token punctuation">.</span>clientY</pre></td></tr><tr><td data-num="18"></td><td><pre>			 <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		 <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	 <span class="token comment">// 监听光标变化，改变数据</span></pre></td></tr><tr><td data-num="21"></td><td><pre>		 <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>			 window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"mousemove"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>getPos<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>		 <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>		 <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>			 window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"mousemove"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>getPos<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>		 <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>		<span class="token comment">// 包装组件</span></pre></td></tr><tr><td data-num="28"></td><td><pre>		 <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>			 <span class="token keyword">return</span> <span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">&#123;</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>WrappedComponent<span class="token operator">></span></pre></td></tr><tr><td data-num="30"></td><td><pre>		 <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>	 <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>	 <span class="token comment">// 返回包装组件</span></pre></td></tr><tr><td data-num="33"></td><td><pre>	 <span class="token keyword">return</span> Mouse<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token comment">// 定义需要包装的组件</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">P</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>	<span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">></span>光标位置 x<span class="token operator">:</span><span class="token punctuation">&#123;</span>props<span class="token punctuation">.</span>x<span class="token punctuation">&#125;</span> y<span class="token operator">:</span><span class="token punctuation">&#123;</span>props<span class="token punctuation">.</span>y<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">D</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>	<span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">2</span><span class="token operator">--</span><span class="token operator">>></span>会动的盒子<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token comment">// 得到已经包装好的 P</span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token keyword">const</span> UseP<span class="token operator">=</span><span class="token function">WithMouse</span><span class="token punctuation">(</span><span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token keyword">const</span> UseD<span class="token operator">=</span><span class="token function">WithMouse</span><span class="token punctuation">(</span><span class="token constant">D</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token comment">// 将打包好的 P 渲染在 UI</span></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token keyword">const</span> title<span class="token operator">=</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="48"></td><td><pre>  <span class="token operator">&lt;</span>UseP <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="49"></td><td><pre>	<span class="token operator">&lt;</span>UseD <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 渲染页面</span></pre></td></tr></table></figure><p>问题：经过上述复用，出现两个 &lt;Mouse /&gt; 组件，组件名字一样，不利于代码的维护</p>
<p>解决：使用 <code>displayName</code></p>
<h3 id="displayname"><a class="anchor" href="#displayname">#</a> displayName</h3>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 高阶组件</span></pre></td></tr><tr><td data-num="2"></td><td><pre>function <span class="token class-name">WithMouse</span><span class="token punctuation">(</span><span class="token class-name">WrappedComponent</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token comment">// 复用逻辑</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">class</span> <span class="token class-name">Mouse</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>同上</pre></td></tr><tr><td data-num="6"></td><td><pre>   <span class="token keyword">return</span> <span class="token operator">&lt;</span><span class="token class-name">WrappedComponent</span> <span class="token punctuation">&#123;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	 <span class="token comment">// ！！！定义返回组件名字！！！</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token class-name">Mouse</span><span class="token punctuation">.</span>displayName<span class="token operator">=</span>`<span class="token class-name">WithMouse</span>$<span class="token punctuation">&#123;</span><span class="token function">getDisplayName</span><span class="token punctuation">(</span><span class="token class-name">WrappedComponent</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>`<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	 <span class="token comment">// 返回包装组件</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	 <span class="token keyword">return</span> <span class="token class-name">Mouse</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">//！！！封装返回名字！！！</span></pre></td></tr><tr><td data-num="14"></td><td><pre>function <span class="token function">getDisplayName</span><span class="token punctuation">(</span><span class="token class-name">WrappedComponent</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token keyword">return</span> <span class="token class-name">WrappedComponent</span><span class="token punctuation">.</span>displayName <span class="token operator">||</span>  <span class="token class-name">WrappedComponent</span><span class="token punctuation">.</span>name <span class="token operator">||</span> <span class="token string">"Component"</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="传递props"><a class="anchor" href="#传递props">#</a> 传递 props</h3>
<ul>
<li>为了解决高阶组件 props 丢失问题，渲染 WrappedComponent 组件时，将 state 和 this.props 一起传递给组件</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">&#123;</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">&#125;</span> <span class="token punctuation">&#123;</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr></table></figure><h1 id="setstate"><a class="anchor" href="#setstate">#</a> setState()</h1>
<ul>
<li>setState 是异步更新数据的</li>
<li>注意：使用该数据时，其后面的 setSate 不依赖于前面的 setState ()</li>
<li>多次调用 setState () 只会触发一次重新渲染</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">1</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span> <span class="token comment">//1</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span>  <span class="token comment">//1</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>推荐语法</strong></p>
<ul>
<li>使用 setState (state,props)=&gt;{}) 语法</li>
<li>参数 state: 表示 <code>最新的state</code></li>
<li>参数 props: 表示 <code>最新的props</code></li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">1</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>props</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token literal-property property">count</span><span class="token operator">:</span>state<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span>  <span class="token comment">//1</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 虽然是异步的，但 state 是最新的</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>props</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token literal-property property">count</span><span class="token operator">:</span>state<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span>  <span class="token comment">//2</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>第二个参数</strong></p>
<ul>
<li>场景：在状态更新后立即执行某个操作</li>
<li>语法：setState (update [,callback])</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>props</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">count</span><span class="token operator">:</span>state<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span>  <span class="token comment">//2</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"这个回调函数第二个参数是在状态更新后立即执行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre> document<span class="token punctuation">.</span>title<span class="token operator">=</span><span class="token string">'更新state后的标题'</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count</pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h1 id="组件性能优化"><a class="anchor" href="#组件性能优化">#</a> 组件性能优化</h1>
<p>1. 减轻 state: 只存储组件渲染相爱难相关的数据</p>
<ul>
<li>注意：不用做渲染的数据 不要放在 state 中</li>
<li>对于这种需要在多个方法中渲染的，直接放 this</li>
</ul>
<p>2. 组件更新机制：父组件更新会引起子组件也被更新</p>
<ul>
<li>
<p>使用钩子函数 shouldComponenentUpdate (nextProps,nextState)</p>
</li>
<li>
<p>nextState 更新后的数据    this.state 更新前数据</p>
</li>
<li>
<p>nextProps 更新后的数据    this.props 更新前数据</p>
</li>
<li>
<p>触发时机：更新阶段的钩子函数，组件更新渲染时执行（shouldComponentUpdate------&gt;render)</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Hello</span> extend React<span class="token punctuation">.</span>Component<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span>nextState</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// 条件</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 不更新</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h1 id="纯组件"><a class="anchor" href="#纯组件">#</a> 纯组件</h1>
<ul>
<li>不需要手动比较 shouldComponentUpdate</li>
<li>纯组件内部通过<strong>对比</strong>前后两次 props 和 state 的值，来决定是否重新渲染组件</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>PureComponent</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token operator">&lt;</span>div<span class="token operator">></span>纯组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
<li>
<p>说明：纯组件内部的对比是 shallow compare (浅层对比)</p>
</li>
<li>
<p>对于值类型来说，比较两个值是否相同（直接赋值即可）</p>
</li>
<li>
<p>对于引用类型来说，只比较对象的引用地址是否相同</p>
</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//PureComponent 内部对比</span></pre></td></tr><tr><td data-num="2"></td><td><pre>最新的state<span class="token punctuation">.</span>number<span class="token operator">===</span>上一次的state<span class="token punctuation">.</span>number <span class="token comment">//false, 重新渲染组件</span></pre></td></tr></table></figure><ul>
<li>对象：不要直接修改数据，而是通过创建新对象的方法</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 正确做法   count:66 为要修改的数据</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> newObj<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>obj<span class="token punctuation">,</span><span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">66</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token literal-property property">obj</span><span class="token operator">:</span>newObj</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre> <span class="token comment">// 错误做法</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">const</span> newObj<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>obj<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token literal-property property">obj</span><span class="token operator">:</span>newObj</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><ul>
<li>数组：不要用数据的 push/unshilft 直接修改当前数组，而是用 cincat slice 等返回新数据的方法。总结：创建新的不要直接修改</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">list</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">,</span><span class="token punctuation">&#123;</span>新数据<span class="token punctuation">&#125;</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h1 id="虚拟dom和diff算法"><a class="anchor" href="#虚拟dom和diff算法">#</a> 虚拟 DOM 和 Diff 算法</h1>
<ul>
<li>React 更新视图的思想是：只要 state 变化就重新渲染视图</li>
<li>问题：组件中只有一个 DOM 元素需要更新时，也得把组件的内容重新渲染到页面中</li>
<li>理想状态：部分更新，只更新有变化的地方</li>
<li>问题：React 是如何做到部分更新的？<strong>虚拟 DOM 和配合 Diff 算法</strong></li>
</ul>
<h2 id="虚拟dom"><a class="anchor" href="#虚拟dom">#</a> 虚拟 DOM</h2>
<ul>
<li>本质上就是一个 JS 对象，用来描述你希望在屏幕上看到的内容</li>
<li>组件 render 后，根据状态和 JSX 结构生成虚拟 DOM 对象</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 虚拟 DOOM 对象</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> element<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'h1'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token literal-property property">className</span><span class="token operator">:</span><span class="token string">'greeting'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token literal-property property">children</span><span class="token operator">:</span><span class="token string">'Hello JSX!'</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">//HTML 结构</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token operator">&lt;</span>h1 <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"greeting"</span><span class="token operator">></span>Hello <span class="token constant">JSX</span><span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span></pre></td></tr></table></figure><h2 id="diff算法"><a class="anchor" href="#diff算法">#</a> Diff 算法</h2>
<ul>
<li>根据虚拟 DOM，找不同，渲染变化的地方</li>
</ul>
<p><img data-src="../images/React%E7%BB%84%E4%BB%B6/1651024581731.png" alt="1651024581731" /></p>
<h2 id="执行过程"><a class="anchor" href="#执行过程">#</a> 执行过程</h2>
<ol>
<li>执行渲染时，React 会根据 state, 创建一个虚拟 DOM 树</li>
<li>根据虚拟 DOM 生成真正的 DOM，渲染到页面中</li>
<li>当数据变化后（调用 setState ()），重新根据新的数据，创建出新的虚拟 DOM 树</li>
<li>与上一次得到的虚拟 DOM 树进行对比，使用 Diff 算法找出不同，得到需要更新的内容</li>
<li>最终，React 只将变化的内容更新（patch）到 DOM 中，重新渲染到页面中</li>
</ol>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>组件</tag>
      </tags>
  </entry>
  <entry>
    <title>react学习</title>
    <url>/2021/09/08/react%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h1 id="react概述"><a class="anchor" href="#react概述">#</a> React 概述</h1>
<ul>
<li>
<p>React 是一个构建用户界面的 JavaScript 库</p>
</li>
<li>
<p>用户界面：HTML 页面（前端）</p>
</li>
<li>
<p>React 主要用来写 HTML 页面，构建 Web 页面</p>
</li>
</ul>
<p><strong>如果从 MVC 角度来说，React 仅仅是视图层（V)，也就是只负责视图的渲染，而并非提供了完整的 M 和 C 的功能。</strong></p>
<h1 id="react的特点"><a class="anchor" href="#react的特点">#</a> React 的特点</h1>
<ul>
<li>声明式</li>
<li>基于组件</li>
<li>学习一次，随处使用  web 移动端 VR 技术</li>
</ul>
<h1 id="react基本使用"><a class="anchor" href="#react基本使用">#</a> React 基本使用</h1>
<h2 id="安装"><a class="anchor" href="#安装">#</a> 安装</h2>
<p><code>npm  i react react-dom</code></p>
<p>在这里我制定了版本免得后续学习出现太多问题</p>
<p><code>npm i react@16.8.6 react-dom@16.8.6</code></p>
<ul>
<li>react 包是核心，提供创建元素、组件等功能</li>
<li>react-dom 包提供 DOM 相关功能</li>
</ul>
<h2 id="使用"><a class="anchor" href="#使用">#</a> 使用</h2>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>react<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">&lt;!-- 待挂载的节点 --></span></pre></td></tr><tr><td data-num="9"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>		<span class="token comment">&lt;!-- 1- 引入 js 文件，注意先引入 react 再是 react-dom --></span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./node_modules/react/umd/react.development.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./node_modules/react-dom/umd/react-dom.development.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre>	</pre></td></tr><tr><td data-num="14"></td><td><pre>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="15"></td><td><pre>		<span class="token comment">// 2 - 创建 react 元素  </span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token comment">// 参数一：元素名称  </span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token comment">// 参数二：元素属性  </span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token comment">// 第三个及其以后参数：元素的子节点</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token keyword">const</span> title<span class="token operator">=</span>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"h1"</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token string">"Hello React"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	  <span class="token comment">// 3 - 渲染 react 元素到页面中去  </span></pre></td></tr><tr><td data-num="21"></td><td><pre>      <span class="token comment">// 参数一：要渲染的 react 元素</span></pre></td></tr><tr><td data-num="22"></td><td><pre>      <span class="token comment">// 参数二：要挂载的对象</span></pre></td></tr><tr><td data-num="23"></td><td><pre>		ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"root"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="25"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="常用方法"><a class="anchor" href="#常用方法">#</a> 常用方法</h2>
<ul>
<li>React.createElement () 说明</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 2 - 创建 react 元素  </span></pre></td></tr><tr><td data-num="2"></td><td><pre>      <span class="token comment">// 参数一：元素名称  </span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token comment">// 参数二：元素属性  </span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token comment">// 第三个及其以后参数：元素的子节点</span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token keyword">const</span> title<span class="token operator">=</span>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"h1"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>       <span class="token punctuation">&#123;</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">"我是标题"</span><span class="token punctuation">,</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">"Hello React"</span><span class="token punctuation">,</span>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"span"</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token string">"我是span"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul>
<li>ReactDOM.render () 说明</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 渲染 react 元素到页面中去  </span></pre></td></tr><tr><td data-num="2"></td><td><pre>      <span class="token comment">// 参数一：要渲染的 react 元素  </span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token comment">// 参数二：要挂载的对象</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"root"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h1 id="react脚手架基本使用"><a class="anchor" href="#react脚手架基本使用">#</a> React 脚手架基本使用</h1>
<h2 id="意义"><a class="anchor" href="#意义">#</a> 意义</h2>
<ul>
<li>脚手架是开现代 Web 应用的必备</li>
<li>充分利用 webpack Babel ESLint 等工具辅助项目开发</li>
<li>零配置，无需手动配置繁琐工具即可使用</li>
<li>关注业务，而不是工具配置</li>
</ul>
<h2 id="初始化项目"><a class="anchor" href="#初始化项目">#</a> 初始化项目</h2>
<ul>
<li>
<p>初始化项目   <code>npx create-react-app my-app</code></p>
<p><strong>看到 Happy hacking!，即为成功</strong></p>
</li>
</ul>
<p>​         <strong>引入命令 npx 无需安装脚手架包，就可以使用这个包提供的命令</strong></p>
<ul>
<li>启动项目，在项目根目录执行命令  <code>npm start</code></li>
</ul>
<p>​              <code>cd my-app</code>       <code> npm start</code></p>
<p>&lt;img src=&quot;../images/react/1650763488670.png&quot; alt=&quot;1650763488670&quot; style=&quot;zoom: 67%;&quot; /&gt;</p>
<h2 id="脚手架中使用react"><a class="anchor" href="#脚手架中使用react">#</a> 脚手架中使用 React</h2>
<p>进入 my-app/src/index.js----- 删除内容 --- 自行创建</p>
<ul>
<li>导入 react 和 react-dom 两个包</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">"react-dom"</span></pre></td></tr></table></figure><ul>
<li>调用 React.createElement () 方法创建 react 元素</li>
<li>调用 ReactDOM.render () 方法渲染 react 元素到页面中去</li>
</ul>
<p><code>index.js</code>    根据控制台提示做了改变</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">"react-dom"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> title <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"h1"</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token string-property property">"title"</span><span class="token operator">:</span><span class="token string">"标题"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">"Hello React!!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"root"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>新版 @18.0.0</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createRoot <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 容器</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">createRoot</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 渲染容器</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> title <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"h1"</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token string-property property">"title"</span><span class="token operator">:</span><span class="token string">"标题"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">"我是h1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建元素</span></pre></td></tr><tr><td data-num="6"></td><td><pre>root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 渲染页面</span></pre></td></tr></table></figure><h1 id="jsx"><a class="anchor" href="#jsx">#</a> JSX</h1>
<h2 id="简介"><a class="anchor" href="#简介">#</a> 简介</h2>
<p>JSX 是<strong> JavaScript XML</strong> 的简写</p>
<p><strong>表示在 JavaScript 代码中写 XML（HTML）格式的代码。</strong></p>
<p><strong>优势：</strong></p>
<ul>
<li>
<p>声明式语法更加直观</p>
</li>
<li>
<p>与 HTML 结构相同</p>
</li>
<li>
<p>降低了学习成本，提升开发效率。</p>
</li>
</ul>
<p><strong>因为 React.createElement () 很繁琐 很难看出结构，则出现了 JSX 替代</strong></p>
<p><img data-src="../images/react/1650765738818.png" alt="1650765738818" /></p>
<h2 id="使用-2"><a class="anchor" href="#使用-2">#</a> 使用</h2>
<p>使用 JSX 替代 React.createElement ()</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 使用 React.createElement () 创建元素</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">//const title = React.createElement ("h1",&#123;"title":"标题"&#125;,"我是 h1"); </span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 使用 JSX 创建元素</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> title<span class="token operator">=</span><span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token operator">&lt;</span>h1<span class="token operator">></span>Hello <span class="token constant">JSX</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token operator">&lt;</span>span<span class="token operator">></span>Come on<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="原因"><a class="anchor" href="#原因">#</a> 原因</h2>
<p><strong>为什么 JSX 能在脚手架使用 JSX 语法？</strong></p>
<ol>
<li>JSX 不是标准的 ECMAScript 语法，它是 ECMAScript 语法扩展</li>
<li>需要使用 babel 编译处理后，才能在浏览器环境中使用</li>
<li>create-react-app 脚手架已经默认有该配置，无需手动配置</li>
<li>编译 JSX 语法的包为：@babel/preset-react</li>
</ol>
<h2 id="注意点"><a class="anchor" href="#注意点">#</a> 注意点</h2>
<ol>
<li>React 元素的属性名使用驼峰命名法</li>
<li>特殊属性名：class-&gt;className 、for-&gt;htmlFor、tabindex-&gt;tabIndex</li>
<li>没有子节点的 React 元素可以用 /&gt; 结束</li>
<li>推荐：使用小括号包裹 JSX，从而避免 JS 中的自动插入分号陷阱</li>
</ol>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 使用 JSX 创建元素</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> title<span class="token operator">=</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>   <span class="token operator">&lt;</span>h1 className<span class="token operator">=</span><span class="token string">"hello"</span><span class="token operator">></span>Hello <span class="token constant">JSX</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre>	 <span class="token operator">&lt;</span>span<span class="token operator">></span>Come on<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre>	 <span class="token operator">&lt;</span>p<span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>效果图：</p>
<p><img data-src="../images/react/1650766767164.png" alt="1650766767164" /></p>
<h2 id="嵌入js表达式"><a class="anchor" href="#嵌入js表达式">#</a> 嵌入 JS 表达式</h2>
<ul>
<li>数据存储在 JS 中</li>
<li JavaScipt表达式="">语法：</li>
<li>注意：语法中是<strong>单大括号</strong>，不是双大括号</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">"LHM"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> dv<span class="token operator">=</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token operator">&lt;</span>div<span class="token operator">></span>你好，我叫<span class="token punctuation">&#123;</span>name<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>注意点：</strong></p>
<ul>
<li>单大括号中可以使用任意的 JavaScript 表达式</li>
<li>JSX 自身也是 JS 表达式</li>
<li>注意：JS 中的对象也是一个例外，一般只是出现在 style 样式中</li>
<li>注意：不能在 {} 中出现语句（比如 if/for 等）</li>
</ul>
<h2 id="条件渲染"><a class="anchor" href="#条件渲染">#</a> 条件渲染</h2>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> isLoading<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">loadingData</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">if</span><span class="token punctuation">(</span>isLoading<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token keyword">return</span> <span class="token operator">&lt;</span>h3<span class="token operator">></span>Loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		<span class="token keyword">return</span> <span class="token operator">&lt;</span>h3<span class="token operator">></span>No Loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 三元表达式</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">const</span> isLoading<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">loadingData</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token keyword">return</span>  isLoading<span class="token operator">?</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>h3<span class="token operator">></span>No Loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>h3<span class="token operator">></span>Loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">// 改造 & amp;&amp; 简化代码 达到要么展示要么隐藏效果</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">const</span> isLoading<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">loadingData</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>		<span class="token keyword">return</span>  isLoading <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>h3<span class="token operator">></span>Loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">const</span> title<span class="token operator">=</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	 <span class="token comment">// 条件渲染</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	 <span class="token punctuation">&#123;</span><span class="token function">loadingData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="列表渲染"><a class="anchor" href="#列表渲染">#</a> 列表渲染</h2>
<ul>
<li>渲染一组数据，使用数组中的 map () 方法</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> songs<span class="token operator">=</span><span class="token punctuation">[</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token punctuation">&#123;</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"我想"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token punctuation">&#123;</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"变"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#123;</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"有钱！"</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 注意要加 key 值保证唯一</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">const</span> list<span class="token operator">=</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token operator">&lt;</span>ul<span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#123;</span>songs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=></span><span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">&#123;</span>item<span class="token punctuation">.</span>id<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token punctuation">&#123;</span>item<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre> <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="样式处理"><a class="anchor" href="#样式处理">#</a> 样式处理</h2>
<ul>
<li>
<p>行内样式 style</p>
<ul>
<li></li>
<li>驼峰命名法</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> test<span class="token operator">=</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">1</span><span class="token operator">--</span><span class="token operator">>></span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">)</span></pre></td></tr></table></figure></li>
<li>
<p>类名 ------className (推荐)</p>
<ul>
<li>引入  import “./css/index.css”</li>
</ul>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.center</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token property">display</span><span class="token punctuation">:</span>inline-block<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token property">width</span><span class="token punctuation">:</span>200px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>   <span class="token property">height</span><span class="token punctuation">:</span>200px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>   <span class="token property">margin</span><span class="token punctuation">:</span>0 auto<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul>
<li>加入类名</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> test<span class="token operator">=</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"center"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">)</span></pre></td></tr></table></figure></li>
</ul>
<h2 id="总结"><a class="anchor" href="#总结">#</a> 总结</h2>
<ol>
<li>JSX 是 React 的核心内容</li>
<li>JSX 表示在 JS 代码中写 HTML 结构，是 React 声明式的体现</li>
<li>使用 JSX 配合嵌入的 JS 表达式，条件渲染。列表渲染，可以描述任意 UI 结构</li>
<li>推荐使用 className 的方式给 JSX 添加样式</li>
<li>React 完全利用 JS 语言自身能力表写 UI，而不是造轮子用指令的各种方法增强 HTML 功能。</li>
</ol>
<h1 id="react-组件"><a class="anchor" href="#react-组件">#</a> React 组件</h1>
<h2 id="介绍"><a class="anchor" href="#介绍">#</a> 介绍</h2>
<ul>
<li>组件是 React 的一等公民，使用 React 就是在使用组件</li>
<li>组件表示页面的部分功能</li>
<li>组件多个组件实现完整的页面功能</li>
<li>特点：可复用、独立、可组合</li>
</ul>
<h2 id="函数组件"><a class="anchor" href="#函数组件">#</a> 函数组件</h2>
<p>使用函数创建组件</p>
<ul>
<li>函数组件：使用 js 的函数（或者箭头函数）创建组件</li>
<li>约定 1：函数名称用<strong>大写字母开头</strong></li>
<li>约定 2：函数约定<strong>必须有返回值</strong>，表示该组件的结构</li>
<li>如果返回值为 null，表示不渲染任何内容</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">"react-dom"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 普通函数创建组件</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">function</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token operator">&lt;</span>div<span class="token operator">></span>这是我的第一个组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 箭头函数创建组件</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">Hello</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token operator">&lt;</span>div<span class="token operator">></span>这是我用箭头函数创建的第一个组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// 渲染</span></pre></td></tr><tr><td data-num="11"></td><td><pre>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Hello <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>root<span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="类组件"><a class="anchor" href="#类组件">#</a> 类组件</h2>
<p>使用类创建组件</p>
<ul>
<li>函数组件：使用 js 的函数（或者箭头函数）创建组件</li>
<li>约定 1：类名称用<strong>大写字母开头</strong></li>
<li>约定 2：类名称必须继承<strong> React.Component</strong> 父类，从而可以使用父类提供的方法或者属性</li>
<li>约定 3：类组件比如提供 **render ()** 方法</li>
<li>约定 4：<strong>render () 必须有返回值</strong>，表示该组件的结构</li>
<li>如果 render () 返回值为 null，表示不渲染任何内容</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Hello3</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>我是类组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="组件抽离"><a class="anchor" href="#组件抽离">#</a> 组件抽离</h2>
<ul>
<li>组件作为一个独立的各个体，一般都会放到一个单独的 JS 文件中</li>
</ul>
<p>创建 Hello.js 封装 Hello 组件</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>我是抽离出来的Hello组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 导出</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> Hello<span class="token punctuation">;</span></pre></td></tr></table></figure><p>使用</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 导入</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> Hello <span class="token keyword">from</span> <span class="token string">"./Hello.js"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 直接使用 & lt;Hello4 /> 即可</span></pre></td></tr></table></figure><h2 id="事件处理"><a class="anchor" href="#事件处理">#</a> 事件处理</h2>
<h3 id="事件绑定"><a class="anchor" href="#事件绑定">#</a> 事件绑定</h3>
<ul>
<li>React 事件绑定语法与 DOM 事件语法相似</li>
<li>语法：on + 事件名称 ={事件处理程序}，比如：onClick={()=&gt;</li>
<li>注意：React 事件采用驼峰命名法，比如:onMouseEeter、onFocus</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"点击我了！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>   <span class="token comment">// 注意别 this.handleClick () 这样就直接调用了</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token keyword">return</span> <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">&#125;</span><span class="token operator">></span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> Hello<span class="token punctuation">;</span></pre></td></tr></table></figure><p>函数事件绑定</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"点我了啦！"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword">return</span>  <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span>handleClick<span class="token punctuation">&#125;</span><span class="token operator">></span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> Hello<span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="事件对象"><a class="anchor" href="#事件对象">#</a> 事件对象</h3>
<ul>
<li>可通过事件处理程序的参数获取到事件对象</li>
<li>React 中的事件对象叫做：合成事件（对象）</li>
<li>合成事件：兼容所有浏览器，无需担心跨浏览器的兼容问题</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre> <span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"点击我了！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"事件对象"</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		<span class="token keyword">return</span> <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">&#125;</span><span class="token operator">></span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> Hello<span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="有状态组件和无状态组件"><a class="anchor" href="#有状态组件和无状态组件">#</a> 有状态组件和无状态组件</h2>
<ul>
<li>
<p>函数组件又叫做无状态组件，类组件又叫做有状态组件</p>
</li>
<li>
<p>状态即数据</p>
</li>
<li>
<p>函数组件没有自己的状态，只负责数据展示 (静)</p>
</li>
<li>
<p>类组件有自己的状态，负责更新 UI，让页面 UI 动起来</p>
</li>
<li>
<p>需要跟用户交互必须用有状态组件，即类组件</p>
</li>
<li>
<p>不需要的跟用户交互与数据打交道用无状态组件，即函数组件</p>
</li>
</ul>
<h2 id="state和setstate"><a class="anchor" href="#state和setstate">#</a> state 和 setState</h2>
<ul>
<li>状态 state 即数据，是组件内部的私有数据，只能在组件内部使用</li>
<li>state 的值是对象，表示一个组件中可以有多个数据</li>
</ul>
<h3 id="state"><a class="anchor" href="#state">#</a> state</h3>
<ul>
<li>状态即数据</li>
<li>状态是私有的，只能在组件内部使用</li>
<li>通过 this.state 来获取状态</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	  <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		      <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'lhm'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>					<span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token operator">&lt;</span>p<span class="token operator">></span>你是<span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>		<span class="token operator">&lt;</span>p<span class="token operator">></span>你今年<span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>age<span class="token punctuation">&#125;</span>岁了！<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="15"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="16"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> Hello<span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="setstate"><a class="anchor" href="#setstate">#</a> setState</h3>
<ul>
<li>状态是可变的</li>
<li>语法：this.setState ({修改的数据})</li>
<li>setState () 作用：1 修改 state 2 更新 UI</li>
<li>注意：不要直接修改 state 中的值，这是错误的</li>
<li>思想：数据驱动视图</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 正确</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'lll'</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 错误</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">this</span><span class="token punctuation">.</span>setState<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">'lll'</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>示例</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	  <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		      <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'lhm'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>					<span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token operator">&lt;</span>p<span class="token operator">></span>你是<span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>		<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'lll'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">></span>点击改名<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="15"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="16"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> Hello<span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="从jsx抽离事件事件处理程序"><a class="anchor" href="#从jsx抽离事件事件处理程序">#</a> 从 JSX 抽离事件事件处理程序</h3>
<ul>
<li>JSX 中过多的 JS 逻辑代码，会显得非常混乱</li>
<li>推荐：将逻辑抽离到单独的方法追踪，保证 JSX 结构清晰</li>
<li>但是抽离出来 this 指向有误，事件处理程序 this 值为 undefined</li>
<li>希望：this 指向组件实例 render 方法中的 this 即为组件实例</li>
</ul>
<h2 id="改变this指向"><a class="anchor" href="#改变this指向">#</a> 改变 this 指向</h2>
<h3 id="箭头函数"><a class="anchor" href="#箭头函数">#</a> 箭头函数</h3>
<ul>
<li>利用箭头函数自身不绑定 this 的特点</li>
<li>render () 方法中的恶 this 为组件实例，可以获取到 setState ()</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	  <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		      <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'lhm'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>					<span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token function">onIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>			<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'lll'</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="17"></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="18"></td><td><pre>		<span class="token operator">&lt;</span>p<span class="token operator">></span>你是<span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token operator">&lt;</span>p<span class="token operator">></span>你今年<span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>age<span class="token punctuation">&#125;</span>岁了！<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="20"></td><td><pre>   <span class="token comment">// 箭头函数改变</span></pre></td></tr><tr><td data-num="21"></td><td><pre>		<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">></span>点击改名<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="22"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="23"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> Hello<span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="bind方法"><a class="anchor" href="#bind方法">#</a> bind () 方法</h3>
<ul>
<li>利用 ES5 中的 **Function.prototype.bind ()** 方法，将事件处理程序中的 this 与组件实例绑定在一起</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	  <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		      <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'lhm'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>					<span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  	<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment">//bind 方法改变指向</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>onIncrement<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onIncrement</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token function">onIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>			<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'lll'</span></pre></td></tr><tr><td data-num="15"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="20"></td><td><pre>		<span class="token operator">&lt;</span>p<span class="token operator">></span>你是<span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="21"></td><td><pre>		<span class="token operator">&lt;</span>p<span class="token operator">></span>你今年<span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>age<span class="token punctuation">&#125;</span>岁了！<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="22"></td><td><pre>		<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>onIncrement<span class="token punctuation">&#125;</span><span class="token operator">></span>点击改名<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="23"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="24"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> Hello<span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="class实例方法推荐"><a class="anchor" href="#class实例方法推荐">#</a> class 实例方法 (推荐)</h3>
<ul>
<li>利用箭头函数的 class 实例方法</li>
<li>注意：该语法是实验性语法，但是，由于 babel 存在可以直接使用</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	  <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		      <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'lhm'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>					<span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  	<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token comment">// 箭头函数改变 class 实例中的 this</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token function-variable function">onIncrement</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>			<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'mmm'</span></pre></td></tr><tr><td data-num="14"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="18"></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token operator">&lt;</span>p<span class="token operator">></span>你是<span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="20"></td><td><pre>		<span class="token operator">&lt;</span>p<span class="token operator">></span>你今年<span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>age<span class="token punctuation">&#125;</span>岁了！<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="21"></td><td><pre>		<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>onIncrement<span class="token punctuation">&#125;</span><span class="token operator">></span>点击改名<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="22"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="23"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> Hello<span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="表单处理"><a class="anchor" href="#表单处理">#</a> 表单处理</h2>
<ul>
<li>HTML 中表单元素是可输入的 input, 也就是有自己的可变状态</li>
<li>React 中可变状态通常保存在 state 中，并且只能通过 setState () 方法来修改</li>
<li>React 将 state 与表单元素的 value 值绑定在一起，由 state 的值来控制表单元素的值</li>
<li>受控组件：其值收到 React 控制的表单元素</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>&#123;this.state.txt&#125;</span> <span class="token punctuation">/></span></span></pre></td></tr></table></figure><p>受控组件</p>
<ul>
<li>在 state 中添加一个状态，作为表单元素的 value 值</li>
<li>给表单元素绑定 change 事件，将表单元素的值设置为 state 的值</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		<span class="token literal-property property">txt</span><span class="token operator">:</span><span class="token string">''</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token function-variable function">handleChange</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>			<span class="token literal-property property">txt</span><span class="token operator">:</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value</pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>		当前输入值：<span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>txt<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>		<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> value<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>txt<span class="token punctuation">&#125;</span> onChange<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="15"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="16"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>多个受控组件使用</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		<span class="token literal-property property">txt</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token literal-property property">option</span><span class="token operator">:</span><span class="token string">'龙舌兰'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token literal-property property">isChecked</span><span class="token operator">:</span><span class="token boolean">false</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token function-variable function">handleChange</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>			<span class="token literal-property property">txt</span><span class="token operator">:</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value</pre></td></tr><tr><td data-num="10"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token function-variable function">handleOption</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>			<span class="token literal-property property">option</span><span class="token operator">:</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value</pre></td></tr><tr><td data-num="15"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token function-variable function">handleCheck</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>checked<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>			<span class="token literal-property property">isChecked</span><span class="token operator">:</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>checked</pre></td></tr><tr><td data-num="21"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isChecked<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="26"></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="27"></td><td><pre>		当前输入值：<span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>txt<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="28"></td><td><pre>		<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> value<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>txt<span class="token punctuation">&#125;</span> onChange<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="29"></td><td><pre>		下拉框选中：<span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>option<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="30"></td><td><pre>		<span class="token operator">&lt;</span>select value<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>option<span class="token punctuation">&#125;</span> onChange<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleOption<span class="token punctuation">&#125;</span><span class="token operator">></span></pre></td></tr><tr><td data-num="31"></td><td><pre>		  <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"汉堡"</span><span class="token operator">></span>汉堡<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span></pre></td></tr><tr><td data-num="32"></td><td><pre>			<span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"鸡翅"</span><span class="token operator">></span>鸡翅<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span></pre></td></tr><tr><td data-num="33"></td><td><pre>			<span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"龙舌兰"</span><span class="token operator">></span>龙舌兰<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span></pre></td></tr><tr><td data-num="34"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">></span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="35"></td><td><pre>		复选框<span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="36"></td><td><pre>			<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> checked<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isChecked<span class="token punctuation">&#125;</span> onChange<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleCheck<span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span>好吃<span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="37"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="38"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="39"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>优化：</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		<span class="token literal-property property">txt</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token literal-property property">option</span><span class="token operator">:</span><span class="token string">'龙舌兰'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token literal-property property">isChecked</span><span class="token operator">:</span><span class="token boolean">false</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token function-variable function">handleForm</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>		<span class="token comment">// 判断是否是复选，后则就是值</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token keyword">let</span> value<span class="token operator">=</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>type<span class="token operator">===</span><span class="token string">"checkbox"</span><span class="token operator">?</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>checked<span class="token operator">:</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token comment">// 设置值</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>			<span class="token punctuation">[</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token operator">:</span>value</pre></td></tr><tr><td data-num="15"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	</pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="20"></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="21"></td><td><pre>		当前输入值：<span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>txt<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="22"></td><td><pre>		<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> value<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>txt<span class="token punctuation">&#125;</span> name<span class="token operator">=</span><span class="token string">"txt"</span> onChange<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleForm<span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="23"></td><td><pre>		下拉框选中：<span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>option<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="24"></td><td><pre>		<span class="token operator">&lt;</span>select value<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>option<span class="token punctuation">&#125;</span> onChange<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleForm<span class="token punctuation">&#125;</span> name<span class="token operator">=</span><span class="token string">"option"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="25"></td><td><pre>		  <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"汉堡"</span><span class="token operator">></span>汉堡<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span></pre></td></tr><tr><td data-num="26"></td><td><pre>			<span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"鸡翅"</span><span class="token operator">></span>鸡翅<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span></pre></td></tr><tr><td data-num="27"></td><td><pre>			<span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"龙舌兰"</span><span class="token operator">></span>龙舌兰<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span></pre></td></tr><tr><td data-num="28"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">></span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="29"></td><td><pre>		复选框<span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="30"></td><td><pre>			<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> checked<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isChecked<span class="token punctuation">&#125;</span> onChange<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleForm<span class="token punctuation">&#125;</span> name<span class="token operator">=</span><span class="token string">"isChecked"</span><span class="token operator">/</span><span class="token operator">></span>好吃<span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="31"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="32"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="33"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="非受控组件"><a class="anchor" href="#非受控组件">#</a> 非受控组件</h2>
<ul>
<li>借助 ref, 使用原生 DOM 方式获取表单元素值</li>
<li>ref 的作用：获取 DOM 或组件</li>
</ul>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		<span class="token literal-property property">txt</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token literal-property property">option</span><span class="token operator">:</span><span class="token string">'龙舌兰'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token literal-property property">isChecked</span><span class="token operator">:</span><span class="token boolean">false</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>txtRef<span class="token operator">=</span>React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token comment">// 注意：记得处理 this 指向问题</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token function-variable function">getTxt</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>txtRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="17"></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="18"></td><td><pre>		 非受控组件<span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="19"></td><td><pre>	   <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> ref<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>txtRef<span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="20"></td><td><pre>		 <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>getTxt<span class="token punctuation">&#125;</span><span class="token operator">></span>获取文本框的值<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="21"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="22"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="评论实例"><a class="anchor" href="#评论实例">#</a> 评论实例</h2>
<p>封装 Comment.js</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 15:21</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token string">"./css/comment.css"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Comment</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	state<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		<span class="token literal-property property">username</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>		<span class="token literal-property property">content</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token comment">// 受控组件 表单</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token function-variable function">handleForm</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token keyword">let</span> value<span class="token operator">=</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>tpye<span class="token operator">===</span><span class="token string">"checkbox"</span><span class="token operator">?</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>checked<span class="token operator">:</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>			<span class="token punctuation">[</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token operator">:</span>value</pre></td></tr><tr><td data-num="15"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token function-variable function">submit</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"点击了发表评论！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>			<span class="token comment">// 得到内容</span></pre></td></tr><tr><td data-num="20"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>username <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>			<span class="token keyword">let</span> obj<span class="token operator">=</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>				<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>username<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="24"></td><td><pre>				<span class="token literal-property property">content</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>content</pre></td></tr><tr><td data-num="25"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>			<span class="token comment">// 错误：犯低俗错误了哈！！！</span></pre></td></tr><tr><td data-num="27"></td><td><pre>			<span class="token comment">// this.state.msg.push(obj);</span></pre></td></tr><tr><td data-num="28"></td><td><pre>			<span class="token comment">// 正确 更改状态数据</span></pre></td></tr><tr><td data-num="29"></td><td><pre>			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>				<span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">,</span>obj<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="31"></td><td><pre>			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="32"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>	<span class="token function-variable function">getMsg</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">.</span>length<span class="token operator">===</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>			<span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">></span>目前没有评论<span class="token operator">~</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="37"></td><td><pre>		<span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>			<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="39"></td><td><pre>			<span class="token operator">&lt;</span>ul<span class="token operator">></span></pre></td></tr><tr><td data-num="40"></td><td><pre>			   <span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">&#123;</span>index<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token punctuation">&#123;</span>item<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>item<span class="token punctuation">.</span>content<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>			<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span></pre></td></tr><tr><td data-num="42"></td><td><pre>			<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="43"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>		<span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="47"></td><td><pre>		<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="48"></td><td><pre>		    <span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="49"></td><td><pre>				     <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> placeholder<span class="token operator">=</span><span class="token string">"请输入评论人"</span> name<span class="token operator">=</span><span class="token string">"username"</span> value<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>username<span class="token punctuation">&#125;</span> onChange<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleForm<span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="50"></td><td><pre>						 <span class="token operator">&lt;</span>textarea placeholder<span class="token operator">=</span><span class="token string">"请输入评论内容"</span> name<span class="token operator">=</span><span class="token string">"content"</span> value<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>content<span class="token punctuation">&#125;</span> onChange<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleForm<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">></span></pre></td></tr><tr><td data-num="51"></td><td><pre>				<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="52"></td><td><pre>				<span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="53"></td><td><pre>				   <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>submit<span class="token punctuation">&#125;</span><span class="token operator">></span>发表评论<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="54"></td><td><pre>					 <span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="55"></td><td><pre>					    <span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>					 <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="57"></td><td><pre>				<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="58"></td><td><pre>		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="59"></td><td><pre>		<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="60"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="61"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="62"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> Comment<span class="token punctuation">;</span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>JSX</tag>
        <tag>React脚手架</tag>
        <tag>React组件</tag>
        <tag>受控组件</tag>
        <tag>非受控组件</tag>
      </tags>
  </entry>
  <entry>
    <title>vue2.0</title>
    <url>/2020/10/19/vue2.0/</url>
    <content><![CDATA[<h1 id="概念"><a class="anchor" href="#概念">#</a> 概念</h1>
<p>vue: 一套构建用户界面的前端框架</p>
<p>构建用户界面：用 vue 往 html 页面填充数据</p>
<p>框架理解：一套现成的解决方案，程序员要遵守现成的规范去编写自己的业务功能。</p>
<h1 id="特性"><a class="anchor" href="#特性">#</a> 特性</h1>
<h2 id="数据驱动视图"><a class="anchor" href="#数据驱动视图">#</a> 数据驱动视图</h2>
<p><strong>含义：数据的变化会驱动视图的更新</strong></p>
<p>在使用了 vue 的页面中，vue 会监听数据，从而自动渲染界面</p>
<p><img data-src="../images/vue2.0/1650338336811.png" alt="1650338336811" /></p>
<p>好处：程序员只管把数据维护员，页面驱动数据会把页面维护好。</p>
<p>注意：方向固定：数据更新导致页面变化单向由数据到页面，单向的数据绑定。</p>
<h2 id="双向数据绑定"><a class="anchor" href="#双向数据绑定">#</a> 双向数据绑定</h2>
<p>在 form 表单中 form 负责采集，ajax 负责提交</p>
<p><img data-src="../images/vue2.0/1650338348955.png" alt="1650338348955" /></p>
<ul>
<li>js 数据的变化，会被自动的渲染在页面上。</li>
<li>页面上表单采集的数据发生变化的时候，会被 vue 自动获取到，并更新到 js 数据中。</li>
</ul>
<p>好处：开发者不再需要手动操作 DOM 元素，来获取表单页面最新的值。</p>
<h1 id="mvvm"><a class="anchor" href="#mvvm">#</a> MVVM</h1>
<p><strong>MVVM</strong> 是 vue 实现<strong>数据驱动视图</strong>和<strong>双向数据绑定</strong>的核心原理。</p>
<p><strong>MVVM</strong> 指的是 Model  、View  、ViewModel</p>
<p><strong>Model</strong>  ：当前页面渲染所依赖的数据源（当前拿到的数据）</p>
<p><strong>View</strong> ：当前页面做渲染的 DOM 结构（视图）</p>
<p><strong>ViewModel</strong>: 表示 Vue 实例，它是 MVVM 的核心，将数据源（Model）和页面结构（View) 连接在了一起。</p>
<p><img data-src="../images/vue2.0/1650338372616.png" alt="1650338372616" /></p>
<p>当数据发生变化时，会被 ViewModel 监听到，VM 会根据最新的数据源自动更新页面的结构。</p>
<p>当表单元素的值发生变化时，也会被 VM 监听到，VM 会把变化过后的最新的值同步到 Model 数据源中。</p>
<h1 id="生命周期"><a class="anchor" href="#生命周期">#</a> 生命周期</h1>
<p><strong>生命周期：组件从创建 ------- 运行 ------ 销毁 的整个过程，强调的是一个时间段</strong></p>
<ul>
<li>
<p>创建阶段   <code>beforeCreate---created---beforeMount---mounted</code></p>
</li>
<li>
<p>运行阶段  <code>beforeUpdate--updated</code></p>
</li>
<li>
<p>销毁阶段  <code>beforeDestroy-------destroyed</code></p>
</li>
</ul>
<p><img data-src="../images/vue2.0/1650338400076.png" alt="1650338400076" /></p>
<p>生命周期图：</p>
<p><img data-src="../images/vue2.0/lifecycle-1650338499237.png" alt="lifecycle" /></p>
<h2 id="beforecreate"><a class="anchor" href="#beforecreate">#</a> beforeCreate</h2>
<p>组建的 props/data/methods 尚未被创建，都处于不可用状态</p>
<p>通俗来说：<strong>什么都不可用</strong></p>
<h2 id="created"><a class="anchor" href="#created">#</a> created</h2>
<p><strong>发请求阶段！！！</strong></p>
<p>组建的 props/data/methods 创建好了，处于可用状态，但是<strong>组建的模板结构 DOM 结构</strong>尚未生成！</p>
<p>通俗来说，数据可用，dom 不可用，<strong>一般用于发起请求拿数据存到 data 中</strong></p>
<h2 id="beforemount"><a class="anchor" href="#beforemount">#</a> beforeMount</h2>
<p><strong>将要</strong>把内存编译好的 html 结构渲染在浏览器结构，但浏览器还没有 DOM 结构</p>
<h2 id="mounted"><a class="anchor" href="#mounted">#</a> mounted</h2>
<p><strong>操作 DOM 结构，改变页面！！！</strong></p>
<p>已经把内存编译好的 html 结构渲染在浏览器结构，浏览器有 DOM 结构</p>
<h2 id="beforeupdate"><a class="anchor" href="#beforeupdate">#</a> beforeUpdate</h2>
<p><strong>条件：当数据改变的时候</strong></p>
<p><strong>将要</strong>根据变化过后、最新的数据、重新渲染组建的模板结构，此时还没渲染数据，得到的<strong>数据 data 是新的</strong>，但是<strong>页面的数据 innerText 是旧的</strong>，还没渲染将要渲染</p>
<h2 id="updated"><a class="anchor" href="#updated">#</a> updated</h2>
<p><strong>根据最新的数据，完成了组件的 dom 结构的重新渲染</strong>，得到的是最新数据和渲染完成页面数据</p>
<h2 id="beforedestroy"><a class="anchor" href="#beforedestroy">#</a> beforeDestroy</h2>
<p><strong>将要</strong>销毁此组件，但是尚未销毁，组件还处于正常工作状态</p>
<h2 id="destroyed"><a class="anchor" href="#destroyed">#</a> destroyed</h2>
<p>组件<strong>已经</strong>被销毁，此组件在浏览器对用的 DOM 结构已经被移除</p>
<h1 id="vue基础用法"><a class="anchor" href="#vue基础用法">#</a> Vue 基础用法</h1>
<ul>
<li>导入 vue.js 的 script 脚本文件</li>
<li>在页面中声明一起将要被 vue 控制的 DOM 区域</li>
<li>创建 vm 实例对象（vue 实例对象）</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token comment"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    </pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">const</span> vm<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>      <span class="token comment">//ViewModel</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">"#app"</span><span class="token punctuation">,</span> <span class="token comment">//View</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token comment">//Model</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token literal-property property">username</span><span class="token operator">:</span><span class="token string">"hello vue2.0"</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h1 id="vue指令"><a class="anchor" href="#vue指令">#</a> Vue 指令</h1>
<h2 id="指令"><a class="anchor" href="#指令">#</a> 指令</h2>
<ul>
<li>解释：指令 (Directives) 是带有  <code>v-</code>  前缀的特殊属性</li>
<li>作用：当表达式的值改变时，将其产生的连带影响，响应式地作用于 DOM</li>
</ul>
<h2 id="常用指令"><a class="anchor" href="#常用指令">#</a> 常用指令</h2>
<ul>
<li>v-text</li>
<li>v-html</li>
<li>v-bind</li>
</ul>
<h2 id="v-text"><a class="anchor" href="#v-text">#</a> v-text</h2>
<ul>
<li>解释：更新元素的 textContent</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>msg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="v-html"><a class="anchor" href="#v-html">#</a> v-html</h2>
<ul>
<li>解释：更新元素的 innerHTML</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>msg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="v-bind"><a class="anchor" href="#v-bind">#</a> v-bind</h2>
<ul>
<li>作用：当表达式的值改变时，将其产生的连带影响，响应式地作用于 DOM</li>
<li>语法： <code>v-bind:title=&quot;msg&quot;</code></li>
<li>简写： <code>:title=&quot;msg&quot;</code></li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">&lt;!-- 完整语法 --></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">&lt;!-- 缩写 --></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">:href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 2 创建 Vue 的实例对象</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token comment">//el 用来指定 vue 挂载到页面中的元素，值是：选择器</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token comment">// 理解：用来指定 vue 管理的 HTML 区域</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token comment">// 数据对象，用来给视图中提供数据的</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://www.baidu.com'</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="v-on"><a class="anchor" href="#v-on">#</a> v-on</h2>
<ul>
<li>作用：绑定事件</li>
<li>语法： <code>v-on:click=&quot;say&quot;</code>  or  <code>v-on:click=&quot;say('参数', $event)&quot;</code></li>
<li>简写： <code>@click=&quot;say&quot;</code></li>
<li>说明：绑定的事件从 <code>methods</code>  中获取</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">&lt;!-- 完整语法 --></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">v-on:</span>click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>doSomething<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">&lt;!-- 缩写 --></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>doSomething<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">&lt;!-- 方法传参 --></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>doSomething($event,<span class="token punctuation">'</span>123<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment">// 2 创建 Vue 的实例对象</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token comment">//methods 属性用来给 vue 实例提供方法（事件）</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token function-variable function">doSomething</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>str</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>          <span class="token comment">// 接受参数，并输出</span></pre></td></tr><tr><td data-num="17"></td><td><pre>          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p><strong>vue 内置变量 $event</strong></p>
<p>原生 dom 的事件对象，函数传参 $event</p>
<h2 id="事件修饰符"><a class="anchor" href="#事件修饰符">#</a> 事件修饰符</h2>
<ul>
<li><code>.stop</code>  阻止冒泡，调用 event.stopPropagation ()</li>
<li><code>.prevent</code>  阻止默认事件，调用 event.preventDefault ()</li>
<li><code>.capture</code>  添加事件侦听器时使用事件 <code>捕获</code> 模式</li>
<li><code>.self</code>  只当事件在该元素本身（比如不是子元素）触发时触发回调</li>
<li><code>.once</code>  事件只触发一次</li>
</ul>
<h2 id="v-model"><a class="anchor" href="#v-model">#</a> v-model</h2>
<ul>
<li>作用：在表单元素上创建双向数据绑定</li>
<li>说明：监听用户的输入事件以更新数据</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>message<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>edit me<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Message is: <span class="token comment"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="v-for"><a class="anchor" href="#v-for">#</a> v-for</h2>
<ul>
<li>作用：基于源数据多次渲染元素或模板块</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">&lt;!-- 1 基础用法 --></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item in items<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token comment"></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">&lt;!-- item 为当前项，index 为索引 --></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token comment"></span> -- <span class="token comment"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">&lt;!-- item 为值，key 为键，index 为索引 --></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, key, index) in obj<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token comment"></span> -- <span class="token comment"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item in 10<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token comment"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="key属性"><a class="anchor" href="#key属性">#</a> key 属性</h2>
<ul>
<li>推荐：使用  <code>v-for</code>  的时候提供  <code>key</code>  属性，以获得性能提升。</li>
<li>说明：使用 key，VUE 会基于 key 的变化重新排列元素顺序，并且会移除 key 不存在的元素。</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item in items<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">&lt;!-- 内容 --></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="样式处理-class和style"><a class="anchor" href="#样式处理-class和style">#</a> 样式处理 -class 和 style</h2>
<ul>
<li>说明：这两个都是 HTML 元素的属性，使用 <code>v-bind</code> ，只需要通过表达式计算出字符串结果即可</li>
<li>表达式的类型：字符串、数组、对象</li>
<li>语法：</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">&lt;!-- 1 --></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123; active: true &#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span> </pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>active<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">&lt;!-- 2 --></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[<span class="token punctuation">'</span>active<span class="token punctuation">'</span>, <span class="token punctuation">'</span>text-danger<span class="token punctuation">'</span>]<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span> </pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>active text-danger<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">&lt;!-- 3 --></span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[&#123; active: true &#125;, errorClass]<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span> </pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>active text-danger<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">&lt;!-- 1 --></span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123; color: activeColor, fontSize: fontSize + <span class="token punctuation">'</span>px<span class="token punctuation">'</span> &#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">&lt;!-- 2 将多个 样式对象 应用到一个元素上 --></span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[baseStyles, overridingStyles]<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="v-if-和-v-show"><a class="anchor" href="#v-if-和-v-show">#</a> v-if 和 v-show</h2>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbj90YXJnZXQ9aHR0cHMlM0ElMkYlMkZjbi52dWVqcy5vcmclMkZ2MiUyRmd1aWRlJTJGY29uZGl0aW9uYWwuaHRtbA==">条件渲染</span></li>
<li><code>v-if</code> ：根据表达式的值的真假条件，销毁或重建元素</li>
<li><code>v-show</code> ：根据表达式之真假值，切换元素的 display CSS 属性</li>
</ul>
<h2 id="提升用户体验v-cloak"><a class="anchor" href="#提升用户体验v-cloak">#</a> 提升用户体验：v-cloak</h2>
<ul>
<li>这个指令保持在元素上直到关联实例结束编译。和 CSS 规则如 [v-cloak] { display: none } 一起用时，这个指令可以隐藏未编译的 Mustache 标签直到实例准备完毕。</li>
<li>防止刷新页面，网速慢的情况下出现  等数据格式</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-cloak</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment"></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="提升性能v-pre"><a class="anchor" href="#提升性能v-pre">#</a> 提升性能：v-pre</h2>
<ul>
<li>说明：跳过这个元素和它的子元素的编译过程。可以用来显示原始 Mustache 标签。跳过大量没有指令的节点会加快编译。</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-pre</span><span class="token punctuation">></span></span> this will not be compiled<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="提升性能v-once"><a class="anchor" href="#提升性能v-once">#</a> 提升性能：v-once</h2>
<ul>
<li>说明：只渲染元素和组件一次。随后的重新渲染，元素 / 组件及其所有的子节点将被视为静态内容并跳过。这可以用于优化更新性能。</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-once</span><span class="token punctuation">></span></span>This will never change: <span class="token comment"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h1 id="过滤器vue3已废弃"><a class="anchor" href="#过滤器vue3已废弃">#</a> 过滤器（vue3 已废弃）</h1>
<p>过滤器 filters 是 vue 为开发者提供的功能，常用于文本格式化，过滤器常用于两个地方：插值表达式和 v-bind 属性绑定。</p>
<p>过滤器添加和 javascript 表达式尾部 由管道符 | 进行调用。</p>
<p><img data-src="../images/vue2.0/1650338601821.png" alt="1650338601821" /></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> vm<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">"#app"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">message</span><span class="token operator">:</span><span class="token string">"hello"</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">//00 - 私有过滤器</span></pre></td></tr><tr><td data-num="7"></td><td><pre> <span class="token literal-property property">filters</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>     <span class="token comment">// 实现首字符大写</span></pre></td></tr><tr><td data-num="9"></td><td><pre>     <span class="token function">capitalize</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token comment">// 拿到原值</span></pre></td></tr><tr><td data-num="10"></td><td><pre>         <span class="token comment">// 注意：过滤器中一定要有返回值，返回值就是看到的结果</span></pre></td></tr><tr><td data-num="11"></td><td><pre>         <span class="token keyword">return</span> val<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>val<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>     <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    </pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">//01 - 全局过滤器  在 main.js 中  注意全局 filter  私有 filters</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token comment">// 第一个参数 过滤器名字</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token comment">// 第二个参数 过滤器处理函数</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  Vue<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">"capitalize"</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>   <span class="token keyword">return</span> val<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>val<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>就近原则：在全局和私有过滤器存在一样的话，调用私有的过滤器</strong></p>
<h1 id="侦听器"><a class="anchor" href="#侦听器">#</a> 侦听器</h1>
<p>侦听数据的变化从而进行操作</p>
<p>使用场景：常为用户名是否被占用</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> vm<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">"#app"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">username</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token literal-property property">info</span><span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre> <span class="token literal-property property">watch</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>   <span class="token comment">//00 - 方法格式侦听器    </span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token function">username</span><span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span>oldVal</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token comment">// 拿到值</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"新值"</span><span class="token operator">+</span>newVal<span class="token operator">+</span><span class="token string">"旧值"</span><span class="token operator">+</span>oldVal<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>     <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>     <span class="token comment">// 方法格式侦听器 侦听对象属性的变化</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token string">'info.username'</span><span class="token punctuation">(</span>newVal<span class="token punctuation">,</span>oldVal<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token comment">// 拿到值</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"新值"</span><span class="token operator">+</span>newVal<span class="token operator">+</span><span class="token string">"旧值"</span><span class="token operator">+</span>oldVal<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>     <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>   <span class="token comment">//01 - 对象格式的侦听器   进入页面立即执行侦听器，使得触发</span></pre></td></tr><tr><td data-num="18"></td><td><pre>     <span class="token literal-property property">username</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>       <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span>oldVal</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"新值"</span><span class="token operator">+</span>newVal<span class="token operator">+</span><span class="token string">"旧值"</span><span class="token operator">+</span>oldVal<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>       <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre>      <span class="token literal-property property">immediate</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">// 进入页面立即触发侦听器，默认 false</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token comment">//03 深度监听</span></pre></td></tr><tr><td data-num="25"></td><td><pre>      <span class="token literal-property property">info</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>          <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span>oldVal</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"新值"</span><span class="token operator">+</span>newVal<span class="token operator">+</span><span class="token string">"旧值"</span><span class="token operator">+</span>oldVal<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="29"></td><td><pre>          <span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">true</span>  <span class="token comment">// 开启深度监听，对象中任何属性变化都会触发</span></pre></td></tr><tr><td data-num="30"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>方法格式侦听器缺点：</strong></p>
<ul>
<li>
<p>立即进入的时候不能调用</p>
</li>
<li>
<p>不能侦听到对象的属性变化</p>
</li>
</ul>
<h1 id="计算属性"><a class="anchor" href="#计算属性">#</a> 计算属性</h1>
<p>计算属性经过一系列运算之后，最终得到的一个属性值。</p>
<p>这个动态计算出来的属性值就可以被磨板结构或是 methods 方法使用</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> vm<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">"#app"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">r</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token literal-property property">g</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token literal-property property">b</span><span class="token operator">:</span><span class="token string">""</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 计算属性在定义的时候要定义成方法属性</span></pre></td></tr><tr><td data-num="9"></td><td><pre> <span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>     <span class="token comment">// 相当 data 属性使用 方法中发返回字符串 html 中使用:  </span></pre></td></tr><tr><td data-num="11"></td><td><pre>     <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>     <span class="token keyword">return</span> <span class="token string">'rgb($(this.r),$(this.g),$(this.b))'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h1 id="vue-cli"><a class="anchor" href="#vue-cli">#</a> Vue-cli</h1>
<p>简化了程序员基于 webpack 创建工程化 Vue 项目的过程，不必纠结 wepack 配置问题。</p>
<h2 id="安装和使用"><a class="anchor" href="#安装和使用">#</a> 安装和使用</h2>
<p>终端中使用命令</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre>npm install -g @vue/cli</pre></td></tr></table></figure><p>检验是否安装成功       // 出现版本号即成功安装 1</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre>vue -V</pre></td></tr></table></figure><ul>
<li>基于 vue-cli 快速生成工程化的 Vue 项目</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre>vue create 项目名称</pre></td></tr></table></figure><p>​    <strong>接着按照提示选择配置项</strong></p>
<ul>
<li>图形化创建项目（进入图形化配置）</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre>vue ui</pre></td></tr></table></figure><h2 id="src目录"><a class="anchor" href="#src目录">#</a> src 目录</h2>
<p><code>assets</code> : 放置静态文件夹</p>
<p><code>compoments</code> ：组件</p>
<p><code>main.js</code> : 打包入门文件   运行时先执行文件，项目的运行先执行</p>
<p><code>App.vue</code> ：根组件</p>
<h2 id="运行过程"><a class="anchor" href="#运行过程">#</a> 运行过程</h2>
<p><strong>通过 <code>main.js</code>  中 <code>App.vue</code>  渲染到 <code>index.html</code>  的指定区域中</strong></p>
<p>（读取 main.js-------&gt; 渲染到页面）</p>
<ul>
<li>App.vue 用来编写渲染的模板结构</li>
<li>index.html 中预留一个 el 区域</li>
<li>main.js 把 App.vue 渲染到了 index.html 所预留的区域中</li>
</ul>
<h1 id="ref引用"><a class="anchor" href="#ref引用">#</a> ref 引用</h1>
<p>jQuery: 简化了程序员操作 DOM 过程</p>
<p>vue 优势：MVVM 在 vue 中，程序员不要操作 dom, 程序员只需把数据维护好即可，<strong>数据驱动视图，双向数据绑定</strong></p>
<p>结论：在 vue 项目中不建议安装 jQuery</p>
<p>ref 用来辅助开发者不依赖于 jQuery 的情况下，获取 DOM 元素或者组建的引用，每个 vue 组件实例上，<strong>都包含了 $refs 对象</strong></p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>//获得  this.$refs.myp</pre></td></tr></table></figure><h2 id="thisnexttickcb"><a class="anchor" href="#thisnexttickcb">#</a> this.$nextTick(cb)</h2>
<p>延迟代码执行，知道 dom 创建完成</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>       <span class="token keyword">this</span><span class="token punctuation">.</span>$res<span class="token punctuation">.</span>delayChange<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         </pre></td></tr><tr><td data-num="3"></td><td><pre> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h1 id="样式冲突"><a class="anchor" href="#样式冲突">#</a> 样式冲突</h1>
<h2 id="添加自定义属性"><a class="anchor" href="#添加自定义属性">#</a> 添加自定义属性</h2>
<ul>
<li>通过自定义属性绑定样式实现样式唯一</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>  <span class="token attr-name">data-v-001</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    </pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token selector">div[data-v-001]</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="添加scoped"><a class="anchor" href="#添加scoped">#</a> 添加 scoped</h2>
<ul>
<li>给 style 添加 scoped，原理是同上</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="deep样式穿透"><a class="anchor" href="#deep样式穿透">#</a> /deep/ 样式穿透</h2>
<ul>
<li>父组件改造子组件样式  scoped+** /deep/**</li>
</ul>
<figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">&lt;style scoped></pre></td></tr><tr><td data-num="2"></td><td><pre>/deep/ h5</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span>pink<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>&lt;style></pre></td></tr></table></figure><h1 id="组件"><a class="anchor" href="#组件">#</a> 组件</h1>
<h2 id="组件基本构成"><a class="anchor" href="#组件基本构成">#</a> <strong>组件基本构成：</strong></h2>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>       test.vue</pre></td></tr><tr><td data-num="4"></td><td><pre>    </pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="9"></td><td><pre>   <span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>       <span class="token comment">// 数据 组件的 data 是一个函数，通过 return 出去调用</span></pre></td></tr><tr><td data-num="11"></td><td><pre>       <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>           <span class="token keyword">return</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>               <span class="token literal-property property">username</span><span class="token operator">:</span><span class="token string">'lhm'</span></pre></td></tr><tr><td data-num="14"></td><td><pre>           <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>       <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>       <span class="token comment">// 方法</span></pre></td></tr><tr><td data-num="17"></td><td><pre>       <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>           <span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>               console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>username<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>           <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>       <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre>       <span class="token comment">// 侦听器</span></pre></td></tr><tr><td data-num="23"></td><td><pre>       <span class="token literal-property property">watch</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>           </pre></td></tr><tr><td data-num="25"></td><td><pre>       <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="26"></td><td><pre>       <span class="token comment">// 计算属性</span></pre></td></tr><tr><td data-num="27"></td><td><pre>       <span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>           </pre></td></tr><tr><td data-num="29"></td><td><pre>       <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="30"></td><td><pre>       <span class="token comment">// 过滤器 vue3 已经废弃过滤器</span></pre></td></tr><tr><td data-num="31"></td><td><pre>       <span class="token literal-property property">filters</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>           </pre></td></tr><tr><td data-num="33"></td><td><pre>       <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="36"></td><td><pre>//启用less  scoped局部样式</pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>less<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p><strong>组件只有在使用的时候才会形成关系</strong></p>
<h2 id="使用components-组件"><a class="anchor" href="#使用components-组件">#</a> <strong>使用 components 组件</strong></h2>
<ul>
<li>
<p>导入  import</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> Left <span class="token keyword">from</span> <span class="token string">"@/compoents/Left.vue"</span></pre></td></tr></table></figure></li>
<li>
<p>注册组件</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   Left</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
<li>
<p>使用</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Left</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Left</span><span class="token punctuation">></span></span></pre></td></tr></table></figure></li>
</ul>
<h2 id="注册全局组件"><a class="anchor" href="#注册全局组件">#</a> 注册全局组件</h2>
<p>在 main.js 中导入组件</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 导入</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> Count <span class="token keyword">from</span> <span class="token string">"@/components/Count.vue"</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 全局注册</span></pre></td></tr><tr><td data-num="4"></td><td><pre>Vue<span class="token punctuation">.</span><span class="token function">components</span><span class="token punctuation">(</span><span class="token string">"MyCount"</span><span class="token punctuation">,</span>Count<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>接着在使用的.vue 页面中直接使用即可</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyCount</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MyCount</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="组件的props"><a class="anchor" href="#组件的props">#</a> 组件的 props</h2>
<p>props 自定义属性，允许使用者自定义值</p>
<p>子组件 MyCount.vue</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 使用 init, 直接 & lt;!--swig￼12--></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre> <span class="token comment">//props 中的数据可以直接被模板中使用</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"init"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>注意：props 里面的值是只读的，不能直接更改，需要转存</strong></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 使用 init, 直接 & lt;!--swig￼13--></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre> <span class="token comment">//00 - 数组形  props 中的数据可以直接被模板中使用</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"init"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre> <span class="token comment">// 转存 init</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">return</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>init</pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>给个默认值（防止父组件不传值）default</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 使用 init, 直接 & lt;!--swig￼14--></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre> <span class="token comment">//01 - 对象形  定义传值 默认值 类型</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token literal-property property">init</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>          <span class="token keyword">default</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>  <span class="token comment">// 指定默认值</span></pre></td></tr><tr><td data-num="7"></td><td><pre>          <span class="token literal-property property">type</span><span class="token operator">:</span>Number<span class="token punctuation">,</span> <span class="token comment">// 定义值类型，传的不是 Number 将会在终端报错</span></pre></td></tr><tr><td data-num="8"></td><td><pre>          <span class="token literal-property property">required</span><span class="token operator">:</span><span class="token boolean">true</span>  <span class="token comment">// 必传项</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre> <span class="token comment">// 转存 init</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token keyword">return</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>init</pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyCount</span> <span class="token attr-name">init</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>9<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MyCount</span><span class="token punctuation">></span></span>    //9是字符串</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyCount</span> <span class="token attr-name">:init</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>9<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MyCount</span><span class="token punctuation">></span></span>    //9是数字</pre></td></tr></table></figure><p>配合 v-bind 将会是数值，因为 v-bind 里面写的是 js</p>
<h2 id="父向子传值自定义属性props"><a class="anchor" href="#父向子传值自定义属性props">#</a> 父向子传值（自定义属性 props）</h2>
<ul>
<li>
<p>子组件通过 pros 定义属性</p>
</li>
<li>
<p>主要是父组件调用子组件时，通过 v-bind 声明（接上面 init)</p>
</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyCount</span> <span class="token attr-name">:init</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fatherInit<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MyCount</span><span class="token punctuation">></span></span>    //9是数字</pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token keyword">return</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token literal-property property">fatherInit</span><span class="token operator">:</span><span class="token string">"父亲传给儿子的值"</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>     <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="子向父传值自定义事件emit"><a class="anchor" href="#子向父传值自定义事件emit">#</a> 子向父传值（自定义事件 $emit）</h2>
<p>MyCount.vue 中</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token comment"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>add<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"init"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token keyword">return</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>init</pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>         <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">+=</span><span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>          <span class="token comment">// 子传父，触发 numChange 事件  传值</span></pre></td></tr><tr><td data-num="17"></td><td><pre>         <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">"numChange"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>         <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>       <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>父组件</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyCount</span> <span class="token attr-name">@numChange</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getNum<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MyCount</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token function">getNum</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"得到子组件传过来的数据"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="兄弟组件的数据共享eventbus"><a class="anchor" href="#兄弟组件的数据共享eventbus">#</a> 兄弟组件的数据共享 EventBus</h2>
<p>在 vue2.x，兄弟组件之间的数据共享方案是 <code>EventBus</code></p>
<ul>
<li>
<p>创建 eventBus.js</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">"vue"</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li>
<li>
<p>发送方</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> bus <span class="token keyword">from</span> <span class="token string">"./eventBus.js"</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">return</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>            <span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">"hello"</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token function">sendMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>            bus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">"share"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
<li>
<p>接收方</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> bus <span class="token keyword">from</span> <span class="token string">"./eventBus.js"</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>         <span class="token literal-property property">msgFromBrother</span><span class="token operator">:</span><span class="token string">""</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      bud<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"share"</span><span class="token punctuation">,</span><span class="token parameter">val</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>          <span class="token keyword">this</span><span class="token punctuation">.</span>msgFromBrother<span class="token operator">=</span>val<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
</ul>
<p><img data-src="/images/vue2.0/1650115399485.png" alt="1650115399485" /></p>
<h1 id="动态组件"><a class="anchor" href="#动态组件">#</a> 动态组件</h1>
<h2 id="占位符component"><a class="anchor" href="#占位符component">#</a> 占位符 component</h2>
<ul>
<li>组建的占位符 component。vue 内置</li>
<li>is 属性的值表示要渲染的组建的名字</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is:</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comName<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="keep-alive保持状态"><a class="anchor" href="#keep-alive保持状态">#</a> keep-alive 保持状态</h2>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre>//include表示缓存组件exclude排除缓存组件include/exclude只能二选一</pre></td></tr><tr><td data-num="2"></td><td><pre>//include 使用声明名称 组件name名称</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span> <span class="token attr-name">include</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>left,right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is:</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comName<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p><strong>使用 keep-alive 标签时</strong></p>
<p>当组件被<strong>缓存</strong>时，会触发组件 <code>deactived</code>  生命周期函数</p>
<p>当组件被<strong>激活</strong>时，会触发组件 <code>actived</code>  生命周期函数</p>
<h1 id="插槽slot"><a class="anchor" href="#插槽slot">#</a> 插槽 Slot</h1>
<h2 id="具名插槽"><a class="anchor" href="#具名插槽">#</a> 具名插槽</h2>
<p>slot 是为 vue 为组件的封装者提供的能力，把不确定的东西，希望由哦用户指定的东西定义为插槽</p>
<p>具名插槽：子组件中可能有多个插槽，指定名字被父组件使用</p>
<p>子组件：content.vue</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">&lt;!-- 内容自定义 vue 官方规定 slot 插槽都有名称，省略就是默认为 default--></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>default<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>           这是default插槽默认内容</pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myName<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>           这是myName插槽默认内容</pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token literal-property property">name</span><span class="token operator">:</span>Content</pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>父组件：基本使用</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Content</span><span class="token punctuation">></span></span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment">&lt;!--00 - 不指定插槽名字，默认为 default--></span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span> 自定义内容 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">&lt;!--01 - 指定插槽名字，使用 template 包含，template 虚拟标签 --></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>myName</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span> 自定义内容 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token comment">&lt;!--02 - 指定插槽名字 v-slot: 简写为# --></span></pre></td></tr><tr><td data-num="9"></td><td><pre>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#myName</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span> 自定义内容 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Content</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="作用域插槽"><a class="anchor" href="#作用域插槽">#</a> 作用域插槽</h2>
<p>在封装组件时，在预留的 &lt;slot&gt; 提供属性的值，叫做作用于插槽</p>
<p>子组件定义传值   MyName.vue</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myName<span class="token punctuation">"</span></span> <span class="token attr-name">msg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hello<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>           这是myName插槽默认内容</pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>父组件接收数据</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyName</span><span class="token punctuation">></span></span> </pre></td></tr><tr><td data-num="3"></td><td><pre>       <span class="token comment">&lt;!-- 接收值 --></span></pre></td></tr><tr><td data-num="4"></td><td><pre>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#myName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scope<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>               这是插槽里面的内容</pre></td></tr><tr><td data-num="7"></td><td><pre>           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>               <span class="token comment"></span></pre></td></tr><tr><td data-num="10"></td><td><pre>           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MyName</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>作用域赋值解构法</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyName</span><span class="token punctuation">></span></span> </pre></td></tr><tr><td data-num="3"></td><td><pre>       <span class="token comment">&lt;!-- 接收值 --></span></pre></td></tr><tr><td data-num="4"></td><td><pre>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#myName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;msg,user&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>               <span class="token comment"></span></pre></td></tr><tr><td data-num="7"></td><td><pre>           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>               <span class="token comment"></span></pre></td></tr><tr><td data-num="10"></td><td><pre>           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MyName</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h1 id="指令-2"><a class="anchor" href="#指令-2">#</a> 指令</h1>
<h2 id="私有自定义指令directives"><a class="anchor" href="#私有自定义指令directives">#</a> 私有自定义指令 directives</h2>
<h3 id="基本使用"><a class="anchor" href="#基本使用">#</a> 基本使用</h3>
<p>与 methods 平级 **</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token literal-property property">directives</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment">// 自定义指令 v-color</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">color</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token comment">// 绑定 v-color 指令就会立即触发 bind 方法</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token function">bind</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>            el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color<span class="token operator">=</span><span class="token string">"red"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>使用 v - 自定义指令</strong></p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-color</span><span class="token punctuation">></span></span>自定义指令<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="binding"><a class="anchor" href="#binding">#</a> binding</h3>
<p>获取自定义指令的值</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>color<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>自定义指令<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>  //data里面的color</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">'</span>blue<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>自定义指令<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>  //文字blue</pre></td></tr></table></figure><p>自定义</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token literal-property property">directives</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment">// 自定义指令 v-color</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">color</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token comment">// 缺点：binding 函数只会在第一次是调用</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token comment">// 绑定 v-color 指令就会立即触发 bind 方法</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token function">bind</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span>binding</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"调用了v-color中的bind函数"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token comment">// 通过 binding.value 获取</span></pre></td></tr><tr><td data-num="9"></td><td><pre>            el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color<span class="token operator">=</span>binding<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="update"><a class="anchor" href="#update">#</a> update</h3>
<p>在 dom 更新的时候触发</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token literal-property property">directives</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment">// 对象格式</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// 自定义指令 v-color</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">color</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token comment">// 缺点：binding 函数只会在第一次是调用</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token comment">// 绑定 v-color 指令就会立即触发 bind 方法</span></pre></td></tr><tr><td data-num="7"></td><td><pre>         <span class="token function">bind</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span>binding</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"调用了v-color中的bind函数"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token comment">// 通过 binding.value 获取</span></pre></td></tr><tr><td data-num="10"></td><td><pre>            el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color<span class="token operator">=</span>binding<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token comment">// 绑定 v-color 指令就会立即触发 bind 方法</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span>binding</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"调用了v-color中的update函数"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token comment">// 通过 binding.value 获取</span></pre></td></tr><tr><td data-num="16"></td><td><pre>            el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color<span class="token operator">=</span>binding<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            </pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="简写模式"><a class="anchor" href="#简写模式">#</a> 简写模式</h3>
<p><strong>bind 和 update 里面业务逻辑相同</strong>简写为函数形式</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre>directives:&#123;</pre></td></tr><tr><td data-num="2"></td><td><pre>    //自定义指令v-color</pre></td></tr><tr><td data-num="3"></td><td><pre>    color(el,binding)&#123;</pre></td></tr><tr><td data-num="4"></td><td><pre>            //通过binding.value获取</pre></td></tr><tr><td data-num="5"></td><td><pre>            el.style.color=binding.value;</pre></td></tr><tr><td data-num="6"></td><td><pre>        &#125;</pre></td></tr><tr><td data-num="7"></td><td><pre>&#125;</pre></td></tr></table></figure><h2 id="全局自定义指令"><a class="anchor" href="#全局自定义指令">#</a> 全局自定义指令</h2>
<p>在 main.js 中定义</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 注意没有 s</span></pre></td></tr><tr><td data-num="3"></td><td><pre>Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">"color"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span>binding</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color<span class="token operator">=</span>binding<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h1 id="路由"><a class="anchor" href="#路由">#</a> 路由</h1>
<h2 id="onhaschange"><a class="anchor" href="#onhaschange">#</a> onhasChange</h2>
<p><strong>只要当前组件一被创建，就立即监听 window 对象的 onhaschange 事件</strong></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>window<span class="token punctuation">.</span><span class="token function-variable function">onhaschange</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"监听到了hash地址的变化"</span><span class="token punctuation">,</span>localtion<span class="token punctuation">.</span>hash<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="vue-router"><a class="anchor" href="#vue-router">#</a> vue-router</h2>
<p>安装（这里指定了版本号）</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>npm i vue<span class="token operator">-</span>router@<span class="token number">3.5</span><span class="token number">.2</span>  <span class="token operator">-</span><span class="token constant">S</span></pre></td></tr></table></figure><p>创建路由模块</p>
<p>在 src 源代码下新建 router 文件夹  新建 index.js, 即 src/router/index.js</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//1 导入 Vue 和 VueRouter 包</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">"vue-router"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">//2 Vue.use () 装插件  </span></pre></td></tr><tr><td data-num="5"></td><td><pre>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">//3 创建路由实例对象</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">const</span> router <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">//4 向外共享路由实例对象</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> router<span class="token punctuation">;</span></pre></td></tr></table></figure><p>在 main.js 中挂载 router</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//import router from "@/router/index.js";</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 模块化导入：如果给的是文件夹，会默认加载 router 里面的 index.js</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">"@/router"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span><span class="token operator">=></span><span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    router</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">"#app"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="router-view"><a class="anchor" href="#router-view">#</a> router-view</h2>
<p>只要项目中安装了 vue-router 就可以使用 router-view 进行占位，显示对应的 hash 地址的页面</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">&lt;!-- 占位符 --></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>在 src/router/index.js 中</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//1 导入 Vue 和 VueRouter 包</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">"vue-router"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 导入需要组件</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">"@/components/Home.vue"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> About <span class="token keyword">from</span> <span class="token string">"@/components/About.vue"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">//2 Vue.use () 装插件  </span></pre></td></tr><tr><td data-num="8"></td><td><pre>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">//3 创建路由实例对象</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">const</span> router <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment">// 不是 routers, 注意是 routes,routes,routes</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token punctuation">&#123;</span><span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">"/home"</span><span class="token punctuation">,</span><span class="token literal-property property">component</span><span class="token operator">:</span>Home<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token punctuation">&#123;</span><span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">"/about"</span><span class="token punctuation">,</span><span class="token literal-property property">component</span><span class="token operator">:</span>About<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">//4 向外共享路由实例对象</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> router<span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="router-link"><a class="anchor" href="#router-link">#</a> router-link</h2>
<p>当安装和配了 vue-router 后，就可以使用 router-link 代替 a</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#/home<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">&lt;!-- 代替上面 a 链接 --></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/home<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="路由重定向redirect"><a class="anchor" href="#路由重定向redirect">#</a> 路由重定向 redirect</h2>
<p>src/router/index.js 中</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//3 创建路由实例对象</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> router <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// 不是 routers, 注意是 routes,routes,routes</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token comment">// 路由重定向，将 / 重定向为 /home</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token punctuation">&#123;</span><span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">"/"</span><span class="token punctuation">,</span><span class="token literal-property property">redirect</span><span class="token operator">:</span><span class="token string">"/home"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token punctuation">&#123;</span><span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">"/home"</span><span class="token punctuation">,</span><span class="token literal-property property">component</span><span class="token operator">:</span>Home<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token punctuation">&#123;</span><span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">"/about"</span><span class="token punctuation">,</span><span class="token literal-property property">component</span><span class="token operator">:</span>About<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="嵌套路由"><a class="anchor" href="#嵌套路由">#</a> 嵌套路由</h2>
<p>嵌套路由，如下图所示：</p>
<p><img data-src="../images/vue2.0/1650187232864.png" alt="1650187232864" /></p>
<p>src/router/index.js 中</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 引入</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> Tab1 <span class="token keyword">from</span> <span class="token string">"@/components/tabs/Tab1.vue"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> Tab2 <span class="token keyword">from</span> <span class="token string">"@/components/tabs/Tab2.vue"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">//3 创建路由实例对象</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> router <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 不是 routers, 注意是 routes,routes,routes</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token comment">// 路由重定向，将 / 重定向为 /home</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token punctuation">&#123;</span><span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">"/"</span><span class="token punctuation">,</span><span class="token literal-property property">redirect</span><span class="token operator">:</span><span class="token string">"/home"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token punctuation">&#123;</span><span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">"/home"</span><span class="token punctuation">,</span><span class="token literal-property property">component</span><span class="token operator">:</span>Home<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token punctuation">&#123;</span><span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">"/about"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>         <span class="token literal-property property">component</span><span class="token operator">:</span>About，</pre></td></tr><tr><td data-num="13"></td><td><pre>         <span class="token comment">// 重定向路由</span></pre></td></tr><tr><td data-num="14"></td><td><pre>         <span class="token literal-property property">redirect</span><span class="token operator">:</span><span class="token string">"/about/tab1"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>         <span class="token comment">// 嵌套路由 </span></pre></td></tr><tr><td data-num="16"></td><td><pre>         <span class="token literal-property property">children</span><span class="token operator">:</span><span class="token punctuation">[</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token comment">// 默认子路由</span></pre></td></tr><tr><td data-num="18"></td><td><pre>           <span class="token punctuation">&#123;</span><span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token literal-property property">component</span><span class="token operator">:</span>Tab1<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>           <span class="token comment">// 注意不要 /tab1</span></pre></td></tr><tr><td data-num="20"></td><td><pre>           <span class="token punctuation">&#123;</span><span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">"tab1"</span><span class="token punctuation">,</span><span class="token literal-property property">component</span><span class="token operator">:</span>Tab1<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="21"></td><td><pre>           <span class="token punctuation">&#123;</span><span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">"tab2"</span><span class="token punctuation">,</span><span class="token literal-property property">component</span><span class="token operator">:</span>Tab2<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        </pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="动态路由匹配"><a class="anchor" href="#动态路由匹配">#</a> 动态路由匹配</h2>
<p><strong>比如当出现</strong></p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/movie/1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/movie/2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/movie/3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p><strong>则应当这样定义</strong></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//3 创建路由实例对象</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> router <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// 不是 routers, 注意是 routes,routes,routes</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token comment">// 路由重定向，将 / 重定向为 /home</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token punctuation">&#123;</span><span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">"/movie/:id"</span><span class="token punctuation">,</span><span class="token literal-property property">component</span><span class="token operator">:</span>Movie<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p><strong>获取路由的:id</strong></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 注意是 $route</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id</pre></td></tr></table></figure><p><code>this.$route路由的参数对象</code></p>
<p><code>this.$router路由的导航对象</code></p>
<h2 id="路由传参props"><a class="anchor" href="#路由传参props">#</a> 路由传参 props</h2>
<p><strong>router/index.js 应当这样定义</strong></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//3 创建路由实例对象</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> router <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// 不是 routers, 注意是 routes,routes,routes</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token comment">// 路由重定向，将 / 重定向为 /home 开启 props 传参</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token punctuation">&#123;</span><span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">"/movie/:id"</span><span class="token punctuation">,</span><span class="token literal-property property">component</span><span class="token operator">:</span>Movie<span class="token punctuation">,</span><span class="token literal-property property">props</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>使用的.vue 页面中</p>
<pre><code class="language-vue">&lt;template&gt;
    &lt;div&gt;
    //使用路由中的参数
    &#123;&#123;id&#125;&#125;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
    export default&#123;
    props:[&quot;id&quot;],//接收路由中的参数
&#125;&lt;/script&gt;
</code></pre>
<h2 id="thisroute"><a class="anchor" href="#thisroute">#</a> this.$route</h2>
<p><code>this.$route</code>  参数对象</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/movie/1?msg=hello&amp;content=ggg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p><code>this.$route.params.id</code>   // 获取动态配置项 path:“/movie/:id”   <code>1</code></p>
<p><code>this.$route.path</code>    // 获取到路由路径，但是不包含查询参数    <code>/movie/1</code></p>
<p><code>this.$route.fullPath </code>   // 获取到路由路径，包含查询参数   <code>/movie/1?msg=hello&amp;content=ggg</code></p>
<p><code>this.$route.query</code>   // 获取查询串参数 <code>  &#123;“msg”:“hello”,“content”:“ggg”&#125;</code></p>
<h2 id="声明式导航"><a class="anchor" href="#声明式导航">#</a> 声明式导航</h2>
<p>页面中声明链接，实现跳转</p>
<p>比如：&lt;a href=&quot;&quot;&gt;&lt;/a&gt;  &lt;router-link&gt;&lt;/router-link&gt;</p>
<h2 id="编程式导航跳转"><a class="anchor" href="#编程式导航跳转">#</a> 编程式导航跳转</h2>
<p><code>this.$router</code>  导航对象</p>
<ul>
<li>
<p><code>this.$router.push(“hash地址”)    </code></p>
<p>// 跳转到 hash 地址页面，并增加浏览历史记录，左上角可返回</p>
</li>
<li>
<p><code>this.$router.replace(“hash地址”)</code></p>
<p>// 跳转到 hash 地址页面，并替换浏览历史记录</p>
</li>
<li>
<p><code>this.$router.go(数值n) </code>  // 在浏览历史中前进或后退  go (-1) 后退一层</p>
</li>
<li>
<p><code>this.$router.back()  </code> // 后退上一个页面</p>
</li>
<li>
<p><code>this.$router.forward() </code>  // 前进到上一个页面</p>
</li>
</ul>
<h2 id="导航守卫"><a class="anchor" href="#导航守卫">#</a> 导航守卫</h2>
<p>导航守卫可以控制路由的访问权限。比如说登录后才可以访问导航守卫。</p>
<p><img data-src="../images/vue2.0/1650195610304.png" alt="1650195610304" /></p>
<h2 id="全局前置守卫"><a class="anchor" href="#全局前置守卫">#</a> 全局前置守卫</h2>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> router<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token operator">...</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 每次发生路由导航跳转的时候，就会触发这个函数</span></pre></td></tr><tr><td data-num="3"></td><td><pre>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span>from<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">[</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">//to 去哪里</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">//from 从哪里来</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">//next () 放行 next ("/login") 强制跳转登录 next (false) 停留在当前页</span></pre></td></tr><tr><td data-num="7"></td><td><pre>   <span class="token comment">// 用本地 token 判断是否登录，登录就放行</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>path<span class="token operator">===</span><span class="token string">"/main"</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token keyword">const</span> token<span class="token operator">=</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>            <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">"login"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h1 id="vant组件库"><a class="anchor" href="#vant组件库">#</a> Vant 组件库</h1>
<p>vant 轻量可靠的移动端组件库</p>
<p><span class="exturl" data-url="aHR0cHM6Ly95b3V6YW4uZ2l0aHViLmlvL3ZhbnQvIy96aC1DTi9xdWlja3N0YXJ0I3Nob3UtZG9uZy1hbi14dS15aW4tcnUtenUtamlhbi1idS10dWktamlhbg==">参考官网</span></p>
<p>按需导入体积小，全部导入快速</p>
<h1 id="axios"><a class="anchor" href="#axios">#</a> axios</h1>
<p>安装</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>npm i axios <span class="token operator">-</span><span class="token constant">S</span></pre></td></tr></table></figure><p>全局挂载 axios</p>
<p>在 main.js 中</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">"axios"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$http<span class="token operator">=</span>axios<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>axios<span class="token punctuation">.</span>default<span class="token punctuation">.</span>baseUrl<span class="token operator">=</span><span class="token string">"http://www"</span></pre></td></tr></table></figure><p>使用</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p><strong>缺点：不能实现代码复用，所以实际项目开发中一般不这样做</strong></p>
<h2 id="引入axios并定义根路径"><a class="anchor" href="#引入axios并定义根路径">#</a> 引入 axios 并定义根路径</h2>
<p>实际项目中，建立 request.js    (src/utils/request.js)</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">"axios"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> request<span class="token operator">=</span>axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// 指定请求根路径</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">baseUrl</span><span class="token operator">:</span><span class="token string">"http://www"</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> request<span class="token punctuation">;</span></pre></td></tr></table></figure><p>需要使用的页面</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">"@/utils/request.js"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 请求</span></pre></td></tr><tr><td data-num="3"></td><td><pre>request<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">params</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="建立api"><a class="anchor" href="#建立api">#</a> 建立 api</h2>
<p>在 src 文件夹下面定义 api 文件夹，每一类的 api 文件都定义在里面</p>
<p>比如说关于文章的 api   <code>articleApi.js</code></p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> requet <span class="token keyword">from</span> <span class="token string">"@/utils/requet.js"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getArticleApi</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">_page<span class="token punctuation">,</span>_limit</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/article"</span>，<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>          <span class="token literal-property property">params</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>          _page<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>            _limit</pre></td></tr><tr><td data-num="7"></td><td><pre>       <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>     <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>使用的页面</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>getArticleApi<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"@/api/articleApi.js"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 使用</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">async</span> <span class="token function">initArticleList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 解构赋值获得结果</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">const</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">data</span><span class="token operator">:</span>res<span class="token punctuation">&#125;</span><span class="token operator">=</span><span class="token keyword">await</span> <span class="token function">getArticleApi</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h1 id="项目学习文档"><a class="anchor" href="#项目学习文档">#</a> 项目学习文档</h1>
<p><span class="exturl" data-url="aHR0cDovL2RvYy50b3V0aWFvLmxpdWxvbmdiaW4udG9w">黑马头条项目文档参考学习</span></p>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue2学习</tag>
      </tags>
  </entry>
  <entry>
    <title>webpack</title>
    <url>/2020/10/18/webpack/</url>
    <content><![CDATA[<p><strong>webpack：前端工程化的解决方案</strong></p>
<p>webpack 官网    <span class="exturl" data-url="aHR0cHM6Ly93ZWJwYWNrLmpzLm9yZy8=">https://webpack.js.org/</span></p>
<h2 id="安装nodejs"><a class="anchor" href="#安装nodejs">#</a> 安装 nodejs</h2>
<p>​        如何安装自己看官网教程，webpack 依赖于 nodejs</p>
<h2 id="初始化文件"><a class="anchor" href="#初始化文件">#</a> 初始化文件</h2>
<p>​      创建文件夹 eg:webpack_sudy</p>
<p>​       打开终端  npm init -y</p>
<h2 id="创建源文件src"><a class="anchor" href="#创建源文件src">#</a> 创建源文件 src</h2>
<p>​     在 webpack_study 文件下</p>
<p>​     建立 src 文件夹</p>
<p>​     src 文件夹下创建 index.js 入口文件，自己输入点内容 index.js</p>
<h2 id="打包js文件"><a class="anchor" href="#打包js文件">#</a> 打包 js 文件</h2>
<p>输入 webpack</p>
<p>或  webpack 打包文件  -o 输出文件 --mode=development</p>
<p>eg(webpack ./src/index.js -o ./build/main.js –mode=development)</p>
<p>建立一个 html 文件，引入打包文件 js 即可看到是否打包成功</p>
<h2 id="创建打包配置文件webpackconfigjs"><a class="anchor" href="#创建打包配置文件webpackconfigjs">#</a> 创建打包配置文件 webpack.config.js</h2>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// 输入</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 输出</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'main.js'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'build'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token comment">//loader 配置</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>   </pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      </pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>基本属性结构如上，根据配置再补充</p>
<h2 id="打包css文件"><a class="anchor" href="#打包css文件">#</a> 打包 css 文件</h2>
<p>webpack 不能打包 css 文件，需要解除 loader</p>
<p>配置如下，即在上面 module:{} 里面配置</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//loader 配置</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="4"></td><td><pre>            <span class="token comment">// 打包 css 文件</span></pre></td></tr><tr><td data-num="5"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>                <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="8"></td><td><pre>                    <span class="token string">'style-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>                    <span class="token string">'css-loader'</span></pre></td></tr><tr><td data-num="10"></td><td><pre>                <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="11"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token comment">// 打包 less 文件</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>                <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="16"></td><td><pre>                    <span class="token string">'style-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>                    <span class="token string">'css-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre>                    <span class="token string">'less-loader'</span></pre></td></tr><tr><td data-num="19"></td><td><pre>                <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="20"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr></table></figure><p>在 js 里面 import ‘css 文件’</p>
<p>建立一个 html 文件，引入打包文件 js 即可看到是否打包成功</p>
<h2 id="打包html文件"><a class="anchor" href="#打包html文件">#</a> 打包 html 文件</h2>
<p>需要借助插件 html-webpack-plugin</p>
<h3 id="安装html-webpack-plugin"><a class="anchor" href="#安装html-webpack-plugin">#</a> 安装 html-webpack-plugin</h3>
<p>安装命令  -D 为本地安装</p>
<p>npm install html-webpack-plugin -D</p>
<h3 id="webpackconfigjs配置"><a class="anchor" href="#webpackconfigjs配置">#</a> webpack.config.js 配置</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 开头引入</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 之后在里面 plugins 属性里面配置</span></pre></td></tr><tr><td data-num="5"></td><td><pre> <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token comment">// 使用插件 html-webpack-plugin 打包 html 文件</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token comment">//new HtmlWebpackPlugin () 打包多一个 index.html 文件</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token comment">// 复制入门文件 index.html 结构样式</span></pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/index.html'</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr></table></figure><h3 id="打包运行"><a class="anchor" href="#打包运行">#</a> 打包运行</h3>
<p>命令 webpack</p>
<p>即可看到打包文件中多了一个 index.html</p>
<h2 id="打包图片文件"><a class="anchor" href="#打包图片文件">#</a> 打包图片文件</h2>
<p>气死了气死了气死了，卡了好久好久不能正常显示，原来是版本太高的问题，呕血！！！！！</p>
<p>注意：推荐使用版本较低的，比如以下版本，于是实在出问题摸不着头脑的时候便按照以下图片修改了版本</p>
<p>重新安装版本</p>
<p>npm i css-loader@5.2.4 -D</p>
<p>npm i style-loader@2.0.0 -D</p>
<p><img data-src="/images/webpack/1649377283108.png" alt="1649377283108" /></p>
<h3 id="css中的图片背景"><a class="anchor" href="#css中的图片背景">#</a> css 中的图片背景</h3>
<p>​    （ 使用 url-loader,url-loader 依靠 file-loader）</p>
<p>​    下载安装  npm i url-loader file-loader -D</p>
<p>​     在 module 里面配置 rules:[{}]</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 打包 css 中 url 图片文件</span></pre></td></tr><tr><td data-num="2"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(jpg|png|gif)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">//url-loader 依靠 file-loader 所以需要下载两个</span></pre></td></tr><tr><td data-num="5"></td><td><pre>                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>                <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre> <span class="token comment">// 设置图片小于 6*1024，就会被 base64 处理图片，减少请求数量</span></pre></td></tr><tr><td data-num="8"></td><td><pre>                    <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">6</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token comment">// 关闭 url-loader 的 es6 模块化，不然 html 里面 img 元素会有问题</span></pre></td></tr><tr><td data-num="10"></td><td><pre>                    <span class="token literal-property property">esModule</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>                    <span class="token comment">// [ext] 取原来扩展名  名字长度取 10</span></pre></td></tr><tr><td data-num="12"></td><td><pre>                    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'[name].[hash:10].[ext]'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>                    <span class="token comment">// 超过大小 file-loader 打包</span></pre></td></tr><tr><td data-num="14"></td><td><pre>                    <span class="token literal-property property">fallback</span><span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>                    <span class="token literal-property property">outputPath</span><span class="token operator">:</span> <span class="token string">'images/'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr></table></figure><h3 id="html里面的img"><a class="anchor" href="#html里面的img">#</a> html 里面的 img</h3>
<p>使用 html-loader (加配置，可能会出错）或</p>
<p>html-withimg-loader</p>
<p>安装  npm i html-loader -D   或</p>
<p>​         npm i html-withimg-loader -D</p>
<p>在 module 里面配置 rules:[{}]</p>
<h4 id="用html-loader配置"><a class="anchor" href="#用html-loader配置">#</a> 用 html-loader 配置</h4>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 打包 html 文件 img 问题</span></pre></td></tr><tr><td data-num="2"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.html$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'html-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>                <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>                    <span class="token literal-property property">esModule</span><span class="token operator">:</span> <span class="token boolean">false</span></pre></td></tr><tr><td data-num="7"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="用html-withimg-loader推荐这个"><a class="anchor" href="#用html-withimg-loader推荐这个">#</a> 用 html-withimg-loader（推荐这个）</h4>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.html$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'html-withimg-loader'</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="打包其他资源"><a class="anchor" href="#打包其他资源">#</a> 打包其他资源</h2>
<p>（其他资源：不需要做任何处理，原封不动输出出去就可以）</p>
<h3 id="打包字体图标示例"><a class="anchor" href="#打包字体图标示例">#</a> 打包字体图标示例</h3>
<p>这里使用 iconfont 阿里云矢量图标库</p>
<p>下载解压引入 iconfont.css     在入口文件 index.js 设置</p>
<p>import   ‘’iconfont.css 路径 “</p>
<p>看到 iconfont.css 中需要几个文件一同引入过来</p>
<p>（utl 根据实际情况更改）</p>
<p><img data-src="/images/webpack/1649377304788.png" alt="1649377304788" /></p>
<p>引入目录为（有些还需要 svg，看 iconfont.css 需要什么）</p>
<p><img data-src="/images/webpack/1649377319020.png" alt="1649377319020" /></p>
<p>于是在 index.html 配置引用</p>
<p>（本人在这里傻逼了，class 没写，一直还以为哪里出错）</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>webpack打包文件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>webpack打包<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>其他资源打包<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>iconfont icon-shezhi<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>iconfont icon-dingdan<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>iconfont icon-shangpin<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>iconfont icon-yonghuqun<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>iconfont icon-quanxian<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>webpack.config.js  module 中 rules:[{}] 配置为</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 打包其他资源</span></pre></td></tr><tr><td data-num="2"></td><td><pre> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(css|less|js|html|jpg|png|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>   <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 输出文件夹</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token literal-property property">outputPath</span><span class="token operator">:</span> <span class="token string">'others'</span></pre></td></tr><tr><td data-num="8"></td><td><pre>             <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre> <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>打包运行命令 webpack  打包成功</p>
<h2 id="devserver"><a class="anchor" href="#devserver">#</a> devServer</h2>
<p>​    帮助自动打包，修改代码后，不需要每次 webpack 打包</p>
<ul>
<li>
<p>安装工具 webapck-dev-server  npm i  webpack-dev-server -D</p>
</li>
<li>
<p>配置命令 mode 属性同级下配置</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 开发服务器 devServer 用来自动化 </span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment">// 特点：只会在内存中编译打包，不会有任何输出</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// 启动命令为 npx webpack-dev-server</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token comment">//contentBase: path.resolve (__dirname, 'dist'),// 官方文档已经说被弃用</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token comment">// 启动 gzip 压缩</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token comment">// 启动端口号</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">3001</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token comment">// 自动打开浏览器</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
<li>
<p>运行命令 npx webpack-dev-server</p>
<p>在源文件 src 里面修改代码保存即自动打包，刷新浏览器即可看到（建立安装 vscode 自动刷新插件 ---Live Server，实现保存即可看到浏览器内容，无须刷新)</p>
<p>下载好在需要监听的 html 文件右键，选择 open with Live Server</p>
</li>
</ul>
<h2 id="以上打包完整代码"><a class="anchor" href="#以上打包完整代码">#</a> 以上打包完整代码</h2>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 输入</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">// 输出</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token comment">// 输出目录</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">//loader 配置</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="16"></td><td><pre>            <span class="token comment">// 打包 css 文件</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>                <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="20"></td><td><pre>                    <span class="token string">'style-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="21"></td><td><pre>                    <span class="token string">'css-loader'</span></pre></td></tr><tr><td data-num="22"></td><td><pre>                <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token comment">// 打包 less 文件</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="27"></td><td><pre>                <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="28"></td><td><pre>                    <span class="token string">'style-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="29"></td><td><pre>                    <span class="token string">'css-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="30"></td><td><pre>                    <span class="token string">'less-loader'</span></pre></td></tr><tr><td data-num="31"></td><td><pre>                <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token comment">// 打包 css 中 url 图片文件</span></pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(jpg|png|gif|svg)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="36"></td><td><pre>                <span class="token comment">//url-loader 依靠 file-loader 所以需要下载两个</span></pre></td></tr><tr><td data-num="37"></td><td><pre>                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="38"></td><td><pre>                <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>                    <span class="token comment">// 设置图片小于 6*1024，就会被 base64 处理图片，减少请求数量</span></pre></td></tr><tr><td data-num="40"></td><td><pre>                    <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">6</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="41"></td><td><pre>                    <span class="token comment">// 关闭 url-loader 的 es6 模块化，不然 html 里面 img 元素会有问题</span></pre></td></tr><tr><td data-num="42"></td><td><pre>                    <span class="token literal-property property">esModule</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="43"></td><td><pre>                    <span class="token comment">// [ext] 取原来扩展名  名字长度取 10</span></pre></td></tr><tr><td data-num="44"></td><td><pre>                    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'[name].[hash:10].[ext]'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="45"></td><td><pre>                    <span class="token comment">// 输出文件夹</span></pre></td></tr><tr><td data-num="46"></td><td><pre>                    <span class="token literal-property property">outputPath</span><span class="token operator">:</span> <span class="token string">'images'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="47"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="49"></td><td><pre></pre></td></tr><tr><td data-num="50"></td><td><pre>            <span class="token comment">// 打包 html 文件 img 问题</span></pre></td></tr><tr><td data-num="51"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(htm|html)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="53"></td><td><pre>                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'html-withimg-loader'</span></pre></td></tr><tr><td data-num="54"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="55"></td><td><pre>            <span class="token comment">// 打包其他资源</span></pre></td></tr><tr><td data-num="56"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>                <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(css|less|js|html|jpg|png|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="58"></td><td><pre>                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="59"></td><td><pre>                <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>                    <span class="token comment">// 输出文件夹</span></pre></td></tr><tr><td data-num="61"></td><td><pre>                    <span class="token literal-property property">outputPath</span><span class="token operator">:</span> <span class="token string">'others'</span></pre></td></tr><tr><td data-num="62"></td><td><pre></pre></td></tr><tr><td data-num="63"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>        <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="66"></td><td><pre></pre></td></tr><tr><td data-num="67"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="68"></td><td><pre>    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="69"></td><td><pre>        <span class="token comment">// 使用插件 html-webpack-plugin 打包 html 文件</span></pre></td></tr><tr><td data-num="70"></td><td><pre>        <span class="token comment">//new HtmlWebpackPlugin () 打包多一个 index.html 文件</span></pre></td></tr><tr><td data-num="71"></td><td><pre>        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="72"></td><td><pre>            <span class="token comment">// 复制入门文件 index.html 结构样式</span></pre></td></tr><tr><td data-num="73"></td><td><pre>            <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/index.html'</span></pre></td></tr><tr><td data-num="74"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="75"></td><td><pre>    <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="76"></td><td><pre>    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="77"></td><td><pre>    <span class="token comment">// 开发服务器 devServer 用来自动化 </span></pre></td></tr><tr><td data-num="78"></td><td><pre>    <span class="token comment">// 特点：只会在内存中编译打包，不会有任何输出</span></pre></td></tr><tr><td data-num="79"></td><td><pre>    <span class="token comment">// 启动命令为 npx webpack-dev-server</span></pre></td></tr><tr><td data-num="80"></td><td><pre>    <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>        <span class="token comment">//contentBase: path.resolve (__dirname, 'dist'),// 官方文档已经说被弃用</span></pre></td></tr><tr><td data-num="82"></td><td><pre>        <span class="token comment">// 可写可不写</span></pre></td></tr><tr><td data-num="83"></td><td><pre>        <span class="token keyword">static</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="84"></td><td><pre>            <span class="token literal-property property">directory</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="85"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="86"></td><td><pre>        <span class="token comment">// 启动 gzip 压缩</span></pre></td></tr><tr><td data-num="87"></td><td><pre>        <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="88"></td><td><pre>        <span class="token comment">// 启动端口号</span></pre></td></tr><tr><td data-num="89"></td><td><pre>        <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">3001</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="90"></td><td><pre>        <span class="token comment">// 自动打开浏览器</span></pre></td></tr><tr><td data-num="91"></td><td><pre>        <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="92"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="93"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="多文件配置"><a class="anchor" href="#多文件配置">#</a> 多文件配置</h2>
<p>这里以 index.html 和 login.html 为例子</p>
<ul>
<li>配置多个入口</li>
</ul>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 多文件配置多个入口</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token literal-property property">login</span><span class="token operator">:</span> <span class="token string">'./src/login.js'</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr></table></figure><ul>
<li>配置多个输出</li>
</ul>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token comment">// 多文件输出</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'js/[name].js'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr></table></figure><ul>
<li>
<p>复制多个 html 文件</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token comment">// 使用插件 html-webpack-plugin 打包 html 文件</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token comment">//new HtmlWebpackPlugin () 打包多一个 index.html 文件</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>            <span class="token comment">// 复制入门文件 index.html 结构样式</span></pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token comment">// 多文件</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token comment">// 复制入门文件 login.html 结构样式</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/login.html'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'login.html'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'login'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr></table></figure><p>完整代码为：</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 输入</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// entry: './src/index.js',</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">// 多文件配置多个入口</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token literal-property property">login</span><span class="token operator">:</span> <span class="token string">'./src/login.js'</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token comment">// 输出</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token comment">// 输出目录</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token comment">// path: path.resolve(__dirname, 'dist'),</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token comment">// filename: 'bundle.js',</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token comment">// 多文件输出</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'js/[name].js'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token comment">//loader 配置</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token comment">// 打包 css 文件</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="27"></td><td><pre>                <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="28"></td><td><pre>                    <span class="token string">'style-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="29"></td><td><pre>                    <span class="token string">'css-loader'</span></pre></td></tr><tr><td data-num="30"></td><td><pre>                <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token comment">// 打包 less 文件</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="35"></td><td><pre>                <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="36"></td><td><pre>                    <span class="token string">'style-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="37"></td><td><pre>                    <span class="token string">'css-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="38"></td><td><pre>                    <span class="token string">'less-loader'</span></pre></td></tr><tr><td data-num="39"></td><td><pre>                <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="40"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="41"></td><td><pre>            <span class="token comment">// 打包 css 中 url 图片文件</span></pre></td></tr><tr><td data-num="42"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(jpg|png|gif|svg)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="44"></td><td><pre>                <span class="token comment">//url-loader 依靠 file-loader 所以需要下载两个</span></pre></td></tr><tr><td data-num="45"></td><td><pre>                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="46"></td><td><pre>                <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>                    <span class="token comment">// 设置图片小于 6*1024，就会被 base64 处理图片，减少请求数量</span></pre></td></tr><tr><td data-num="48"></td><td><pre>                    <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">6</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="49"></td><td><pre>                    <span class="token comment">// 关闭 url-loader 的 es6 模块化，不然 html 里面 img 元素会有问题</span></pre></td></tr><tr><td data-num="50"></td><td><pre>                    <span class="token literal-property property">esModule</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="51"></td><td><pre>                    <span class="token comment">// [ext] 取原来扩展名  名字长度取 10</span></pre></td></tr><tr><td data-num="52"></td><td><pre>                    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'[name].[hash:10].[ext]'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="53"></td><td><pre>                    <span class="token comment">// 输出文件夹</span></pre></td></tr><tr><td data-num="54"></td><td><pre>                    <span class="token literal-property property">outputPath</span><span class="token operator">:</span> <span class="token string">'images'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="55"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="57"></td><td><pre></pre></td></tr><tr><td data-num="58"></td><td><pre>            <span class="token comment">// 打包 html 文件 img 问题</span></pre></td></tr><tr><td data-num="59"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(htm|html)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="61"></td><td><pre>                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'html-withimg-loader'</span></pre></td></tr><tr><td data-num="62"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="63"></td><td><pre>            <span class="token comment">// 打包其他资源</span></pre></td></tr><tr><td data-num="64"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>                <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(css|less|js|html|jpg|png|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="66"></td><td><pre>                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="67"></td><td><pre>                <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>                    <span class="token comment">// 输出文件夹</span></pre></td></tr><tr><td data-num="69"></td><td><pre>                    <span class="token literal-property property">outputPath</span><span class="token operator">:</span> <span class="token string">'others'</span></pre></td></tr><tr><td data-num="70"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="71"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="72"></td><td><pre>        <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="73"></td><td><pre></pre></td></tr><tr><td data-num="74"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="75"></td><td><pre>    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="76"></td><td><pre>        <span class="token comment">// 使用插件 html-webpack-plugin 打包 html 文件</span></pre></td></tr><tr><td data-num="77"></td><td><pre>        <span class="token comment">//new HtmlWebpackPlugin () 打包多一个 index.html 文件</span></pre></td></tr><tr><td data-num="78"></td><td><pre>        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="79"></td><td><pre>            <span class="token comment">// 复制入门文件 index.html 结构样式</span></pre></td></tr><tr><td data-num="80"></td><td><pre>            <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="81"></td><td><pre>            <span class="token comment">// 输出文件名字</span></pre></td></tr><tr><td data-num="82"></td><td><pre>            <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="83"></td><td><pre>            <span class="token comment">// 打包优化</span></pre></td></tr><tr><td data-num="84"></td><td><pre>            <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="85"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="86"></td><td><pre>        <span class="token comment">// 多文件</span></pre></td></tr><tr><td data-num="87"></td><td><pre>        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="88"></td><td><pre>            <span class="token comment">// 复制入门文件 login.html 结构样式</span></pre></td></tr><tr><td data-num="89"></td><td><pre>            <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/login.html'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="90"></td><td><pre>            <span class="token comment">// 输出文件名字</span></pre></td></tr><tr><td data-num="91"></td><td><pre>            <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'login.html'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="92"></td><td><pre>            <span class="token comment">// 打包优化</span></pre></td></tr><tr><td data-num="93"></td><td><pre>            <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'login'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="94"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="95"></td><td><pre>    <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="96"></td><td><pre>    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="97"></td><td><pre>    <span class="token comment">// 开发服务器 devServer 用来自动化 </span></pre></td></tr><tr><td data-num="98"></td><td><pre>    <span class="token comment">// 特点：只会在内存中编译打包，不会有任何输出</span></pre></td></tr><tr><td data-num="99"></td><td><pre>    <span class="token comment">// 启动命令为 npx webpack-dev-server</span></pre></td></tr><tr><td data-num="100"></td><td><pre>    <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="101"></td><td><pre>        <span class="token comment">//contentBase: path.resolve (__dirname, 'dist'),// 官方文档已经说被弃用</span></pre></td></tr><tr><td data-num="102"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="103"></td><td><pre>        <span class="token comment">// 启动 gzip 压缩</span></pre></td></tr><tr><td data-num="104"></td><td><pre>        <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="105"></td><td><pre>        <span class="token comment">// 启动端口号</span></pre></td></tr><tr><td data-num="106"></td><td><pre>        <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">3001</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="107"></td><td><pre>        <span class="token comment">// 自动打开浏览器</span></pre></td></tr><tr><td data-num="108"></td><td><pre>        <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="109"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="110"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>多文件打包成功</p>
</li>
</ul>
<h2 id="babel配置"><a class="anchor" href="#babel配置">#</a> babel 配置</h2>
<p>babel: 将高版本的 js 语法转换为低版本浏览器能识别的语法</p>
<ul>
<li>
<p>安装</p>
<p>npm i babel-loader @babel/core @babel/preset-env -D</p>
<p>再安装 否则处理不了对象的方法（ 比如 eg：arr.includes (4)  ）</p>
<p>npm i @babel/polyfill -S</p>
</li>
<li>
<p>配置</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//babel 转换</span></pre></td></tr><tr><td data-num="2"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.\js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>                <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>                <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>                    <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@babel/env'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="8"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr></table></figure><p>index.js 中引入对象的方法处理</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token string">'@babel/polyfill'</span></pre></td></tr></table></figure></li>
<li>
<p>打包 看看打包的 js 文件中是否将高版本语法转换为低版本语法</p>
</li>
</ul>
<h2 id="sourcemap源码映射"><a class="anchor" href="#sourcemap源码映射">#</a> sourceMap 源码映射</h2>
<p>源码的映射，通过 sourceMap 打包找到真正源码的位置</p>
<ul>
<li>解决编出来的源码位置并不是实际的位置，比如<img data-src="/images/webapck%E6%89%93%E5%8C%85/image-20220306133502413.png" alt="image-20220306133502413" /></li>
</ul>
<p>问题：点击上图右侧，并不是真正 index.js 映射的源码位置</p>
<p>面试官问 map 文件是什么？就是 sourceMap 源码映射</p>
<p>详情官网 <span class="exturl" data-url="aHR0cHM6Ly93ZWJwYWNrLmpzLm9yZy9jb25maWd1cmF0aW9uL2RldnRvb2wvI3Jvb3Q=">https://webpack.js.org/configuration/devtool/#root</span></p>
<p><img data-src="/images/webpack/1649377493782.png" alt="1649377493782" /></p>
<p>配置如下：（开发模式下建立用 3 不生成 map 文件且为源码）</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">'eval-cheap-module-source-map'</span></pre></td></tr></table></figure><h2 id="使用第三方插件"><a class="anchor" href="#使用第三方插件">#</a> 使用第三方插件</h2>
<p>全局使用第三方插件 比如 jquery $</p>
<p>下载第三方插件</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>npm i jquery <span class="token operator">-</span><span class="token constant">S</span></pre></td></tr></table></figure><p>配置 webpack 自带插件</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">//plugins 里面配置</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span> </pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 第三方库 jquery 挂载使用</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token literal-property property">$</span><span class="token operator">:</span> <span class="token string">'jquery'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token literal-property property">jQuery</span><span class="token operator">:</span> <span class="token string">'jquery'</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">]</span></pre></td></tr></table></figure><p>在 js 文件直接使用即可实现</p>
<h2 id="webpack区分生产环境和开发分包"><a class="anchor" href="#webpack区分生产环境和开发分包">#</a> webpack 区分生产环境和开发分包</h2>
<ul>
<li>
<p>分包 建立 build 目录同级，划分三个文件，分别为 webpack.base.js webpack.dev.js  webpack.pro.js</p>
<p><img data-src="/images/webpack/1649377530057.png" alt="1649377530057" /></p>
</li>
<li>
<p>安装分包工具 wepack-merge，合并配置文件</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>npm i webpack<span class="token operator">-</span>merge <span class="token operator">-</span><span class="token constant">D</span></pre></td></tr></table></figure></li>
<li>
<p>修改配置文件合并内容</p>
<ol>
<li>webpack.base.js (完整代码参考)</li>
</ol>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 输入</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">// entry: './src/index.js',</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">// 多文件配置多个入口</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token literal-property property">login</span><span class="token operator">:</span> <span class="token string">'./src/login.js'</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">// 输出</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token comment">// 输出目录</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token comment">// path: path.resolve(__dirname, 'dist'),</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token comment">// filename: 'bundle.js',</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token comment">// 多文件输出</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'..'</span><span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'js/[name].js'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token comment">//loader 配置</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token comment">// 打包 css 文件</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="28"></td><td><pre>                <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="29"></td><td><pre>                    <span class="token string">'style-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="30"></td><td><pre>                    <span class="token string">'css-loader'</span></pre></td></tr><tr><td data-num="31"></td><td><pre>                <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token comment">// 打包 less 文件</span></pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="36"></td><td><pre>                <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="37"></td><td><pre>                    <span class="token string">'style-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="38"></td><td><pre>                    <span class="token string">'css-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="39"></td><td><pre>                    <span class="token string">'less-loader'</span></pre></td></tr><tr><td data-num="40"></td><td><pre>                <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="41"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="42"></td><td><pre>            <span class="token comment">// 打包 css 中 url 图片文件</span></pre></td></tr><tr><td data-num="43"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(jpg|png|gif|svg)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="45"></td><td><pre>                <span class="token comment">//url-loader 依靠 file-loader 所以需要下载两个</span></pre></td></tr><tr><td data-num="46"></td><td><pre>                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="47"></td><td><pre>                <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>                    <span class="token comment">// 设置图片小于 6*1024，就会被 base64 处理图片，减少请求数量</span></pre></td></tr><tr><td data-num="49"></td><td><pre>                    <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">6</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="50"></td><td><pre>                    <span class="token comment">// 关闭 url-loader 的 es6 模块化，不然 html 里面 img 元素会有问题</span></pre></td></tr><tr><td data-num="51"></td><td><pre>                    <span class="token literal-property property">esModule</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="52"></td><td><pre>                    <span class="token comment">// [ext] 取原来扩展名  名字长度取 10</span></pre></td></tr><tr><td data-num="53"></td><td><pre>                    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'[name].[hash:10].[ext]'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="54"></td><td><pre>                    <span class="token comment">// 输出文件夹</span></pre></td></tr><tr><td data-num="55"></td><td><pre>                    <span class="token literal-property property">outputPath</span><span class="token operator">:</span> <span class="token string">'images'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="56"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="58"></td><td><pre></pre></td></tr><tr><td data-num="59"></td><td><pre>            <span class="token comment">// 打包 html 文件 img 问题</span></pre></td></tr><tr><td data-num="60"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(htm|html)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="62"></td><td><pre>                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'html-withimg-loader'</span></pre></td></tr><tr><td data-num="63"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="64"></td><td><pre>            <span class="token comment">// 打包其他资源</span></pre></td></tr><tr><td data-num="65"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>                <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(css|less|js|html|jpg|png|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="67"></td><td><pre>                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="68"></td><td><pre>                <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>                    <span class="token comment">// 输出文件夹</span></pre></td></tr><tr><td data-num="70"></td><td><pre>                    <span class="token literal-property property">outputPath</span><span class="token operator">:</span> <span class="token string">'others'</span></pre></td></tr><tr><td data-num="71"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="72"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="73"></td><td><pre>            <span class="token comment">//babel 转换</span></pre></td></tr><tr><td data-num="74"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="75"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.\js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="76"></td><td><pre>                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="77"></td><td><pre>                <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="78"></td><td><pre>                <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="79"></td><td><pre>                    <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@babel/env'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="80"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="82"></td><td><pre>        <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="83"></td><td><pre></pre></td></tr><tr><td data-num="84"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="85"></td><td><pre>    <span class="token comment">// 插件</span></pre></td></tr><tr><td data-num="86"></td><td><pre>    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="87"></td><td><pre>        <span class="token comment">// 使用插件 html-webpack-plugin 打包 html 文件</span></pre></td></tr><tr><td data-num="88"></td><td><pre>        <span class="token comment">//new HtmlWebpackPlugin () 打包多一个 index.html 文件</span></pre></td></tr><tr><td data-num="89"></td><td><pre>        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="90"></td><td><pre>            <span class="token comment">// 复制入门文件 index.html 结构样式</span></pre></td></tr><tr><td data-num="91"></td><td><pre>            <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="92"></td><td><pre>            <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="93"></td><td><pre>            <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="94"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="95"></td><td><pre>        <span class="token comment">// 多文件</span></pre></td></tr><tr><td data-num="96"></td><td><pre>        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="97"></td><td><pre>            <span class="token comment">// 复制入门文件 login.html 结构样式</span></pre></td></tr><tr><td data-num="98"></td><td><pre>            <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/login.html'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="99"></td><td><pre>            <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'login.html'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="100"></td><td><pre>            <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'login'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="101"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="102"></td><td><pre>        <span class="token comment">// 第三方库 jquery 挂载使用</span></pre></td></tr><tr><td data-num="103"></td><td><pre>        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="104"></td><td><pre>            <span class="token literal-property property">$</span><span class="token operator">:</span> <span class="token string">'jquery'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="105"></td><td><pre>            <span class="token literal-property property">jQuery</span><span class="token operator">:</span> <span class="token string">'jquery'</span></pre></td></tr><tr><td data-num="106"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="107"></td><td><pre>    <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="108"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>2.webpack.dev.js</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> merge <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> baseConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./webpack.base.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>baseConfig<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 开发服务器 devServer 用来自动化 </span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 特点：只会在内存中编译打包，不会有任何输出</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">// 启动命令为 npx webpack-dev-server</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token comment">//contentBase: path.resolve (__dirname, 'dist'),// 官方文档已经说被弃用</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token comment">// 启动 gzip 压缩</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token comment">// 启动端口号</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">3001</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token comment">// 自动打开浏览器</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">'eval-cheap-module-source-map'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>3.webpack.pro.js</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> merge <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> baseConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./webpack.base.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>baseConfig<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'production'</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li>
<li>
<p>增加或修改 package.json 配置 找到 script 节点</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token string-property property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token string-property property">"server"</span><span class="token operator">:</span> <span class="token string">"webpack-dev-server --config ./build/webpack.dev.js"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token string-property property">"build"</span><span class="token operator">:</span> <span class="token string">"webpack --config ./build/webpack.pro.js"</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr></table></figure><p>这样便实现区分了生产环境和开发环境</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>npm run server   <span class="token comment">// 开发模式下</span></pre></td></tr><tr><td data-num="2"></td><td><pre>npm run build    <span class="token comment">// 生产模式下</span></pre></td></tr></table></figure></li>
</ul>
<h2 id="webpack处理跨域问题"><a class="anchor" href="#webpack处理跨域问题">#</a> webpack 处理跨域问题</h2>
<ul>
<li>为什么出现跨域？</li>
</ul>
<p>​           协议 域名 端口号 三个有一个不一样便出现跨域</p>
<ul>
<li>
<p>面试常问问题，如何解决跨域？</p>
<p>CORS (在接口上添加注解，后端处理，但是数据不安全)</p>
<p>JSONP（利用 script 的 src 属性，只能处理 get 请求）</p>
<p>Nginx (反向代理)</p>
<p>使用 webpack 作代理 (比较好的处理方式)</p>
<h3 id="webpack处理跨域配置"><a class="anchor" href="#webpack处理跨域配置">#</a> webpack 处理跨域配置</h3>
<p>在目录下打开终端，安装 webpack</p>
<p>npm i webpack webpack-cli -D</p>
<p>初始化 npm init -y</p>
<ul>
<li>推荐方法，在 webpack.config.js 中 devServer 节点中，增加一个属性</li>
</ul>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token literal-property property">proxy</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// 检测当请求路径前面为 /api 时，将会替换为后面的 ip</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token string-property property">"/api"</span><span class="token operator">:</span><span class="token string">"http://localhost:666"</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><img data-src="/images/webpack/1649377552076.png" alt="1649377552076" /></p>
<p>安装 axios  npm i axios -S</p>
<p>前端请求 (需要跨域接口前面用 /api)</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 引入 axios</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> axios <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"axios"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 发请求</span></pre></td></tr><tr><td data-num="4"></td><td><pre>axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/api/getList"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><ul>
<li>
<p>cors 方法，但是不安全</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 安装 </span></pre></td></tr><tr><td data-num="2"></td><td><pre>npm i cors</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 引入 </span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> cors<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span>“cors”<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 实现 </span></pre></td></tr><tr><td data-num="6"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>cors<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="模拟后台编写简单接口"><a class="anchor" href="#模拟后台编写简单接口">#</a> 模拟后台编写简单接口</h3>
<ul>
<li>
<p>在 src 同级建立 server 目录，建立 app.js</p>
</li>
<li>
<p>npm init -y</p>
</li>
<li>
<p>npm i express</p>
</li>
<li>
<p>编写后台服务器简单代码，开一个接口</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"express"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/api/getList"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">"请求成功"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"张三"</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"李四"</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">22</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"王五"</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">23</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">666</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"http://localhost:666/api/getList"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>点击链接在浏览器即可看到数据</p>
</li>
<li>
<p>在前端 src 那个文件下载 axios 发起请求 （eg: 在 index.js 利用 axios 请求）      npm i axios -S</p>
</li>
<li>
<p>在 index.js 发起请求</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 引入 axios</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> axios <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"axios"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 发请求</span></pre></td></tr><tr><td data-num="4"></td><td><pre>axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"http://localhost:666/api/getList"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li>
<li>
<p>在 server 的终端下开启后台 node app.js, 在上一级前端目录在开启前端 npm run server (有的是 npm run dev, 具体看 package.json 配置)</p>
<p>发现问题跨域！！！</p>
<p><img data-src="/images/webpack/1649377571332.png" alt="1649377571332" /></p>
<p>具体解决方法请回看上面一点点，简单来说就是在 devServer 节点配置</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token literal-property property">proxy</span><span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token string-property property">"/api"</span><span class="token operator">:</span><span class="token string">"跨域ip"</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>成功解决，跨域请求成功</p>
<p><img data-src="/images/webpack/1649377584724.png" alt="1649377584724" /></p>
</li>
</ul>
<h3 id="webpackconfigjs跨域配置代码"><a class="anchor" href="#webpackconfigjs跨域配置代码">#</a> webpack.config.js 跨域配置代码</h3>
<p>如下是两个页面 index.html 和 login.html 均配置实现了跨域</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 输入</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">// entry: './src/index.js',</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">// 多文件配置多个入口</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token literal-property property">login</span><span class="token operator">:</span> <span class="token string">'./src/login.js'</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">// 输出</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token comment">// 输出目录</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token comment">// path: path.resolve(__dirname, 'dist'),</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token comment">// filename: 'bundle.js',</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token comment">// 多文件输出</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'js/[name].js'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token comment">//loader 配置</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token comment">// 打包 css 文件</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="28"></td><td><pre>                <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="29"></td><td><pre>                    <span class="token string">'style-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="30"></td><td><pre>                    <span class="token string">'css-loader'</span></pre></td></tr><tr><td data-num="31"></td><td><pre>                <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token comment">// 打包 less 文件</span></pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="36"></td><td><pre>                <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="37"></td><td><pre>                    <span class="token string">'style-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="38"></td><td><pre>                    <span class="token string">'css-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="39"></td><td><pre>                    <span class="token string">'less-loader'</span></pre></td></tr><tr><td data-num="40"></td><td><pre>                <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="41"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="42"></td><td><pre>            <span class="token comment">// 打包 css 中 url 图片文件</span></pre></td></tr><tr><td data-num="43"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(jpg|png|gif|svg)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="45"></td><td><pre>                <span class="token comment">//url-loader 依靠 file-loader 所以需要下载两个</span></pre></td></tr><tr><td data-num="46"></td><td><pre>                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="47"></td><td><pre>                <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>                    <span class="token comment">// 设置图片小于 6*1024，就会被 base64 处理图片，减少请求数量</span></pre></td></tr><tr><td data-num="49"></td><td><pre>                    <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">6</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="50"></td><td><pre>                    <span class="token comment">// 关闭 url-loader 的 es6 模块化，不然 html 里面 img 元素会有问题</span></pre></td></tr><tr><td data-num="51"></td><td><pre>                    <span class="token literal-property property">esModule</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="52"></td><td><pre>                    <span class="token comment">// [ext] 取原来扩展名  名字长度取 10</span></pre></td></tr><tr><td data-num="53"></td><td><pre>                    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'[name].[hash:10].[ext]'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="54"></td><td><pre>                    <span class="token comment">// 输出文件夹</span></pre></td></tr><tr><td data-num="55"></td><td><pre>                    <span class="token literal-property property">outputPath</span><span class="token operator">:</span> <span class="token string">'images'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="56"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="58"></td><td><pre></pre></td></tr><tr><td data-num="59"></td><td><pre>            <span class="token comment">// 打包 html 文件 img 问题</span></pre></td></tr><tr><td data-num="60"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(htm|html)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="62"></td><td><pre>                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'html-withimg-loader'</span></pre></td></tr><tr><td data-num="63"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="64"></td><td><pre>            <span class="token comment">// 打包其他资源</span></pre></td></tr><tr><td data-num="65"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>                <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(css|less|js|html|jpg|png|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="67"></td><td><pre>                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="68"></td><td><pre>                <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>                    <span class="token comment">// 输出文件夹</span></pre></td></tr><tr><td data-num="70"></td><td><pre>                    <span class="token literal-property property">outputPath</span><span class="token operator">:</span> <span class="token string">'others'</span></pre></td></tr><tr><td data-num="71"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="72"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="73"></td><td><pre>            <span class="token comment">//babel 转换</span></pre></td></tr><tr><td data-num="74"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="75"></td><td><pre>                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.\js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="76"></td><td><pre>                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="77"></td><td><pre>                <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="78"></td><td><pre>                <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="79"></td><td><pre>                    <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@babel/env'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="80"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="82"></td><td><pre>        <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="83"></td><td><pre></pre></td></tr><tr><td data-num="84"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="85"></td><td><pre>    <span class="token comment">// 插件</span></pre></td></tr><tr><td data-num="86"></td><td><pre>    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="87"></td><td><pre>        <span class="token comment">// 使用插件 html-webpack-plugin 打包 html 文件</span></pre></td></tr><tr><td data-num="88"></td><td><pre>        <span class="token comment">//new HtmlWebpackPlugin () 打包多一个 index.html 文件</span></pre></td></tr><tr><td data-num="89"></td><td><pre>        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="90"></td><td><pre>            <span class="token comment">// 复制入门文件 index.html 结构样式</span></pre></td></tr><tr><td data-num="91"></td><td><pre>            <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="92"></td><td><pre>            <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="93"></td><td><pre>            <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="94"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="95"></td><td><pre>        <span class="token comment">// 多文件</span></pre></td></tr><tr><td data-num="96"></td><td><pre>        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="97"></td><td><pre>            <span class="token comment">// 复制入门文件 login.html 结构样式</span></pre></td></tr><tr><td data-num="98"></td><td><pre>            <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/login.html'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="99"></td><td><pre>            <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'login.html'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="100"></td><td><pre>            <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'login'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="101"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="102"></td><td><pre>        <span class="token comment">// 第三方库 jquery 挂载使用</span></pre></td></tr><tr><td data-num="103"></td><td><pre>        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="104"></td><td><pre>            <span class="token literal-property property">$</span><span class="token operator">:</span> <span class="token string">'jquery'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="105"></td><td><pre>            <span class="token literal-property property">jQuery</span><span class="token operator">:</span> <span class="token string">'jquery'</span></pre></td></tr><tr><td data-num="106"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="107"></td><td><pre>    <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="108"></td><td><pre>    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="109"></td><td><pre>    <span class="token comment">// 开发服务器 devServer 用来自动化 </span></pre></td></tr><tr><td data-num="110"></td><td><pre>    <span class="token comment">// 特点：只会在内存中编译打包，不会有任何输出</span></pre></td></tr><tr><td data-num="111"></td><td><pre>    <span class="token comment">// 启动命令为 npx webpack-dev-server</span></pre></td></tr><tr><td data-num="112"></td><td><pre>    <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="113"></td><td><pre>        <span class="token comment">//contentBase: path.resolve (__dirname, 'dist'),// 官方文档已经说被弃用</span></pre></td></tr><tr><td data-num="114"></td><td><pre>        <span class="token comment">// 启动 gzip 压缩</span></pre></td></tr><tr><td data-num="115"></td><td><pre>        <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="116"></td><td><pre>        <span class="token comment">// 启动端口号</span></pre></td></tr><tr><td data-num="117"></td><td><pre>        <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">3001</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="118"></td><td><pre>        <span class="token comment">// 自动打开浏览器</span></pre></td></tr><tr><td data-num="119"></td><td><pre>        <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="120"></td><td><pre>        <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="121"></td><td><pre>            <span class="token string-property property">"/api"</span><span class="token operator">:</span> <span class="token string">"http://localhost:666"</span></pre></td></tr><tr><td data-num="122"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="123"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="124"></td><td><pre>    <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">'eval-cheap-module-source-map'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="125"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="webpack-css处理"><a class="anchor" href="#webpack-css处理">#</a> webpack CSS 处理</h2>
<h3 id="css文件分离"><a class="anchor" href="#css文件分离">#</a> css 文件分离</h3>
<p>使用插件 mini-css-extract-plugin</p>
<ul>
<li>
<p>安装插件 npm i mini-css-extract-plugin -D</p>
</li>
<li>
<p>引入 require, 修改 plugin 配置</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 引入</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> MiniCssExtractPlugin<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"mini-css-extract-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 使用插件</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token comment">// 输出路径和名字</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">'/css/[name].css'</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">]</span></pre></td></tr></table></figure></li>
<li>
<p>将 style-loader 都修改为</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span><span class="token literal-property property">loader</span><span class="token operator">:</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
</ul>
<h3 id="css-css3语法兼容处理"><a class="anchor" href="#css-css3语法兼容处理">#</a> css css3 语法兼容处理</h3>
<ul>
<li>
<p>使用 postcss-loader autoprefixer</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>npm i postcss<span class="token operator">-</span>loader autoprefixer <span class="token operator">-</span><span class="token constant">D</span></pre></td></tr></table></figure></li>
<li>
<p>module 使用 postcss-loader 要写在 css-loader 后面，卸载后面才是前一个调用</p>
<p><img data-src="/images/webpack/1649377609082.png" alt="1649377609082" /></p>
</li>
<li>
<p>配置 当前目录下 新建一个文件 postcss-config.js</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token literal-property property">overrideBrowserslist</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="4"></td><td><pre>            <span class="token string">'defaults'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>            <span class="token string">'Android 4.1'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token string">'Chrome>31'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token string">'ff>31'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token string">'ie>=8'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token string">'last 2 versions'</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>成功实现兼容处理</p>
<p><img data-src="/images/webpack/1649377622896.png" alt="1649377622896" /></p>
</li>
</ul>
<h3 id="css压缩"><a class="anchor" href="#css压缩">#</a> css 压缩</h3>
<ul>
<li>
<p>使用 optimize-css-assets-webpack-plugin</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>npm i optimize<span class="token operator">-</span>css<span class="token operator">-</span>assets<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin <span class="token operator">-</span><span class="token constant">D</span></pre></td></tr></table></figure></li>
<li>
<p>使用配置，直接在 webpack.pro.js 里面配置</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> OptimizeCssAssetsWepackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"optimize-css-assets-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token comment">//css 文件压缩</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token keyword">new</span> <span class="token class-name">OptimizeCssAssetsWepackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr></table></figure><p>npm run build 查看上述 css 分离兼容压缩功能成功！建议实现一个步骤打包出来看一下再进行下一步</p>
</li>
</ul>
<h2 id="js和html压缩"><a class="anchor" href="#js和html压缩">#</a> js 和 html 压缩</h2>
<h3 id="js压缩"><a class="anchor" href="#js压缩">#</a> js 压缩</h3>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token literal-property property">mode</span><span class="token operator">:</span>production   <span class="token comment">// 生产模式就压缩了 js 代码</span></pre></td></tr></table></figure><h3 id="html压缩"><a class="anchor" href="#html压缩">#</a> html 压缩</h3>
<p>在插件中添加 minify</p>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>            <span class="token comment">// 复制入门文件 index.html 结构样式</span></pre></td></tr><tr><td data-num="3"></td><td><pre>            <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>            <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>            <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token comment">//html 压缩</span></pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token literal-property property">minify</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>                <span class="token comment">// 移除空格</span></pre></td></tr><tr><td data-num="9"></td><td><pre>                <span class="token literal-property property">collapseWhitespace</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>                <span class="token comment">// 移除注释</span></pre></td></tr><tr><td data-num="11"></td><td><pre>                <span class="token literal-property property">removeComments</span><span class="token operator">:</span> <span class="token boolean">true</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>webpack</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>打包</tag>
      </tags>
  </entry>
  <entry>
    <title>css选择器</title>
    <url>/2020/10/17/css%E9%80%89%E6%8B%A9%E5%99%A8/</url>
    <content><![CDATA[<p>CSS 选择器教程中一般是一股脑的都给你，因此我认为需要分分类，这样方便记忆的同时也能快速查阅。本文中的分类是根据<span class="exturl" data-url="aHR0cDovL3d3dy5ydWFueWlmZW5nLmNvbS9ibG9nLzIwMDkvMDMvY3NzX3NlbGVjdG9ycy5odG1s">阮一峰的文章 (opens new window)</span> 中的分类方法进行的分类</p>
<h3 id="基本选择器"><a class="anchor" href="#基本选择器">#</a> 基本选择器</h3>
<ul>
<li><code>id</code>  选择器</li>
<li><code>class</code>  选择器</li>
<li>标签选择器</li>
<li><code>*</code>  通用元素选择器</li>
</ul>
<p>例如如下代码：</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>p1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>p2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">*</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> orange<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token selector">p</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token selector">#p1</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token selector">.p2</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>最终效果：</strong></p>
<p><img data-src="../images/css%E9%80%89%E6%8B%A9%E5%99%A8/basic-selector.c876988d.png" alt="效果图" /></p>
<h3 id="多元素组合选择器"><a class="anchor" href="#多元素组合选择器">#</a> 多元素组合选择器</h3>
<p>一般情况下多元素组合选择器结合 <code>id</code> 、 <code>class</code> 、标签选择器使用</p>
<ul>
<li><code>A,B</code> : 同时匹配 A 和 B 元素</li>
<li><code>A B</code> : 注意 A 与 B 用空格隔开，匹配 A 元素后代中的 B 元素</li>
<li><code>A&gt;B</code> : 匹配 A 元素子元素中的 B 元素</li>
<li><code>A+B</code> : 匹配 A 元素后紧接着与 A 同级的 B 元素</li>
<li><code>A~B</code> : 匹配 A 元素后所有同级的 B 元素</li>
</ul>
<h4 id="ab"><a class="anchor" href="#ab">#</a> A,B</h4>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token selector">h3,</pre></td></tr><tr><td data-num="3"></td><td><pre>  p,</pre></td></tr><tr><td data-num="4"></td><td><pre>  span</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p><strong>最终效果：</strong></p>
<p><img data-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZMAAACqCAYAAABoHqKwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAABFlSURBVHhe7dxdqBXXGcbx3ggieOGNiBCkGKQSKgalYsVIBNsLA5ZIW2MgiEFtoFZQGxE0tFRvLLT2IpCUKFiaKCi9aCQE4oWpMYpQpa3RWowNosYPxFZrVGx9Og9rlnvtOXv2x1nH4qT/HwyePXs+1ppzeJ+91sz2KwIAIBNhAgDIRpgAALIRJgCAbIQJACAbYQIAyEaYAACyESYAgGyECQAgG2ECAMhGmAAAshEmAIBshAkAIBthAgDIRpgAALIRJgCAbIQJACAbYQIAyEaYAACyESYAgGyECQAgG2ECAMhGmAAAshEmAIBshAkAIBthAgDIRpgAALIRJgCAbIQJACAbYdIUO3YUv63i1+Vl1izp2rXyjUdgw4bWuZYulW7fDut9Tp87vuc2Yfi/m4MHW/t58WugoYq/YDQCYfL4IkwAwqQxCJPHF2ECECaNQZg8vggTgDBpDMLk8UWYAIRJY1QL1tWr0rFj0re+JY0aJU2YIP3kJ9I//1nuUHH5srR5s/TVr4ZjjBsnfe970h//KD14UG5UygkTn+dnP5OmTWtt53Nu3Cj9/e/lRj34fD5v3H/1aun+/fLNQnotJk+Wzpwp3ygcONB6b9Ei6ebN8o3C3bvSnj3hmo0eHbaJ1+EPf5D+859yw0T1Wly5Iv34x2G/eG16hcmNG9KWLa1rP2WKtGtXe1u9ECZosOIvGI1QLVi//W0oaGkx8rJsWav4Ry5aDpvqtl4cRDt3tgfKcMLE+//+9/Xn8eL27t49NLw62b69td+CBaEgm0PF4ZIed//+8J6l+23dWq4snDsnzZ/fvl91+dGPpFu3yh1K6bX47neldetar/sJk0uXpHnzWu/Hxdc9DUwvhAkarPgLRiOkBcuFaMyY1ut0GTtWOnq03Klw8mT4JOz3XMx/9zvp3/+Wjh9vrZ84UfrTn8odCsMJE49wfJz4Xt3iNvRTNN0H98X7pKMPj8hmz24/ZgyNe/ekFSvCOl+jeJ5//EP6znfa96lbfvrT9lFQei18zX3c+LpXmHgktGpV671eC2GCBiv+gtEIacHysmRJmFJywfrVr9rf+81vwj4uimvXttavWdNeKF2E43vpp/hBwyQt4l4cGPv2hXN58cho0qTW+8uXh3Z3c+GCNH16ax8fwxyC48eHJYZhbKNHLx7FeJ339TFs797WcbysXx8CxiMkT715Oiy+52OePRv2s/RaePF1v3gxvHfnTjhGXZikgZju633+/GfpG99oveeFMEGDFX/BaIS0YLmQuqhGnsKZOrX1fizynt+fObO13kU1lR4zDY1Bw6R6Ht8fSKey/PMvftF6Py30daoB5ekri23+9relhQvbj+fRi0cxXud9fQyf2+ERj+OpruvXw7Ei33vyNY3bpNNm6bWojuCi9DqmYfLrX7fWV0PKfJ74vhfCBA1W/AWjEeoKltUV+VOn2kcE3ZacMKmeJy3GUXqz2dt6n17SPjscfDM9BsymTa2RVZzaczGO28e2ue3uQ1xfvZlv1TCM+1p6LebMGRpElrYz/d2k+1YfBrC0vV4IEzRY8ReMRqgrWPa4hUmckkqln8L7DZM4peV9PH3lkUe8X+LjpQHlUUAcCaQjt2qYeJSSjpqsOqVWFybptUj1Eybf/770r3+F9RFhgi+R4i8YjTCcMKmb/upl0DCpFuNO01xeF9/3KMCjgV7SeyCevvL5PApxn9y3tH8/+EFY/HO3p786TXMdPtx+byMNw5wwSe9Jff3r0vnzYX2U7ueFMEGDFX/BaIS6gmV1Rb76qdwjAj++63sJ5n/9FNa2be1FctAw6XUD3qOIdOTihwKqU02dOIT8/ZS4X7xRHj/le9oorvvmN1uP4HqfNMy63YD/299a9168OOjiDXbLCZPqPZEf/jAEmb/PcuhQ6wGCuBAmaLDiLxiNMJwwMRe09HHWTku1SA4aJnbkSAiR+F7d4gLqx5X7lRbkOHpInzxLP/3HxfukXMD9RcXqdtXF16nf79yk6n43DqX0XkyvhTBBgxV/wWiE4YaJRwA//3n3QBmJMHEB9hcSuwWKv9DY6X5KN9WpuvT7I1b99B+nwKr++tehj+Kmi49b/Y6J5YSJub+drolD9Ze/bF9HmKDBir9gNMJww8Rc6P/yF2nlytY31F08Z8wI/wVL9b85GU6YRD6Wp5m+9rXWdv6vVfxfrPh7MYNKp7K8VMMifRzYS13BN0+NeeQxd27rv1Px9fD3Xjr9tzKWGyZ24oS0eHE4pxf/fPp0CI+4nxfCBA1W/AUDAJCHMAEAZCNMAADZCBMAQDbCBACQjTABAGQjTAAA2QgTAEA2wgQAkI0wAQBkI0wAANkIEwBANsIEAJCNMAEAZCNMAADZCBMAQDbCBACQjTABAGQjTAAA2QgTAEA2wgQAkI0wAQBkI0wAANkIEwBANsIEAJCNMAEAZCNMAADZCBMAQDbCBACQjTABAGQjTAAA2QgTAEA2wgQAkI0wAQBkI0wAANkIEwBANsKkKQ4elCZNkk6dKleMkB07pFmzpGvXwuvbt6WlS6UNG8LrL5tqf3vxdRhke+D/FGHSFITJyCBMgEeCMGkKwmRkECbAI0GYNAVhMjIIE+CRIEyagjAZGYQJ8EgQJk0Rw+TkSem996QZM4rfXvHrmzJF2rVLun+/3LD04IF04ID07LPSqFHSuHHSihXSZ5+VG5QGCZNPP5VWrpQmTAjn9r9+XT1m1b174dyLFkk3b5YrC27jxo3S1KnSuXPlyoLXr1/fvv3du9I770izZ4f+ePHPu3cP7Xvs0+nT0po10ujRrf7Uhcnly9Lmza2+zZ0rHTokvfoqYQL0gTBpCofJE09Ir7wiPf+8tH9/WBYuDIXVP0cuxjt3SmPGSGvXSu+/L+3bFwrkU09JZ8+WGxb6DRMHkwutt337bemDD6Q33pCefDIEmkOuGxf96sjqxg1pwYJQvNP2x/Xbt4fXt25JL78cQsHF3f3x9suWhb6/9lp7oLhPbtOLL0offxyuR9QpTC5dkubNC31xn2Lfpk0LbSZMgJ4Ik6ZwmLjovvRSKK7R+fPS00+HT/4eAZgLtovgW2+1F9KLF6U5c6StW8sVhX7C5PPPpWeeGXpui4V4+fIweqgT27R3b7micPRoGGHNnx9GKLGtx4+Hbf2+uY0eWTnQUjE0/d7hw+XKgrf3tXKAVVX76xDatKlzIJ45E8KXMAF6IkyaIoZJtaC6GK5eHQLAQWD+RD99unThQngdufh6+ijdtp8w8Shg7Nj2gp3yMSZPDsW3jkPIIyq3NY4i3E6/fvPNMBLxiMR8PAfM9ethmsvTXXVhdfVqmO5yIETe36O4TqOlan+vXJFmzpS2bGkPXovXizABeiJMmiJOc3UqkC78acHzawdP3ZJu20+YeJtO4RS5bZ5u8j2GbhweLvwOgBgSDiqPRDwy8L/x/kocqbhdbl+c8qqK7fWo6c6dsM7tdUA4KKqq/Y0jpnSaLVW9tgA6KioLGsEF20Wv09NcncLE90fefTfM/1cXF/34Kf9/GSaetvJ9F//rfnjqzDfe4z0SnyeOFGJxH26Y1AVAXZhUR3wRYQL0hTBpikHCxPdEuhX/VD9h0s80V/WJrE7SG+veJ73P4zb79YcfhvbEtvc7zdXtPlCq+p7b7LZ3Cqs4hVh3LAAPESZNMUiYuOi7+FdvwHfST5j4xr1HC91uwK9a1f0GvLktnr5avFhasqT9Brn753asW9ceMvb6691vwI8fLx05Uq4sDBImsb9+MMH9TB07Jk2cWH8sAA8RJk0xSJj4E7Ufl/XUkx+f9cjC01t79oTCmU5H9RMm5kLugu5tq48GO0wcKv2IU2LVvngk4mN7GsxtSjnAHGSdHg32488OlDQ0BwkTc5vcN4/mYt880nnuufDQQN2xADxEmDTFIGFiHiX4S37xy40u4P5527bWU1PWb5jYJ59IL7wQCq+P6Zvm1eP14tBw0fY5fK4o3niv6+MXX4SnvvzdD5/bweIRzkcfDR19DRomduJEOJ6P6/65Lf4yZqdrC2AIwgQAkI0wAQBkI0wAANkIEwBANsIEAJCNMAEAZCNMAADZCBMAQDbCBACQjTABAGQjTAAA2QgTAEA2wgQAkI0wAQBkI0wAANkIEwBANsIEAJCNMAEAZCNMAADZCBMAQDbCBACQjTABAGQjTAAA2QgTAEA2wgQAkI0wAQBkI0wAANkIEwBANsIEAJCNMAEAZCNMAADZCBMAQDbCpCkOHpQmTZJOnSpXjJAdO6RZs6Rr18Lr27elpUulDRvC6y+ban978XUYZHvg/xRh0hSEycggTIBHgjBpCsJkZBAmwCNBmDQFYTIyCBPgkSBMmoIwGRmECfBIECZNEcPk5EnpvfekGTOK317x65syRdq1S7p/v9yw9OCBdOCA9Oyz0qhR0rhx0ooV0meflRuUBgmTTz+VVq6UJkwI5/a/fl09ZtW9e+HcixZJN2+WKwtu48aN0tSp0rlz5cqC169f37793bvSO+9Is2eH/njxz7t3D+177NPp09KaNdLo0a3+1IXJ5cvS5s2tvs2dKx06JL36KmEC9IEwaQqHyRNPSK+8Ij3/vLR/f1gWLgyF1T9HLsY7d0pjxkhr10rvvy/t2xcK5FNPSWfPlhsW+g0TB5MLrbd9+23pgw+kN96QnnwyBJpDrhsX/erI6sYNacGCULzT9sf127eH17duSS+/HELBxd398fbLloW+v/Zae6C4T27Tiy9KH38crkfUKUwuXZLmzQt9cZ9i36ZNC20mTICeCJOmcJi46L70Uiiu0fnz0tNPh0/+HgGYC7aL4FtvtRfSixelOXOkrVvLFYV+wuTzz6Vnnhl6bouFePnyMHqoE9u0d2+5onD0aBhhzZ8fRiixrcePh239vrmNHlk50FIxNP3e4cPlyoK397VygFVV++sQ2rSpcyCeORPClzABeiJMmiKGSbWguhiuXh0CwEFg/kQ/fbp04UJ4Hbn4evoo3bafMPEoYOzY9oKd8jEmTw7Ft45DyCMqtzWOItxOv37zzTAS8YjEfDwHzPXrYZrL0111YXX1apjuciBE3t+juE6jpWp/r1yRZs6UtmxpD16L14swAXoiTJoiTnN1KpAu/GnB82sHT92SbttPmHibTuEUuW2ebvI9hm4cHi78DoAYEg4qj0Q8MvC/8f5KHKm4XW5fnPKqiu31qOnOnbDO7XVAOCiqqv2NI6Z0mi1VvbYAOioqCxrBBdtFr9PTXJ3CxPdH3n03zP9XFxf9+Cn/fxkmnrbyfRf/63546sw33uM9Ep8njhRicR9umNQFQF2YVEd8EWEC9IUwaYpBwsT3RLoV/1Q/YdLPNFf1iaxO0hvr3ie9z+M2+/WHH4b2xLb3O83V7T5Qqvqe2+y2dwqrOIVYdywADxEmTTFImLjou/hXb8B30k+Y+Ma9RwvdbsCvWtX9Bry5LZ6+WrxYWrKk/Qa5++d2rFvXHjL2+uvdb8CPHy8dOVKuLAwSJrG/fjDB/UwdOyZNnFh/LAAPESZNMUiY+BO1H5f11JMfn/XIwtNbe/aEwplOR/UTJuZC7oLubauPBjtMHCr9iFNi1b54JOJjexrMbUo5wBxknR4N9uPPDpQ0NAcJE3Ob3DeP5mLfPNJ57rnw0EDdsQA8RJg0xSBhYh4l+Et+8cuNLuD+edu21lNT1m+Y2CefSC+8EAqvj+mb5tXj9eLQcNH2OXyuKN54r+vjF1+Ep7783Q+f28HiEc5HHw0dfQ0aJnbiRDiej+v+uS3+MmanawtgCMIEAJCNMAEAZCNMAADZCBMAQDbCBACQjTABAGQjTAAA2QgTAEA2wgQAkI0wAQBkI0wAANkIEwBANsIEAJCNMAEAZCNMAADZCBMAQDbCBACQjTABAGQjTAAA2QgTAEA2wgQAkI0wAQBkI0wAANkIEwBANsIEAJCNMAEAZJL+Cx3cb+R6PrRaAAAAAElFTkSuQmCC" alt="效果图" /></p>
<h4 id="a-b"><a class="anchor" href="#a-b">#</a> A B</h4>
<p>因为颜色是可继承的，为了说明选择器确实匹配到了，因此在 span 元素的父元素设置了颜色</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token selector">div span</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p><strong>最终效果：</strong></p>
<p><img data-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbMAAACCCAYAAADMvCY7AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAA9hSURBVHhe7dx5jBTFAsdx4hk1EUFFQYSIQNRovPAPwRAjAUSDeEVjFKPRqIl/mBgTTNQIKKKAnOpDdEVAQAUV5eHDxxOPJ4fKQw4PBAk3iopcgoJHPX+1XUt10TM74w67VOf7IZVlumt6uns29duqru5GBgCAyBFmAIDoEWYAgOgRZgCA6BFmAIDoEWYAgOgRZgCA6BFmAIDoEWYAgOgRZgCA6BFmAIDoEWYAgOgRZgCA6BFmAIDoEWYAgOgRZgCA6BFmAIDoEWYAgOgRZgCA6BFmAIDoEWYAgOgRZgCA6BFmAIDoEWYAgOgRZjm3fvt602pYK9Oob6Oa0u/9fsna+nX9lOtT+9GpqpPZ9uu2ZK0x89fPN40HNk7Vmfrl1GQtKqGSvw96n78dfXf6DoGGQJjlHGEGH2GGvCLMco4wg48wQ14RZjlHmMFHmCGvCLOcI8zgI8yQV4RZzhFm8BFmyCvCLOcIM/gIM+QVYZZzhBl8hBnyijDLuUKN159//fto7UemY1VHc/gjh9vlxzx+jOn9em+zeuvq5N3Zdu7ZaV747AVz/rPn17z34H4HmzYj2pj+H/Q3W3/dmtRMq3SYff795+bO6Xfaz9Xnq/5B/Q4yJww+wVz18lX2+HSc5bpj+h2pfWg+pLlZvnl5srbapp83mdOeOi1Vr+eknmbPH3uSGsZ+9rWvXpuqc+879yZr93Lns/PYzvY7cHWPHHCkOfOZM82ADwcUPKeFvt/f//zdjPp4lDnpyZPssi7jupgdu3eUFWbaxqSlk1Lfs/bJ/Y7off52CDM0JMIs57Iar77v97UNpAuAsJw89GSz8NuFyRbSPt3wqQ2PrPe50mxwMzPzm5nJO/aqVJipYde2FFx+3axy6UuXmg3bNyTvLM2UL6aktn1o/0PN2yveTtZWm71qtjni0SNSn6VwU8g5m3dtNueOPrfgdhR2M5bPsOfL305W0XkZt2icfY+v0PerPyr8Y3DnutQw0zlTuPr1/NJ2ZFtz8xs3p5YRZmhIhFnOZTVeZzx9Rs1f2oXK1a9cneplyJy1c8yxTxybWT8sqqf6vkqE2ZZfthRtZLPK6U+dblb+tDLZQu3UC1NvzN/GY/99LFlbTa/99SpHDzzazF03N6lhzJJNS8zxg46vWR+GnXo9tX0PftEfH/ojxA+0rO/3ypev3Od7KifM/s45ViHM0JAIs5zLarxU1DB2m9DN/nWtxj5cr0ZYjbHzw84fzHnPnpeqox7c5KWT7WeoETvrmbNS63tN7mV2/7472ULdw0yN+F3/vCu1XkWBoB6YjkUNuUIlrHPrtFv3CedCdv22y3Qd3zX1fg0XuhDRdjSk6K93ZcT8EbaOTFs2LdU7umHqDTXbWPTdoswemXq9N752oz0Wnc+w96mQ+mTDJ3YbUuj7DUs5YRYOH6ro90Xb0H7pZ1avnjBDQyLMci6r8VLjr16Bo8BR8Ph11IiqMXZeXPRiqmFVw6VrUr7Pvv0s1SMIA7GuYRb2dFQ03LXsx2VJjWoaIuswpkOqnvZL+1eqsEH3e1Vrt601rYe1tst1DUnDh66eH1jhNqoWVtnlEl6X07l9+L2H7XUqR9t5+pOnU9tXuf2t22s+o1CYtR/V3sxbN89uT9+vepsK4drCLOtaoM7dB6s/SGpU0+uw90eYoSERZjmX1XiFExVEPSy/jooLEjWc4UQG9VzUg/GF14hU/DCqa5gpDPx1CgCFbJbwupeKHya1Ca+JNXm8iVmwcYFdp+teLmDOGX1Oqkeq49d5CM+ZH+xZ50nhq+G9kM6PzpNf132GZH2/xUKltjDTMGnYs73nX/fY4/HptULVr0eYoSERZjmX1Xg9NPuhZO1eCg2/jooLkqwGtdTiX2uqa5hpv/11Yc/Pl9WL8xvt2mQFjgJfNCPRLdP//V6W26fw/f6xrtm6xrQc2rJmnYq2UUjYi9P3qe9VSv1jxaktzMLfg7CH7gt7noQZGhJhlnO1NV5OsTDL2kapxf+suoZZ+H6/UQ+VetzFhCGi4PKvp7nZiWGPUaEXhqn/2VnHWWzftM6v6x931nFmTf93ajsv4cSWYgEV7hdhhoZEmOVcqY16sTDL6qXoWpEmgNRWhs8fbrch9dkz05Cghgb9+sUCI0s4VKkQW/zd4pqZjupdqZcVBpdC0J/8oeFKDVs65fbMbnr9plTd2sKs2HHWVl8TWPx14b77CDMcSAiznKtEmGXN7guDqBT1ec0snLCi/yucyhFO0T9l+Ck2nN123XXDrCHF+/9zf83r2u4/Uyl0zUzLwsks/nmrdJhl/R4MmTskWbuXJpVcNvGyVD3CDA2JMMu5SoSZ9JnVJ7UunBFZirqGWThbUkWzGcN7yPRay/166gmt2LwiqVGaMMS1b3piinvtn0d/SFLnW8fmXvszHCVr8oQCUjc6h/XCm59V9F04lQ6zrGuNCvGvfvgqqVG9X6MXjN7nHjnCDA2JMMu5SoVZ1n1RutfoislX2B6TgkY3SU9cMtFes7lgzAWp+6GkrmGmSQ26X8xfr+LfZ9bjpR52CDSsc9+/77ONcLl0rtw2dI3MbTscfvN7jTovhz1yWM3rrFmUOjdhMKu4+8xU2o1st0+QtXiyRepWhEqHmR6t1X1C99R6Ff8cZ93/pkKYoSERZjlXqTAr1EsoVLIatrqGmajXlXWTd7Gip1lkDeGVIuuxVSrh0GFWj0Yl67mOovNZ7JFiWSWrN1zpMJNSnvSi34PjBh2XWkaYoSERZjlXqTATNcBD5w3N7PmEZX+Fmeim6MsnXl5rsGr9bW/eZrbv3p68s3xZNxGrhEOHWdfBVNx1tSx6//jF403TJ5ru876waDLNrJWzknfutT/CTDQjs9D3rPOqHvID7z6QWk6YoSERZjlXyTBz9Ggr9SrCZzyq8dPQmJ5kr1l/fmMvlQoz0bZV/5Zpt9gnw7tgU09HQ3W60Td8Msjfoc9RcPn7pJI1dBhO5VcpFiyOHpysJ31ooocfIHqC/iXjLrFDtxr+y7K/wkz0ZHw9Id89yV/nVr3iCYsn2CeL6H3+dggzNCTCDAAQPcIMABA9wgwAED3CDAAQPcIMABA9wgwAED3CDAAQPcIMABA9wgwAED3CDAAQPcIMABA9wgwAED3CDAAQPcIMABA9wgwAED3CDAAQPcIMABA9wgwAED3CDAAQPcIMABA9wgwAED3CDAAQPcIMABA9wgwAED3CDAAQPcIMABA9wgwAED3CDAAQPcIMABA9wgwAED3CDAAQPcIMABA9wgwAED3CDAAQPcIMABA9wgwAED3CDAAQPcIMABA9wgwAED3CDAAQPcIs56Z+OdU0HtjYzF8/P1lSGf3e72daDWtl1m9fb19v+3Wb6VTVyVw/5Xr7Om/C462NzkM59QHUDWGWc4RZZRBmwIGNMMs5wqwyCDPgwEaY5RxhVhmEGXBgI8xyjjCrDMIMOLARZjnnwmzO2jlm7GdjzUlPnmQa9W1kjn3iWDPgwwFm9++7k5rV/vzr36Slk0y7ke3MQf0OMoc/crjpOr6r+eL7L5Ia1coJs8XfLTbdJnQzRw440n62fup1uM3Qrt922c8+d/S5ZvOuzcnS6n28YeoN5vhBx5slm5YkS6uXX/vqtan6O/fsNIPnDDath7W2x6Oi/w+ZO2SfY3fH9PH6j02vyb3Mwf0OrjmeQmG2eutq0/v13jXH1mZEGzNt2TRz3ZTrCDOgHhFmOacwO3rg0abHSz1MhzEdTNXCKlvOeuYs27A/v/D5pGZ1GPT/oL85pP8h5upXrjbjFo0zIz8eaRvoZoObmUXfLUpqlh5mk5dOtg296g6aM8hMXDLRPPDuA6bpE01toCpki1HohD3LTT9vMqc9dZoNDx2L45bf+8699vWWX7aYLuO62FBSuOh4VP/iFy+2x37zGzenAk3HpH266IWLzPSvp9vz4WSF2cqfVpq2I9vaY9ExuWM7cciJdp8JM6D+EGY5pzBTo995bGfbuDvLflxmWjzZwvZ81AMSBYYa4YffezjVkH/z0zfmlOGnmDum35EsKS3MVm1ZZU4dceo+ny0uCC4Zd4ntPRXi9mnE/BHJEmPeXvG27WG2H9Xe9tDcvs5eNdvW1XrRPqpnqZ6mz4W21r319VvJ0ur6OlcK0FB4vHv+2GNuev2mzEBesHGBDX/CDKg/hFnOuTBTD8mnxrjnpJ42gBREoh5N8yHNzfLNy+1rR42/hu/8uqWEmXpBh/Y/NBUYPm2jyeNNbONfiEJQPUrtq/ZZtJ96/eDsB21PTD0y0fYUcBt3bLTDjBpuLBSWa7ettcONCiRH71cvdu66ucmSvcLjXbN1jWk5tKW5/a3b7fnxufNFmAH1hzDLOTfMmNVAK3j8BlevFXyFil+3lDBTnaxwdLRvGu7TNaZiFF4KHgWQCykFpXpi6hnpp7u+5npq2i/tnxtyDLn9Va9xx+4ddpn2VwGloAqFx+t6jP4wpy88twD2L8Is5xQYanSzZjNmhZmujz33v+fs9Z+wKHRcL6c+w0zDhrrupp86Dg1dauKHu0amz3E9JRcufzfMCgVQoTALe7wOYQbUL8Is58oJM10TKxY+vlLCrJRhxnBGYhZ/Yofe41/n0z7r9Wtfvmb3x+17qcOMxa4D+sJ12mfte1ZYuiHcQtsCUHmEWc6VE2YKHYVPOAEkSylhtmLzCttbKjYBpPuE7kUngIj2RcOHF4y5wFz4/IWpCRpTvphi9+OaV65JhZz0mdWn6ASQIx49wsxYPiNZWl6YuePVxBhNkPHN/GamOWrAUQW3BaDyCLOcKyfMNE1d09U19Kfp6+pZaXhx6LyhtuF+46s3bD0pJcxEQaJAUd1war7CTKFWCoWW9is8FvXEtG0NQ2qffApQBWnW1HzdfqBA80O7nDAT7ZOOTb1Zd2zq6Z39j7PtpJVC2wJQeYRZzpUTZqJekm4ydjdXK0D0/7tn3F0za1BKDTOZt26e6VjV0Tb82qYmbYTbq41CS6Ghz9BnOW7iR6Fj3L57u531qHu/9NkKNvXw3lz2ZirIpNwwk/dWvWe3p+3q+LQvuhk869wC2H8IMwBA9AgzAED0CDMAQPQIMwBA9AgzAED0CDMAQPQIMwBA9AgzAED0CDMAQPQIMwBA9AgzAED0CDMAQPQIMwBA9AgzAED0CDMAQPQIMwBA9AgzAED0CDMAQPQIMwBA9AgzAED0CDMAQPQIMwBA9AgzAED0CDMAQPQIMwBA9AgzAED0CDMAQPQIMwBA5Iz5PxyO3vMIE8JUAAAAAElFTkSuQmCC" alt="效果图" /></p>
<h4 id="ab-2"><a class="anchor" href="#ab-2">#</a> A&gt;B</h4>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token selector">div > span</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p><strong>最终效果：</strong></p>
<p><img data-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYoAAACVCAYAAABGib3qAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAABFUSURBVHhe7dt7bJRVHsZx4iVGjRoxElEj8YKXPwgxSoxgFEVF4wUvREMUo4miUaMRY4xXtmUR5OYCm12isIBcGrcFBIIBcSlsLG0VXKgBCsUUsVaKXAsWCiy/3ed0zus7LzOHGdOQSfP9kEl5356+c8788Xvec847nQwAgACCAgAQRFAAAIIICgBAEEEBAAgiKAAAQQQFACCIoAAABBEUAIAgggIAEERQAACCCAoAQBBBAQAIIigAAEEEBQAgiKAAAAQRFACAIIICABBEUAAAgggKAEAQQYFI2YYyO2/keVbVUJU60z6KVhTZZR9dZg3NDe5436F91mdqH3u89HF33NEkx3si+hzyaQ+cbAQFIgRF+yAo0NEQFIgQFO2DoEBHQ1AgQlC0D4ICHQ1BgQhB0T4ICnQ0BAUiPigqtlXYtP9Ms0vGXWKd/tTJLvjwAhvx7xHWerQ11bLNsf//m/P9HOs+sbudUnSKnTH8DLvr07ts/Y71qRZt8gmKddvX2d0z77azRpzl3ls/dZy8ZlLLkRb33tdPvt52texKnW3r46CyQXbh6Autpqkmdbbt/MB/Dkxr/9vh32xMxRjr9lE3Nx699P+xq8YeN3Y/puqGahtQMsBOLTo1Gk+2oNi6d6sNnjc4GtsVE66wz2s/t8dKHyMoUNAICkQUFOeOPNfunXWv3fjxjTb1u6nu1eNvPVzRnPLdlFTLtkJbvLLYTis+zR757BGbsXaGTaye6IpflzFdbO32tamWuQdFyfclroiq7eiK0Ta7Zra98693rPOHnV1YKcBCVNCTM6KmA0127V+vdYVZY/H8+aFLh7rjPQf3WL8Z/VzBV+HWeNS+7/S+buxPzX8qLSw0JvXpln/cYos2LXKfh5cpKH7Y/YNdNfEqNxaNyY/torEXuT4TFChkBAUiCgoV1Fun3eoKp1e7s9YuHnexu2PXnbuoGKvADSsfllYkt+zeYpf/5XIbsmhI6kxuQVG/p96unHDlce8tvsjeMeMOd9efje/ThKoJqTNmX9R94WZGV0+62s0sfF+X1y93bfV7UR81I9IMKc4Hon63cNPC1Nm29vqsFE5JyfEe/u9he3LekxnDbnXjahesBAUKGUGBiA8K3dnHqdA9MOcBV9xV5EV34l3HdrXNuza7Y0+FVUs68ba5BIXu3k8vPj2tGMfpGuePOt8V1mwUMJoJqa/qs6ifOn53+btuBqGZhOh6Co/G/Y1u6UlLUNmCaNu+bW4JSsXe099r9rXqp1WpM79LjvfHvT/apeMvtWcXPus+nzj/eREUKGQEBSJ+6SlT8VNRjxczHStUsr3ibXMJCrXJFDye+qYlIK3phygYVNRV3H0AKIQ0g9AdvX76/Qw/w1C/1D+/DJXk+6vZzv7W/e6c+qvirxBISo7Xz3TiS19xyc8WKDQEBSIqxipomZ56yhQU2o/4ZM0nbr09+VJB93fnJzMotJSkfQ791Di0nKVNbL8noffxd/i+cP/RoMhW3LMFRXKm5hEUKHQEBSL5BIX2IEKFPS6XoMhl6Sn55FIm8U1q/U18X0V91vHcDXNdf3zfc116Cu27xCV/pz6r75mCyC/rZbsWUAgICkTyCQoVdBX25GZ2JrkERd2uOneXH9rM7j+zf3AzW9QXLSn1+riX3Tzl5rTN5tL1pa4fj372aFqAyJvL3gxuZp/55zNt8ebFqbP5BYUfrzb5tdkft2TLEjt7xNlZrwUUAoICkXyCQo+K6pFRLQfpEVLNCLTkNL5yvCuK8zfOd+0kl6AQFWkVa7VNPh6roFBg5EKBoH4lx6IZhK6tpSn1KU7hpJDK9HisHgFWWMQDMZ+gEPVJY9MszI9NM5Sef+/pNuCzXQsoBAQFIvkEhejuXl9Q81/MU3HW/19a/FL0dJHkGhRS+VOl9Z7a2xVVXVMb0MnrnYgCQQVZ76H38vwmdrYxNrc2u6ej9N0GvbdCQzOTBbUL0kJC8g0KKa8vd9fTdTU+9UVfJMz02QKFhKAAAAQRFACAIIICABBEUAAAgggKAEAQQQEACCIoAABBBAUAIIigAAAEERQAgCCCAgAQRFAAAIIICgBAEEEBAAgiKAAAQQQFACCIoAAABBEUAIAgggIAEERQAACCCAoAQBBBAQAIIigAAEEEBQAgiKAAAAQRFACAIIICABBEUAAAgggKAEAQQQEACCIoAABBBAUAIIigQOTrr7+2nj17Wm1tbepM+5g1a5b179/fdu7c6Y5bWlrs+eeft+LiYnfc0STHeyL6HPJpD5xsBAUiBEX7ICjQ0RAUiBAU7YOgQEdDUCBCULQPggIdDUGBCEHRPggKdDQEBSI+KDZs2GDLli2zfv36WadOneymm26ykpISO3LkSKplm2PHjtmKFSvsoYcesnPOOce6detmr732mm3bti3Vok0+QVFfX29Dhw61a665xr23fuo4ec2k1tZW996DBw+25ubm1Nm2Pg4fPtx69+5tW7duTZ1tOz9s2LC09ocOHbKysjK755573Hj00v/nzp173Nj9mDZt2mRvv/22de7cORpPtqDYsWOHjRw5Mhrb/fffb5WVlVZUVERQoKARFIgoKHr06GFvvPGGPf300/bll1+616BBg1zRXLp0aaplW6GdPXu2denSxd577z376quvbMGCBa749enTxxV8L9egWLlypSuialtaWmrl5eU2ffp069WrlwsrBViICnpyRrR3714bOHCgK8wai+fPT5482R0fOHDAXn31VVfwVbg1HrV/+eWX3dhHjRqVFhYak/r0wgsv2DfffOM+Dy9TUGzfvt0GDBjgxqIx+bHddtttrs8EBQoZQYGIgkIF9cUXX3SF02toaLDbb7/d3bHrzl1UjFXgZs6cmVYkf/nlF7vvvvts/PjxqTO5BUVTU5M9+OCDx723+CL7yiuvuLv+bHyfFFje6tWr3czo4YcfdjML39d169a5tvq9qI+aEWmGFOcDUb+rrq5OnW1rr89K4ZSUHO/Ro0ftgw8+yBh2dXV1LlgJChQyggIRHxS6s49ToXvrrbdccVeRF92J9+3b137++Wd37Kmwakkn3jaXoNDde9euXdOKcZyuccMNN7jCmo0CRjMh9VV9FvVTx7p71wxCMwnR9RQeu3fvdktPWoLKFkS//vqrW4JSsff095p9bdy4MXXmd8nxasnpzjvvtHHjxqWFqvjPi6BAISMoEPFLT5mKn4p6vJjpWKGS7RVvm0tQqE2m4PHUNy0BaU0/RMGgoq7i7gNAIaQZhO7o9dPvZ/gZhvql/vllqCTfX812Dh486M6pvyr+CoGk5Hj9TCe+9BWX/GyBQkNQIKJirIKW6amnTEGh/YglS5a49fbkSwXd352fzKDQUpL2OfRT49Byljax/Z6E3sff4fvC/UeDIltxzxYUyZmaR1Cg0BEUiOQTFNqDCBX2uFyCIpelp+STS5nEN6n1N/F9FfVZxxUVFa4/vu+5Lj2F9l3ikr9Tn9X3TEHkl/WyXQsoBAQFIvkEhQq6CntyMzuTXIKisbHR3eWHNrNff/314Ga2qC9aUnrmmWfsueees/hms8anfrz//vtpASJTpkwJbmZ3797dvv3229TZ/ILCj1eb/Nrsj1uzZo1dd911Wa8FFAKCApF8gkKPiuqRUS0H6RFSzQi05DRv3jxXFONLRLkEhahIq1irbfLxWAWFAiMXfpkqORbNIHRtLU2pT3EKJ4VUpsdj9QiwwiIeiPkEhahPGptmYX5smqE88cQTbgM+27WAQkBQIJJPUIju7vUFNf/FPBVn/X/SpEnR00WSa1CI3nvIkCGuqOqa2oBOXu9EFAgqyHoPvZfnN7GzjVFt/Xcb9N4KDc1Mqqqqjps15RsUUlNT466n62p86ou+SJjpswUKCUEBAAgiKAAAQQQFACCIoAAABBEUAIAgggIAEERQAACCCAoAQBBBAQAIIigAAEEEBQAgiKAAAAQRFACAIIICABBEUAAAgggKAEAQQQEACCIoAABBBAUAIIigAAAEERQAgCCCAgAQRFAAAIIICgBAEEEBAAgiKAAAQQQFACCIoAAABBEUAIAgggIAEERQAACCCAoAQBBBgUjZhjI7b+R5VtVQlTrTPopWFNllH11mDc0N7njfoX3WZ2ofe7z0cXfc0STHeyL6HPJpD5xsBAUiBEX7ICjQ0RAUiBAU7YOgQEdDUCBCULQPggIdDUGBCEHRPggKdDQEBSI+KCq2Vdi0/0yzS8ZdYp3+1Mku+PACG/HvEdZ6tDXVss2x//+b8/0c6z6xu51SdIqdMfwMu+vTu2z9jvWpFm3yCYp129fZ3TPvtrNGnOXeWz91nLxmUsuRFvfe10++3na17EqdbevjoLJBduHoC62mqSZ1tu38wH8OTGv/2+HfbEzFGOv2UTc3Hr30/7Grxh43dj+m6oZqG1AywE4tOjUaT7ag2Lp3qw2eNzga2xUTrrDPaz+3x0ofIyhQ0AgKRBQU54481+6dda/d+PGNNvW7qe7V4289XNGc8t2UVMu2Qlu8sthOKz7NHvnsEZuxdoZNrJ7oil+XMV1s7fa1qZa5B0XJ9yWuiKrt6IrRNrtmtr3zr3es84edXVgpwEJU0JMzoqYDTXbtX691hVlj8fz5oUuHuuM9B/dYvxn9XMFX4dZ41L7v9L5u7E/NfyotLDQm9emWf9xiizYtcp+Hlykoftj9g1018So3Fo3Jj+2isRe5PhMUKGQEBSIKChXUW6fd6gqnV7uz1i4ed7G7Y9edu6gYq8ANKx+WViS37N5il//lchuyaEjqTG5BUb+n3q6ccOVx7y2+yN4x4w5315+N79OEqgmpM2Zf1H3hZkZXT7razSx8X5fXL3dt9XtRHzUj0gwpzgeifrdw08LU2bb2+qwUTknJ8R7+72F7ct6TGcNudeNqF6wEBQoZQYGIDwrd2cep0D0w5wFX3FXkRXfiXcd2tc27NrtjT4VVSzrxtrkEhe7eTy8+Pa0Yx+ka54863xXWbBQwmgmpr+qzqJ86fnf5u24GoZmE6HoKj8b9jW7pSUtQ2YJo275tbglKxd7T32v2teqnVakzv0uO98e9P9ql4y+1Zxc+6z6fOP95ERQoZAQFIn7pKVPxU1GPFzMdK1SyveJtcwkKtckUPJ76piUgremHKBhU1FXcfQAohDSD0B29fvr9DD/DUL/UP78MleT7q9nO/tb97pz6q+KvEEhKjtfPdOJLX3HJzxYoNAQFIirGKmiZnnrKFBTaj/hkzSduvT35UkH3d+cnMyi0lKR9Dv3UOLScpU1svyeh9/F3+L5w/9GgyFbcswVFcqbmERQodAQFIvkEhfYgQoU9LpegyGXpKfnkUibxTWr9TXxfRX3W8dwNc11/fN9zXXoK7bvEJX+nPqvvmYLIL+tluxZQCAgKRPIJChV0FfbkZnYmuQRF3a46d5cf2szuP7N/cDNb1BctKfX6uJfdPOXmtM3m0vWlrh+PfvZoWoDIm8veDG5mn/nnM23x5sWps/kFhR+vNvm12R+3ZMsSO3vE2VmvBRQCggKRfIJCj4rqkVEtB+kRUs0ItOQ0vnK8K4rzN8537SSXoBAVaRVrtU0+HqugUGDkQoGgfiXHohmErq2lKfUpTuGkkMr0eKweAVZYxAMxn6AQ9Ulj0yzMj00zlJ5/7+k24LNdCygEBAUi+QSF6O5eX1DzX8xTcdb/X1r8UvR0keQaFFL5U6X1ntrbFVVdUxvQyeudiAJBBVnvoffy/CZ2tjE2tza7p6P03Qa9t0JDM5MFtQvSQkLyDQopry9319N1NT71RV8kzPTZAoWEoAAABBEUAIAgggIAEERQAACCCAoAQBBBAQAIIigAAEEEBQAgiKAAAAQRFACAIIICABBEUAAAgggKAEAQQQEACCIoAABBBAUAIIigAAAEERQAgCCCAgAQRFAAAALM/gfRjaDBx/oidwAAAABJRU5ErkJggg==" alt="效果图" /></p>
<h4 id="ab-3"><a class="anchor" href="#ab-3">#</a> A+B</h4>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token selector">div + p</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> orange<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre>  hello world</pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p><strong>最终效果：</strong></p>
<p><img data-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAc0AAAEGCAYAAAAHas5qAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAABxGSURBVHhe7dxvbFR7XsdxVo1/Q1SMKA8M0YhIFDFBggEjEFCIEP4kPJAQDDzgjwQhQNCAAQQiEBWiwQfE8IAEur1aQLm76xbKBropS0thlWZtIWwsEigtdBFZLBCQr/P5nflxz5zODN+5bW7OvX2/kkmZ09Mzv9+EzLu/M2c6ygAAgAvRBADAiWgCAOBENAEAcCKaAAA4EU0AAJyIJgAATkQTAAAnogkAgBPRBADAiWgCAOBENAEAcCKaAAA4EU0AAJyIJgAATkQTAAAnogkAgBPRBADAiWgCAOBENAEAcCKayL2WlhabMmWK3b59u7hleJw+fdrmz59v/f394f7AwICtX7/e9u/fH+5/0WTn+yF6HmrZHxgJiCZyj2gOD6IJDB3RRO4RzeFBNIGhI5rIPaI5PIgmMHREE7lHNIcH0QSGjmgi92I0Ozs7rampyebOnWujRo2y6dOnW319vb1586a4Z+Ldu3d25coVW7p0qY0ePdrGjx9vW7dutfv37xf3SNQSze7ubtu2bZtNnDgxPLa+6n72mFmvX78Oj71q1Sp7/vx5cWsyxgMHDtiMGTPs3r17xa3J9r1795bs/+rVKztz5owtWLAgzEc3/fvs2bOD5h7ndOfOHdu1a5eNGTPm/XwqRfPx48d26NCh93NbtGiRXbt2zfbt20c0gQyiidxTNCdPnmw7duyw1atX28WLF8NtxYoVISAXLlwo7plEp66uzsaOHWu7d++2S5cu2fnz50MIZs6cGeIXeaPZ3NwcgqJ9Gxoa7PLly3by5EmbNm1aCLdiXo3ill0pP3v2zJYvXx4ipblEcfvx48fD/RcvXtiWLVtC/BQxzUf7b9q0Kcz98OHDJeHUnDSmDRs22PXr18PzEZWLZm9vry1ZsiTMRXOKc5s1a1YYM9EEShFN5J6iqbhs3LgxRCR68OCBzZkzJ6zktKIThUkv9qdOnSoJxqNHj2zhwoV29OjR4hZfNPv6+mzx4sWDHlticDZv3hxWg5XEMSne0Y0bN8KKedmyZWHFGcd669atsK++LxqjVspaOafFXw70vba2tuLWZH89Vwp1Vna+b9++tYMHD5YN/927d8MvGUQTKEU0kXsxmlrxpelFf+fOnSF0Cp5ohTZ79mx7+PBhuB8pMjrtmd7XE02t6saNG1cSpjQdY+rUqSEylSi2WiFrrBqzaJy6r1WdVpZaYYqOp5A+ffo0nJ7VadpKUX7y5Ek4TavwRfp5rcq7urqKWz6Rna9Oy86bN8+OHDlS8guGxOeLaAKliCZyL56eLRcCBS79wq77CmylW3pfTzS1T7kIRxqbTpPqPcBqFEkFTqGLMVSQtbLUSk9f4/ufceWpcWl88VRtVhyvVsEvX74M2zRehVBBzMrON66A06eH07LPLQCiic8BhUkv7uWuni0XTb1/2djYGN6fy94Ut7hq+yyjqdOtel9UXzUPnfLVBUDxPUw9Tlz5xYh92mhWCl2laGZX8BHRBAYjmsi9WqKp9yyrRS7NE03P6dnsFbDlpC/w0c+k34fVmHX/6tWrYTxx7N7Ts9Xep03Lfk9j1tjLRTme+q50LGCkIprIvVqiqbgpctkLgcrxRLOnpyes/qpdCLR9+/aqFwKJxqLTrmvWrLG1a9da+kIdzU/j2LNnT0lM5cSJE1UvBJowYYK1t7cXt9YWzThfXSClC6XSbt68aZMmTap4LGCkIprIvVqiqY9f6GMYOmWqj2VopajTsufOnQuBSJ9G9URTFCyFS/tmP3KiaCqeHvFUbnYuWlnq2Dp9qzGlKdQKdrmPnOhjNQpn+peDWqIpGpPmptV5nJtWritXrgwXL1U6FjBSEU3kXi3RFK369McA4h9BUKj072PHjr2/SlW80RQ99rp160JgdExdvJM93ocojoqTHkOPFcULgCrNUfvGz07qsRVQrVhbW1sHraZrjaZ0dHSE4+m4mp/Goj/aUO65BUY6ogkAgBPRBADAiWgCAOBENAEAcCKaAAA4EU0AAJyIJgAATkQTAAAnogkAgBPRBADAiWgCAOBENAEAcCKaAAA4EU0AAJyIJgAATkQTAAAnogkAgBPRBADAiWgCAOBENAEAcCKaAAA4EU0AAJyIJgAATkQTAAAnogkAgBPRBADAiWgCAOBENAEAcCKaAAA4EU0AAJyIJgAATkQTAAAnogkAgBPRBADAiWgCAOBENAEAcCKaAAA4EU3k33cOmX30Y2b3vlzcMEy+tcqs4WfMnn47uT/w0OzjXzG7MDO5/0WTne+H6HmoZX9gBCCayD+iOTyIJjBkRBP5RzSHB9EEhoxoIv+I5vAgmsCQEU3kH9EcHkQTGDKiifyL0fzPU2b/vrPwQv7TZnWF/7of/YTZtTVmb75f3LHo3f+ZdfyF2dmfK+z3JbMv/5DZVyeb9TQWdyiqJZoPvmL2td8wq//h5LH1Vfezx8x6/b3ksf9lvNn3v1vcWKAxXvwds38cXTj2V4sbC7S98bdL93/Vb9a2Lhmr5qOb/t22fvDc45zufWT29d8q7PsDn8ynUjT7W82aZn0ytzM/a9b514Wfm1F+f2AEI5rIP0Wz/kfN/vU3CzH5RbN/+7Pk9s+/kATk239a3LFA0fnWHyWxaJxeiOyfm7X/SRKCEKiPizsWeKPZsS8JivZtXVu4v9es5Q+TaOummFejuGVXyv/TWYj6uCRSmksUtzcvTe6/6C5E99eL8StETPPR/l+ZlMy9aXZpODUnjenjiWZdR5PnIyoXzcctyS8X+hnNKc7tn34yGTPRBEoQTeSfoqm4fOVXk4hEjy4VXtx/KlnJaUUnCpNe7K+uLA1G3zeTcH7j94sbCjzRfPKtws+NHfzYEoPz1V9LVoOVxDG1bypuKLj9d4XHLqyYz/58suKMY737D8m++r5ojFopa+WcFn850Pe6jhQ3Fmh/PVcKdVZ2vm//txDd302CmQ3/fzUkv2QQTaAE0UT+xWhqxZemF/2vT01Cp+CJVmhaJfVeTu5HioxOe6b39URTq7ov/2BpmNJ0jI9+PIlMJYqtVsgaq8YsGqfut6xIVpZaYYqOp5D+963k9KxO01aK8vfak/ErfJF+Xqvy7tPFDSnZ+fa3Fe4Xwv2N3yv9BUPi80U0gRJEE/kXT8+WC4ECl35h130FttItva8nmtqnXISjEPQvJe8BVqNI6rEUuhhDBTmsLAsrPX2N73/GlafGpZ+Jp2qz4ni1Cn7Zm2wLcyqEUEHMys43roDTp4fTss8tAKKJzwGFSS/u5a6eLRdNnYb99o7k/bnsTXGLq7bPMpo63ar3RfVV89ApX10AFN/D1OPElV+M2KeOZoXQVYpmdgUfEU1gEKKJ/KslmnrPslrk0jzR9JyezV4BW076Ah/9TPp9WI1Z9//jcDKeOHbv6dlq79OmZb+nMWvs5aIcT31XOhYwQhFN5F8t0VTcFLnshUDleKLZ11zYp7D6q3Yh0NemVL8QSDQWnXY9/0uF2y+XXqjznb9MxqGrfdMxlW8ur34hUFi9/m1xY0Et0Yzz1cpcF0ql3fn7wrF/pPKxgBGKaCL/aommPn6hj2HolKk+lqGVok7LXv/jJBCdf5XsJ55oioKlcGnf7EdOFE3F00Nx1Liyc9HKUsdWADWmNIVawS77kZPCNoUz/ctBLdEUjUlz0+o8zk0rV32cRxcvVToWMEIRTeRfLdEUrfrCHwMorBDDBUCFUOnfl//gk6tUxRtN6a4rfG9CEhgdU8HMHu9DFEfFSY+hx4riBUCV5jjQk1xlq58N8ynEUivWzr8ZvJquNZry3RPJ8XRczU9j0R9tKPfcAiMc0QQAwIloAgDgRDQBAHAimgAAOBFNAACciCYAAE5EEwAAJ6IJAIAT0QQAwIloAgDgRDQBAHAimgAAOBFNAACciCYAAE5EEwAAJ6IJAIAT0QQAwIloAgDgRDQBAHAimgAAOBFNAACciCYAAE5EEwAAJ6IJAIAT0QQAwIloAgDgRDQBAHAimgAAOBFNAACciCYAAE5EEwAAJ6IJAIAT0UTutbS02JQpU+z27dvFLcPj9OnTNn/+fOvv7w/3BwYGbP369bZ///5w/4smO98P0fNQy/7ASEA0kXtEc3gQTWDoiCZyj2gOD6IJDB3RRO4RzeFBNIGhI5rIPaI5PIgmMHREE7kXo9nZ2WlNTU02d+5cGzVqlE2fPt3q6+vtzZs3xT0T7969sytXrtjSpUtt9OjRNn78eNu6davdv3+/uEeilmh2d3fbtm3bbOLEieGx9VX3s8fMev36dXjsVatW2fPnz4tbkzEeOHDAZsyYYffu3StuTbbv3bu3ZP9Xr17ZmTNnbMGCBWE+uunfZ8+eHTT3OKc7d+7Yrl27bMyYMe/nUymajx8/tkOHDr2f26JFi+zatWu2b98+oglkEE3knqI5efJk27Fjh61evdouXrwYbitWrAgBuXDhQnHPJDp1dXU2duxY2717t126dMnOnz8fQjBz5swQv8gbzebm5hAU7dvQ0GCXL1+2kydP2rRp00K4FfNqFLfsSvnZs2e2fPnyECnNJYrbjx8/Hu6/ePHCtmzZEuKniGk+2n/Tpk1h7ocPHy4Jp+akMW3YsMGuX78eno+oXDR7e3ttyZIlYS6aU5zbrFmzwpiJJlCKaCL3FE3FZePGjSEi0YMHD2zOnDlhJacVnShMerE/depUSTAePXpkCxcutKNHjxa3+KLZ19dnixcvHvTYEoOzefPmsBqsJI5J8Y5u3LgRVszLli0LK8441lu3boV99X3RGLVS1so5Lf5yoO+1tbUVtyb767lSqLOy83379q0dPHiwbPjv3r0bfskgmkApoonci9HUii9NL/o7d+4MoVPwRCu02bNn28OHD8P9SJHRac/0vp5oalU3bty4kjCl6RhTp04NkalEsdUKWWPVmEXj1H2t6rSy1ApTdDyF9OnTp+H0rE7TVorykydPwmlahS/Sz2tV3tXVVdzyiex8dVp23rx5duTIkZJfMCQ+X0QTKEU0kXvx9Gy5EChw6Rd23VdgK93S+3qiqX3KRTjS2HSaVO8BVqNIKnAKXYyhgqyVpVZ6+hrf/4wrT41L44unarPieLUKfvnyZdim8SqECmJWdr5xBZw+PZyWfW4BEE18DihMenEvd/VsuWjq/cvGxsbw/lz2prjFVdtnGU2dbtX7ovqqeeiUry4Aiu9h6nHiyi9G7NNGs1LoKkUzu4KPiCYwGNFE7tUSTb1nWS1yaZ5oek7PZq+ALSd9gY9+Jv0+rMas+1evXg3jiWP3np6t9j5tWvZ7GrPGXi7K8dR3pWMBIxXRRO7VEk3FTZHLXghUjieaPT09YfVX7UKg7du3V70QSDQWnXZds2aNrV271tIX6mh+GseePXtKYionTpyoeiHQhAkTrL29vbi1tmjG+eoCKV0olXbz5k2bNGlSxWMBIxXRRO7VEk19/EIfw9ApU30sQytFnZY9d+5cCET6NKonmqJgKVzaN/uRE0VT8fSIp3Kzc9HKUsfW6VuNKU2hVrDLfeREH6tRONO/HNQSTdGYNDetzuPctHJduXJluHip0rGAkYpoIvdqiaZo1ac/BhD/CIJCpX8fO3bs/VWq4o2m6LHXrVsXAqNj6uKd7PE+RHFUnPQYeqwoXgBUaY7aN352Uo+tgGrF2traOmg1XWs0paOjIxxPx9X8NBb90YZyzy0w0hFNAACciCYAAE5EEwAAJ6IJAIAT0QQAwIloAgDgRDQBAHAimgAAOBFNAACciCYAAE5EEwAAJ6IJAIAT0QQAwIloAgDgRDQBAHAimgAAOBFNAACciCYAAE5EEwAAJ6IJAIAT0QQAwIloAgDgRDQBAHAimgAAOBFNAACciCYAAE5EEwAAJ6IJAIAT0QQAwIloAgDgRDQBAHAimgAAOBFN5F5LS4tNmTLFbt++XdwyPE6fPm3z58+3/v7+cH9gYMDWr19v+/fvD/e/aLLz/RA9D7XsD4wERBO5RzSHB9EEho5oIveI5vAgmsDQEU3kHtEcHkQTGDqiidwjmsODaAJDRzSRezGanZ2d1tTUZHPnzrVRo0bZ9OnTrb6+3t68eVPcM/Hu3Tu7cuWKLV261EaPHm3jx4+3rVu32v3794t7JGqJZnd3t23bts0mTpwYHltfdT97zKzXr1+Hx161apU9f/68uDUZ44EDB2zGjBl279694tZk+969e0v2f/XqlZ05c8YWLFgQ5qOb/n327NlBc49zunPnju3atcvGjBnzfj6Vovn48WM7dOjQ+7ktWrTIrl27Zvv27SOaQAbRRO4pmpMnT7YdO3bY6tWr7eLFi+G2YsWKEJALFy4U90yiU1dXZ2PHjrXdu3fbpUuX7Pz58yEEM2fODPGLvNFsbm4OQdG+DQ0NdvnyZTt58qRNmzYthFsxr0Zxy66Unz17ZsuXLw+R0lyiuP348ePh/osXL2zLli0hfoqY5qP9N23aFOZ++PDhknBqThrThg0b7Pr16+H5iMpFs7e315YsWRLmojnFuc2aNSuMmWgCpYgmck/RVFw2btwYIhI9ePDA5syZE1ZyWtGJwqQX+1OnTpUE49GjR7Zw4UI7evRocYsvmn19fbZ48eJBjy0xOJs3bw6rwUrimBTv6MaNG2HFvGzZsrDijGO9detW2FffF41RK2WtnNPiLwf6XltbW3Frsr+eK4U6Kzvft2/f2sGDB8uG/+7du+GXDKIJlCKayL0YTa340vSiv3PnzhA6BU+0Qps9e7Y9fPgw3I8UGZ32TO/riaZWdePGjSsJU5qOMXXq1BCZShRbrZA1Vo1ZNE7d16pOK0utMEXHU0ifPn0aTs/qNG2lKD958iScplX4Iv28VuVdXV3FLZ/IzlenZefNm2dHjhwp+QVD4vNFNIFSRBO5F0/PlguBApd+Ydd9BbbSLb2vJ5rap1yEI41Np0n1HmA1iqQCp9DFGCrIWllqpaev8f3PuPLUuDS+eKo2K45Xq+CXL1+GbRqvQqggZmXnG1fA6dPDadnnFgDRxOeAwqQX93JXz5aLpt6/bGxsDO/PZW+KW1y1fZbR1OlWvS+qr5qHTvnqAqD4HqYeJ678YsQ+bTQrha5SNLMr+IhoAoMRTeReLdHUe5bVIpfmiabn9Gz2Cthy0hf46GfS78NqzLp/9erVMJ44du/p2Wrv06Zlv6cxa+zlohxPfVc6FjBSEU3kXi3RVNwUueyFQOV4otnT0xNWf9UuBNq+fXvVC4FEY9Fp1zVr1tjatWstfaGO5qdx7NmzpySmcuLEiaoXAk2YMMHa29uLW2uLZpyvLpDShVJpN2/etEmTJlU8FjBSEU3kXi3R1Mcv9DEMnTLVxzK0UtRp2XPnzoVApE+jeqIpCpbCpX2zHzlRNBVPj3gqNzsXrSx1bJ2+1ZjSFGoFu9xHTvSxGoUz/ctBLdEUjUlz0+o8zk0r15UrV4aLlyodCxipiCZyr5ZoilZ9+mMA8Y8gKFT697Fjx95fpSreaIoee926dSEwOqYu3ske70MUR8VJj6HHiuIFQJXmqH3jZyf12AqoVqytra2DVtO1RlM6OjrC8XRczU9j0R9tKPfcAiMd0QQAwIloAgDgRDQBAHAimgAAOBFNAACciCYAAE5EEwAAJ6IJAIAT0QQAwIloAgDgRDQBAHAimgAAOBFNAACciCYAAE5EEwAAJ6IJAIAT0QQAwIloAgDgRDQBAHAimgAAOBFNAACciCYAAE5EEwAAJ6IJAIAT0QQAwIloAgDgRDQBAHAimgAAOBFNAACciCYAAE5EEwAAJ6IJAIAT0UTutbS02JQpU+z27dvFLcPj9OnTNn/+fOvv7w/3BwYGbP369bZ///5w/4smO98P0fNQy/7ASEA0kXtEc3gQTWDoiCZyj2gOD6IJDB3RRO4RzeFBNIGhI5rIPaI5PIgmMHREE7kXo9nZ2WlNTU02d+5cGzVqlE2fPt3q6+vtzZs3xT0T7969sytXrtjSpUtt9OjRNn78eNu6davdv3+/uEeilmh2d3fbtm3bbOLEieGx9VX3s8fMev36dXjsVatW2fPnz4tbkzEeOHDAZsyYYffu3StuTbbv3bu3ZP9Xr17ZmTNnbMGCBWE+uunfZ8+eHTT3OKc7d+7Yrl27bMyYMe/nUymajx8/tkOHDr2f26JFi+zatWu2b98+oglkEE3knqI5efJk27Fjh61evdouXrwYbitWrAgBuXDhQnHPJDp1dXU2duxY2717t126dMnOnz8fQjBz5swQv8gbzebm5hAU7dvQ0GCXL1+2kydP2rRp00K4FfNqFLfsSvnZs2e2fPnyECnNJYrbjx8/Hu6/ePHCtmzZEuKniGk+2n/Tpk1h7ocPHy4Jp+akMW3YsMGuX78eno+oXDR7e3ttyZIlYS6aU5zbrFmzwpiJJlCKaCL3FE3FZePGjSEi0YMHD2zOnDlhJacVnShMerE/depUSTAePXpkCxcutKNHjxa3+KLZ19dnixcvHvTYEoOzefPmsBqsJI5J8Y5u3LgRVszLli0LK8441lu3boV99X3RGLVS1so5Lf5yoO+1tbUVtyb767lSqLOy83379q0dPHiwbPjv3r0bfskgmkApoonci9HUii9NL/o7d+4MoVPwRCu02bNn28OHD8P9SJHRac/0vp5oalU3bty4kjCl6RhTp04NkalEsdUKWWPVmEXj1H2t6rSy1ApTdDyF9OnTp+H0rE7TVorykydPwmlahS/Sz2tV3tXVVdzyiex8dVp23rx5duTIkZJfMCQ+X0QTKEU0kXvx9Gy5EChw6Rd23VdgK93S+3qiqX3KRTjS2HSaVO8BVqNIKnAKXYyhgqyVpVZ6+hrf/4wrT41L44unarPieLUKfvnyZdim8SqECmJWdr5xBZw+PZyWfW4BEE18DihMenEvd/VsuWjq/cvGxsbw/lz2prjFVdtnGU2dbtX7ovqqeeiUry4Aiu9h6nHiyi9G7NNGs1LoKkUzu4KPiCYwGNFE7tUSTb1nWS1yaZ5oek7PZq+ALSd9gY9+Jv0+rMas+1evXg3jiWP3np6t9j5tWvZ7GrPGXi7K8dR3pWMBIxXRRO7VEk3FTZHLXghUjieaPT09YfVX7UKg7du3V70QSDQWnXZds2aNrV271tIX6mh+GseePXtKYionTpyoeiHQhAkTrL29vbi1tmjG+eoCKV0olXbz5k2bNGlSxWMBIxXRRO7VEk19/EIfw9ApU30sQytFnZY9d+5cCET6NKonmqJgKVzaN/uRE0VT8fSIp3Kzc9HKUsfW6VuNKU2hVrDLfeREH6tRONO/HNQSTdGYNDetzuPctHJduXJluHip0rGAkYpoIvdqiaZo1ac/BhD/CIJCpX8fO3bs/VWq4o2m6LHXrVsXAqNj6uKd7PE+RHFUnPQYeqwoXgBUaY7aN352Uo+tgGrF2traOmg1XWs0paOjIxxPx9X8NBb90YZyzy0w0hFNAACciCYAAE5EEwAAJ6IJAIAT0QQAwIloAgDgRDQBAHAimgAAOBFNAACciCYAAE5EEwAAJ6IJAIAT0QQAwIloAgDgRDQBAHAimgAAOBFNAACciCYAAE5EEwAAJ6IJAIAT0QQAwIloAgDgRDQBAHAimgAAOBFNAACciCYAAE5EEwAAJ6IJAIAT0QQAwIloAgDgRDQBAHAimgAAOBFNAACciCYAAC5m/w9JG7/j9GJD2QAAAABJRU5ErkJggg==" alt="效果图" /></p>
<h4 id="a~b"><a class="anchor" href="#a~b">#</a> A~B</h4>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token selector">div ~ p</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> orange<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre>  hello world</pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p><strong>最终效果：</strong></p>
<p><img data-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAU0AAAEACAYAAAA3NiR2AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAABp+SURBVHhe7dq7axVbGIZx/wEbCyFVKhELSSFBMIUGBQXFRLAREUzhBRFFxUJBRQWTRhsbC4uACRYawc4bGEHxXmjhBQtFvCsiIl6I+J28a2bp7MnMdr4QDox5fhBy9mScvdY+5MmayxQDAFRGNAHAgWgCgAPRBAAHogkADkQTAByIJgA4EE0AcCCaAOBANAHAgWgCgAPRBAAHogkADkQTAByIJgA4EE0AcCCaAOBANAHAgWgCgAPRBAAHogkADkQTAByIJgA4EM0aunr1qrW1tdmjR4/SLRNjYGDAFi9ebB8+fAivv379ahs2bLADBw6E1/+a/Hz/Rp+DZ3/8m4hmDRHNiUE0MR5Es4aI5sQgmhgPollDRHNiEE2MB9GsIaI5MYgmxoNo1lCM5oMHD+zixYu2cOFCmzJlis2dO9dOnjxpIyMj6Z6JX79+2fDwsHV3d9vUqVOttbXVtm3bZs+fP0/3SHii+fTpU9u+fbvNnDkzvLe+63X+mHk/fvwI771mzRr7/PlzujUZ48GDB23evHn27NmzdGuyfd++fQ37f//+3U6fPm1LliwJ89GX/ntoaGjM3OOcHj9+bLt377Zp06b9nk9ZNN+9e2e9vb2/57Zs2TK7fv267d+/n2iCaNaRojl79mzbuXOnrV271i5cuBC+Vq1aFQJy/vz5dM8kOoODgzZ9+nTbs2ePXbp0yc6ePRtC0NHREeIXVY3mlStXQlC076lTp+zy5cvW399v7e3tIdyKeTOKW36l/OnTJ1u5cmWIlOYSxe3Hjh0Lr798+WJbt24N8VPENB/tv3nz5jD3vr6+hnBqThrTxo0b7datW+HziIqi+ebNG+vq6gpz0Zzi3ObPnx/GTDRBNGtI0VRcNm3aFCISvXjxwjo7O8NKTis6UZj0y37ixImGYLx+/dqWLl1qR44cSbdUi+bbt29t+fLlY95bYnC2bNkSVoNl4pgU7+jOnTthxbxixYqw4oxjvXfvXthXPxeNUStlrZyz4h8H/ezmzZvp1mR/fVYKdV5+vj9//rRDhw4Vhv/JkyfhjwzRBNGsoRhNrfiy9Eu/a9euEDoFT7RCW7Bggb18+TK8jhQZnfZm960STa3qWlpaGsKUpWPMmTMnRKaMYqsVssaqMYvGqdda1WllqRWm6HgK6cePH8PpuU7Ty6L8/v37cJqu8EX691qVP3z4MN3yR36+Oi1ftGiRHT58uOEPjMTPi2iCaNZQPD0vCoECl/3F1msFtuwru2+VaGqfoghHGptOk3UNsBlFUoFT6GIMFWStLLXS0/d4/TOuPDUujS+equfF8WoV/O3bt7BN41UIFcS8/HzjCjh7eSAr/9liciKaNaQw6Ze76O55UTR1/fLcuXPh+lz+S3GLq7b/M5o63dZ1UX3XPHTKrxtA8Rqm3ieu/GLExhvNstCVRTO/go+IJoRo1pAnmrpm2SxyWVWiWeX0PH8HvEj2Bo/+TfY6rMas19euXQvjiWOvenre7DptVv5nGrPGXhTleOmj7FiYPIhmDXmiqbgpcvkbQUWqRPPVq1dh9dfsRtCOHTua3ggSjUWn3T09PbZu3TrL3qjR/DSOvXv3NsRUjh8/3vRG0IwZM+z27dvpVl8043x1g0w3yrLu3r1rs2bNKj0WJg+iWUOeaOrxGz2Go1NmPZajlaJOy8+cORMCkT2NrhJNUbAULu2bf+RI0VQ8q4in8vm5aGWpY+v0XWPKUqgV7KJHjvRYlcKZ/ePgiaZoTJqbVudxblq5rl69Oty8KjsWJg+iWUOeaIpWfXoYPD4Er1Dpv48ePfr7LrVUjabovdevXx8Co2Pq5k3+eH+jOCpOeg+9VxRvAJXNUfvGZyf13gqoVqw3btwYs5r2RlPu378fjqfjan4aix7aL/psMfkQTQBwIJoA4EA0AcCBaAKAA9EEAAeiCQAORBMAHIgmADgQTQBwIJoA4EA0AcCBaAKAA9EEAAeiCQAORBMAHIgmADgQTQBwIJoA4EA0AcCBaAKAA9EEAAeiCQAORBMAHIgmADgQTQBwIJoA4EA0AcCBaAKAA9EEAAeiCQAORBMAHIgmADgQTQBwIJoA4EA0AcCBaAKAA9EEAAeiWUNXr5q1tZk9epRumCADA2aLF5t9+JC8/vrVbMMGswMHktf/mvx8/0afg2d//JuIZg0RzYlBNDEeRLOGiObEIJoYD6JZQ0RzYhBNjAfRrCGiOTGIJsaDaNZQjOaDB2YXL5otXDj6P3L0/+TcuWYnT5qNjKQ7pn79MhseNuvuNps61ay11WzbNrPnz9MdUp5oPn1qtn272cyZyXvru17nj5n340fy3mvWmH3+nG4cpTEePGg2b57Zs2fpxlHavm9f4/7fv5udPm22ZEkyH33pv4eGxs49zunxY7Pdu82mTfszn7Jovntn1tv7Z27Llpldv262fz/RBNGsJUVz9myznTvN1q41u3Ah+Vq1KgnI+fPpjqMUncFBs+nTzfbsMbt0yezs2SQEHR1J/KKq0bxyJQmK9j11yuzyZbP+frP29iTcinkzilt+pfzpk9nKlUmkNJcobj92LHn95YvZ1q1J/BQxzUf7b96czL2vrzGcmpPGtHGj2a1byecRFUXzzRuzrq5kLppTnNv8+cmYiSaIZg0pmorLpk1JRKIXL8w6O5OVnFZ0ojDpl/3EicZgvH5ttnSp2ZEj6YZRVaL59q3Z8uVj31ticLZsSVaDZeKYFO/ozp1kxbxiRbLijGO9dy/ZVz8XjVErZa2cs+IfB/3s5s104yjtr89Koc7Lz/fnT7NDh4rD/+RJ8keGaIJo1lCMplZ8Wfql37UrCZ2CJ1qhLVhg9vJl8jpSZHTam923SjS1qmtpaQxTlo4xZ04SmTKKrVbIGqvGLBqnXmtVp5WlVpii4ymkHz8mp+c6TS+L8vv3yWm6whfp32tV/vBhuiEjP1+dli9aZHb4cOMfGImfF9EE0ayheHpeFAIFLvuLrdcKbNlXdt8q0dQ+RRGONDadJusaYDOKpAKn0MUYKshaWWqlp+/x+mdceWpcGl88Vc+L49Uq+Nu3ZJvGqxAqiHn5+cYVcPbyQFb+s8XkNPprg7pRmPTLXXT3vCiaun557lxyfS7/pbjFVdv/GU2dbuu6qL5rHjrl1w2geA1T7xNXfjFi441mWejKoplfwUdEE0I0a8gTTV2zbBa5rCrRrHJ6nr8DXiR7g0f/JnsdVmPW62vXkvHEsVc9PW92nTYr/zONWWMvinK89FF2LEweRLOGPNFU3BS5/I2gIlWi+epVsvprdiNox47mN4JEY9Fpd0+P2bp1jTdqND+NY+/expjK8ePNbwTNmGF2+3a6cZQnmnG+ukGmG2VZd++azZpVfixMHkSzhjzR1OM3egxHp8x6LEcrRZ2WnzmTBCJ7Gl0lmqJgKVzaN//IkaKpeFYRT+Xzc9HKUsfW6bvGlKVQK9hFjxzpsSqFM/vHwRNN0Zg0N63O49y0cl29Orl5VXYsTB5Es4Y80RSt+vQweHwIXqHSfx89+ucutVSNpui9169PAqNj6uZN/nh/ozgqTnoPvVcUbwCVzVH7xmcn9d4KqFasN26MXU17oyn37yfH03E1P41FD+0XfbaYfIgmADgQTQBwIJoA4EA0AcCBaAKAA9EEAAeiCQAORBMAHIgmADgQTQBwIJoA4EA0AcCBaAKAA9EEAAeiCQAORBMAHIgmADgQTQBwIJoA4EA0AcCBaAKAA9EEAAeiCQAORBMAHIgmADgQTQBwIJoA4EA0AcCBaAKAA9EEAAeiCQAORBMAHIhmDV29etXa2trs0aNH6ZaJMTAwYIsXL7YPHz6E11+/frUNGzbYgQMHwut/TX6+f6PPwbM//k1Es4aI5sQgmhgPollDRHNiEE2MB9GsIaI5MYgmxoNo1hDRnBhEE+NBNGsoRvPBgwd28eJFW7hwoU2ZMsXmzp1rJ0+etJGRkXTPxK9fv2x4eNi6u7tt6tSp1traatu2bbPnz5+neyQ80Xz69Klt377dZs6cGd5b3/U6f8y8Hz9+hPdes2aNff78Od2ajPHgwYM2b948e/bsWbo12b5v376G/b9//26nT5+2JUuWhPnoS/89NDQ0Zu5xTo8fP7bdu3fbtGnTfs+nLJrv3r2z3t7e33NbtmyZXb9+3fbv3080QTTrSNGcPXu27dy509auXWsXLlwIX6tWrQoBOX/+fLpnEp3BwUGbPn267dmzxy5dumRnz54NIejo6Ajxi6pG88qVKyEo2vfUqVN2+fJl6+/vt/b29hBuxbwZxS2/Uv706ZOtXLkyREpzieL2Y8eOhddfvnyxrVu3hvgpYpqP9t+8eXOYe19fX0M4NSeNaePGjXbr1q3weURF0Xzz5o11dXWFuWhOcW7z588PYyaaIJo1pGgqLps2bQoRiV68eGGdnZ1hJacVnShM+mU/ceJEQzBev35tS5cutSNHjqRbqkXz7du3tnz58jHvLTE4W7ZsCavBMnFMind0586dsGJesWJFWHHGsd67dy/sq5+LxqiVslbOWfGPg3528+bNdGuyvz4rhTovP9+fP3/aoUOHCsP/5MmT8EeGaIJo1lCMplZ8Wfql37VrVwidgidaoS1YsMBevnwZXkeKjE57s/tWiaZWdS0tLQ1hytIx5syZEyJTRrHVCllj1ZhF49Rrreq0stQKU3Q8hfTjx4/h9Fyn6WVRfv/+fThNV/gi/Xutyh8+fJhu+SM/X52WL1q0yA4fPtzwB0bi50U0QTRrKJ6eF4VAgcv+Yuu1Alv2ld23SjS1T1GEI41Np8m6BtiMIqnAKXQxhgqyVpZa6el7vP4ZV54al8YXT9Xz4ni1Cv727VvYpvEqhApiXn6+cQWcvTyQlf9sMTkRzRpSmPTLXXT3vCiaun557ty5cH0u/6W4xVXb/xlNnW7ruqi+ax465dcNoHgNU+8TV34xYuONZlnoyqKZX8FHRBNCNGvIE01ds2wWuawq0axyep6/A14ke4NH/yZ7HVZj1utr166F8cSxVz09b3adNiv/M41ZYy+Kcrz0UXYsTB5Es4Y80VTcFLn8jaAiVaL56tWrsPprdiNox44dTW8Eicai0+6enh5bt26dZW/UaH4ax969extiKsePH296I2jGjBl2+/btdKsvmnG+ukGmG2VZd+/etVmzZpUeC5MH0awhTzT1+I0ew9Epsx7L0UpRp+VnzpwJgcieRleJpihYCpf2zT9ypGgqnlXEU/n8XLSy1LF1+q4xZSnUCnbRI0d6rErhzP5x8ERTNCbNTavzODetXFevXh1uXpUdC5MH0awhTzRFqz49DB4fgleo9N9Hjx79fZdaqkZT9N7r168PgdExdfMmf7y/URwVJ72H3iuKN4DK5qh947OTem8FVCvWGzdujFlNe6Mp9+/fD8fTcTU/jUUP7Rd9tph8iCYAOBBNAHAgmgDgQDQBwIFoAoAD0QQAB6IJAA5EEwAciCYAOBBNAHAgmgDgQDQBwIFoAoAD0QQAB6IJAA5EEwAciCYAOBBNAHAgmgDgQDQBwIFoAoAD0QQAB6IJAA5EEwAciCYAOBBNAHAgmgDgQDQBwIFoAoAD0QQAB6IJAA5EEwAciGYNXb161dra2uzRo0fplokxMDBgixcvtg8fPoTXX79+tQ0bNtiBAwfC639Nfr5/o8/Bsz/+TUSzhojmxCCaGA+iWUNEc2IQTYwH0awhojkxiCbGg2jWENGcGEQT40E0ayhG88GDB3bx4kVbuHChTZkyxebOnWsnT560kZGRdM/Er1+/bHh42Lq7u23q1KnW2tpq27Zts+fPn6d7JDzRfPr0qW3fvt1mzpwZ3lvf9Tp/zLwfP36E916zZo19/vw53ZqM8eDBgzZv3jx79uxZujXZvm/fvob9v3//bqdPn7YlS5aE+ehL/z00NDRm7nFOjx8/tt27d9u0adN+z6csmu/evbPe3t7fc1u2bJldv37d9u/fTzRBNOtI0Zw9e7bt3LnT1q5daxcuXAhfq1atCgE5f/58umcSncHBQZs+fbrt2bPHLl26ZGfPng0h6OjoCPGLqkbzypUrISja99SpU3b58mXr7++39vb2EG7FvBnFLb9S/vTpk61cuTJESnOJ4vZjx46F11++fLGtW7eG+Climo/237x5c5h7X19fQzg1J41p48aNduvWrfB5REXRfPPmjXV1dYW5aE5xbvPnzw9jJpogmjWkaCoumzZtChGJXrx4YZ2dnWElpxWdKEz6ZT9x4kRDMF6/fm1Lly61I0eOpFuqRfPt27e2fPnyMe8tMThbtmwJq8EycUyKd3Tnzp2wYl6xYkVYccax3rt3L+yrn4vGqJWyVs5Z8Y+Dfnbz5s10a7K/PiuFOi8/358/f9qhQ4cKw//kyZPwR4ZogmjWUIymVnxZ+qXftWtXCJ2CJ1qhLViwwF6+fBleR4qMTnuz+1aJplZ1LS0tDWHK0jHmzJkTIlNGsdUKWWPVmEXj1Gut6rSy1ApTdDyF9OPHj+H0XKfpZVF+//59OE1X+CL9e63KHz58mG75Iz9fnZYvWrTIDh8+3PAHRuLnRTRBNGsonp4XhUCBy/5i67UCW/aV3bdKNLVPUYQjjU2nyboG2IwiqcApdDGGCrJWllrp6Xu8/hlXnhqXxhdP1fPieLUK/vbtW9im8SqECmJefr5xBZy9PJCV/2wxORHNGlKY9MtddPe8KJq6fnnu3LlwfS7/pbjFVdv/GU2dbuu6qL5rHjrl1w2geA1T7xNXfjFi441mWejKoplfwUdEE0I0a8gTTV2zbBa5rCrRrHJ6nr8DXiR7g0f/JnsdVmPW62vXroXxxLFXPT1vdp02K/8zjVljL4pyvPRRdixMHkSzhjzRVNwUufyNoCJVovnq1auw+mt2I2jHjh1NbwSJxqLT7p6eHlu3bp1lb9RofhrH3r17G2Iqx48fb3ojaMaMGXb79u10qy+acb66QaYbZVl37961WbNmlR4LkwfRrCFPNPX4jR7D0SmzHsvRSlGn5WfOnAmByJ5GV4mmKFgKl/bNP3KkaCqeVcRT+fxctLLUsXX6rjFlKdQKdtEjR3qsSuHM/nHwRFM0Js1Nq/M4N61cV69eHW5elR0LkwfRrCFPNEWrPj0MHh+CV6j030ePHv19l1qqRlP03uvXrw+B0TF18yZ/vL9RHBUnvYfeK4o3gMrmqH3js5N6bwVUK9YbN26MWU17oyn3798Px9NxNT+NRQ/tF322mHyIJgA4EE0AcCCaAOBANAHAgWgCgAPRBAAHogkADkQTAByIJgA4EE0AcCCaAOBANAHAgWgCgAPRBAAHogkADkQTAByIJgA4EE0AcCCaAOBANAHAgWgCgAPRBAAHogkADkQTAByIJgA4EE0AcCCaAOBANAHAgWgCgAPRBAAHogkADkQTAByIZg1dvWrW1mb26FG6YYIMDJgtXmz24UPy+utXsw0bzA4cSF7/a/Lz/Rt9Dp798W8imjVENCcG0cR4EM0aIpoTg2hiPIhmDRHNiUE0MR5Es4aI5sQgmhgPollDMZoPHphdvGi2cOHo/8jR/5Nz55qdPGk2MpLumPr1y2x42Ky722zqVLPWVrNt28yeP093SHmi+fSp2fbtZjNnJu+t73qdP2bejx/Je69ZY/b5c7pxlMZ48KDZvHlmz56lG0dp+759jft//252+rTZkiXJfPSl/x4aGjv3OKfHj8127zabNu3PfMqi+e6dWW/vn7ktW2Z2/brZ/v1EE0SzlhTN2bPNdu40W7vW7MKF5GvVqiQg58+nO45SdAYHzaZPN9uzx+zSJbOzZ5MQdHQk8YuqRvPKlSQo2vfUKbPLl836+83a25NwK+bNKG75lfKnT2YrVyaR0lyiuP3YseT1ly9mW7cm8VPENB/tv3lzMve+vsZwak4a08aNZrduJZ9HVBTNN2/MurqSuWhOcW7z5ydjJpogmjWkaCoumzYlEYlevDDr7ExWclrRicKkX/YTJxqD8fq12dKlZkeOpBtGVYnm27dmy5ePfW+JwdmyJVkNloljUryjO3eSFfOKFcmKM4713r1kX/1cNEatlLVyzop/HPSzmzfTjaO0vz4rhTovP9+fP80OHSoO/5MnyR8ZogmiWUMxmlrxZemXfteuJHQKnmiFtmCB2cuXyetIkdFpb3bfKtHUqq6lpTFMWTrGnDlJZMootloha6was2iceq1VnVaWWmGKjqeQfvyYnJ7rNL0syu/fJ6fpCl+kf69V+cOH6YaM/Hx1Wr5okdnhw41/YCR+XkQTRLOG4ul5UQgUuOwvtl4rsGVf2X2rRFP7FEU40th0mqxrgM0okgqcQhdjqCBrZamVnr7H659x5alxaXzxVD0vjler4G/fkm0ar0KoIObl5xtXwNnLA1n5zxaT0+ivDepGYdIvd9Hd86Jo6vrluXPJ9bn8l+IWV23/ZzR1uq3rovqueeiUXzeA4jVMvU9c+cWIjTeaZaEri2Z+BR8RTQjRrCFPNHXNslnksqpEs8rpef4OeJHsDR79m+x1WI1Zr69dS8YTx1719LzZddqs/M80Zo29KMrx0kfZsTB5EM0a8kRTcVPk8jeCilSJ5qtXyeqv2Y2gHTua3wgSjUWn3T09ZuvWNd6o0fw0jr17G2Mqx483vxE0Y4bZ7dvpxlGeaMb56gaZbpRl3b1rNmtW+bEweRDNGvJEU4/f6DEcnTLrsRytFHVafuZMEojsaXSVaIqCpXBp3/wjR4qm4llFPJXPz0UrSx1bp+8aU5ZCrWAXPXKkx6oUzuwfB080RWPS3LQ6j3PTynX16uTmVdmxMHkQzRryRFO06tPD4PEheIVK/3306J+71FI1mqL3Xr8+CYyOqZs3+eP9jeKoOOk99F5RvAFUNkftG5+d1HsroFqx3rgxdjXtjabcv58cT8fV/DQWPbRf9Nli8iGaAOBANAHAgWgCgAPRBAAHogkADkQTAByIJgA4EE0AcCCaAOBANAHAgWgCgAPRBAAHogkADkQTAByIJgA4EE0AcCCaAOBANAHAgWgCgAPRBAAHogkADkQTAByIJgA4EE0AcCCaAFCZ2X9VeqOw3lP10AAAAABJRU5ErkJggg==" alt="效果图" /></p>
<h3 id="属性选择器"><a class="anchor" href="#属性选择器">#</a> 属性选择器</h3>
<p>一般是以外面有中括号 <code>[]</code>  为标志，如果属性值中间没有空格，可以忽略双引号</p>
<ul>
<li><code>[attr]</code> : 匹配属性为 attr 的所有元素</li>
<li><code>[attr=val]</code> : 匹配属性为 attr 且属性值为 val 的所有元素</li>
<li><code>[attr~=val]</code> : 匹配属性为 attr 且属性值包含 val (这个属性值在这个属性下<strong>必须</strong>是完整的单词，不能是一部分) 的所有元素</li>
<li><code>[attr|=val]</code> : 匹配属性为 attr 且属性值开头为 val (这个开头是有前提的，必须是<strong>连字符</strong>（ <code>-</code> ）的开头) 的所有元素</li>
<li><code>[attr^=val]</code> : 匹配属性为 attr 且属性值开头为 val (这个只要求开头) 的所有元素</li>
<li><code>[attr*=val]</code> : 匹配属性为 attr 且属性值包含 val (这个只需要包含，没有其他限制) 的所有元素</li>
<li><code>[attr$=val]</code> : 匹配属性为 attr 且属性值以 val 结尾的所有元素</li>
</ul>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token selector">[type]</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token selector">[type="submit"]</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token selector">[class~="test"]</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> orange<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token selector">[class|="test"]</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> purple<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token selector">[class^="h"]</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> blueviolet<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token selector">[class*="d"]</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>  <span class="token selector">[class$="g"]</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="33"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my test<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="34"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="37"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hi world<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="38"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hi<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="39"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>overing<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p><img data-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgMAAACnCAYAAACMyV+GAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAACInSURBVHhe7Zx5kB3Vdcb1T6pSqaJc4Q8qpGxUqYQQiiLEhWViUTYQsKUKhMXIC8a4wIkAE4yCZCUBWwKEkYiNBEYsAgRol7AWI2ODljHaEFrQgiTQvs6+SRrNPprRnPR3u8+b++50v+mH30w/T3+/qlPz+vbpu3RL8319730zRAghhBCSamgGCCGEkJRDM0AIIYSkHJoBQgghJOXQDBBCCCEph2aAEEIISTk0A4QQQkjKoRkghBBCUg7NACGEEJJyaAYIIYSQlEMzQAghhKQcmgFCCCEk5dAMEEIIISmHZoAQQghJOTQDhBBCSMqhGSCEEEJSDs1AQpSVlcmSJUvk17/+NSPBwDPAswiDz6g4ItczIoQUBpqBhMAvuO7ubkYRBJ5FGHxGxRNRz4gQUhhoBhJi0aJFcu7cOUYRBJ5FGHxGxRNRz4gQUhhoBhKCQlM8QTNQ/EEzQEj/QjOQEPjl1tXVxSiCyGUGwvIZAx80A4T0LzQDCbFw4ULp7OxkFEHgWYTBZ1Q8EfWMCCGFgWYgISg0xRM0A8UfNAOE9C80AwmxYMECOXv2bN/R0CDnvvtdOTd+fPj5PKKzpERk6FA5u2uXOe569VXp/vKX5WxlZa/cogyvn+gv+h16HhHk5HO/8CzCiP2MvJj4h4ly0bMXybGTx0LPxw1cj3pQH44LVe9Ahdv/sKhvqpfhM4ebwOewHDeinhEhpDDQDCQEzcBnCJqBog+aAUL+NKEZSAj8cuvo6Og7Tp82ZqDrJz8JP59HnF29OmMGcNz5yitGODsqKnrlFmV4/UR/0e/Q84ggJ5/7lcsMhOWHhYr20fqjoefjBq5XMcVxoeodqHD7HxZ1jXUZM4DPYTlu0AwQ0r/QDCTEZzEDCBniPTKEJeqZCIQwKieOGTA5er0XaBt90PNZESa8QX/det22cGy3E1ZH16RJmfGYfhw+bI5tM4CxYEyZeoJrkjIDUzdOlSGPD8mEK4oqhHbOot2LMufjmAHk29fnEtUo4f3WW9+Sz035nGw4tiFThnrtsr7aQd9QNmLOCHMe1y77dFkvM6Bj0nqQH9anXEEzQEj/4v0GJUkwf/58aW9v7ztOnTJCCKGDCGo5xA6i115ebo47Pv7YiCLKNccIrleGcyZn1aqsYxVorUMFGnmmjqBtO8cNtIcc5OJY+2G3o/Vo3/Az67xXN9rI1GONOdMXK0/vgxmPfV+s6+z70FfgWYQR+xl5MaFkQkYwa8/UmrKFuxaaMvzE8ZG6I0YU4+SgPq0XxyjXYzsf9aA+O8cNtw5tw64HAYOgfYvTjubgOq1D68Y5HK8/ut6YBDsHn3GdfR/6iqhnRAgpDDQDCZGvGcgIZVDuCjvEr5doO9fmNAOO0GqouLvlmfNOnTg+N3KkiYxoB3XgnP25Vz0q/hFjzupjHzlJmAGIHsRPy1xhDMtBQBxVZMOuiTqnoYLrlrvnVdhxfNmLlxkxVpG2647bDn72NWZ7bJqjxoJmgJDigWYgIebNmydtbW19x8mT0vWd70jnuHFZ5bZ4tpWV+SLp5CDOzphhziEHud0XXSTtO3f2OocynDP12XVEtJ+JoG3UhWPk2YEy025EH0LriWrTznHazURf/Q0JPIswYj8jLyB+X5j2BTlcezhThs8oG7VolNQ01MhXXvuKCXy2r13w8QIjquuOrMtcg/pwzq4X55GHfPt6rRvt2OVR51Enjsf8fkymP6j781M/b37GbSfXmHEuV79Qpm2758Ii6hkRQgoDzUBC4Jdba2tr31FfnxE3u7x95UpjBvCztbRUzg0bZo7DAueQg1wIcduOHaaOjpdfzjqHXFOf1U5U+3bgnDkf5KIOhNadOe/lok27D5kIxoDzkW1aObjemBfk2zle2O3FiVxmICw/LH62+mcZYdQyFUYIX/XpaiN+mB4PC9cMoD63XogzcvFT20Bo3WjHLrcD9SAHucjDsW0A7PNx27H7pjl2/+3x63kNuz33XFjQDBDSv3hqQZKgP8xAmDDagdwoM6Diauqzr4thBrQeYwC+9CVTFwKfTVlwDrluHzKRpxmIHHOM/roxkGYgl2AjbDHFsV2v/cZuXxOnblyj16I+/NS2ZmyZYa7XNuO2k2vMOJerXyjDOZoBQooDmoGEmDt3rrS0tPQddXVG3M6OHZtV3rZihTED+IljnEce8u08uxy5EOLW7dvNORXxlhMnTOCz2w5y9Q3cLrcDORD+ztGje/oQ9Lvr61/vaSPIDasvazwRY9Y+mmu1fm3Pyel1bY7Aswgj9jPyQoXxUM2hTBk+owzCF5Xjlus1KIs6p/VprD281oi3XhMW9rVaH8pxjNkBBOpxc+063HbsvmmOXqs5bnuIqlNVxggg8FnLc0XUMyKEFAaagYQotBlQkbXz3Bz8jDQDwbGdr23bOaER5OFau318dsu03O6HCnhG2CPGnGUGvOMwYxHVZq4YKDOgx7YIugLriqlbL44xhT9/53xzrMLqth0W6AeutdvX+lxhjtOO2zeE2389to1FVJu5gmaAkP6FZiAh5syZI83NzX1Hba10fvvbRtzs8tb33jOih5+Z8uPHjViiHAGhbNm2Lesau6z9pZdMPq6zc/R6hNtuVKAu5Nv9Ce1jEJqvgePM+Ygx6/jsXIwFY9J6MDsRem2OwLMII/Yz8uKnq35qRO9g9cFMGT6j7PaFt2fKKk9WGhGEGGrM2zGv1zWoD8dh9SLfvt6uP1fodVo3Ys2hNcaM2GUafbWTa8x2fVqm9WD835j9DfMT90PzckXUMyKEFAbvNyhJgnyEhtG/UQgzwOjfoBkgpH+hGUgI/HJrampiFEHkMgNh+YyBD5oBQvoXmoGEoNAUT9AMFH/QDBDSv9AMJMTs2bOlsbGRUQSBZxEGn1HxRNQzIoQUBpqBhJg1a5acOXOGUQSBZxEGn1HxRNQzIoQUBpqBhKDQFE/QDBR/0AwQ0r/QDCQEfrk1NDQwiiBymYGwfMbAB80AIf0LzUBC4I+ohP3SYwx8RG1O4zMqnuAGQkL6F5qBhDhw4IARG7zxMJILPAM8izD4jIojcj0jQkhhoBkghBBCUg7NACGEEJJyaAYIIYSQlEMzQAghhKQcmgFCCCEk5dAMEEIIISmHZoAQQghJOTQDhBBCSMqhGSCEEEJSDs0AIYQQknJoBgghhJCUQzNACCGEpByaAUIIISTl0AwQQgghKYdmgBBCCEk5NAOEEEJIyqEZIIQQQlIOzQAhhBCScmgGCCGEkJRDM0AIIYSkHJoBQgghJOXQDBBCCCEph2aAEEIISTk0A4QQQkjKoRkghBBCUg7NACGEEJJyaAYIIYSQlEMzkCAffPCBXHHFFbJ///6gpDDMmzdPRowYIfX19ea4tbVV7rvvPpk0aZI5Hmy44+0L3Ic4+cfXHpdnhz4rdXvrgpLCsOP1HfLaVa9JS12LOT7bclaWfm+prP6f1eZ4sOGONxfIQe5gvReEFCs0AwlCM1AYaAaKG5oBQoofmoEEoRkoDDQDxQ3NACHFD81AgtAMFAaageKGZoCQ4odmIEFoBgoDzUBxQzNASPFDM5Agagb27t0rq1evluuvv16GDBkiV111lSxcuFA6OzuDTJ/u7m5Zu3at3HrrrXLeeefJ0KFD5eGHH5bS0tIgwycfM3Ds2DEZO3asXHLJJaZt/MSxW6dLR0eHafuuu+6SxsbGoNTv45NPPinDhw+X48ePB6V++WOPPZaV397eLkuWLJGRI0ea8SDweenSpb3GrmM6cOCAPProo3L++ednxhNlBmpra2XKlCmZsd10002yadMmeeKJJ/IyA7Wf1Mqhdw/JK1e+Io8PeVym//10+Xj2x3Ku81yQGdAtcrTkqMy6bpZM+rNJ8vRfPi2/Hf1baTjeECT4xDYDXn2V2ytl8bcXm7rQ9nN/85y8P+F9aa1vDZLCOX30tLxw6Quy+bnNQYlPS22LzPzKTNOvro6uoFSkuaZZXv3Sq1n5Xe1dsmfBHpOP8SDwec/CPb3GrmOq21cn7415T37+5z/PjCfUDARje+v2t0wu4p373pHqXdU0A4QkAM1AgsAMXH755TJ+/Hi5++67ZdWqVSbuuOMOI4wrV64MMn0xnT9/vlxwwQUyYcIEKSkpkeXLlxuBu/rqq42oK3HNwLp164xQInfx4sWyZs0amTVrlgwbNswYEpiUXEC03ZmNhoYGGTVqlBFfjEXR8hkzZpjj5uZmGTNmjBF1iDPGg/wHH3zQjP3pp5/OMgQYE/p0//33y9atW839UMLMQHV1tdxyyy1mLBiTju2aa64xfY5rBqZ9YZr87ke/k7e++ZYc/N1BE/NvnG+EEZ8zeN3Z+cZOeeovnpKVY1fK4RWHZe+SvfLGV9+QFy97UU4dPhUkxjQDXn0wHBBJtLdv2T45svqIrH9qvTzzV8/Im9e8KU2VTUFybyDky3+43NSL+pXyzeUy+bzJMuOfZkhjeY+JQzmMT9WOKnPc0dQhy/99uS/q/73ajAfjffvut83Y10xck2UIMCaYpKV3LpWyD8tM/5UwMwDTBIOjY0P9aOf5v3velNMMEDKw0AwkCMwARPOBBx4w4qiUl5fLddddZ9688QYOILgQsblz52YJYVVVldx4440ybdq0oCSeGaipqZGbb765V9tAhfShhx4yb+9RaJ9gSpRt27aZGY7bbrvNzBBoX3ft2mVycR6gj5jZwEyHjZoenNuyZUtQ6ufjXsGAuLjj7erqksmTJ4camkOHDhnzFNcM4G38Nz/4jRFH5UzpGZnxxRlZb9dYSoCY7pi5I0sIGysa5fWrXzcirsQxA1qfK7oAMxUQ3vU/9+q02nJBO5gdwCyBgn7MHTHXlGN8CmYE5nx9jrSdbjPHuBaiDNHOwmsPpgfnSjf2zB4hH/cKswYu7nibqprkza+92eu+om5cD7NBM0DIwEIzkCBqBvCGbgMxe+SRR4yAQ8gB3qivvfZaqaioMMcKxBPT73ZuHDOAt/ALL7wwS3BtUMeVV15pxDMKmAjMaKCv6DNAP3GMt3DMBGBGAKA+GIRTp06ZZQIsF0SZjbq6OrNcAEFXcD1mUfbt2xeU9OCOF8sDN9xwg0ydOjXLOAG9X/mYAVcQIc7v/vjdrLduiKn7tm3wml/1k1VZuXHMAOqD4NszChm8OkseKTEmo/Vk9HIBptyn/vXUzAxGR2OHLLxloXzy1iemPTUo2r6aC83DzAJmGFx0qeH9n70flPhjwiwKjIqLO17cT8xO2GZC0eUKmgFCBhaagQTRZYIwgYNw24KFYxiHqLBz45gB5ISZCwV9w3Q91thzAfGHcEPAVeRhNDATgDdz/NT9BTpTgH6hf7pk4KL9xaxFW5v/por+QuAh9C7ueHXGwl6msHHvbRS6TBAmcBArW+BwDOMQFXZuHDOAzxBkCHMYqONXf/srqT8QPQYVdRgHiDyWALBsAcMCs6H1Y+YASxk6U4B+oX/2/gEb7S/e7Dvb/KUc9AciDjF3cceL41Dj5KFt0wwQMrDQDCQIBBeiFfZtgjAzgP0BK1asMOvfbkC09S17IM0Apv2x7wA/MQ4sPWDjoO4RQDv6pq7i/FnNQJSAR5kBd8ZFyccMRH2bIMwMQGgPvHPArO27cWLDicxb9kCZAYC3f53+xzW6tIE9Ai/8wwtmbHhTt8X5s5oBe0w27jkcRxkHbZtmgJCBhWYgQfIxA9gTkEu8beKYgTjLBO43AsKwNwbiGnufA/qM440bN5r+aN/jLhPk2gdh455Dn9H3MLOhSzBRddnkYwYgulFvuy6uOIaZgTjLBPYafxS6MRBmBG18uvhTU47rcD2O0Xcse+jehLjLBLrMAPIxA2jzlxf8MrNZ0Qb3D/eRZoCQgYVmIEHyMQMQbYi3u4EwjDhmoLKy0ryt59pAOG7cuJwbCAH6gun/e+65R0aPHi32Bj+MD/2YOHFilkkAM2fOzLmB8OKLL5aPPvooKM3PDOh4sbESGyxttm/fLpdeemlkXTb5mAGsf2Md3N1AGEYcM6Dr/bk2EG6YsqHPtlS4S/63RGb/y+wecxEYirfveVsW3LQgYxKUrS9uzbmBEGJetqksKMzPDOjmSLRvj637XLdsenaTWVahGSBkYKEZSJB8zAC+Zoev22HqHl+/w5s9lgeWLVtmhM+ezo9jBgCEGIKMXPerhTADMAVx0CUFdyyYCUDdWEZAn2xgQGBEwr5aiK9PwhDYpicfMwDQJ4wNsyk6Nsw03HnnnWbTY1RdNvmYAYgahBs74fH1O2zaw/LAJ4v8zXp4M1fimAEVXdQX9tXCXjvxowhEHwKLNtCWgj6iLl0usEHdaCPsq4X4+iT6ZhuRfMwA7tXaJ9aaPi37/jJTr9aNrzO+dPlLNAOEDDA0AwmSjxkAeEvHH+nRP04EAcbn6dOnZ3btg7hmAKDte++91wgn6sSmP7e+voDoQ3TRBtpSdONg1BiRq9/9R9swBphh2Lx5c6/Zj3zNANi9e7epD/VifOgL/phS2L0NIx8zAPSP9OgfJ4KQ4/PGX2zMms6PZQaAdwtOrD9hzABEGXWivp1v7pTO1uw/ypQLCC2uRbs2+oeJXJOgoI1tr2yTl//xZXM9+oA/ElT6QWmWEQD5mAEAQ4CvEdp/yAmzAvjaJnJpBggZWGgGCCGEkJRDM0AIIYSkHJoBQgghJOXQDBBCCCEph2aAEEIISTk0A4QQQkjKoRkghBBCUg7NACGEEJJyaAYIIYSQlEMzQAghhKQcmgFCCCEk5dAMEEIIISmHZoAQQghJOTQDhBBCSMqhGSCEEEJSDs0AIYQQknJoBgghhJCUQzNACCGEpByaAUIIISTl0AwQQgghKYdmgBBCCEk5NAOEEEJIyqEZIIQQQlIOzQAhhBCScmgGCCGEkJRDM0AIIYSkHJoBQgghJOXQDBBCCCEph2aAEEIISTk0A4QQQkjKoRkghBBCUg7NACGEEJJyaAYS5IMPRK64QmT//qCgQMybJzJihEh9vX/c2ipy330ikyb5x4MNd7x9gfsQJ//oB20y/epyqdl/NigpDNvmNsrMmyqluf6cOT7b2i1L7q+VlU+cMseDDXe8uUAOcmPdi4+9/zgbtotUx3zwcTjdKPLhxyJb9wQFHmFlg4V8x4Z7jXs+GO9FyqEZSBCagcJAM1Dc0AwUMTQDJIBmIEFoBgoDzUBxQzNQxNAMkACagQShGSgMNAPFDc1AEUMzQAJoBhKEZqAw0AwUNzQDRQzNAAmgGUgQNQN794qsXi1y/fXeA/GeyFVXiSxcKNLZGSQGdHeLrF0rcuutIuedJzJ0qMjDD4uUlgYJAfmYgWPHRMaOFbnkEr9t/MSxW6dLR4ff9l13iTR6v08U9PHJJ0WGDxc5fjwo9ED5Y49l57e3iyxZIjJypD8eBD4vXdp77DqmAwdEHn1U5Pzze8YTZQZqa0WmTOkZ2003iWzaJPLEE/mZgeq9Z+XAqlZ5dWSl/OKyUnnx2grZsaBJzjl9FG+Mh9e0yqzbq+SXl5fKtCvLZPnDdXK6NDsxthnw6qvY2SFv/UetqQttv/DVcimZfEpa+hDWU8c75eXrK+TDl88EJT7Ndefk9X+rNP3q8p6h0lzbJa/9a2VWfmd7t+xa3GzyMR4EPu9a0txr7DqmWs84vfvoSXnmitLMeELNQDC2RT+sMbmI346rl6o9HfmbgfIakV3eP4z127z/IB/5ZXuPiHQ59wjH+456//F2+HmIzbtEyqqDBI98zADqO+z9R8E5rW+d14ePPunboJRW+f3dsS8oCKiq8/uPfjU2B4UeWm7nn/HO7z7ol2v7+IyylrYgKUDv1bEKkS27/VyMp8+x7eypG306UubXQzMw6KAZSBCYgcsvFxk/XuTuu0VWrfLjjjt8YVy5Mkj0gJjOny9ywQUiEyaIlJSILF/uC9zVV/uirsQ1A+vW+UKJ3MWLRdasEZk1S2TYMN+QwKTkAqLtzmw0NIiMGuWLL8aiaPmMGf5xs/d7bMwYX9QhzhgP8h980B/7009nGwKMCX26/37v99BW/34oYWag2vv9fsst/lgwJh3bNdf4fY5rBp4fXi7vjK+XRffUyP6VrSbmf7/aCOP+FS1BpofXn+3zmoyovTfhpBwsaZVP3m6WN26tMqJ88mjPYGKZAa8+GA7Uh/Y+fafFGI21007Lc1eVyaxvVkljVVeQ3BsI+W/G1Jl6Ub9S+lG7TP1iqbwyokLOVPRcj3IYn8pdvkPoaOqWt/+rzhf1x0+Z8WDsyx6sM2P/w5TTWYYAY4JJWvKjWjmxxXN51vMJMwMYCwyOjg31o50Xv1ZuymObgfWeMG3yRGqzJ3AwAHsO+WIFUYaYKRA3GAaI2hZPyDK5njGAKJ+o9PPimgG7vo2eYH7i1QWjse1Tr22vDIajwnOjUUDI0W/Ui/qVgyf8OjEumBwF5faYTnr/oXA9ctEvjOdTL7QMhsQ2BOZeedejvYOeS0f/QZQZwFjssaF+5KjhcvPJnzw0AwkCMwDRfOABXxyV8nKR667z37zxBg4guBCxuXOzhbDKe8G48UaRadOCAo84ZqDG+z1z88292wYqpA895L+9R6F9gilRtnm/KzDDcdtt/gyB9nWX9zsKuTgP0EfMbGCmw0ZND85t2RIUeiAf9woGxMUdb5encZMnhxuaQ97vNZinuGYAb+NL/7POiKPSUN5lZgnst2ssJUBMt83xfrlazweC/cYtVUbElThmQOtzRRdgpgLCu+YZr06rLRe0AyOCWQIF/Zj73WpTfnRDj1hgRmDOd6qlrcHvE66FKEO0s/Dag+nBOSP6AcjHvcKsgYs73qbqLnnTMzPufUXduB5mI7YZCBM+CCaEE8KsHPP+U6EM16gQAgg2DIHmxjUDWp/bNjjqnYNook67LRcVaMwSKLgGRgLl+y2HjxkBlNcG90XHDtG2sU0KRF/RfMwa2ISNrdK7J2hrk1cO06GgblxPMzAooRlIEDUDeEO3gZg98ogv4BBygDfqa6/1fndV+McKxBPT73ZuHDOAt/ALL8wWXBvUceWVvnhGAROBGQ30FX0G6CeO8RaOmQDMCADUB4NwyvtdhmUCLBdEmY26On+5AIKu4HrMouxzZlWBO14sD9xwg8jUqf79sdH7lY8ZOLw2+5c9xPn3j5zMeuuGmLpv2wbv9IrHsnPjmAHUB8E/ecRxAsCrZtWTp4zJaDkZLTaYcv/VP5eZN3rQ3tgtC35QI7uXNZv21KBo+2ouNA8zC5hhcNGlhpKnevqLMWEWpWZf7/0V7nhxPzE7YZsJpTlYrohtBiDIEF+bem8ceKO1BQti6r5tAwgc8iCIEMa4ZsDU57WtMwo2WidMRs3JoDAETLmj/3ijB9rvPZ7goj3XoKi50DzMAmCGwUWXFGBUlKh7FTY2nRWwzYSiddv5ZFBAM5AgukwQJnAQbluwcAzjEBV2bhwzgJwwc6Ggb5iuxxp7LiD+EG4IuIo8jAZmAvBmjp+6v0BnCtAv9E+XDFy0v5i1aAt0GP2FwEPoXdzx6oyFvUxh497bKHSZIEzgIFa2wOEYxiEq7Nw4ZgCfIcgQ5jBQxwtfK5e6Q9GbG1XUYRwg8lgCwLIFDAvMhtav+wt0pgD9Qv/s/QM22l+82dsGByLe7Im5izteHIcaJw9tO7YZgDBBoGxU4BD4DCBeELioQD1Y5w8Tx7AyfIYgQ5jDUPE9HvEfDNimBSKPGQ0YCBgWmA2tX/cX6EyBbuKz9w/YaH/xZt/Q5Jf1da/ssSE3zDgBbiActHgyQpICggvRCvs2QZgZwP6AFSv89W83INr6lj2QZgDT/th3gJ8YB5YesHFQ9wigHX1TV3H+rGYgSsCjzIA746LkYwaivk0QZgYgtPve89f23Ti+qT3zlj1QZgDg7V+n/3GNLm1gj8BL11WYseFN3Rbnz2oG7DHZuOdwHGUctO28zIC7WU8FDoHPAOIFof30sP/m68YB7x8t3rLDxDGsDJ//WDMAdFkA0/+4RjcOYo8ADACWI9A/W5z/GDMQda/ssWmuaxwAzcCghWYgQfIxA9gTkEu8beKYgTjLBO43AsKwNwbiGnufA/qM440b/f5o3+MuE+TaB2HjnkOf0fcws6FLMFF12eRjBiC6UW+7Lq44hpmBOMsE9hp/FLoxEGYEbex5259WxnW4HsfoO5Y9dG9C3GUCXWYA+ZgBtPnssLLMZkUb3D/cx4KbAYhu1NuuTZg4hpXFWSaw1/ij0I2BMCNoA5saAa7D9ThG3/ENgNbAGcddJtBlBpCPGUCb2ARpb8BUcP9wH2kGBh00AwmSjxmAaEO83Q2EYcQxA5Xe7zC8refaQDhuXLhY26AvmP6/5x6R0aOzN/hhfOjHxInZJgHMnJl7A+HFF4t85P0+UvIxAzpebKzEBkub7d7vsUsvja7LJh8zgPVvrIO7GwjDiGMGdL0/1wbCdc96TqyPtlS4V006JbNHVfWYC+86GIplP66T+d+vyZgEZfPMMzk3EELMS7f2/OPIxwzo5ki0b4+t2zu90TNBWFYpuBnA+jeWA3ANxDqKuGZA1/tzbSDc7olxrraAvQYP8VdzoYYCgg/hV5Og7PTMCMaDWQMbXIcNhBBzGA0lHzOgmyNRZo+t3fsPvGOv366dTwYFNAMJko8ZwNfs8HU7TN3j63d4s8fywLJlvvDZ0/lxzACAEEOQket+tRBmAKYgDrqk4I4FMwGoG8sI6JMNDAiMSNhXC/H1SRgC2/TkYwYA+oSxYTZFx4aZhjvv9Dc9RtVlk48ZgKhBuLETHl+/w6Y9COnupf5mveMf9vxSjWMGVHRRX9hXC3vtxI8iEH0ILNrQaX2APqIuXS6wQd1oI+yrhShD32wjko8ZwL16//9Omz4tfaDW1Kt14+uMM27oh5kBiBqEG0IGgcWmPQipbtY7EKzHxzUDKrqoD2LtfrXQ3YkfhYo+6rH7C9BH1KXLBTbmq4Vevgqz+9VC9M02IvmYAcxAZO6Vdw71at0IzgwMSmgGEiQfMwDwlo4/0qN/nAgCjM/Tp/fs2gdxzQBA2/fe6wsn6sSmP7e+voDoQ3TRBtpSdONg1BiRq9/9R9swBphh2Lw52wiAfM0A2L3brw/1YnzoC/6YUti9DSMfMwD0j/ToHyeCkOPzhucbsqbzY5kB4N2DYxvbjBmAAKNO1Ld9flOWqPcFhBbXol0b3TjomgQFZVtnNcor36gw16MP+CNBJzZ7/xCd9HzMAIAhwNcI7T/ktPGlM9JQ1mVyC24GQNQf6cEbvE7nh4ljWBmA2MJEwAzY9UGI7Xb7AkKLazEeG9046I5DQRmugThr+/gjQVhysI0AyMcMAJgn+16hH5gVwB9oQhnNwKCDZoAQQghJOTQDhBBCSMqhGSCEEEJSDs0AIYQQknJoBgghhJCUQzNACCGEpByaAUIIISTl0AwQQgghKYdmgBBCCEk5NAOEEEJIyqEZIIQQQlIOzQAhhBCScmgGCCGEkJRDM0AIIYSkHJoBQgghJOXQDBBCCCEph2aAEEIISTk0A4QQQkjKoRkghBBCUg7NACGEEJJyaAYIIYSQlEMzQAghhKQcmgFCCCEk5dAMEEIIISmHZoAQQghJOTQDhBBCSMqhGSCEEEJSDs0AIYQQknJoBgghhJCUQzNACCGEpByaAUIIISTl0AwQQgghKYdmgBBCCEk5NAOEEEJIqhH5f59LyqFnPfWXAAAAAElFTkSuQmCC" alt="效果图" /></p>
<h3 id="伪类选择器"><a class="anchor" href="#伪类选择器">#</a> 伪类选择器</h3>
<p>放到<span class="exturl" data-url="aHR0cHM6Ly96amd5Yi5naXRodWIuaW8vdmlld3MvY3NzLzIwMjAvY3NzX3NlbGVjdG9yLmh0bWwjQ1NTLSVFNCVCQyVBQSVFNyVCMSVCQg==">伪类</span>讲</p>
<h3 id="伪元素"><a class="anchor" href="#伪元素">#</a> 伪元素</h3>
<p>放到<span class="exturl" data-url="aHR0cHM6Ly96amd5Yi5naXRodWIuaW8vdmlld3MvY3NzLzIwMjAvY3NzX3NlbGVjdG9yLmh0bWwjQ1NTLSVFNCVCQyVBQSVFNSU4NSU4MyVFNyVCNCVBMA==">伪元素</span>讲</p>
<h2 id="css-伪类"><a class="anchor" href="#css-伪类">#</a> CSS 伪类</h2>
<p>首先，先说明伪类与伪元素的区别，这里借腾讯全端 AlloyTeam 中的<span class="exturl" data-url="aHR0cDovL3d3dy5hbGxveXRlYW0uY29tLzIwMTYvMDUvc3VtbWFyeS1vZi1wc2V1ZG8tY2xhc3Nlcy1hbmQtcHNldWRvLWVsZW1lbnRzLw==">一篇文章 (opens new window)</span> 进行说明。</p>
<blockquote>
<p>伪类用于当已有元素处于某个状态时，为其添加对应的样式，这个状态是根据用户的行为而动态变化的。伪元素用于创建一些不在文档中的元素，并为其添加样式。</p>
</blockquote>
<p>总的来说，伪类是依靠现有元素，伪元素是依靠自己新创建的元素。</p>
<p>在 CSS3 之前无论伪类还是伪元素都是使用单冒号 <code>:</code>  来使用，但是 CSS3 为了区分两者的区别，规定使用双冒号 <code>::</code>  来表示伪元素，单冒号 <code>:</code>  表示伪类</p>
<h3 id="伪类具体用法"><a class="anchor" href="#伪类具体用法">#</a> 伪类具体用法</h3>
<p>一图胜千言，来自腾讯全端 AlloyTeam 中的文章</p>
<p><img data-src="../images/css%E9%80%89%E6%8B%A9%E5%99%A8/pseudo-classes.30b160e3.png" alt="效果图" /></p>
<h4 id="语言相关"><a class="anchor" href="#语言相关">#</a> 语言相关</h4>
<ul>
<li><code>:dir</code>  (实验阶段): 指定元素的阅读方向，并且元素需要设置 dir 属性时才会生效</li>
<li><code>:lang</code> : 基于语言匹配页面元素</li>
</ul>
<h4 id="表单相关"><a class="anchor" href="#表单相关">#</a> 表单相关</h4>
<ul>
<li><code>:checked</code> : 匹配选中状态的 radio ( <code>)、checkbox(</code> ) 和 select 元素中的 option</li>
<li><code>:default</code> : 匹配默认选中的元素，该选择器在 <code>button</code> 、 <code>、</code> 和 `` 上使用</li>
<li><code>:empty</code> : 代表没有子元素的元素，子元素可以是元素节点或文本 (空格)，因此中间是空格也不能匹配</li>
<li><code>:disabled</code> : 匹配任何被禁用的元素，一般表现于表单加上 <code>disabled</code>  属性</li>
<li><code>:enabled</code> : 表示任何激活状态的元素，一般匹配那些没有加 <code>disabled</code>  属性的表单元素</li>
<li><code>:in-range</code> : 匹配有 min 和 max 属性限定取值范围的且在取值在限定范围之内的表单元素</li>
<li><code>:out-of-range</code> : 匹配有 min 和 max 属性限定取值范围的且在取值在限定范围之外的表单元素</li>
<li><code>:indeterminate</code> : 表示状态不确定的表单元素，有三种：一是 <code>元素，其`indeterminate`属性被JS设置成true；二是</code> 元素，表单中拥有相同的 <code>name</code>  值的所有单选按钮都未被选中时，三是处于不确定状态的 `` 元素</li>
<li><code>:valid</code> : 匹配条件正确的表单元素，例如 <code>email</code>  设置的规则</li>
<li><code>:invalid</code> : 匹配条件错误的表单元素</li>
<li><code>:optional</code> : 匹配没有设置 <code>required</code>  属性的表单元素</li>
<li><code>:required</code> : 匹配设置了 <code>required</code>  属性的表单元素</li>
<li><code>:read-only</code> : 匹配设置了 <code>readonly</code>  属性的表单元素，定义元素只读</li>
<li><code>:read-write</code> : 匹配处于编辑状态的元素， <code>input</code> 、 <code>textarea</code>  和设置了 <code>contenteditable</code>  的 HTMl 元素获得焦点时匹配</li>
<li><code>:scope</code>  (实验阶段): 处于 style 作用域下的元素</li>
</ul>
<h4 id="状态相关"><a class="anchor" href="#状态相关">#</a> 状态相关</h4>
<p>一般状态想关伪类的顺序是 <code>:link</code> - <code>:visited</code> - <code>:hover</code> - <code>:active</code></p>
<ul>
<li><code>:link</code> : 选中所有未访问过的链接</li>
<li><code>:visited</code> : 选中所有访问过的链接</li>
<li><code>:hover</code> : 表示用户鼠标悬停在某元素的时候</li>
<li><code>:active</code> : 它代表用户按下按键和松开按键之间的时间，因该伪类易被其他伪类覆盖，因此在声明的时候把 <code>:active</code>  放到最后</li>
<li><code>:focus</code> : 表示获得焦点的元素 (如表单输入时改变颜色或者状态等)</li>
<li><code>:focus-within</code> : 匹配该元素或者该元素后代获得焦点的时候</li>
</ul>
<h4 id="结构化"><a class="anchor" href="#结构化">#</a> 结构化</h4>
<ul>
<li><code>:not</code> : 用来匹配不符合一组选择器的元素，例如 <code>:not(:first-child)</code> 、 <code>:not(.list)</code></li>
<li><code>:first-child</code> : 匹配元素的第一个子元素</li>
<li><code>:last-child</code> : 匹配元素的最后一个子元素</li>
<li><code>:first-of-type</code> : 匹配元素后代元素中的第一个出现的后代元素，看下面的例子</li>
<li><code>:last-of-type</code> : 匹配元素后代元素中最后一个出现的后代元素</li>
<li><code>:nth-child</code> : 根据元素的位置匹配一个或者多个元素，接收 <code>an+b</code>  形式的参数</li>
<li><code>:nth-last-child</code> : 语法与 <code>:nth-child</code> ，但是 <code>:nth-child</code>  是从前往后计，而 <code>:nth-last-child</code>  是从后往前计</li>
<li><code>:nth-of-type</code> : 匹配特定的文本，用法与 <code>:nth-child</code>  相同</li>
<li><code>:nth-last-of-type</code> : 从后往前匹配特定的文本</li>
<li><code>:only-child</code> : 匹配没有任何兄弟节点的节点，等同于 <code>:first-child:last-child</code>  或者 <code>:nth-child(1):nth-last-child(1)</code></li>
<li><code>:only-of-type</code> : 匹配没有相同兄弟类型节点的节点</li>
<li><code>:target</code> : 在 id 与页面 url 中 <code>#</code> 后面元素相匹配时发生作用，例如 url 为了 <code>https://www.example.com/index#section</code> ，那么使用 id 为 <code>section</code>  同时使用 <code>:target</code>  能够匹配到该 url 时的状态</li>
</ul>
<ol>
<li><code>:first-of-type</code>  &amp;  <code>:last-of-type</code></li>
</ol>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">/* 注意 ul 与伪类间的空格 */</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token selector">ul :first-of-type</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> orange<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>这里的文本是橙色的<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>一些文本 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>这里的文本是橙色的<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>一些文本<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">/* 注意 ul 与伪类间的空格 */</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token selector">ul :last-of-type</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>一些文本<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>一些文本 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>这里的文本是红色的<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>这里的文本是红色的<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><ol>
<li><code>:nth-child</code></li>
</ol>
<p>举例说明匹配的规则</p>
<ul>
<li><code>:nth-child(1)</code> : 匹配第一个子元素，主要从 1 开始而不是 0</li>
<li><code>:nth-child(n)</code> : 匹配每一个元素</li>
<li><code>:nth-child(2n)</code> : 匹配位置为 2、4、6... 等子元素，可以用 <code>even</code>  替换</li>
<li><code>:nth-child(2n+1)</code> : 匹配位置为 1、3、5... 等子元素，可以用 <code>odd</code>  替换</li>
<li><code>:nth-child(3n+4)</code> : 匹配位置为 4、7、10... 等子元素</li>
</ul>
<ol>
<li><code>:nth-of-type</code></li>
</ol>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token selector">p:nth-of-type(2n+1)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>123<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>这里的文本是红色的<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>123<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>123<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>这里的文本是红色的<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h4 id="打印相关"><a class="anchor" href="#打印相关">#</a> 打印相关</h4>
<ul>
<li><code>:left</code> : 表示打印文档的左侧页设置 CSS 样式，配合 @使用例如: <code>@page :left &#123;&#125;</code></li>
<li><code>:right</code> : 表示文档的右侧页设置 CSS 样式</li>
</ul>
<h4 id="其他"><a class="anchor" href="#其他">#</a> 其他</h4>
<ul>
<li><code>:root</code> : 匹配文档的根元素，对于 HTML 来说，与 <code>html</code>  标签选择器相同</li>
<li><code>:fullscreen</code>  (实验阶段): 匹配全屏模式下的元素</li>
</ul>
<h2 id="css-伪元素"><a class="anchor" href="#css-伪元素">#</a> CSS 伪元素</h2>
<p>一图胜千言，来自腾讯全端 AlloyTeam 中的文章</p>
<p><img data-src="../images/css%E9%80%89%E6%8B%A9%E5%99%A8/pseudo-element.e44eab84-1649477150848.png" alt="效果图" /></p>
<p>伪元素相对于伪类来说少很多</p>
<h3 id="单双冒号都可"><a class="anchor" href="#单双冒号都可">#</a> 单双冒号都可</h3>
<ul>
<li><code>::before</code> : 创建一个伪元素，其将成为匹配选中的第一个子元素，常用 content 属性为一个元素添加修饰性的内容，默认生成行内元素</li>
<li><code>:after</code> : 创建一个伪元素，作为匹配选中的最后一个子元素，配合 content 属性使用</li>
<li><code>:first-letter</code> : 选中<strong>块级元素</strong>第一行的第一个字母，并且文字所在行之前没有其他内容 (图片或者内联的表格)</li>
<li><code>:first-line</code> : 匹配<strong>块级元素</strong>中第一行文本，display 为 block、inline-block、table-cell、table-caption 有用</li>
</ul>
<h3 id="仅双冒号"><a class="anchor" href="#仅双冒号">#</a> 仅双冒号</h3>
<ul>
<li><code>::selection</code> : 应用文档中被用户高亮的部分，例如鼠标选中的文字</li>
<li><code>::cue</code> : 用于匹配所选元素中的 WebVTT 提示，就是匹配视频、音频中的字母文件</li>
<li><code>::placeholder</code> : 匹配表单中设置 placeholder 元素中的文字部分</li>
<li><code>::backdrop</code> : 改变全屏模式下的背景颜色</li>
</ul>
<h2 id="参考文章"><a class="anchor" href="#参考文章">#</a> 参考文章</h2>
<ul>
<li><span class="exturl" data-url="aHR0cDovL3d3dy5ydWFueWlmZW5nLmNvbS9ibG9nLzIwMDkvMDMvY3NzX3NlbGVjdG9ycy5odG1s">阮一峰的网络日志 (opens new window)</span></li>
<li><span class="exturl" data-url="aHR0cDovL3d3dy5hbGxveXRlYW0uY29tLzIwMTYvMDUvc3VtbWFyeS1vZi1wc2V1ZG8tY2xhc3Nlcy1hbmQtcHNldWRvLWVsZW1lbnRzLw==">腾讯 AlloyTeam</span></li>
</ul>
]]></content>
      <categories>
        <category>css</category>
      </categories>
  </entry>
</search>
